import{_ as $e}from"./index-6aa92ec0.js";import{_ as Me}from"./index-9a100d82.js";import{_ as Le}from"./index-a0a5d690.js";import{d as me,u as Ne,a as Oe,bZ as qe,y as ze,r as f,B as pe,aa as Q,a1 as U,e as _,a2 as De,o as d,f as S,g as t,w as e,l as u,i as a,j as R,L as s,h as m,t as O,O as b,m as Z,ab as Ke,Q as H,U as J,V as W,k as X,v as q,E as B,_ as Te,S as je,p as Ge,n as Fe,q as Pe,x as re}from"./index-17000ae8.js";import{S as Qe}from"./sortable.esm-be94e56d.js";const h=A=>(Ge("data-v-4b146ae4"),A=A(),Fe(),A),Ze={class:"absolute-container"},He={class:"page-main"},Je=h(()=>m("span",{class:"label-tip"},"即 name ，系统唯一",-1)),We={class:"label-tip"},Xe={style:{display:"flex"}},Ye=h(()=>m("span",{class:"label-tip"},"请勿在带有参数的路由地址上开启该设置",-1)),el={class:"label-tip"},ll={class:"label-tip"},tl=h(()=>m("span",{class:"label-tip"},"当缓存规则为“始终缓存”时生效",-1)),al=h(()=>m("span",{class:"label-tip"},"如果子路由不在导航显示，则需要设置高亮的上级路由地址",-1)),nl=h(()=>m("span",{class:"label-tip"},"不宜设置太长，建议控制在4个字符内",-1)),ol=h(()=>m("span",{class:"label-tip"},"请设置 http/https 开头的完整外链地址",-1)),ul=h(()=>m("span",{class:"label-tip"},"请勿与外链同时设置，同时设置时，本设置会失效",-1)),dl=h(()=>m("span",{class:"label-tip"},"请设置有效的长度单位，例如：px/em/rem等",-1)),sl=h(()=>m("p",null,"设置导航所具备的所有权限，权限池内的权限会用于角色管理",-1)),il=h(()=>m("p",{style:{"margin-bottom":"0"}}," 通常只在最子级导航上进行设置 ",-1)),pl={class:"index"},rl=me({name:"PagesExampleMenuDetail"}),ce=me({...rl,setup(A){const z=Ne(),fe=Oe(),_e=qe(),Y=ze(),D=f(!1),I=f(),l=f({id:z.params.id??"",parentId:z.query.parentId??"",path:"",redirect:"",name:"",component:"",meta:{title:"",icon:"",activeIcon:"",defaultOpened:!1,permanent:!1,auth:[],sidebar:!0,breadcrumb:!0,activeMenu:"",cache:[],noCache:[],badge:"",link:"",iframe:"",copyright:!1,paddingBottom:"0px"},auths:[]}),be=f({path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入显示名称",trigger:"blur"}]});pe(()=>{l.value.id!==""&&ve()});function ve(){D.value=!0,Q.get("pages_example/menu/detail",{baseURL:"/mock/",params:{id:l.value.id}}).then(i=>{D.value=!1,l.value.id=i.data.id,l.value.parentId=i.data.parentId,l.value.path=i.data.path,l.value.redirect=i.data.redirect,l.value.name=i.data.name,l.value.component=i.data.component,Object.assign(l.value.meta,i.data.meta),l.value.auths=i.data.auths})}const V=f(""),K=f(!1),ee=f();function he(i){l.value.meta.auth.splice(l.value.meta.auth.indexOf(i),1)}function ge(){K.value=!0,U(()=>{ee.value.input.focus()})}function le(){V.value&&(l.value.meta.auth.includes(V.value)?B.warning("标识已存在"):l.value.meta.auth.push(V.value)),K.value=!1,V.value=""}const x=f(""),T=f(!1),te=f();function ye(i){typeof l.value.meta.cache=="object"&&l.value.meta.cache.splice(l.value.meta.cache.indexOf(i),1)}function Ve(){T.value=!0,U(()=>{te.value.input.focus()})}function ae(){x.value&&typeof l.value.meta.cache=="object"&&(l.value.meta.cache.includes(x.value)?B.warning("规则已存在"):l.value.meta.cache.push(x.value)),T.value=!1,x.value=""}const k=f(""),j=f(!1),ne=f();function xe(i){l.value.meta.noCache.splice(l.value.meta.noCache.indexOf(i),1)}function ke(){j.value=!0,U(()=>{ne.value.input.focus()})}function oe(){k.value&&(l.value.meta.noCache.includes(k.value)?B.warning("规则已存在"):l.value.meta.noCache.push(k.value)),j.value=!1,k.value=""}const G=f(),ue=f(0);pe(()=>{de()});function Ce(){l.value.auths.push({name:"",value:""}),U(()=>{G.value.setScrollTop(l.value.auths.length*50)})}function Ie(i){l.value.auths.splice(i,1)}function de(){const i=G.value.$el.querySelector(".el-table__body-wrapper tbody");Qe.create(i,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:o,oldIndex:v})=>{if(o===void 0||v===void 0)return;const g=l.value.auths.splice(v,1)[0];l.value.auths.splice(o,0,g),ue.value+=1,U(()=>de())}})}function we(){l.value.id===""?I.value&&I.value.validate(i=>{i&&Q.post("pages_example/menu/create",l.value,{baseURL:"/mock/"}).then(()=>{B.success({message:"模拟新增成功",center:!0}),E()})}):I.value&&I.value.validate(i=>{i&&Q.post("pages_example/menu/edit",l.value,{baseURL:"/mock/"}).then(()=>{B.success({message:"模拟编辑成功",center:!0}),E()})})}function Ue(){E()}function E(){Y.settings.tabbar.enable&&Y.settings.tabbar.mergeTabsBy!=="activeMenu"?_e.close({name:"pagesExampleGeneralMenuList"}):fe.push({name:"pagesExampleGeneralMenuList"})}return(i,o)=>{const v=Te,g=_("el-icon"),y=_("el-button"),$=je,c=_("el-input"),p=_("el-form-item"),r=_("el-col"),M=_("el-link"),se=_("el-row"),F=_("el-tooltip"),L=_("el-tag"),P=_("el-space"),ie=Le,w=_("el-switch"),N=_("el-table-column"),Se=_("el-table"),Re=Me,Be=_("el-form"),Ae=$e,Ee=De("loading");return d(),S("div",Ze,[t($,{title:a(z).name==="pagesExampleGeneralMenuCreate"?"新增导航":"编辑导航"},{default:e(()=>[t(y,{size:"default",round:"",onClick:E},{icon:e(()=>[t(g,null,{default:e(()=>[t(v,{name:"i-ep:arrow-left"})]),_:1})]),default:e(()=>[u(" 返回 ")]),_:1})]),_:1},8,["title"]),R((d(),S("div",He,[t(Be,{ref_key:"formRef",ref:I,model:a(l),rules:a(be),"label-position":"top"},{default:e(()=>[t(Re,{"right-side-width":"500px","hide-right-side-toggle":""},{rightSide:e(()=>[t($,{title:"权限池"},{content:e(()=>[sl,il]),_:1}),(d(),s(Se,{ref_key:"authsTableRef",ref:G,key:a(ue),data:a(l).auths,border:"",stripe:"","highlight-current-row":""},{default:e(()=>[t(N,{width:"60",align:"center",fixed:""},{header:e(()=>[t(y,{type:"primary",size:"small",plain:"",circle:"",onClick:Ce},{icon:e(()=>[t(g,null,{default:e(()=>[t(v,{name:"i-ep:plus"})]),_:1})]),_:1})]),default:e(n=>[m("span",pl,O(n.$index+1),1),t(y,{type:"danger",size:"small",plain:"",circle:"",class:"delete",onClick:C=>Ie(n.$index)},{icon:e(()=>[t(g,null,{default:e(()=>[t(v,{name:"i-ep:delete"})]),_:1})]),_:2},1032,["onClick"])]),_:1}),t(N,{width:"80",align:"center",fixed:""},{header:e(()=>[u(" 排序 ")]),default:e(()=>[t(L,{type:"info",class:"sortable"},{default:e(()=>[t(g,null,{default:e(()=>[t(v,{name:"i-ep:d-caret"})]),_:1})]),_:1})]),_:1}),t(N,{label:"名称"},{default:e(n=>[t(c,{modelValue:n.row.name,"onUpdate:modelValue":C=>n.row.name=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(N,{label:"标识"},{default:e(n=>[t(c,{modelValue:n.row.value,"onUpdate:modelValue":C=>n.row.value=C},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]))]),default:e(()=>[a(l).parentId?(d(),s($,{key:0,title:"基础配置",content:"标准路由配置，包含 path/redirect/name/component"})):b("",!0),a(l).parentId?(d(),s(se,{key:1,gutter:30,style:{padding:"20px"}},{default:e(()=>[t(r,{xl:12,lg:24},{default:e(()=>[t(p,{label:"路由地址",prop:"path"},{default:e(()=>[t(c,{modelValue:a(l).path,"onUpdate:modelValue":o[0]||(o[0]=n=>a(l).path=n),clearable:"",placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:e(()=>[t(p,{label:"重定向",prop:"redirect"},{default:e(()=>[t(c,{modelValue:a(l).redirect,"onUpdate:modelValue":o[1]||(o[1]=n=>a(l).redirect=n),clearable:"",placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:e(()=>[t(p,{prop:"name"},{label:e(()=>[u(" 路由命名 "),Je]),default:e(()=>[t(c,{modelValue:a(l).name,"onUpdate:modelValue":o[2]||(o[2]=n=>a(l).name=n),clearable:"",placeholder:"请输入路由命名"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:e(()=>[t(p,{prop:"component"},{label:e(()=>[u(" 组件路径 "),m("span",We,[u(" 顶级路由请设置“"),t(M,{type:"primary",underline:!1,onClick:o[3]||(o[3]=Z(n=>a(l).component="Layout",["prevent"]))},{default:e(()=>[u("Layout")]),_:1}),u("”，中间层级路由无需设置 ")])]),default:e(()=>[t(c,{modelValue:a(l).component,"onUpdate:modelValue":o[4]||(o[4]=n=>a(l).component=n),clearable:"",placeholder:"请输入完整组件路径"},Ke({_:2},[a(l).component!=="Layout"?{name:"prepend",fn:e(()=>[u(" /src/views/ ")]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})]),_:1})):b("",!0),t($,{title:"扩展配置"},{content:e(()=>[m("div",Xe,[u(" 框架扩展配置，详细配置介绍请查看"),t(M,{type:"primary",href:"https://hooray.gitee.io/fantastic-admin/guide/router.html#%E5%AF%BC%E8%88%AA%E9%85%8D%E7%BD%AE",target:"_blank"},{default:e(()=>[u(" 框架文档 ")]),_:1})])]),_:1}),t(se,{gutter:30,style:{padding:"20px"}},{default:e(()=>[t(r,{xl:12,lg:24},{default:e(()=>[t(p,{label:"显示名称",prop:"meta.title"},{default:e(()=>[t(c,{modelValue:a(l).meta.title,"onUpdate:modelValue":o[5]||(o[5]=n=>a(l).meta.title=n),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.auth"},{label:e(()=>[u(" 鉴权标识 "),t(F,{content:"当设置多个标识时，只要命中其中一个则鉴权通过",placement:"top"},{default:e(()=>[t(g,null,{default:e(()=>[t(v,{name:"i-ri:question-line"})]),_:1})]),_:1})]),default:e(()=>[t(P,null,{default:e(()=>[(d(!0),S(H,null,J(a(l).meta.auth,n=>(d(),s(L,{key:n,size:"large",closable:"","disable-transitions":!1,onClose:C=>he(n)},{default:e(()=>[u(O(n),1)]),_:2},1032,["onClose"]))),128)),a(K)?(d(),s(c,{key:0,ref_key:"InputAuthRef",ref:ee,modelValue:a(V),"onUpdate:modelValue":o[6]||(o[6]=n=>W(V)?V.value=n:null),style:{width:"200px"},onKeyup:X(le,["enter"]),onBlur:le},null,8,["modelValue","onKeyup"])):(d(),s(y,{key:1,onClick:ge},{default:e(()=>[u(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:e(()=>[t(p,{label:"默认图标",prop:"meta.icon"},{default:e(()=>[t(ie,{modelValue:a(l).meta.icon,"onUpdate:modelValue":o[7]||(o[7]=n=>a(l).meta.icon=n)},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:e(()=>[t(p,{label:"激活图标",prop:"meta.activeIcon"},{default:e(()=>[t(ie,{modelValue:a(l).meta.activeIcon,"onUpdate:modelValue":o[8]||(o[8]=n=>a(l).meta.activeIcon=n)},null,8,["modelValue"])]),_:1})]),_:1}),a(l).parentId?(d(),s(r,{key:0,xl:12,lg:24},{default:e(()=>[t(p,{label:"默认展开",prop:"meta.defaultOpened"},{default:e(()=>[t(w,{modelValue:a(l).meta.defaultOpened,"onUpdate:modelValue":o[9]||(o[9]=n=>a(l).meta.defaultOpened=n),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:1,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.permanent"},{label:e(()=>[u(" 常驻标签页 "),Ye]),default:e(()=>[t(w,{modelValue:a(l).meta.permanent,"onUpdate:modelValue":o[10]||(o[10]=n=>a(l).meta.permanent=n),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:2,xl:12,lg:24},{default:e(()=>[t(p,{label:"在导航显示",prop:"meta.sidebar"},{default:e(()=>[t(w,{modelValue:a(l).meta.sidebar,"onUpdate:modelValue":o[11]||(o[11]=n=>a(l).meta.sidebar=n),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:3,xl:12,lg:24},{default:e(()=>[t(p,{label:"在面包屑显示",prop:"meta.breadcrumb"},{default:e(()=>[t(w,{modelValue:a(l).meta.breadcrumb,"onUpdate:modelValue":o[12]||(o[12]=n=>a(l).meta.breadcrumb=n),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:4,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.cache"},{label:e(()=>[u(" 缓存规则 "),t(F,{content:"当跳转到设置的路由时，则会对当前路由进行缓存",placement:"top"},{default:e(()=>[t(g,null,{default:e(()=>[t(v,{name:"i-ri:question-line"})]),_:1})]),_:1}),R(m("span",el,[u("切换为"),t(M,{type:"primary",underline:!1,onClick:o[13]||(o[13]=Z(n=>a(l).meta.cache=!0,["prevent"]))},{default:e(()=>[u("始终缓存")]),_:1})],512),[[q,typeof a(l).meta.cache=="object"]]),R(m("span",ll,[u("切换为"),t(M,{type:"primary",underline:!1,onClick:o[14]||(o[14]=Z(n=>a(l).meta.cache=[],["prevent"]))},{default:e(()=>[u("规则模式")]),_:1})],512),[[q,typeof a(l).meta.cache=="boolean"]])]),default:e(()=>[R(t(P,null,{default:e(()=>[(d(!0),S(H,null,J(a(l).meta.cache,n=>(d(),s(L,{key:n,size:"large",closable:"","disable-transitions":!1,onClose:C=>ye(n)},{default:e(()=>[u(O(n),1)]),_:2},1032,["onClose"]))),128)),a(T)?(d(),s(c,{key:0,ref_key:"InputCacheRef",ref:te,modelValue:a(x),"onUpdate:modelValue":o[15]||(o[15]=n=>W(x)?x.value=n:null),style:{width:"200px"},onKeyup:X(ae,["enter"]),onBlur:ae},null,8,["modelValue","onKeyup"])):(d(),s(y,{key:1,onClick:Ve},{default:e(()=>[u(" 新增 ")]),_:1}))]),_:1},512),[[q,typeof a(l).meta.cache=="object"]]),R(m("div",null," 始终缓存 ",512),[[q,typeof a(l).meta.cache=="boolean"]])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:5,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.noCache"},{label:e(()=>[u(" 不缓存规则 "),t(F,{content:"当跳转到设置的路由时，则会对当前路由取消缓存",placement:"top"},{default:e(()=>[t(g,null,{default:e(()=>[t(v,{name:"i-ri:question-line"})]),_:1})]),_:1}),tl]),default:e(()=>[t(P,null,{default:e(()=>[(d(!0),S(H,null,J(a(l).meta.noCache,n=>(d(),s(L,{key:n,size:"large",closable:"","disable-transitions":!1,onClose:C=>xe(n)},{default:e(()=>[u(O(n),1)]),_:2},1032,["onClose"]))),128)),a(j)?(d(),s(c,{key:0,ref_key:"InputNoCacheRef",ref:ne,modelValue:a(k),"onUpdate:modelValue":o[16]||(o[16]=n=>W(k)?k.value=n:null),style:{width:"200px"},onKeyup:X(oe,["enter"]),onBlur:oe},null,8,["modelValue","onKeyup"])):(d(),s(y,{key:1,onClick:ke},{default:e(()=>[u(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:6,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.activeMenu"},{label:e(()=>[u(" 高亮导航 "),al]),default:e(()=>[t(c,{modelValue:a(l).meta.activeMenu,"onUpdate:modelValue":o[17]||(o[17]=n=>a(l).meta.activeMenu=n),clearable:"",placeholder:"请输入高亮导航的完整路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:7,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.badge"},{label:e(()=>[u(" 徽标 "),nl]),default:e(()=>[t(c,{modelValue:a(l).meta.badge,"onUpdate:modelValue":o[18]||(o[18]=n=>a(l).meta.badge=n),clearable:"",placeholder:"请输入徽标显示内容"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:8,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.link"},{label:e(()=>[u(" 访问外链 "),ol]),default:e(()=>[t(c,{modelValue:a(l).meta.link,"onUpdate:modelValue":o[19]||(o[19]=n=>a(l).meta.link=n),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:9,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.iframe"},{label:e(()=>[u(" 内嵌网页 "),ul]),default:e(()=>[t(c,{modelValue:a(l).meta.iframe,"onUpdate:modelValue":o[20]||(o[20]=n=>a(l).meta.iframe=n),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:10,xl:12,lg:24},{default:e(()=>[t(p,{label:"底部版权",prop:"meta.copyright"},{default:e(()=>[t(w,{modelValue:a(l).meta.copyright,"onUpdate:modelValue":o[21]||(o[21]=n=>a(l).meta.copyright=n),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0),a(l).parentId?(d(),s(r,{key:11,xl:12,lg:24},{default:e(()=>[t(p,{prop:"meta.paddingBottom"},{label:e(()=>[u(" 底部填充高度 "),dl]),default:e(()=>[t(c,{modelValue:a(l).meta.paddingBottom,"onUpdate:modelValue":o[22]||(o[22]=n=>a(l).meta.paddingBottom=n),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])])),[[Ee,a(D)]]),t(Ae,null,{default:e(()=>[t(y,{type:"primary",size:"large",onClick:we},{default:e(()=>[u(" 提交 ")]),_:1}),t(y,{size:"large",onClick:Ue},{default:e(()=>[u(" 取消 ")]),_:1})]),_:1})])}}});typeof re=="function"&&re(ce);const vl=Pe(ce,[["__scopeId","data-v-4b146ae4"]]);export{vl as default};
