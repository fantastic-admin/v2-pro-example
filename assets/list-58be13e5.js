import{d as w,bZ as W,r as y,B as X,P as M,b5 as Y,aa as z,e as i,a2 as ee,o as p,f as te,g as t,w as a,l as d,i as o,L as _,O as f,k as ae,j as oe,J as ne,b_ as le,E as se,S as ie,_ as re,R as de,q as ue,x}from"./index-17000ae8.js";import{_ as ce}from"./index-bc97356d.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang-37403f99.js";import{u as _e}from"./usePagination-e0d8e4d1.js";import"./index.vue_vue_type_script_setup_true_lang-9166909b.js";const me=w({name:"PagesExampleDepartmentList"}),L=w({...me,setup(fe){const{pagination:c,getParams:D,onSizeChange:P,onCurrentChange:E,onSortChange:$}=_e(),g=W(),V=y(),e=y({loading:!1,tableAutoHeight:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[]});X(()=>{u(),e.value.formMode==="router"&&M.on("get-data-list",()=>{u()})}),Y(()=>{e.value.formMode==="router"&&M.off("get-data-list")});function u(){e.value.loading=!0;const n=D();e.value.search.title&&(n.title=e.value.search.title),z.get("pages_example/department/list",{baseURL:"/mock/",params:n}).then(l=>{e.value.loading=!1,e.value.dataList=l.data.list,c.value.total=l.data.total})}function B(n){P(n).then(()=>u())}function m(n=1){E(n).then(()=>u())}function S({prop:n,order:l}){$(n,l).then(()=>u())}function R(){e.value.formMode==="router"?g.open({name:"pagesExampleGeneralDepartmentCreate"}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function U(n){e.value.formMode==="router"?g.open({name:"pagesExampleGeneralDepartmentEdit",params:{id:n.id}}):(e.value.formModeProps.id=n.id,e.value.formModeProps.visible=!0)}function G(n){le.confirm(`确认删除「${n.title}」吗？`,"确认信息").then(()=>{z.post("pages_example/department/delete",{id:n.id},{baseURL:"/mock/"}).then(()=>{u(),se.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}function J(n){g.open({name:"pagesExampleGeneralJobList",params:{department_id:n.id}})}return(n,l)=>{const N=ie,h=re,v=i("el-icon"),r=i("el-button"),A=i("el-button-group"),H=i("el-space"),I=i("el-input"),C=i("el-form-item"),K=i("el-col"),T=i("el-row"),j=i("el-form"),q=ce,b=i("el-table-column"),O=i("el-table"),Z=i("el-pagination"),F=de,Q=ee("loading");return p(),te("div",{class:ne({"absolute-container":o(e).tableAutoHeight})},[t(N,{title:"部门管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),t(F,null,{default:a(()=>[t(H,{wrap:""},{default:a(()=>[t(r,{type:"primary",size:"default",onClick:R},{icon:a(()=>[t(v,null,{default:a(()=>[t(h,{name:"i-ep:plus"})]),_:1})]),default:a(()=>[d(" 新增部门 ")]),_:1}),o(e).batch.enable?(p(),_(r,{key:0,size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[d(" 单个批量操作按钮 ")]),_:1},8,["disabled"])):f("",!0),o(e).batch.enable?(p(),_(A,{key:1},{default:a(()=>[t(r,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[d(" 批量操作按钮组1 ")]),_:1},8,["disabled"]),t(r,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[d(" 批量操作按钮组2 ")]),_:1},8,["disabled"])]),_:1})):f("",!0)]),_:1}),t(q,null,{default:a(()=>[t(j,{model:o(e).search,size:"default","label-width":"100px","label-suffix":"："},{default:a(()=>[t(T,null,{default:a(()=>[t(K,{span:12},{default:a(()=>[t(C,{label:"部门"},{default:a(()=>[t(I,{modelValue:o(e).search.title,"onUpdate:modelValue":l[0]||(l[0]=s=>o(e).search.title=s),placeholder:"请输入部门，支持模糊查询",clearable:"",onKeydown:l[1]||(l[1]=ae(s=>m(),["enter"])),onClear:l[2]||(l[2]=s=>m())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(r,{type:"primary",onClick:l[3]||(l[3]=s=>m())},{icon:a(()=>[t(v,null,{default:a(()=>[t(h,{name:"i-ep:search"})]),_:1})]),default:a(()=>[d(" 筛选 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),oe((p(),_(O,{ref_key:"tableRef",ref:V,class:"list-table",data:o(e).dataList,border:"",stripe:"","highlight-current-row":"",height:"100%",onSortChange:S,onSelectionChange:l[4]||(l[4]=s=>o(e).batch.selectionDataList=s)},{default:a(()=>[o(e).batch.enable?(p(),_(b,{key:0,type:"selection",width:"40"})):f("",!0),t(b,{prop:"title",label:"部门"}),t(b,{label:"操作",width:"250",align:"center"},{default:a(s=>[t(r,{type:"info",size:"small",plain:"",onClick:k=>J(s.row)},{default:a(()=>[d(" 查看职位 ")]),_:2},1032,["onClick"]),t(r,{type:"primary",size:"small",plain:"",onClick:k=>U(s.row)},{default:a(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),t(r,{type:"danger",size:"small",plain:"",onClick:k=>G(s.row)},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,o(e).loading]]),t(Z,{"current-page":o(c).page,total:o(c).total,"page-size":o(c).size,"page-sizes":o(c).sizes,layout:o(c).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:B,onCurrentChange:m},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),["dialog","drawer"].includes(o(e).formMode)?(p(),_(pe,{key:0,id:o(e).formModeProps.id,modelValue:o(e).formModeProps.visible,"onUpdate:modelValue":l[5]||(l[5]=s=>o(e).formModeProps.visible=s),mode:o(e).formMode,onSuccess:u},null,8,["id","modelValue","mode"])):f("",!0)],2)}}});typeof x=="function"&&x(L);const ke=ue(L,[["__scopeId","data-v-409023d1"]]);export{ke as default};
