import{_ as R}from"./index-6aa92ec0.js";import{d as w,u as q,a as C,b as P,r as m,e as t,o as S,f as U,g as e,w as s,i as r,l as B,E as N,S as z,R as M,x as i}from"./index-17000ae8.js";const T=w({name:"PersonalEditPassword"}),$=w({...T,setup(j){const f=q(),g=C(),c=P(),u=m(),o=m({password:"",newpassword:"",checkpassword:""}),b=m({password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkpassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:(p,l,n)=>{l!==o.value.newpassword?n(new Error("请确认新密码")):n()}}]});function h(){u.value&&u.value.validate(p=>{p&&c.editPassword(o.value).then(()=>{N({type:"success",message:"模拟修改成功，请重新登录"}),c.logout().then(()=>{g.push({name:"login",query:{redirect:f.fullPath}})})})})}return(p,l)=>{const n=z,d=t("el-input"),_=t("el-form-item"),V=t("el-form"),k=t("el-col"),y=t("el-row"),v=M,x=t("el-button"),E=R;return S(),U("div",null,[e(n,{title:"修改密码",content:"定期修改密码可以提高帐号安全性噢~"}),e(v,null,{default:s(()=>[e(y,null,{default:s(()=>[e(k,{md:24,lg:12},{default:s(()=>[e(V,{ref_key:"formRef",ref:u,model:r(o),rules:r(b),"label-width":"120px"},{default:s(()=>[e(_,{label:"原密码",prop:"password"},{default:s(()=>[e(d,{modelValue:r(o).password,"onUpdate:modelValue":l[0]||(l[0]=a=>r(o).password=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(_,{label:"新密码",prop:"newpassword"},{default:s(()=>[e(d,{modelValue:r(o).newpassword,"onUpdate:modelValue":l[1]||(l[1]=a=>r(o).newpassword=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),e(_,{label:"确认新密码",prop:"checkpassword"},{default:s(()=>[e(d,{modelValue:r(o).checkpassword,"onUpdate:modelValue":l[2]||(l[2]=a=>r(o).checkpassword=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1}),e(E,null,{default:s(()=>[e(x,{type:"primary",size:"large",onClick:h},{default:s(()=>[B(" 提交 ")]),_:1})]),_:1})])}}});typeof i=="function"&&i($);export{$ as default};
