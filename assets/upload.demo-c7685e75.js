import{d as z,e as h,o as y,L as E,w as l,f as S,h as c,g as t,O as I,E as k,_ as R,p as T,n as J,l as K,q,r as N,Q as P,U as Q,K as j,j as C,v as O,J as M,i as w,V as A,S as G,R as H,x as L}from"./index-17000ae8.js";import{_ as W}from"./index-30d50768.js";const X=e=>(T("data-v-ccd6a81b"),e=e(),J(),e),Y={class:"slot"},Z=X(()=>c("div",{class:"el-upload__text"},[K(" 将文件拖到此处，或"),c("em",null,"点击上传")],-1)),ee={key:0,class:"el-upload__tip"},te={style:{display:"inline-block"}},ae=z({name:"FileUpload"}),se=z({...ae,props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},size:{type:Number,default:2},max:{type:Number,default:3},files:{type:Array,default:()=>[]},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["zip","rar"]}},emits:["onSuccess"],setup(e,{emit:f}){const n=e,o=_=>{const s=_.name.split(".").at(-1),p=n.ext.includes(s),g=_.size/1024/1024<n.size;return p||k.error(`上传文件只支持 ${n.ext.join(" / ")} 格式！`),g||k.error(`上传文件大小不能超过 ${n.size}MB！`),p&&g},$=()=>{k.warning("文件上传超过限制")},x=(_,v,s)=>{f("onSuccess",_,v,s)};return(_,v)=>{const s=R,p=h("el-icon"),g=h("el-alert"),a=h("el-upload");return y(),E(a,{headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":o,"on-exceed":$,"on-success":x,"file-list":e.files,limit:e.max,drag:""},{tip:l(()=>[e.notip?I("",!0):(y(),S("div",ee,[c("div",te,[t(g,{title:`上传文件支持 ${e.ext.join(" / ")} 格式，单个文件大小不超过 ${e.size}MB，且文件数量不超过 ${e.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:l(()=>[c("div",Y,[t(p,{class:"el-icon--upload"},{default:l(()=>[t(s,{name:"i-ep:upload-filled"})]),_:1}),Z])]),_:1},8,["headers","action","data","name","file-list","limit"])}}});const oe=q(se,[["__scopeId","data-v-ccd6a81b"]]),le={class:"upload-container"},ne={class:"mask"},ie={class:"actions"},ce=["onClick"],pe=["onClick"],ue=["onClick"],de=["onClick"],re={key:0,class:"el-upload__tip"},me={style:{display:"inline-block"}},he=z({name:"ImagesUpload"}),fe=z({...he,props:{action:{type:String,required:!0},headers:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},name:{type:String,default:"file"},url:{type:Array,default:()=>[]},max:{type:Number,default:3},size:{type:Number,default:2},width:{type:Number,default:150},height:{type:Number,default:150},placeholder:{type:String,default:""},notip:{type:Boolean,default:!1},ext:{type:Array,default:()=>["jpg","png","gif","bmp"]}},emits:["update:url","onSuccess"],setup(e,{emit:f}){const n=e,o=N({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function $(a){o.value.dialogImageIndex=a,o.value.imageViewerVisible=!0}function x(){o.value.imageViewerVisible=!1}function _(a){const d=n.url;d.splice(a,1),f("update:url",d)}function v(a,d){const i=n.url;d==="left"&&a!==0&&(i[a]=i.splice(a-1,1,i[a])[0]),d==="right"&&a!==i.length-1&&(i[a]=i.splice(a+1,1,i[a])[0]),f("update:url",i)}const s=a=>{const i=a.name.split(".").at(-1),r=n.ext.includes(i),u=a.size/1024/1024<n.size;return r||k.error(`上传图片只支持 ${n.ext.join(" / ")} 格式！`),u||k.error(`上传图片大小不能超过 ${n.size}MB！`),r&&u&&(o.value.progress.preview=URL.createObjectURL(a)),r&&u},p=a=>{o.value.progress.percent=~~a.percent},g=a=>{o.value.progress.preview="",o.value.progress.percent=0,f("onSuccess",a)};return(a,d)=>{const i=h("el-image"),r=R,u=h("el-icon"),V=h("el-progress"),m=h("el-upload"),U=h("el-alert"),D=h("el-image-viewer");return y(),S("div",le,[(y(!0),S(P,null,Q(e.url,(F,b)=>(y(),S("div",{key:b,class:"images"},[b<e.max?(y(),E(i,{key:0,src:F,style:j(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):I("",!0),c("div",ne,[c("div",ie,[c("span",{title:"预览",onClick:B=>$(b)},[t(u,null,{default:l(()=>[t(r,{name:"i-ep:zoom-in"})]),_:1})],8,ce),c("span",{title:"移除",onClick:B=>_(b)},[t(u,null,{default:l(()=>[t(r,{name:"i-ep:delete"})]),_:1})],8,pe),C(c("span",{title:"左移",class:M({disabled:b===0}),onClick:B=>v(b,"left")},[t(u,null,{default:l(()=>[t(r,{name:"i-ep:back"})]),_:1})],10,ue),[[O,e.url.length>1]]),C(c("span",{title:"右移",class:M({disabled:b===e.url.length-1}),onClick:B=>v(b,"right")},[t(u,null,{default:l(()=>[t(r,{name:"i-ep:right"})]),_:1})],10,de),[[O,e.url.length>1]])])])]))),128)),C(t(m,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":s,"on-progress":p,"on-success":g,drag:"",class:"images-upload"},{default:l(()=>[c("div",{class:"image-slot",style:j(`width:${e.width}px;height:${e.height}px;`)},[t(u,null,{default:l(()=>[t(r,{name:"i-ep:plus"})]),_:1})],4),C(c("div",{class:"progress",style:j(`width:${e.width}px;height:${e.height}px;`)},[t(i,{src:w(o).progress.preview,style:j(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),t(V,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:w(o).progress.percent},null,8,["width","percentage"])],4),[[O,w(o).progress.percent]])]),_:1},8,["headers","action","data","name"]),[[O,e.url.length<e.max]]),e.notip?I("",!0):(y(),S("div",re,[c("div",me,[t(U,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),w(o).imageViewerVisible?(y(),E(D,{key:1,"url-list":e.url,"initial-index":w(o).dialogImageIndex,teleported:"",onClose:x},null,8,["url-list","initial-index"])):I("",!0)])}}});const ge=q(fe,[["__scopeId","data-v-2611d9ec"]]),_e=c("p",null,"ImageUpload / ImagesUpload / FileUpload",-1),ye=c("p",{style:{"margin-bottom":"0"}}," 由于线上演示环境开启了 Mock ，会导致上传功能报错，请在本地运行并查看演示 ",-1),ve=z({name:"ComponentExampleUpload"}),be=z({...ve,setup(e){const f=N("https://picsum.photos/750/450"),n=N(["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]),o=N([{name:"测试文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]),$=s=>{s.error===""?f.value=s.data.path:k.warning(s.error)},x=s=>{s.error===""?n.value.push(s.data.path):k.warning(s.error)},_=(s,p,g)=>{s.error===""?o.value.push({name:p.name,url:s.error===""?s.data.path:""}):(g.pop(),k.warning(s.error))},v=[{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]},{image:"https://picsum.photos/750/450",images:["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]}];return(s,p)=>{const g=G,a=W,d=H,i=ge,r=oe,u=h("el-table-column"),V=h("el-table");return y(),S("div",null,[t(g,{title:"上传"},{content:l(()=>[_e,ye]),_:1}),t(d,{title:"单图上传"},{default:l(()=>[t(a,{url:w(f),"onUpdate:url":p[0]||(p[0]=m=>A(f)?f.value=m:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",width:250,height:150,onOnSuccess:$},null,8,["url"])]),_:1}),t(d,{title:"多图上传（默认最多3张）"},{default:l(()=>[t(i,{url:w(n),"onUpdate:url":p[1]||(p[1]=m=>A(n)?n.value=m:null),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",onOnSuccess:x},null,8,["url"])]),_:1}),t(d,{title:"文件上传（默认最多3个）"},{default:l(()=>[t(r,{files:w(o),action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/file",onOnSuccess:_},null,8,["files"])]),_:1}),t(d,{title:"结合 el-table 使用"},{default:l(()=>[t(V,{data:v,style:{width:"100%"}},{default:l(()=>[t(u,{type:"index",width:"50",fixed:"left"}),t(u,{label:"单张图片"},{default:l(({row:m})=>[t(a,{url:m.image,"onUpdate:url":U=>m.image=U,action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",width:250,height:150,onOnSuccess:$},null,8,["url","onUpdate:url"])]),_:1}),t(u,{label:"多张图片"},{default:l(({row:m})=>[t(i,{url:m.images,"onUpdate:url":U=>m.images=U,action:"https://console-mock.apipost.cn/app/mock/project/1f50f1da-5189-4282-d3c7-c133a514c5a8/upload/image",name:"image",onOnSuccess:x},null,8,["url","onUpdate:url"])]),_:1})]),_:1})]),_:1})])}}});typeof L=="function"&&L(be);export{be as default};
