import{C as iW,d as aj,bz as iG,r as lW,a1 as ej,B as cj,b5 as lG,b3 as uG,b6 as dG,aP as tj,y as mG,e as aW,o as fG,f as gG,g as Cv,w as yw,h as uW,l as cW,i as dF,V as hG,_ as pG,S as bG,R as vG,p as yG,n as CG,q as wG,x as nj}from"./index-17000ae8.js";import SG from"./alert-8aa56ecd.js";var dW={},xG={get exports(){return dW},set exports(Ht){dW=Ht}};(function(Ht){(function(){var Qn=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},In=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Mn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Yn=function(e,n){return Wn(function(o,r){return e.eq(n(o),n(r))})},Wn=function(e){return{eq:e}},oo=Wn(function(e,n){return e===n}),Vt=oo,Wt=function(e){return Wn(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Lt=function(e,n){return Yn(Wt(e),function(o){return Mn(o,n)})},Oo=function(e){return Wn(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Lt(Vt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Yo=Wn(function(e,n){if(e===n)return!0;var o=Qn(e),r=Qn(n);return o!==r?!1:In(o)?e===n:o==="array"?Wt(Yo).eq(e,n):o==="object"?Oo(Yo).eq(e,n):!1});const ho=Object.getPrototypeOf,_n=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},So=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&_n(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Xn=e=>n=>So(n)===e,mt=e=>n=>typeof n===e,Nn=e=>n=>e===n,ct=(e,n)=>ot(e)&&_n(e,n,(o,r)=>ho(o)===r),K=Xn("string"),ot=Xn("object"),zt=e=>ct(e,Object),ut=Xn("array"),G=Nn(null),ht=mt("boolean"),Vn=Nn(void 0),Pt=e=>e==null,Ze=e=>!Pt(e),he=mt("function"),Uo=mt("number"),Ln=(e,n)=>{if(ut(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Zt=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),Co=(e,n)=>o=>e(n(o)),rt=e=>()=>e,ko=e=>e,on=(e,n)=>e===n;function qe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const po=e=>n=>!e(n),os=e=>()=>{throw new Error(e)},pt=e=>e(),un=e=>{e()},Se=rt(!1),Qe=rt(!0);class H{constructor(n,o){this.tag=n,this.value=o}static some(n){return new H(!0,n)}static none(){return H.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?H.some(n(this.value)):H.none()}bind(n){return this.tag?n(this.value):H.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:H.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Ze(n)?H.some(n):H.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}H.singletonNone=new H(!1);const ps=Array.prototype.slice,Dn=Array.prototype.indexOf,bo=Array.prototype.push,An=(e,n)=>Dn.call(e,n),Ys=(e,n)=>{const o=An(e,n);return o===-1?H.none():H.some(o)},Ue=(e,n)=>An(e,n)>-1,wt=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},Ge=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},xe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Io=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},eo=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Rt=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Tr=(e,n,o)=>(Io(e,(r,c)=>{o=n(o,r,c)}),o),$n=(e,n,o)=>(xe(e,(r,c)=>{o=n(o,r,c)}),o),ur=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return H.some(u);if(o(u,r))break}return H.none()},Wo=(e,n)=>ur(e,n,Se),Fs=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return H.some(o)}return H.none()},ba=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!ut(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);bo.apply(n,e[o])}return n},Ir=(e,n)=>ba(Ge(e,n)),Ss=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},is=e=>{const n=ps.call(e,0);return n.reverse(),n},Uc=(e,n)=>Rt(e,o=>!Ue(n,o)),ts=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},ls=(e,n)=>{const o=ps.call(e,0);return o.sort(n),o},ss=(e,n)=>n>=0&&n<e.length?H.some(e[n]):H.none(),Xo=e=>ss(e,0),Ds=e=>ss(e,e.length-1),dr=he(Array.from)?Array.from:e=>ps.call(e),aa=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return H.none()},mr=(e,n)=>{const o=[],r=he(n)?c=>wt(o,u=>n(u,c)):c=>Ue(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Rs=Object.keys,Or=Object.hasOwnProperty,bt=(e,n)=>{const o=Rs(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},io=(e,n)=>ca(e,(o,r)=>({k:r,v:n(o,r)})),ca=(e,n)=>{const o={};return bt(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},sr=e=>(n,o)=>{e[o]=n},ac=(e,n,o,r)=>{bt(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Aa=(e,n)=>{const o={},r={};return ac(e,n,sr(o),sr(r)),{t:o,f:r}},rs=(e,n)=>{const o={};return ac(e,n,sr(o),Zt),o},La=(e,n)=>{const o=[];return bt(e,(r,c)=>{o.push(n(r,c))}),o},Dr=e=>La(e,ko),Jo=(e,n)=>hn(e,n)?H.from(e[n]):H.none(),hn=(e,n)=>Or.call(e,n),Er=(e,n)=>hn(e,n)&&e[n]!==void 0&&e[n]!==null,Jr=(e,n,o=Yo)=>Oo(o).eq(e,n),Oa=e=>{const n={};return xe(e,o=>{n[o]={}}),Rs(n)},Ha=e=>e.length!==void 0,Is=Array.isArray,Ws=e=>{if(Is(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},bs=(e,n,o)=>{if(!e)return!1;if(o=o||e,Ha(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(hn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},wr=(e,n)=>{const o=[];return bs(e,(r,c)=>{o.push(n(r,c,e))}),o},de=(e,n)=>{const o=[];return bs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},se=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Ie=(e,n,o,r)=>{let c=Vn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Ne=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Yt=e=>e[e.length-1],fn=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},so=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!y,N=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!E&&!y&&!N;return{isiPad:rt(c),isiPhone:rt(u),isTablet:rt(y),isPhone:rt(E),isTouch:rt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:rt(N),isDesktop:rt(R)}},Qo=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},jn=(e,n)=>{const o=Qo(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Zo(r(1),r(2))},uo=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?be():jn(e,o)},be=()=>Zo(0,0),Zo=(e,n)=>({major:e,minor:n}),re={nu:Zo,detect:uo,unknown:be},ce=(e,n)=>aa(n.brands,o=>{const r=o.brand.toLowerCase();return Wo(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:re.nu(parseInt(o.version,10),0)}))}),tt=(e,n)=>{const o=String(n).toLowerCase();return Wo(e,r=>r.search(o))},nt=(e,n)=>tt(e,n).map(o=>{const r=re.detect(o.versionRegexes,n);return{current:o.name,version:r}}),At=(e,n)=>tt(e,n).map(o=>{const r=re.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Xt=(e,n)=>e.substring(n),qt=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Qt=(e,n)=>xn(e,n)?Xt(e,n.length):e,Sn=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Vn(r)?!0:c+n.length<=r:!1},xn=(e,n)=>qt(e,n,0),us=(e,n)=>qt(e,n,e.length-n.length),Ms=e=>n=>n.replace(e,""),Da=Ms(/^\s+|\s+$/g),Va=Ms(/^\s+/g),cc=Ms(/\s+$/g),Rn=e=>e.length>0,jo=e=>!Rn(e),ds=(e,n)=>n<=0?"":new Array(n+1).join(e),Lr=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?H.none():H.some(o)},jr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Rr=e=>n=>Sn(n,e),Ls=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Sn(e,"edge/")&&Sn(e,"chrome")&&Sn(e,"safari")&&Sn(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,jr],search:e=>Sn(e,"chrome")&&!Sn(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Sn(e,"msie")||Sn(e,"trident")},{name:"Opera",versionRegexes:[jr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rr("firefox")},{name:"Safari",versionRegexes:[jr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Sn(e,"safari")||Sn(e,"mobile/"))&&Sn(e,"applewebkit")}],Ql=[{name:"Windows",search:Rr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Sn(e,"iphone")||Sn(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Rr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rr("linux"),versionRegexes:[]},{name:"Solaris",search:Rr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Wi={browsers:rt(Ls),oses:rt(Ql)},ms="Edge",va="Chromium",Ra="IE",fr="Opera",Zi="Firefox",ic="Safari",ya=()=>Cc({current:void 0,version:re.unknown()}),Cc=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(ms),isChromium:r(va),isIE:r(Ra),isOpera:r(fr),isFirefox:r(Zi),isSafari:r(ic)}},al={unknown:ya,nu:Cc,edge:rt(ms),chromium:rt(va),ie:rt(Ra),opera:rt(fr),firefox:rt(Zi),safari:rt(ic)},li="Windows",cl="iOS",Ma="Android",Nc="Linux",ji="macOS",Wc="Solaris",Gi="FreeBSD",W="ChromeOS",me=()=>ve({current:void 0,version:re.unknown()}),ve=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(li),isiOS:r(cl),isAndroid:r(Ma),isMacOS:r(ji),isLinux:r(Nc),isSolaris:r(Wc),isFreeBSD:r(Gi),isChromeOS:r(W)}},Le={unknown:me,nu:ve,windows:rt(li),ios:rt(cl),android:rt(Ma),linux:rt(Nc),macos:rt(ji),solaris:rt(Wc),freebsd:rt(Gi),chromeos:rt(W)},pn={detect:(e,n,o)=>{const r=Wi.browsers(),c=Wi.oses(),u=n.bind(y=>ce(r,y)).orThunk(()=>nt(r,e)).fold(al.unknown,al.nu),f=At(c,e).fold(Le.unknown,Le.nu),b=so(f,u,e,o);return{browser:u,os:f,deviceType:b}}},vs=e=>window.matchMedia(e).matches;let Mr=fn(()=>pn.detect(navigator.userAgent,H.from(navigator.userAgentData),vs));const Do=()=>Mr(),Nr=navigator.userAgent,Go=Do(),rr=Go.browser,Bc=Go.os,wc=Go.deviceType,zn=Nr.indexOf("Windows Phone")!==-1,es={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:rr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!rr.isIE(),windowsPhone:zn,browser:{current:rr.current,version:rr.version,isChromium:rr.isChromium,isEdge:rr.isEdge,isFirefox:rr.isFirefox,isIE:rr.isIE,isOpera:rr.isOpera,isSafari:rr.isSafari},os:{current:Bc.current,version:Bc.version,isAndroid:Bc.isAndroid,isChromeOS:Bc.isChromeOS,isFreeBSD:Bc.isFreeBSD,isiOS:Bc.isiOS,isLinux:Bc.isLinux,isMacOS:Bc.isMacOS,isSolaris:Bc.isSolaris,isWindows:Bc.isWindows},deviceType:{isDesktop:wc.isDesktop,isiPad:wc.isiPad,isiPhone:wc.isiPhone,isPhone:wc.isPhone,isTablet:wc.isTablet,isTouch:wc.isTouch,isWebView:wc.isWebView}},Qr=/^\s*|\s*$/g,P=e=>Pt(e)?"":(""+e).replace(Qr,""),q=(e,n)=>n?n==="array"&&Is(e)?!0:typeof e===n:e!==void 0,ne=(e,n,o={})=>{const r=K(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Be=hn,Mt=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(hn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},to=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),bs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(to(c,n,o,r),!0)))},et={trim:P,isArray:Is,is:q,toArray:Ws,makeMap:ne,each:bs,map:wr,grep:de,inArray:se,hasOwn:Be,extend:Mt,walk:to,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>ut(e)?e:e===""?[]:wr(e.split(n||","),P),_addCacheSuffix:e=>{const n=es.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Vr=(e,n,o=on)=>e.exists(r=>o(r,n)),gr=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},ta=(e,n,o)=>e.isSome()&&n.isSome()?H.some(o(e.getOrDie(),n.getOrDie())):H.none(),sd=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?H.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):H.none(),xo=(e,n)=>e?H.some(n):H.none(),Y=typeof window<"u"?window:Function("return this;")(),oe=(e,n)=>{let o=n??Y;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ke=(e,n)=>{const o=e.split(".");return oe(o,n)},ze=(e,n)=>ke(e,n),tn=(e,n)=>{const o=ze(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Lo=Object.getPrototypeOf,Xs=e=>tn("HTMLElement",e),_o=e=>{const n=ke("ownerDocument.defaultView",e);return ot(e)&&(Xs(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Lo(e).constructor.name))},Zs=8,Ca=9,Ns=11,Sc=1,Zc=3,As=e=>e.dom.nodeName.toLowerCase(),wa=e=>e.dom.nodeType,hr=e=>n=>wa(n)===e,ki=e=>wa(e)===Zs||As(e)==="#comment",Tl=e=>Hs(e)&&_o(e.dom),Hs=hr(Sc),xc=hr(Zc),_i=hr(Ca),rd=hr(Ns),il=e=>n=>Hs(n)&&As(n)===e,Qc=(e,n,o)=>{if(K(o)||ht(o)||Uo(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Gr=(e,n,o)=>{Qc(e.dom,n,o)},lc=(e,n)=>{const o=e.dom;bt(n,(r,c)=>{Qc(o,c,r)})},Pc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},ei=(e,n)=>H.from(Pc(e,n)),Xa=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Br=(e,n)=>{e.dom.removeAttribute(n)},jc=e=>{const n=e.dom.attributes;return n==null||n.length===0},nm=e=>$n(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),eu=(e,n)=>{const o=Pc(e,n);return o===void 0||o===""?[]:o.split(" ")},tu=(e,n,o)=>{const c=eu(e,n).concat([o]);return Gr(e,n,c.join(" ")),!0},Gm=(e,n,o)=>{const r=Rt(eu(e,n),c=>c!==o);return r.length>0?Gr(e,n,r.join(" ")):Br(e,n),!1},ui=e=>e.dom.classList!==void 0,nu=e=>eu(e,"class"),ad=(e,n)=>tu(e,"class",n),zr=(e,n)=>Gm(e,"class",n),om=(e,n)=>Ue(nu(e),n)?zr(e,n):ad(e,n),Au=(e,n)=>{ui(e)?e.dom.classList.add(n):ad(e,n)},Ou=e=>{(ui(e)?e.dom.classList:nu(e)).length===0&&Br(e,"class")},cd=(e,n)=>{ui(e)?e.dom.classList.remove(n):zr(e,n),Ou(e)},id=(e,n)=>{const o=ui(e)?e.dom.classList.toggle(n):om(e,n);return Ou(e),o},ld=(e,n)=>ui(e)&&e.dom.classList.contains(n),Du=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return ou(r.childNodes[0])},qm=(e,n)=>{const r=(n||document).createElement(e);return ou(r)},Km=(e,n)=>{const r=(n||document).createTextNode(e);return ou(r)},ou=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ae={fromHtml:Du,fromTag:qm,fromText:Km,fromDom:ou,fromPoint:(e,n,o)=>H.from(e.dom.elementFromPoint(n,o)).map(ou)},ud=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},$c=(e,n)=>{const o=e.dom;if(o.nodeType!==Sc)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Zf=e=>e.nodeType!==Sc&&e.nodeType!==Ca&&e.nodeType!==Ns||e.childElementCount===0,yp=(e,n)=>{const o=n===void 0?document:n.dom;return Zf(o)?[]:Ge(o.querySelectorAll(e),ae.fromDom)},Cp=(e,n)=>{const o=n===void 0?document:n.dom;return Zf(o)?H.none():H.from(o.querySelector(e)).map(ae.fromDom)},ys=(e,n)=>e.dom===n.dom,Ai=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Tc=e=>ae.fromDom(e.dom.ownerDocument),ti=e=>_i(e)?e:Tc(e),nh=e=>ae.fromDom(ti(e).dom.documentElement),El=e=>ae.fromDom(ti(e).dom.defaultView),di=e=>H.from(e.dom.parentNode).map(ae.fromDom),sm=e=>H.from(e.dom.parentElement).map(ae.fromDom),jf=(e,n)=>{const o=he(n)?n:Se;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ae.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},oh=e=>{const n=o=>Rt(o,r=>!ys(e,r));return di(e).map(za).map(n).getOr([])},Gc=e=>H.from(e.dom.previousSibling).map(ae.fromDom),dd=e=>H.from(e.dom.nextSibling).map(ae.fromDom),sh=e=>is(ud(e,Gc)),ni=e=>ud(e,dd),za=e=>Ge(e.dom.childNodes,ae.fromDom),md=(e,n)=>{const o=e.dom.childNodes;return H.from(o[n]).map(ae.fromDom)},fd=e=>md(e,0),Oi=e=>md(e,e.dom.childNodes.length-1),Fc=e=>e.dom.childNodes.length,Ym=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ae.fromDom(n)},Xm=e=>rd(e)&&Ze(e.dom.host),Jm=he(Element.prototype.attachShadow)&&he(Node.prototype.getRootNode),Qm=rt(Jm),qi=Jm?e=>ae.fromDom(e.dom.getRootNode()):ti,rm=e=>Xm(e)?e:Ym(ti(e)),rh=e=>Xm(e)?e:ae.fromDom(ti(e).dom.body),wv=e=>{const n=qi(e);return Xm(n)?H.some(n):H.none()},ah=e=>ae.fromDom(e.dom.host),am=e=>{if(Qm()&&Ze(e.target)){const n=ae.fromDom(e.target);if(Hs(n)&&Gf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Xo(o)}}return H.from(e.target)},Gf=e=>Ze(e.dom.shadowRoot),kl=e=>{const n=xc(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return wv(ae.fromDom(n)).fold(()=>o.body.contains(n),Co(kl,ah))};var qf=(e,n,o,r,c)=>e(o,r)?H.some(o):he(c)&&c(o)?H.none():n(o,r,c);const ar=(e,n,o)=>{let r=e.dom;const c=he(o)?o:Se;for(;r.parentNode;){r=r.parentNode;const u=ae.fromDom(r);if(n(u))return H.some(u);if(c(u))break}return H.none()},k=(e,n,o)=>qf((c,u)=>u(c),ar,e,n,o),M=(e,n)=>{const o=e.dom;return o.parentNode?z(ae.fromDom(o.parentNode),r=>!ys(e,r)&&n(r)):H.none()},z=(e,n)=>{const o=c=>n(ae.fromDom(c));return Wo(e.dom.childNodes,o).map(ae.fromDom)},fe=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=ae.fromDom(r.childNodes[c]);if(n(u))return H.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return H.none()};return o(e.dom)},ge=(e,n,o)=>ar(e,r=>$c(r,n),o),Et=(e,n)=>Cp(n,e),En=(e,n,o)=>qf((c,u)=>$c(c,u),ge,e,n,o),Zn=e=>En(e,"[contenteditable]"),To=(e,n=!1)=>kl(e)?e.dom.isContentEditable:Zn(e).fold(rt(n),o=>St(o)==="true"),St=e=>e.dom.contentEditable,ks=e=>e.style!==void 0&&he(e.style.getPropertyValue),Na=(e,n,o)=>{if(!K(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ks(e)&&e.style.setProperty(n,o)},mi=(e,n)=>{ks(e)&&e.style.removeProperty(n)},cm=(e,n,o)=>{const r=e.dom;Na(r,n,o)},Kf=(e,n)=>{const o=e.dom;bt(n,(r,c)=>{Na(o,c,r)})},ll=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!kl(e)?fi(o,n):c},fi=(e,n)=>ks(e)?e.style.getPropertyValue(n):"",Ic=(e,n)=>{const o=e.dom,r=fi(o,n);return H.from(r).filter(c=>c.length>0)},Di=e=>{const n={},o=e.dom;if(ks(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Ja=(e,n)=>{const o=e.dom;mi(o,n),Vr(ei(e,"style").map(Da),"")&&Br(e,"style")},ib=e=>e.dom.offsetWidth,xs=(e,n)=>{di(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Ru=(e,n)=>{dd(e).fold(()=>{di(e).each(c=>{Ur(c,n)})},r=>{xs(r,n)})},gd=(e,n)=>{fd(e).fold(()=>{Ur(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Ur=(e,n)=>{e.dom.appendChild(n.dom)},lb=(e,n)=>{xs(e,n),Ur(n,e)},Sv=(e,n)=>{xe(n,(o,r)=>{const c=r===0?e:n[r-1];Ru(c,o)})},Mu=(e,n)=>{xe(n,o=>{Ur(e,o)})},js=e=>{e.dom.textContent="",xe(za(e),n=>{Js(n)})},Js=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Sa=e=>{const n=za(e);n.length>0&&Sv(e,n),Js(e)},hd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,za(ae.fromDom(r))},pd=e=>Ge(e,ae.fromDom),im=e=>e.dom.innerHTML,bd=(e,n)=>{const r=Tc(e).dom,c=ae.fromDom(r.createDocumentFragment()),u=hd(n,r);Mu(c,u),js(e),Ur(e,c)},Ro=e=>{const n=ae.fromTag("div"),o=ae.fromDom(e.dom.cloneNode(!0));return Ur(n,o),im(n)},ch=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),wp=e=>{const n=ae.fromDom(am(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=A(r,o);return ch(n,e.clientX,e.clientY,o,r,c,e)},xv=(e,n)=>o=>{e(o)&&n(wp(o))},Tv=(e,n,o,r,c)=>{const u=xv(o,r);return e.dom.addEventListener(n,u,c),{unbind:qe(ub,e,n,u,c)}},Yf=(e,n,o,r)=>Tv(e,n,o,r,!1),ub=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Xf=(e,n)=>({left:e,top:n,translate:(r,c)=>Xf(e+r,n+c)}),ul=Xf,db=e=>{const n=e.getBoundingClientRect();return ul(n.left,n.top)},ih=(e,n)=>e!==void 0?e:n!==void 0?n:0,mb=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return ul(o.offsetLeft,o.offsetTop);const u=ih(r==null?void 0:r.pageYOffset,c.scrollTop),f=ih(r==null?void 0:r.pageXOffset,c.scrollLeft),b=ih(c.clientTop,o.clientTop),y=ih(c.clientLeft,o.clientLeft);return _l(e).translate(f-y,u-b)},_l=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?ul(r.offsetLeft,r.offsetTop):kl(e)?db(n):ul(0,0)},Sp=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return ul(o,r)},Al=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},lm=(e,n)=>{Do().browser.isSafari()&&he(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Ev=e=>{const n=e===void 0?window:e;return Do().browser.isFirefox()?H.none():H.from(n.visualViewport)},lh=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),uh=e=>{const n=e===void 0?window:e,o=n.document,r=Sp(ae.fromDom(o));return Ev(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return lh(r.left,r.top,u,f)},c=>lh(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},fb=(e,n)=>Rt(za(e),n),dh=(e,n)=>{let o=[];return xe(za(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(dh(r,n))}),o},Ec=(e,n)=>yp(n,e),mh=(e,n,o)=>ge(e,n,o).isSome();class Ba{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const kc=e=>n=>!!n&&n.nodeType===e,vn=e=>!!e&&!Object.getPrototypeOf(e),Ut=kc(1),Jf=e=>{const n=e.toLowerCase();return o=>Ze(o)&&o.nodeName.toLowerCase()===n},oi=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Ue(n,r)}return!1}},Qf=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ut(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},fh=e=>n=>Ut(n)&&n.hasAttribute(e),Ri=(e,n)=>o=>Ut(o)&&o.getAttribute(e)===n,gi=e=>Ut(e)&&e.hasAttribute("data-mce-bogus"),gh=e=>Ut(e)&&e.getAttribute("data-mce-bogus")==="all",Wr=e=>Ut(e)&&e.tagName==="TABLE",ef=e=>n=>!!(Ut(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),eg=oi(["textarea","input"]),ft=kc(3),kv=kc(4),gb=kc(7),Mi=kc(8),tf=kc(9),vd=kc(11),Pr=Jf("br"),hb=Jf("img"),Bs=ef("true"),Ts=ef("false"),_c=oi(["td","th"]),nf=oi(["td","th","caption"]),ia=oi(["video","audio","object","embed"]),yd=Jf("li"),la="\uFEFF",Vs=" ",tg=e=>e===la,Je=e=>e.replace(/\uFEFF/g,""),hh=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?H.from(u.dom.nodeValue):H.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(xc,"text"),qr=e=>hh.get(e),Ol=e=>hh.getOption(e),xp=(e,n)=>hh.set(e,n),dl=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],_v=["td","th"],Nu=["thead","tbody","tfoot"],pb=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],hi=["h1","h2","h3","h4","h5","h6"],Cs=["li","dd","dt"],su=["ul","ol","dl"],ng=["pre","script","textarea","style"],Lc=["pre"].concat(hi),Dl=e=>{let n;return o=>(n=n||ts(e,Qe),hn(n,As(o)))},Ac=Dl(dl),bb=e=>As(e)==="table",Hc=e=>Hs(e)&&!Ac(e),Bu=e=>Hs(e)&&As(e)==="br",_e=Dl(pb),si=Dl(su),ru=Dl(Cs),pi=Dl(Nu),Ni=Dl(_v),Qa=Dl(ng),Pa=Dl(Lc),Av=e=>Pa(e)||Hc(e),ph=e=>{const n=[];let o=e.dom;for(;o;)n.push(ae.fromDom(o)),o=o.lastChild;return n},w=e=>{const n=Ec(e,"br"),o=Rt(ph(e).slice(-1),Bu);n.length===o.length&&xe(o,Js)},S=()=>{const e=ae.fromTag("br");return Gr(e,"data-mce-bogus","1"),e},I=e=>{js(e),Ur(e,S())},Z=e=>{Oi(e).each(n=>{Gc(n).each(o=>{Ac(e)&&Bu(n)&&Ac(o)&&Js(n)})})},ie=la,je=tg,dt=Je,Jt=Ut,qn=ft,no=e=>(qn(e)&&(e=e.parentNode),Jt(e)&&e.hasAttribute("data-mce-caret")),Ps=e=>qn(e)&&je(e.data),qo=e=>no(e)||Ps(e),pr=e=>e.firstChild!==e.lastChild||!Pr(e.firstChild),Bi=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ie),u=e.parentNode;if(n){const f=e.previousSibling;if(qn(f)){if(qo(f))return f;if(Cd(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(qn(f)){if(qo(f))return f;if(um(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},uc=e=>{const n=e.container();return ft(n)?n.data.charAt(e.offset())===ie||e.isAtStart()&&Ps(n.previousSibling):!1},Rl=e=>{const n=e.container();return ft(n)?n.data.charAt(e.offset()-1)===ie||e.isAtEnd()&&Ps(n.nextSibling):!1},au=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(S().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},um=e=>qn(e)&&e.data[0]===ie,Cd=e=>qn(e)&&e.data[e.data.length-1]===ie,Ml=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];gi(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},wd=e=>e&&e.hasAttribute("data-mce-caret")?(Ml(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,bh=e=>no(e.startContainer),og=Bs,of=Ts,Ua=Pr,cu=ft,Ko=oi(["script","style","textarea"]),Gs=oi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),qc=oi(["table"]),ua=qo,bi=e=>ua(e)?!1:cu(e)?!Ko(e.parentNode):Gs(e)||Ua(e)||qc(e)||Pu(e),sg=e=>Ut(e)&&e.getAttribute("unselectable")==="true",Pu=e=>!sg(e)&&of(e),ml=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Pu(o))return!1;if(og(o))return!0}return!0},sf=e=>Pu(e)?!$n(dr(e.getElementsByTagName("*")),(n,o)=>n||og(o),!1):!1,Ov=e=>Gs(e)||sf(e),Pi=(e,n)=>bi(e)&&ml(e,n),Sw=/^[ \t\r\n]*$/,$i=e=>Sw.test(e),$u=e=>" \f	\v".indexOf(e)!==-1,fl=e=>e===`
`||e==="\r",vb=(e,n)=>n<e.length&&n>=0?fl(e[n]):!1,rg=(e,n=4,o=!0,r=!0)=>{const c=ds(" ",n),u=e.replace(/\t/g,c);return $n(u,(b,y)=>$u(y)||y===Vs?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||vb(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Vs}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:fl(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},xw=(e,n)=>{const o=ae.fromDom(n),r=ae.fromDom(e);return mh(r,"pre,code",qe(ys,o))},ek=(e,n)=>ft(e)&&$i(e.data)&&!xw(e,n),xa=e=>Ut(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),yb=(e,n)=>bi(e)&&!ek(e,n)||xa(e)||Sd(e),Sd=fh("data-mce-bookmark"),Dv=fh("data-mce-bogus"),Rv=Ri("data-mce-bogus","all"),ag=(e,n)=>{let o=0;if(yb(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new Ba(r,e);do{if(n){if(Rv(r)){r=c.next(!0);continue}if(Dv(r)){r=c.next();continue}}if(Pr(r)){o++,r=c.next();continue}if(yb(r,e))return!1;r=c.next()}while(r);return o<=1}},qs=(e,n=!0)=>ag(e.dom,n),xd="data-mce-block",Tp=e=>Rt(Rs(e),n=>!/[A-Z]/.test(n)),Mv=e=>Tp(e).join(","),vh=(e,n)=>Ze(n.querySelector(e))?(n.setAttribute(xd,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(xd),!1),Ep=(e,n)=>{const o=Mv(e.getTransparentElements()),r=Mv(e.getBlockElements());return Rt(n.querySelectorAll(o),c=>vh(r,c))},kp=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(qs(ae.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},tk=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();kp(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();kp(u,!1),qs(ae.fromDom(c))||r.insertBefore(c,e),qs(ae.fromDom(n))||r.insertBefore(n,e),qs(ae.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},Nv=(e,n,o)=>{const r=e.getBlockElements(),c=ae.fromDom(n),u=b=>As(b)in r,f=b=>ys(b,c);xe(pd(o),b=>{ar(b,u,f).each(y=>{const E=fb(b,N=>u(N)&&!e.isValidChild(As(y),As(N)));if(E.length>0){const N=sm(y);xe(E,R=>{ar(R,u,f).each(L=>{tk(L.dom,R.dom)})}),N.each(R=>Ep(e,R.dom))}})})},Bv=(e,n,o)=>{xe([...o,...fm(e,n)?[n]:[]],r=>xe(Ec(ae.fromDom(r),r.nodeName.toLowerCase()),c=>{Tw(e,c.dom)&&Sa(c)}))},dm=(e,n)=>{const o=Ep(e,n);Nv(e,n,o),Bv(e,n,o)},Td=(e,n)=>{if(Cb(e,n)){const o=Mv(e.getBlockElements());vh(o,n)}},mm=(e,n,o)=>{const r=u=>ys(u,ae.fromDom(n)),c=jf(ae.fromDom(o),r);ss(c,c.length-2).filter(Hs).fold(()=>dm(e,n),u=>dm(e,u.dom))},rf=e=>e.hasAttribute(xd),_p=(e,n)=>hn(e.getTransparentElements(),n),Cb=(e,n)=>Ut(n)&&_p(e,n.nodeName),fm=(e,n)=>Cb(e,n)&&rf(n),Tw=(e,n)=>Cb(e,n)&&!rf(n),Ew=(e,n)=>n.type===1&&_p(e,n.name)&&K(n.attr(xd)),Pv=(e,n)=>n.type===1&&_p(e,n.name)&&Vn(n.attr(xd)),kw=Do().browser,Ap=e=>Wo(e,Hs),fs=e=>kw.isFirefox()&&As(e)==="table"?Ap(za(e)).filter(n=>As(n)==="caption").bind(n=>Ap(ni(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,bn=(e,n)=>e.children&&Ue(e.children,n),gm=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&ll(ae.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!bn(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!bn(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=fs(ae.fromDom(n))}return{x:r,y:c}},cg=(e,n={})=>{let o=0;const r={},c=ae.fromDom(e),u=ti(c),f=j=>{n.referrerPolicy=j},b=j=>{n.contentCssCors=j},y=j=>{Ur(rm(c),j)},E=j=>{const ee=rm(c);Et(ee,"#"+j).each(Js)},N=j=>Jo(r,j).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=j=>new Promise((ee,ye)=>{let pe;const we=et._addCacheSuffix(j),De=N(we);r[we]=De,De.count++;const Xe=($e,Gt)=>{xe($e,un),De.status=Gt,De.passed=[],De.failed=[],pe&&(pe.onload=null,pe.onerror=null,pe=null)},Ot=()=>Xe(De.passed,2),xt=()=>Xe(De.failed,3);if(ee&&De.passed.push(ee),ye&&De.failed.push(ye),De.status===1)return;if(De.status===2){Ot();return}if(De.status===3){xt();return}De.status=1;const Fe=ae.fromTag("link",u.dom);lc(Fe,{rel:"stylesheet",type:"text/css",id:De.id}),n.contentCssCors&&Gr(Fe,"crossOrigin","anonymous"),n.referrerPolicy&&Gr(Fe,"referrerpolicy",n.referrerPolicy),pe=Fe.dom,pe.onload=Ot,pe.onerror=xt,y(Fe),Gr(Fe,"href",we)}),L=j=>Promise.allSettled(Ge(j,ye=>R(ye).then(rt(ye)))).then(ye=>{const pe=eo(ye,we=>we.status==="fulfilled");return pe.fail.length>0?Promise.reject(Ge(pe.fail,we=>we.reason)):Ge(pe.pass,we=>we.value)}),Q=j=>{const ee=et._addCacheSuffix(j);Jo(r,ee).each(ye=>{--ye.count===0&&(delete r[ee],E(ye.id))})};return{load:R,loadAll:L,unload:Q,unloadAll:j=>{xe(j,ee=>{Q(ee)})},_setReferrerPolicy:f,_setContentCssCors:b}},_w=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=qi(o).dom;return H.from(e.get(u)).getOrThunk(()=>{const f=cg(u,r);return e.set(u,f),f})}}})(),$v=e=>e.nodeName.toLowerCase()==="span",cr=(e,n)=>Ze(e)&&(yb(e,n)||Hc(ae.fromDom(e))),Aw=(e,n)=>{const o=new Ba(e,n).prev(!1),r=new Ba(e,n).next(!1),c=Vn(o)||cr(o,n),u=Vn(r)||cr(r,n);return c&&u},Fv=e=>$v(e)&&e.getAttribute("data-mce-type")==="bookmark",Ow=(e,n)=>ft(e)&&e.data.length>0&&Aw(e,n),st=e=>Ut(e)?e.childNodes.length>0:!1,Iv=e=>vd(e)||tf(e),Lv=(e,n,o)=>{var r;const c=o||n;if(Ut(n)&&Fv(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)Lv(e,u[f],c);if(Ut(n)){const f=n.childNodes;f.length===1&&Fv(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!Iv(n)&&!yb(n,c)&&!st(n)&&!Ow(n,c)&&e.remove(n),n},ig=et.makeMap,Sb=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hm=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Op=/[<>&\"\']/g,lg=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Hv={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},iu={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Zr={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Fi=e=>{const n=ae.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Dp=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!iu[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Fu=Dp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Dw=(e,n)=>e.replace(n?Sb:hm,o=>iu[o]||o),Vv=e=>(""+e).replace(Op,n=>iu[n]||n),af=(e,n)=>e.replace(n?Sb:hm,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":iu[o]||"&#"+o.charCodeAt(0)+";"),zv=(e,n,o)=>{const r=o||Fu;return e.replace(n?Sb:hm,c=>iu[c]||r[c]||c)},cf={encodeRaw:Dw,encodeAllRaw:Vv,encodeNumeric:af,encodeNamed:zv,getEncodeFunc:(e,n)=>{const o=Dp(n)||Fu,r=(f,b)=>f.replace(b?Sb:hm,y=>iu[y]!==void 0?iu[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>zv(f,b,o),u=ig(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:zv:u.numeric?af:Dw},decode:e=>e.replace(lg,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Hv[o]||String.fromCharCode(o)):Zr[n]||Fu[n]||Fi(n))},Iu={},xb={},nk={},yh=et.makeMap,ec=et.each,nn=et.extend,Uv=et.explode,Mw=et.inArray,Kc=(e,n)=>(e=et.trim(e),e?e.split(n||" "):[]),Wv=(e,n={})=>{const o=yh(e," ",yh(e.toUpperCase()," "));return nn(o,n)},Nw=e=>Wv("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Zv=e=>{const n={};let o,r,c,u;const f=(y,E="",N="")=>{const R=Kc(N),L=Kc(y);let Q=L.length;for(;Q--;){const te=Kc([o,E].join(" "));n[L[Q]]={attributes:ts(te,()=>({})),attributesOrder:te,children:ts(R,rt(nk))}}},b=(y,E)=>{const N=Kc(y),R=Kc(E);let L=N.length;for(;L--;){const Q=n[N[L]];for(let te=0,j=R.length;te<j;te++)Q.attributes[R[te]]={},Q.attributesOrder.push(R[te])}};if(Iu[e])return Iu[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),ec(Kc(y),N=>{f(N,"",c)});const E="center dir isindex noframes";r=[r,E].join(" "),u=[r,c].join(" "),ec(Kc(E),N=>{f(N,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&xe([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),ec(Kc("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,Iu[e]=n,n},Ed=(e,n)=>{if(e){const o={};return K(e)&&(e={"*":e}),ec(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?yh(r,/[, ]/):Uv(r,/[, ]/)}),o}else return},gl=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(ao,hs,Us)=>{const or=e[ao];if(or)return yh(or,/[, ]/,yh(or.toUpperCase(),/[, ]/));{let sa=xb[ao];return sa||(sa=Wv(hs,Us),xb[ao]=sa),sa}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",E=Zv(y);e.verify_html===!1&&(e.valid_elements="*[*]");const N=Ed(e.valid_styles),R=Ed(e.invalid_styles,"map"),L=Ed(e.valid_classes,"map"),Q=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),te=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),j=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ee=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ye="td th iframe video audio object script code",pe=b("non_empty_elements",ye+" pre",j),we=b("move_caret_before_on_enter_elements",ye+" table",j),De=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Xe=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",De),Ot=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),xt=b("transparent_elements","a ins del canvas map");ec("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ao=>{f[ao]=new RegExp("</"+ao+"[^>]*>","gi")});const Fe=ao=>new RegExp("^"+ao.replace(/([?+*])/g,".$1")+"$"),$e=ao=>{const hs=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Us=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,or=/[*?+]/;if(ao){const sa=Kc(ao,",");let ka,Fr;o["@"]&&(ka=o["@"].attributes,Fr=o["@"].attributesOrder);for(let Ka=0,Ju=sa.length;Ka<Ju;Ka++){let ii=hs.exec(sa[Ka]);if(ii){const Um=ii[1],ql=ii[2],nb=ii[3],ob=ii[5],Wm={},Jd=[],rc={attributes:Wm,attributesOrder:Jd};if(Um==="#"&&(rc.paddEmpty=!0),Um==="-"&&(rc.removeEmpty=!0),ii[4]==="!"&&(rc.removeEmptyAttrs=!0),ka&&(bt(ka,(Qu,Zm)=>{Wm[Zm]=Qu}),Fr&&Jd.push(...Fr)),ob){const Qu=Kc(ob,"|");for(let Zm=0,zi=Qu.length;Zm<zi;Zm++)if(ii=Us.exec(Qu[Zm]),ii){const ed={},zf=ii[1],Ei=ii[2].replace(/[\\:]:/g,":"),Qg=ii[3],jm=ii[4];if(zf==="!"&&(rc.attributesRequired=rc.attributesRequired||[],rc.attributesRequired.push(Ei),ed.required=!0),zf==="-"){delete Wm[Ei],Jd.splice(Mw(Jd,Ei),1);continue}if(Qg&&(Qg==="="&&(rc.attributesDefault=rc.attributesDefault||[],rc.attributesDefault.push({name:Ei,value:jm}),ed.defaultValue=jm),Qg==="~"&&(rc.attributesForced=rc.attributesForced||[],rc.attributesForced.push({name:Ei,value:jm}),ed.forcedValue=jm),Qg==="<"&&(ed.validValues=yh(jm,"?"))),or.test(Ei)){const Kl=ed;rc.attributePatterns=rc.attributePatterns||[],Kl.pattern=Fe(Ei),rc.attributePatterns.push(Kl)}else Wm[Ei]||Jd.push(Ei),Wm[Ei]=ed}}if(!ka&&ql==="@"&&(ka=Wm,Fr=Jd),nb&&(rc.outputName=ql,o[nb]=rc),or.test(ql)){const Qu=rc;Qu.pattern=Fe(ql),c.push(Qu)}else o[ql]=rc}}}},Gt=ao=>{c=[],xe(Rs(o),hs=>{delete o[hs]}),$e(ao),ec(E,(hs,Us)=>{r[Us]=hs.children})},gn=ao=>{const hs=/^(~)?(.+)$/;ao&&(delete xb.text_block_elements,delete xb.block_elements,ec(Kc(ao,","),Us=>{const or=hs.exec(Us);if(or){const sa=or[1]==="~",ka=sa?"span":"div",Fr=or[2];if(r[Fr]=r[ka],u[Fr]=ka,pe[Fr.toUpperCase()]={},pe[Fr]={},sa||(Xe[Fr.toUpperCase()]={},Xe[Fr]={}),!o[Fr]){let Ka=o[ka];Ka=nn({},Ka),delete Ka.removeEmptyAttrs,delete Ka.removeEmpty,o[Fr]=Ka}ec(r,(Ka,Ju)=>{Ka[ka]&&(r[Ju]=Ka=nn({},r[Ju]),Ka[Fr]=Ka[ka])})}}))},On=ao=>{const hs=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Iu[y],ao&&ec(Kc(ao,","),Us=>{const or=hs.exec(Us);if(or){const sa=or[1];let ka;sa?ka=r[or[2]]:ka=r[or[2]]={"#comment":{}},ka=r[or[2]],ec(Kc(or[3],"|"),Fr=>{sa==="-"?delete ka[Fr]:ka[Fr]={}})}})},fo=ao=>{const hs=o[ao];if(hs)return hs;let Us=c.length;for(;Us--;){const or=c[Us];if(or.pattern.test(ao))return or}};e.valid_elements?Gt(e.valid_elements):(ec(E,(ao,hs)=>{o[hs]={attributes:ao.attributes,attributesOrder:ao.attributesOrder},r[hs]=ao.children}),ec(Kc("strong/b em/i"),ao=>{const hs=Kc(ao,"/");o[hs[1]].outputName=hs[0]}),ec(Ot,(ao,hs)=>{o[hs]&&(e.padd_empty_block_inline_children&&(o[hs].paddInEmptyBlock=!0),o[hs].removeEmpty=!0)}),ec(Kc("ol ul blockquote a table tbody"),ao=>{o[ao]&&(o[ao].removeEmpty=!0)}),ec(Kc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),ao=>{o[ao].paddEmpty=!0}),ec(Kc("span"),ao=>{o[ao].removeEmptyAttrs=!0})),gn(e.custom_elements),On(e.valid_children),$e(e.extended_valid_elements),On("+ol[ul|ol],+ul[ul|ol]"),ec({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ao,hs)=>{o[hs]&&(o[hs].parentsRequired=Kc(ao))}),e.invalid_elements&&ec(Uv(e.invalid_elements),ao=>{o[ao]&&delete o[ao]}),fo("span")||$e("span[!data-mce-type|*]");const Vo=rt(N),Os=rt(R),nr=rt(L),pa=rt(ee),zc=rt(Xe),yc=rt(De),Ct=rt(Ot),dn=rt(Object.seal(j)),cs=rt(te),$t=rt(pe),Tn=rt(we),kn=rt(Q),It=rt(xt),Bo=rt(Object.seal(f)),Po=(ao,hs)=>{const Us=r[ao.toLowerCase()];return!!(Us&&Us[hs.toLowerCase()])},Mc=(ao,hs)=>{const Us=fo(ao);if(Us)if(hs){if(Us.attributes[hs])return!0;const or=Us.attributePatterns;if(or){let sa=or.length;for(;sa--;)if(or[sa].pattern.test(hs))return!0}}else return!0;return!1},Ar=rt(u);return{type:y,children:r,elements:o,getValidStyles:Vo,getValidClasses:nr,getBlockElements:zc,getInvalidStyles:Os,getVoidElements:dn,getTextBlockElements:yc,getTextInlineElements:Ct,getBoolAttrs:pa,getElementRule:fo,getSelfClosingElements:cs,getNonEmptyElements:$t,getMoveCaretBeforeOnEnterElements:Tn,getWhitespaceElements:kn,getTransparentElements:It,getSpecialElements:Bo,isValidChild:Po,isValid:Mc,getCustomElements:Ar,addValidElements:$e,setValidElements:Gt,addCustomElements:gn,addValidChildren:On}},Tb=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=la;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let R=0;R<E.length;R++)u[E[R]]=y+R,u[y+R]=E[R];const N={parse:R=>{const L={};let Q=!1;const te=e.url_converter,j=e.url_converter_scope||N,ee=(Fe,$e,Gt)=>{const gn=L[Fe+"-top"+$e];if(!gn)return;const On=L[Fe+"-right"+$e];if(!On)return;const fo=L[Fe+"-bottom"+$e];if(!fo)return;const Vo=L[Fe+"-left"+$e];if(!Vo)return;const Os=[gn,On,fo,Vo];let nr=Os.length-1;for(;nr--&&Os[nr]===Os[nr+1];);nr>-1&&Gt||(L[Fe+$e]=nr===-1?Os[0]:Os.join(" "),delete L[Fe+"-top"+$e],delete L[Fe+"-right"+$e],delete L[Fe+"-bottom"+$e],delete L[Fe+"-left"+$e])},ye=Fe=>{const $e=L[Fe];if(!$e)return;const Gt=$e.split(" ");let gn=Gt.length;for(;gn--;)if(Gt[gn]!==Gt[0])return!1;return L[Fe]=Gt[0],!0},pe=(Fe,$e,Gt,gn)=>{ye($e)&&ye(Gt)&&ye(gn)&&(L[Fe]=L[$e]+" "+L[Gt]+" "+L[gn],delete L[$e],delete L[Gt],delete L[gn])},we=Fe=>(Q=!0,u[Fe]),De=(Fe,$e)=>(Q&&(Fe=Fe.replace(/\uFEFF[0-9]/g,Gt=>u[Gt])),$e||(Fe=Fe.replace(/\\([\'\";:])/g,"$1")),Fe),Xe=Fe=>String.fromCharCode(parseInt(Fe.slice(1),16)),Ot=Fe=>Fe.replace(/\\[0-9a-f]+/gi,Xe),xt=(Fe,$e,Gt,gn,On,fo)=>{if(On=On||fo,On)return On=De(On),"'"+On.replace(/\'/g,"\\'")+"'";if($e=De($e||Gt||gn||""),!e.allow_script_urls){const Vo=$e.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Vo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Vo))return""}return te&&($e=te.call(j,$e,"style")),"url('"+$e.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,we).replace(/\"[^\"]+\"|\'[^\']+\'/g,$e=>$e.replace(/[;:]/g,we));let Fe;for(;Fe=r.exec(R);){r.lastIndex=Fe.index+Fe[0].length;let $e=Fe[1].replace(c,"").toLowerCase(),Gt=Fe[2].replace(c,"");if($e&&Gt){if($e=Ot($e),Gt=Ot(Gt),$e.indexOf(y)!==-1||$e.indexOf('"')!==-1||!e.allow_script_urls&&($e==="behavior"||/expression\s*\(|\/\*|\*\//.test(Gt)))continue;$e==="font-weight"&&Gt==="700"?Gt="bold":($e==="color"||$e==="background-color")&&(Gt=Gt.toLowerCase()),Gt=Gt.replace(o,xt),L[$e]=Q?De(Gt,!0):Gt}}ee("border","",!0),ee("border","-width"),ee("border","-color"),ee("border","-style"),ee("padding",""),ee("margin",""),pe("border","border-width","border-style","border-color"),L.border==="medium none"&&delete L.border,L["border-image"]==="none"&&delete L["border-image"]}return L},serialize:(R,L)=>{let Q="";const te=(ee,ye)=>{const pe=ye[ee];if(pe)for(let we=0,De=pe.length;we<De;we++){const Xe=pe[we],Ot=R[Xe];Ot&&(Q+=(Q.length>0?" ":"")+Xe+": "+Ot+";")}},j=(ee,ye)=>{if(!b||!ye)return!0;let pe=b["*"];return pe&&pe[ee]?!1:(pe=b[ye],!(pe&&pe[ee]))};return L&&f?(te("*",f),te(L,f)):bt(R,(ee,ye)=>{ee&&j(ye,L)&&(Q+=(Q.length>0?" ":"")+ye+": "+ee+";")}),Q}};return N},ug={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ok=e=>e instanceof Event||he(e.initEvent),Bw=e=>e.isDefaultPrevented===Qe||e.isDefaultPrevented===Se,Rp=e=>Pt(e.preventDefault)||ok(e),Ch=(e,n)=>{const o=n??{};for(const r in e)hn(ug,r)||(o[r]=e[r]);return Ze(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},wh=(e,n,o,r)=>{var c;const u=Ch(n,r);return u.type=e,Pt(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),Rp(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Qe,he(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Qe,he(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Qe,u.stopPropagation()},Bw(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Qe:Se,u.isPropagationStopped=u.cancelBubble===!0?Qe:Se,u.isImmediatePropagationStopped=Se)),u},dg="mce-data-",Pw=/^(?:mouse|contextmenu)|click/,Eb=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},mg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},kb=e=>Ze(e)&&Pw.test(e.type),Yi=(e,n)=>{const o=wh(e.type,e,document,n);if(kb(e)&&Vn(e.pageX)&&!Vn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},Ii=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{mg(e,"DOMContentLoaded",f),mg(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():Eb(e,"DOMContentLoaded",f),o.domLoaded||Eb(e,"load",f)};class bm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=dg+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=L=>{u.executeHandlers(Yi(L||b.event),E)};if(!n||ft(n)||Mi(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),c=c||n;const N=o.split(" ");let R=N.length;for(;R--;){let L=N[R],Q=y,te=!1,j=!1;if(L==="DOMContentLoaded"&&(L="ready"),u.domLoaded&&L==="ready"&&n.readyState==="complete"){r.call(c,Yi({type:L}));continue}!u.hasFocusIn&&(L==="focusin"||L==="focusout")&&(te=!0,j=L==="focusin"?"focus":"blur",Q=ee=>{const ye=Yi(ee||b.event);ye.type=ye.type==="focus"?"focusin":"focusout",u.executeHandlers(ye,E)}),f=u.events[E][L],f?L==="ready"&&u.domLoaded?r(Yi({type:L})):f.push({func:r,scope:c}):(u.events[E][L]=f=[{func:r,scope:c}],f.fakeName=j,f.capture=te,f.nativeHandler=Q,L==="ready"?Ii(n,Q,u):Eb(n,j||L,Q,te))}return n=f=null,r}unbind(n,o,r){if(!n||ft(n)||Mi(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],E=u[y];if(E){if(r){let N=E.length;for(;N--;)if(E[N].func===r){const R=E.nativeHandler,L=E.fakeName,Q=E.capture,te=E.slice(0,N).concat(E.slice(N+1));te.nativeHandler=R,te.fakeName=L,te.capture=Q,u[y]=te}}(!r||E.length===0)&&(delete u[y],mg(n,E.fakeName||y,E.nativeHandler,E.capture))}}}else bt(u,(f,b)=>{mg(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(hn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||ft(n)||Mi(n))return this;const c=Yi({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||ft(n)||Mi(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}bm.Event=new bm;const _b=et.each,$w=et.grep,Mp="data-mce-style",Lu=et.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ab=(e,n,o)=>{Pt(o)||o===""?Br(e,n):Gr(e,n,o)},Sh=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),kd=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&ft(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},jv=(e,n)=>{const o=Pc(n,"style"),r=e.serialize(e.parse(o),As(n));Ab(n,Mp,r)},sk=(e,n)=>Uo(e)?hn(Lu,n)?e+"":e+"px":e,Fw=(e,n,o)=>{const r=Sh(n);Pt(o)||o===""?Ja(e,r):cm(e,r,sk(o,r))},Gv=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const E=ae.fromDom(f);he(n.url_converter)&&Ze(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const N="data-mce-"+y;Ab(E,N,b),Ab(E,y,b)},get:(f,b)=>{const y=ae.fromDom(f);return Pc(y,"data-mce-"+b)||Pc(y,b)}},u={style:{set:(f,b)=>{const y=ae.fromDom(f);r&&Ab(y,Mp,b),Br(y,"style"),K(b)&&Kf(y,e.parse(b))},get:f=>{const b=ae.fromDom(f),y=Pc(b,Mp)||Pc(b,"style");return e.serialize(e.parse(y),As(b))}}};return r&&(u.href=u.src=c),u},br=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=_w.forElement(ae.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],N=n.schema?n.schema:gl({}),R=Tb({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),L=n.ownEvents?new bm:bm.Event,Q=N.getBlockElements(),te=Re=>K(Re)?hn(Q,Re):Ut(Re)&&(hn(Q,Re.nodeName)||fm(N,Re)),j=Re=>Re&&e&&K(Re)?e.getElementById(Re):Re,ee=Re=>{const Me=j(Re);return Ze(Me)?ae.fromDom(Me):null},ye=(Re,Me,Tt="")=>{let gt;const wn=ee(Re);if(Ze(wn)&&Hs(wn)){const $o=sb[Me];$o&&$o.get?gt=$o.get(wn.dom,Me):gt=Pc(wn,Me)}return Ze(gt)?gt:Tt},pe=Re=>{const Me=j(Re);return Pt(Me)?[]:Me.attributes},we=(Re,Me,Tt)=>{dn(Re,gt=>{if(Ut(gt)){const wn=ae.fromDom(gt),$o=Tt===""?null:Tt,lr=Pc(wn,Me),xr=sb[Me];xr&&xr.set?xr.set(wn.dom,$o,Me):Ab(wn,Me,$o),lr!==$o&&n.onSetAttrib&&n.onSetAttrib({attrElm:wn.dom,attrName:Me,attrValue:$o})}})},De=(Re,Me)=>Re.cloneNode(Me),Xe=()=>n.root_element||e.body,Ot=Re=>{const Me=uh(Re);return{x:Me.x,y:Me.y,w:Me.width,h:Me.height}},xt=(Re,Me)=>gm(e.body,j(Re),Me),Fe=(Re,Me,Tt)=>{dn(Re,gt=>{const wn=ae.fromDom(gt);Fw(wn,Me,Tt),n.update_styles&&jv(R,wn)})},$e=(Re,Me)=>{dn(Re,Tt=>{const gt=ae.fromDom(Tt);bt(Me,(wn,$o)=>{Fw(gt,$o,wn)}),n.update_styles&&jv(R,gt)})},Gt=(Re,Me,Tt)=>{const gt=j(Re);if(!(Pt(gt)||!Ut(gt)))return Tt?ll(ae.fromDom(gt),Sh(Me)):(Me=Me.replace(/-(\D)/g,(wn,$o)=>$o.toUpperCase()),Me==="float"&&(Me="cssFloat"),gt.style?gt.style[Me]:void 0)},gn=Re=>{const Me=j(Re);if(!Me)return{w:0,h:0};let Tt=Gt(Me,"width"),gt=Gt(Me,"height");return(!Tt||Tt.indexOf("px")===-1)&&(Tt="0"),(!gt||gt.indexOf("px")===-1)&&(gt="0"),{w:parseInt(Tt,10)||Me.offsetWidth||Me.clientWidth,h:parseInt(gt,10)||Me.offsetHeight||Me.clientHeight}},On=Re=>{const Me=j(Re),Tt=xt(Me),gt=gn(Me);return{x:Tt.x,y:Tt.y,w:gt.w,h:gt.h}},fo=(Re,Me)=>{if(!Re)return!1;const Tt=ut(Re)?Re:[Re];return wt(Tt,gt=>$c(ae.fromDom(gt),Me))},Vo=(Re,Me,Tt,gt)=>{const wn=[];let $o=j(Re);gt=gt===void 0;const lr=Tt||(Xe().nodeName!=="BODY"?Xe().parentNode:null);if(K(Me))if(Me==="*")Me=Ut;else{const xr=Me;Me=Wf=>fo(Wf,xr)}for(;$o&&!($o===lr||Pt($o.nodeType)||tf($o)||vd($o));){if(!Me||Me($o))if(gt)wn.push($o);else return[$o];$o=$o.parentNode}return gt?wn:null},Os=(Re,Me,Tt)=>{const gt=Vo(Re,Me,Tt,!1);return gt&&gt.length>0?gt[0]:null},nr=(Re,Me,Tt)=>{let gt=Me;if(Re){K(Me)&&(gt=wn=>fo(wn,Me));for(let wn=Re[Tt];wn;wn=wn[Tt])if(he(gt)&&gt(wn))return wn}return null},pa=(Re,Me)=>nr(Re,Me,"nextSibling"),zc=(Re,Me)=>nr(Re,Me,"previousSibling"),yc=Re=>he(Re.querySelectorAll),Ct=(Re,Me)=>{var Tt,gt;const wn=(gt=(Tt=j(Me))!==null&&Tt!==void 0?Tt:n.root_element)!==null&&gt!==void 0?gt:e;return yc(wn)?dr(wn.querySelectorAll(Re)):[]},dn=function(Re,Me,Tt){const gt=Tt??this;if(ut(Re)){const wn=[];return _b(Re,($o,lr)=>{const xr=j($o);xr&&wn.push(Me.call(gt,xr,lr))}),wn}else{const wn=j(Re);return wn?Me.call(gt,wn):!1}},cs=(Re,Me)=>{dn(Re,Tt=>{bt(Me,(gt,wn)=>{we(Tt,wn,gt)})})},$t=(Re,Me)=>{dn(Re,Tt=>{const gt=ae.fromDom(Tt);bd(gt,Me)})},Tn=(Re,Me,Tt,gt,wn)=>dn(Re,$o=>{const lr=K(Me)?e.createElement(Me):Me;return Ze(Tt)&&cs(lr,Tt),gt&&(!K(gt)&&gt.nodeType?lr.appendChild(gt):K(gt)&&$t(lr,gt)),wn?lr:$o.appendChild(lr)}),kn=(Re,Me,Tt)=>Tn(e.createElement(Re),Re,Me,Tt,!0),It=cf.decode,Bo=cf.encodeAllRaw,Po=(Re,Me,Tt="")=>{let gt="<"+Re;for(const wn in Me)Er(Me,wn)&&(gt+=" "+wn+'="'+Bo(Me[wn])+'"');return jo(Tt)&&hn(N.getVoidElements(),Re)?gt+" />":gt+">"+Tt+"</"+Re+">"},Mc=Re=>{const Me=e.createElement("div"),Tt=e.createDocumentFragment();Tt.appendChild(Me),Re&&(Me.innerHTML=Re);let gt;for(;gt=Me.firstChild;)Tt.appendChild(gt);return Tt.removeChild(Me),Tt},Ar=(Re,Me)=>dn(Re,Tt=>{const gt=ae.fromDom(Tt);return Me&&xe(za(gt),wn=>{xc(wn)&&wn.dom.length===0?Js(wn):xs(gt,wn)}),Js(gt),gt.dom}),ao=Re=>dn(Re,Me=>{const Tt=Me.attributes;for(let gt=Tt.length-1;gt>=0;gt--)Me.removeAttributeNode(Tt.item(gt))}),hs=Re=>R.parse(Re),Us=(Re,Me)=>R.serialize(Re,Me),or=Re=>{if(Qd!==br.DOM&&e===document){if(o[Re])return;o[Re]=!0}let Me=e.getElementById("mceDefaultStyles");if(!Me){Me=e.createElement("style"),Me.id="mceDefaultStyles",Me.type="text/css";const Tt=e.head;Tt.firstChild?Tt.insertBefore(Me,Tt.firstChild):Tt.appendChild(Me)}Me.styleSheet?Me.styleSheet.cssText+=Re:Me.appendChild(e.createTextNode(Re))},sa=Re=>{Re||(Re=""),xe(Re.split(","),Me=>{c[Me]=!0,y.load(Me).catch(Zt)})},ka=(Re,Me,Tt)=>{dn(Re,gt=>{if(Ut(gt)){const wn=ae.fromDom(gt),$o=Me.split(" ");xe($o,lr=>{Ze(Tt)?(Tt?Au:cd)(wn,lr):id(wn,lr)})}})},Fr=(Re,Me)=>{ka(Re,Me,!0)},Ka=(Re,Me)=>{ka(Re,Me,!1)},Ju=(Re,Me)=>{const Tt=ee(Re),gt=Me.split(" ");return Ze(Tt)&&Ss(gt,wn=>ld(Tt,wn))},ii=Re=>{dn(Re,Me=>Ja(ae.fromDom(Me),"display"))},Um=Re=>{dn(Re,Me=>cm(ae.fromDom(Me),"display","none"))},ql=Re=>{const Me=ee(Re);return Ze(Me)&&Vr(Ic(Me,"display"),"none")},nb=Re=>(Re||"mce_")+u++,ob=Re=>{const Me=ee(Re);return Ze(Me)?Ut(Me.dom)?Me.dom.outerHTML:Ro(Me):""},Wm=(Re,Me)=>{dn(Re,Tt=>{Ut(Tt)&&(Tt.outerHTML=Me)})},Jd=(Re,Me)=>{const Tt=j(Me);return dn(Re,gt=>{const wn=Tt==null?void 0:Tt.parentNode,$o=Tt==null?void 0:Tt.nextSibling;return wn&&($o?wn.insertBefore(gt,$o):wn.appendChild(gt)),gt})},rc=(Re,Me,Tt)=>dn(Me,gt=>{var wn;const $o=ut(Me)?Re.cloneNode(!0):Re;return Tt&&_b($w(gt.childNodes),lr=>{$o.appendChild(lr)}),(wn=gt.parentNode)===null||wn===void 0||wn.replaceChild($o,gt),gt}),Qu=(Re,Me)=>{if(Re.nodeName!==Me.toUpperCase()){const Tt=kn(Me);return _b(pe(Re),gt=>{we(Tt,gt.nodeName,ye(Re,gt.nodeName))}),rc(Tt,Re,!0),Tt}else return Re},Zm=(Re,Me)=>{let Tt=Re;for(;Tt;){let gt=Me;for(;gt&&Tt!==gt;)gt=gt.parentNode;if(Tt===gt)break;Tt=Tt.parentNode}return!Tt&&Re.ownerDocument?Re.ownerDocument.documentElement:Tt},zi=Re=>{if(Ut(Re)){const Me=Re.nodeName.toLowerCase()==="a"&&!ye(Re,"href")&&ye(Re,"id");if(ye(Re,"name")||ye(Re,"data-mce-bookmark")||Me)return!0}return!1},ed=(Re,Me)=>{let Tt=0;if(zi(Re))return!1;const gt=Re.firstChild;if(gt){const wn=new Ba(gt,Re),$o=N?N.getWhitespaceElements():{},lr=Me||(N?N.getNonEmptyElements():null);let xr=gt;do{if(Ut(xr)){const Wf=xr.getAttribute("data-mce-bogus");if(Wf){xr=wn.next(Wf==="all");continue}const Yl=xr.nodeName.toLowerCase();if(lr&&lr[Yl]){if(Yl==="br"){Tt++,xr=wn.next();continue}return!1}if(zi(xr))return!1}if(Mi(xr)||ft(xr)&&!$i(xr.data)||ft(xr)&&xr.parentNode&&$o[xr.parentNode.nodeName]&&$i(xr.data))return!1;xr=wn.next()}while(xr)}return Tt<=1},zf=()=>e.createRange(),Ei=(Re,Me,Tt)=>{let gt=zf(),wn,$o;if(Re&&Me&&Re.parentNode&&Me.parentNode){const lr=Re.parentNode;return gt.setStart(lr,kd(Re)),gt.setEnd(Me.parentNode,kd(Me)),wn=gt.extractContents(),gt=zf(),gt.setStart(Me.parentNode,kd(Me)+1),gt.setEnd(lr,kd(Re)+1),$o=gt.extractContents(),lr.insertBefore(Lv(Qd,wn),Re),Tt?lr.insertBefore(Tt,Re):lr.insertBefore(Me,Re),lr.insertBefore(Lv(Qd,$o),Re),Ar(Re),Tt||Me}else return},Qg=(Re,Me,Tt,gt)=>{if(ut(Re)){let wn=Re.length;const $o=[];for(;wn--;)$o[wn]=Qg(Re[wn],Me,Tt,gt);return $o}else return n.collect&&(Re===e||Re===r)&&E.push([Re,Me,Tt,gt]),L.bind(Re,Me,Tt,gt||Qd)},jm=(Re,Me,Tt)=>{if(ut(Re)){let gt=Re.length;const wn=[];for(;gt--;)wn[gt]=jm(Re[gt],Me,Tt);return wn}else{if(E.length>0&&(Re===e||Re===r)){let gt=E.length;for(;gt--;){const[wn,$o,lr]=E[gt];Re===wn&&(!Me||Me===$o)&&(!Tt||Tt===lr)&&L.unbind(wn,$o,lr)}}return L.unbind(Re,Me,Tt)}},Kl=(Re,Me,Tt)=>L.dispatch(Re,Me,Tt),Uf=(Re,Me,Tt)=>L.dispatch(Re,Me,Tt),fw=Re=>{if(Re&&Ut(Re)){const Me=Re.getAttribute("data-mce-contenteditable");return Me&&Me!=="inherit"?Me:Re.contentEditable!=="inherit"?Re.contentEditable:null}else return null},Qd={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:E,styles:R,schema:N,events:L,isBlock:te,root:null,clone:De,getRoot:Xe,getViewPort:Ot,getRect:On,getSize:gn,getParent:Os,getParents:Vo,get:j,getNext:pa,getPrev:zc,select:Ct,is:fo,add:Tn,create:kn,createHTML:Po,createFragment:Mc,remove:Ar,setStyle:Fe,getStyle:Gt,setStyles:$e,removeAllAttribs:ao,setAttrib:we,setAttribs:cs,getAttrib:ye,getPos:xt,parseStyle:hs,serializeStyle:Us,addStyle:or,loadCSS:sa,addClass:Fr,removeClass:Ka,hasClass:Ju,toggleClass:ka,show:ii,hide:Um,isHidden:ql,uniqueId:nb,setHTML:$t,getOuterHTML:ob,setOuterHTML:Wm,decode:It,encode:Bo,insertAfter:Jd,replace:rc,rename:Qu,findCommonAncestor:Zm,run:dn,getAttribs:pe,isEmpty:ed,createRng:zf,nodeIndex:kd,split:Ei,bind:Qg,unbind:jm,fire:Uf,dispatch:Kl,getContentEditable:fw,getContentEditableParent:Re=>{const Me=Xe();let Tt=null;for(let gt=Re;gt&&gt!==Me&&(Tt=fw(gt),Tt===null);gt=gt.parentNode);return Tt},isEditable:Re=>{if(Ze(Re)){const Me=Ut(Re)?Re:Re.parentElement,Tt=fw(Xe())==="true";return Ze(Me)&&To(ae.fromDom(Me),Tt)}else return!1},destroy:()=>{if(E.length>0){let Re=E.length;for(;Re--;){const[Me,Tt,gt]=E[Re];L.unbind(Me,Tt,gt)}}bt(c,(Re,Me)=>{y.unload(Me),delete c[Me]})},isChildOf:(Re,Me)=>Re===Me||Me.contains(Re),dumpRng:Re=>"startContainer: "+Re.startContainer.nodeName+", startOffset: "+Re.startOffset+", endContainer: "+Re.endContainer.nodeName+", endOffset: "+Re.endOffset},sb=Gv(R,n,rt(Qd));return Qd};br.DOM=br(document),br.nodeIndex=kd;const rk=br.DOM,Iw=0,ak=1,Ob=2,xh=3;class vm{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=rk;let u;const f=()=>{c.remove(E),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},E=c.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=et._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Ob}markDone(n){this.states[n]=Ob}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Iw),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,E)=>{Jo(o.scriptLoadedCallbacks,E).each(N=>{xe(N,R=>R[y](E))}),delete o.scriptLoadedCallbacks[E]},c=y=>{const E=Rt(y,N=>N.status==="rejected");return E.length>0?Promise.reject(Ir(E,({reason:N})=>ut(N)?N:[N])):Promise.resolve()},u=y=>Promise.allSettled(Ge(y,E=>o.states[E]===Ob?(r("resolve",E),Promise.resolve()):o.states[E]===xh?(r("reject",E),Promise.reject(E)):(o.states[E]=ak,o.loadScript(E).then(()=>{o.states[E]=Ob,r("resolve",E);const N=o.queue;return N.length>0?(o.queue=[],u(N).then(c)):Promise.resolve()},()=>(o.states[E]=xh,r("reject",E),Promise.reject(E)))))),f=y=>(o.loading=!0,u(y).then(E=>{o.loading=!1;const N=o.queueLoadedCallbacks.shift();return H.from(N).each(un),c(E)})),b=Oa(n);return o.loading?new Promise((y,E)=>{o.queueLoadedCallbacks.push(()=>f(b).then(y,E))}):f(b)}}vm.ScriptLoader=new vm;const Wa=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},ym=e=>ot(e)&&hn(e,"raw"),qv=e=>ut(e)&&e.length>1,Za={},Kv=Wa("en"),Db=()=>Jo(Za,Kv.get()),Hu={getData:()=>io(Za,e=>({...e})),setCode:e=>{e&&Kv.set(e)},getCode:()=>Kv.get(),add:(e,n)=>{let o=Za[e];o||(Za[e]=o={}),bt(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=Db().getOr({}),o=f=>he(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return Jo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(ym(e))return o(e.raw);if(qv(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,E)=>hn(f,E)?o(f[E]):y);return u(b)}return u(c(e))},isRtl:()=>Db().bind(e=>Jo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>hn(Za,e)},$s=()=>{const e=[],n={},o={},r=[],c=(j,ee)=>{const ye=Rt(r,pe=>pe.name===j&&pe.state===ee);xe(ye,pe=>pe.resolve())},u=j=>hn(n,j),f=j=>hn(o,j),b=j=>{if(o[j])return o[j].instance},y=(j,ee)=>{const ye=Hu.getCode(),pe=","+(ee||"")+",";!ye||ee&&pe.indexOf(","+ye+",")===-1||vm.ScriptLoader.add(n[j]+"/langs/"+ye+".js")},E=(j,ee)=>{$s.languageLoad!==!1&&(u(j)?y(j,ee):te(j,"loaded").then(()=>y(j,ee)))},N=(j,ee)=>(e.push(ee),o[j]={instance:ee},c(j,"added"),ee),R=j=>{delete n[j],delete o[j]},L=(j,ee)=>K(ee)?K(j)?{prefix:"",resource:ee,suffix:""}:{prefix:j.prefix,resource:ee,suffix:j.suffix}:ee,Q=(j,ee)=>{if(n[j])return Promise.resolve();let ye=K(ee)?ee:ee.prefix+ee.resource+ee.suffix;ye.indexOf("/")!==0&&ye.indexOf("://")===-1&&(ye=$s.baseURL+"/"+ye),n[j]=ye.substring(0,ye.lastIndexOf("/"));const pe=()=>(c(j,"loaded"),Promise.resolve());return o[j]?pe():vm.ScriptLoader.add(ye).then(pe)},te=(j,ee="added")=>ee==="added"&&f(j)||ee==="loaded"&&u(j)?Promise.resolve():new Promise(ye=>{r.push({name:j,state:ee,resolve:ye})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:N,remove:R,createUrl:L,load:Q,waitFor:te}};$s.languageLoad=!0,$s.baseURL="",$s.PluginManager=$s(),$s.ThemeManager=$s(),$s.ModelManager=$s();const Vw=e=>{const n=Wa(H.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(H.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(H.some(b))}}},da=e=>{const n=Wa(H.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(H.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(H.some(setInterval(b,e)))}}},tc=()=>{const e=Vw(Zt);return{...e,on:o=>e.get().each(o)}},Nl=(e,n)=>{let o=null;return{cancel:()=>{G(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{G(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},vi=(e,n)=>{let o=null;const r=()=>{G(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},fg=rt("mce-annotation"),Th=rt("data-mce-annotation"),Cm=rt("data-mce-annotation-uid"),hl=rt("data-mce-annotation-active"),lu=rt("data-mce-annotation-classes"),Eh=rt("data-mce-annotation-attrs"),Np=e=>n=>ys(n,e),Yv=(e,n)=>{const o=e.selection.getRng(),r=ae.fromDom(o.startContainer),c=ae.fromDom(e.getBody()),u=n.fold(()=>"."+fg(),y=>`[${Th()}="${y}"]`),f=md(r,o.startOffset).getOr(r);return En(f,u,Np(c)).bind(y=>ei(y,`${Cm()}`).bind(E=>ei(y,`${Th()}`).map(N=>{const R=kh(e,E);return{uid:E,name:N,elements:R}})))},zw=e=>Hs(e)&&ld(e,fg()),Uw=(e,n)=>Xa(e,"data-mce-bogus")||mh(e,'[data-mce-bogus="all"]',Np(n)),kh=(e,n)=>{const o=ae.fromDom(e.getBody()),r=Ec(o,`[${Cm()}="${n}"]`);return Rt(r,c=>!Uw(c,o))},Xv=(e,n)=>{const o=ae.fromDom(e.getBody()),r=Ec(o,`[${Th()}="${n}"]`),c={};return xe(r,u=>{if(!Uw(u,o)){const f=Pc(u,Cm()),b=Jo(c,f).getOr([]);c[f]=b.concat([u])}}),c},ck=(e,n)=>{const o=Wa({}),r=()=>({listeners:[],previous:tc()}),c=(R,L)=>{u(R,Q=>(L(Q),Q))},u=(R,L)=>{const Q=o.get(),te=Jo(Q,R).getOrThunk(r),j=L(te);Q[R]=j,o.set(Q)},f=(R,L,Q)=>{c(R,te=>{xe(te.listeners,j=>j(!0,R,{uid:L,nodes:Ge(Q,ee=>ee.dom)}))})},b=R=>{c(R,L=>{xe(L.listeners,Q=>Q(!1,R))})},y=(R,L)=>{xe(kh(e,R),Q=>{L?Gr(Q,hl(),"true"):Br(Q,hl())})},E=vi(()=>{const R=ls(n.getNames());xe(R,L=>{u(L,Q=>{const te=Q.previous.get();return Yv(e,H.some(L)).fold(()=>{te.each(j=>{b(L),Q.previous.clear(),y(j,!1)})},({uid:j,name:ee,elements:ye})=>{Vr(te,j)||(te.each(pe=>y(pe,!1)),f(ee,j,ye),Q.previous.set(j),y(j,!0))}),{previous:Q.previous,listeners:Q.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(R,L)=>{u(R,Q=>({previous:Q.previous,listeners:Q.listeners.concat([L])}))}}},ik=(e,n)=>{const o=Th(),r=u=>H.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(Cm(),null),u.attr(Th(),null),u.attr(hl(),null);const y=H.from(u.attr(Eh())).map(L=>L.split(",")).getOr([]),E=H.from(u.attr(lu())).map(L=>L.split(",")).getOr([]);xe(y,L=>u.attr(L,null));const N=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=Uc(N,[fg()].concat(E));u.attr("class",R.length>0?R.join(" "):null),u.attr(lu(),null),u.attr(Eh(),null)};e.serializer.addTempAttr(hl()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},Ww=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Jo(e,c).map(u=>u.settings),getNames:()=>Rs(e)}};let Zw=0;const Jv=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Zw++,e+"_"+r+Zw+String(o)},jw=(e,n)=>{xe(n,o=>{Au(e,o)})},lk=(e,n)=>{xe(n,o=>{cd(e,o)})},Qv=(e,n)=>ae.fromDom(e.dom.cloneNode(n)),gg=e=>Qv(e,!1),ey=e=>Qv(e,!0),uk=(e,n)=>{const o=ae.fromTag(n),r=nm(e);return lc(o,r),o},dk=(e,n)=>{const o=uk(e,n);Ru(e,o);const r=za(e);return Mu(o,r),Js(e),o},Gw=(e,n,o=Se)=>{const r=new Ba(e,n),c=u=>{let f;do f=r[u]();while(f&&!ft(f)&&!o(f));return H.from(f).filter(ft)};return{current:()=>H.from(r.current()).filter(ft),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},kr=(e,n)=>{const o=n||(f=>e.isBlock(f)||Pr(f)||Ts(f)),r=(f,b,y,E)=>{if(ft(f)){const N=E(f,b,f.data);if(N!==-1)return H.some({container:f,offset:N})}return y().bind(N=>r(N.container,N.offset,y,E))};return{backwards:(f,b,y,E)=>{const N=Gw(f,E??e.getRoot(),o);return r(f,b,()=>N.prev().map(R=>({container:R,offset:R.length})),y).getOrNull()},forwards:(f,b,y,E)=>{const N=Gw(f,E??e.getRoot(),o);return r(f,b,()=>N.next().map(R=>({container:R,offset:0})),y).getOrNull()}}},df=Math.round,hg=e=>e?{left:df(e.left),top:df(e.top),bottom:df(e.bottom),right:df(e.right),width:df(e.width),height:df(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},qw=(e,n)=>(e=hg(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Mb=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Yc=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Li=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Yc(n.top-e.bottom,e,n)},pg=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Yc(n.bottom-e.top,e,n),Nb=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,ty=e=>$n(e,(n,o)=>n.fold(()=>H.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return H.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),H.none()),Kw=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},Yw=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Xw=(e,n,o)=>Math.min(Math.max(e,n),o),uu=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},wm=(e,n)=>{if(Ut(e)&&e.hasChildNodes()){const o=e.childNodes,r=Xw(n,0,o.length-1);return o[r]}else return e},$r=(e,n)=>{if(!(n<0&&Ut(e)&&e.hasChildNodes()))return wm(e,n)},_d=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Vu=e=>K(e)&&e.charCodeAt(0)>=768&&_d.test(e),mk=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},Jw=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},ny=Ut,bg=bi,oy=Qf("display","block table"),_h=Qf("float","left right"),vg=Jw(ny,bg,po(_h)),fk=po(Qf("white-space","pre pre-line pre-wrap")),Bp=ft,Pp=Pr,sy=br.nodeIndex,Bb=$r,$p=e=>e?e.createRange():br.DOM.createRng(),ry=e=>K(e)&&/[\r\n\t ]/.test(e),mf=e=>!!e.setStart&&!!e.setEnd,Ah=e=>{const n=e.startContainer,o=e.startOffset;if(ry(e.toString())&&fk(n.parentNode)&&ft(n)){const r=n.data;if(ry(r[o-1])||ry(r[o+1]))return!0}return!1},Qw=e=>{const n=e.ownerDocument,o=$p(n),r=n.createTextNode(Vs),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=hg(o.getBoundingClientRect());return c.removeChild(r),u},eS=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&ft(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),zu(u)}else return null},tS=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,zu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=hg(r[0]):o=hg(e.getBoundingClientRect()),!mf(e)&&Pp(e)&&tS(o)?Qw(e):tS(o)&&mf(e)&&(n=eS(e))!==null&&n!==void 0?n:o},Bl=(e,n)=>{const o=qw(e,n);return o.width=1,o.right=o.left+1,o},Fp=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Mb(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=$p(f.ownerDocument);if(b<f.data.length){if(Vu(f.data[b]))return;if(Vu(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!Ah(y))){o(Bl(zu(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),Ah(y)||o(Bl(zu(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),Ah(y)||o(Bl(zu(y),!0)))},c=e.container(),u=e.offset();if(Bp(c))return r(c,u),n;if(ny(c))if(e.isAtEnd()){const f=Bb(c,u);Bp(f)&&r(f,f.data.length),vg(f)&&!Pp(f)&&o(Bl(zu(f),!1))}else{const f=Bb(c,u);if(Bp(f)&&r(f,0),vg(f)&&e.isAtEnd())return o(Bl(zu(f),!1)),n;const b=Bb(e.container(),e.offset()-1);vg(b)&&!Pp(b)&&(oy(b)||oy(f)||!vg(f))&&o(Bl(zu(b),!1)),vg(f)&&o(Bl(zu(f),!0))}return n},Ee=(e,n,o)=>{const r=()=>(Bp(e),n===0),c=()=>Bp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const N=$p(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},f=()=>(o||(o=Fp(Ee(e,n))),o),b=()=>f().length>0,y=N=>N&&e===N.container()&&n===N.offset(),E=N=>Bb(e,N?n-1:n);return{container:rt(e),offset:rt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:E}};Ee.fromRangeStart=e=>Ee(e.startContainer,e.startOffset),Ee.fromRangeEnd=e=>Ee(e.endContainer,e.endOffset),Ee.after=e=>Ee(e.parentNode,sy(e)+1),Ee.before=e=>Ee(e.parentNode,sy(e)),Ee.isAbove=(e,n)=>ta(Xo(n.getClientRects()),Ds(e.getClientRects()),Li).getOr(!1),Ee.isBelow=(e,n)=>ta(Ds(n.getClientRects()),Xo(e.getClientRects()),pg).getOr(!1),Ee.isAtStart=e=>e?e.isAtStart():!1,Ee.isAtEnd=e=>e?e.isAtEnd():!1,Ee.isTextPosition=e=>e?ft(e.container()):!1,Ee.isElementPosition=e=>!Ee.isTextPosition(e);const _r=(e,n)=>{ft(n)&&n.data.length===0&&e.remove(n)},yg=(e,n,o)=>{n.insertNode(o),_r(e,o.previousSibling),_r(e,o.nextSibling)},ay=(e,n,o)=>{const r=H.from(o.firstChild),c=H.from(o.lastChild);n.insertNode(o),r.each(u=>_r(e,u.previousSibling)),c.each(u=>_r(e,u.nextSibling))},ir=(e,n,o)=>{vd(o)?ay(e,n,o):yg(e,n,o)},du=ft,Ip=gi,nc=br.nodeIndex,Sm=e=>{const n=e.parentNode;return Ip(n)?Sm(n):n},cy=e=>e?Ie(e.childNodes,(n,o)=>(Ip(o)&&o.nodeName!=="BR"?n=n.concat(cy(o)):n.push(o),n),[]):[],gk=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&du(o);)n+=o.data.length;return n},iy=e=>n=>e===n,Lp=e=>{let n,o;n=cy(Sm(e)),o=Ne(n,iy(e),e),n=n.slice(0,o+1);const r=Ie(n,(c,u,f)=>(du(u)&&du(n[f-1])&&c++,c),0);return n=de(n,oi([e.nodeName])),o=Ne(n,iy(e),e),o-r},Cg=e=>(du(e)?"text()":e.nodeName.toLowerCase())+"["+Lp(e)+"]",ly=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},Pb=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(du(r))u=gk(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(Cg(r));let f=ly(e,r);return f=de(f,po(gi)),o=o.concat(wr(f,b=>Cg(b))),o.reverse().join("/")+","+u},yi=(e,n,o)=>{let r=cy(e);return r=de(r,(c,u)=>!du(c)||!du(r[u-1])),r=de(r,oi([n])),r[o]},Hp=(e,n)=>{let o=e,r=0;for(;du(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!du(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return du(e)&&n>e.data.length&&(n=e.data.length),Ee(e,n)},uy=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Ie(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),yi(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!du(u)&&u.parentNode){let f;return c==="after"?f=nc(u)+1:f=nc(u),Ee(u.parentNode,f)}return Hp(u,parseInt(c,10))},Vp=Ts,Oh=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&ft(c);c=c.previousSibling)r+=e(c.data).length;return r},Xi=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(ft(u))b.push(o?Oh(n,u,f):f);else{let E=0;const N=u.childNodes;f>=N.length&&N.length&&(E=1,f=Math.max(0,N.length-1)),b.push(e.nodeIndex(N[f],o)+E)}for(let E=u;E&&E!==y;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},hk=(e,n,o,r)=>{const c=n.dom,u=Xi(c,e,o,r,!0),f=n.isForward(),b=bh(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=Xi(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},dc=(e,n,o)=>{let r=0;return et.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},nS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ut(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},xm=e=>(nS(e,!0),nS(e,!1),e),zp=(e,n)=>{if(Ut(e)&&(e=wm(e,n),Vp(e)))return e;if(qo(e)){ft(e)&&no(e)&&(e=e.parentNode);let o=e.previousSibling;if(Vp(o)||(o=e.nextSibling,Vp(o)))return o}},oS=e=>zp(e.startContainer,e.startOffset)||zp(e.endContainer,e.endOffset),dy=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Vp(r)){const f=r.nodeName;return{name:f,index:dc(o.dom,f,r)}}const u=oS(c);if(u){const f=u.tagName;return{name:f,index:dc(o.dom,f,u)}}return hk(e,o,n,c)},my=e=>{const n=e.getRng();return{start:Pb(e.dom.getRoot(),Ee.fromRangeStart(n)),end:Pb(e.dom.getRoot(),Ee.fromRangeEnd(n)),forward:e.isForward()}},fy=e=>({rng:e.getRng(),forward:e.isForward()}),gy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},sS=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:dc(o,b,f)};const E=xm(r.cloneRange());if(!u){E.collapse(!1);const R=gy(o,c+"_end",n);ir(o,E,R)}r=xm(r),r.collapse(!0);const N=gy(o,c+"_start",n);return ir(o,r,N),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},pk=(e,n,o=!1)=>n===2?dy(dt,o,e):n===3?my(e):n?fy(e):sS(e,!1),mc=qe(dy,ko,!0),ja=e=>{const n=u=>u(e),o=rt(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Qe,isError:Se,map:u=>Kr.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>H.some(e)};return c},Ci=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Se,isError:Qe,map:n,mapError:r=>Kr.error(r(e)),bind:n,exists:Se,forall:Qe,getOr:ko,or:ko,getOrThunk:pt,orThunk:pt,getOrDie:os(String(e)),each:Zt,toOptional:H.none};return o},Kr={value:ja,error:Ci,fromOption:(e,n)=>e.fold(()=>Ci(n),ja)},mu={generate:e=>{if(!ut(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return xe(e,(r,c)=>{const u=Rs(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ut(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const E=y.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,y)},match:R=>{const L=Rs(R);if(n.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+L.join(","));if(!Ss(n,te=>Ue(L,te)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,y)},log:R=>{console.log(R,{constructors:n,constructor:f,params:y})}}}}),o}};mu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const hy=e=>{const n=[],o=[];return xe(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},rS=e=>e.type==="inline-command"||e.type==="inline-format",$b=e=>e.type==="block-command"||e.type==="block-format",Fb=e=>{const n=r=>Kr.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(ut(e.format)){if(!Ss(e.format,K))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(K(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return Kr.value(c(f))}else return e.cmd!==void 0?K(e.cmd)?Kr.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!ot(e))return n("Raw pattern is not an object");if(!K(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!K(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?K(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Kr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},Ib=e=>Rt(e,$b),Up=e=>Rt(e,rS),Lb=(e,n)=>({inlinePatterns:Up(e),blockPatterns:Ib(e),dynamicPatternsLookup:n}),py=e=>{const n=hy(Ge(e,Fb));return xe(n.errors,o=>console.error(o.message,o.pattern)),n.values},BO=e=>n=>{const o=e(n);return py(o)},Hb=Do().deviceType,by=Hb.isTouch(),Vb=br.DOM,vy=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return $n(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Da(u)]=Da(f),o},{})},aS=e=>ct(e,RegExp),sn=e=>n=>n.options.get(e),yy=e=>K(e)||ot(e),cS=(e,n="")=>o=>{const r=K(o);if(r)if(o.indexOf("=")!==-1){const c=vy(o);return{value:Jo(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},iS=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:cS(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:cS(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=K(o)&&Rn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Ue(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>ht(o)?{valid:!0,value:o}:K(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||K(o)||Ln(o,K);return r?K(o)?{value:Ge(o.split(","),Da),valid:r}:ut(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ky(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=K(o)||Ln(o,K);return r?{value:ut(o)?o:Ge(o.split(","),Da),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=ht(o)||K(o);return r?o===!1||Hb.isiPhone()||Hb.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!by}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||K(o)||he(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||K(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:yy}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:yy}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:yy}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>K(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Ln(o,ot)||o===!1?{value:py(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>he(o)?{value:BO(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Ln(o,aS)?{value:o,valid:!0}:aS(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Hu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Vb.getAttrib(e.getElement(),"placeholder")})})},yt=sn("iframe_attrs"),bk=sn("doctype"),fc=sn("document_base_url"),vk=sn("body_id"),lS=sn("body_class"),uS=sn("content_security_policy"),Pl=sn("br_in_pre"),$l=sn("forced_root_block"),Wp=sn("forced_root_block_attrs"),fu=sn("newline_behavior"),Cy=sn("br_newline_selector"),Zp=sn("no_newline_selector"),Ad=sn("keep_styles"),Uu=sn("end_container_on_empty_block"),zb=sn("automatic_uploads"),Fl=sn("images_reuse_filename"),yk=sn("images_replace_blob_uris"),Ub=sn("icons"),Wb=sn("icons_url"),ff=sn("images_upload_url"),dS=sn("images_upload_base_path"),wy=sn("images_upload_credentials"),Ck=sn("images_upload_handler"),mS=sn("content_css_cors"),Dh=sn("referrer_policy"),gc=sn("language"),wk=sn("language_url"),wg=sn("indent_use_margin"),fS=sn("indentation"),Zb=sn("content_css"),Sk=sn("content_style"),Sy=sn("font_css"),xk=sn("directionality"),jp=sn("inline_boundaries_selector"),gS=sn("object_resizing"),hS=sn("resize_img_proportional"),xy=sn("placeholder"),Ty=sn("event_root"),pS=sn("service_message"),Od=sn("theme"),jb=sn("theme_url"),Il=sn("model"),Qs=sn("model_url"),Rh=sn("inline_boundaries"),ri=sn("formats"),Ey=sn("preview_styles"),bS=sn("format_empty_lines"),vS=sn("format_noneditable_selector"),Gp=sn("custom_ui_selector"),ky=sn("inline"),yS=sn("hidden_input"),CS=sn("submit_patch"),Tk=sn("add_form_submit_trigger"),Ek=sn("add_unload_trigger"),kk=sn("custom_undo_redo_levels"),_k=sn("disable_nodechange"),Mh=sn("readonly"),_y=sn("content_css_cors"),Ay=sn("plugins"),Sg=sn("external_plugins"),Ak=sn("block_unsupported_drop"),Ok=sn("visual"),Dk=sn("visual_table_class"),Oy=sn("visual_anchor_class"),wS=sn("iframe_aria_text"),xg=sn("setup"),SS=sn("init_instance_callback"),Rk=sn("urlconverter_callback"),Mk=sn("auto_focus"),Nk=sn("browser_spellcheck"),Nh=sn("protect"),Gb=sn("paste_block_drop"),Tg=sn("paste_data_images"),qb=sn("paste_preprocess"),xS=sn("paste_postprocess"),Dd=sn("paste_webkit_styles"),Kb=sn("paste_remove_styles_if_webkit"),TS=sn("paste_merge_formats"),Wu=sn("smart_paste"),gf=sn("paste_as_text"),Dy=sn("paste_tab_spaces"),ES=sn("allow_html_data_urls"),Bk=sn("text_patterns"),Pk=sn("text_patterns_lookup"),Ry=sn("noneditable_class"),$k=sn("editable_class"),Fk=sn("noneditable_regexp"),kS=sn("preserve_cdata"),_S=sn("highlight_on_focus"),Yb=sn("xss_sanitization"),Ik=e=>e.options.isSet("text_patterns_lookup"),Lk=e=>et.explode(e.options.get("font_size_style_values")),Hk=e=>et.explode(e.options.get("font_size_classes")),AS=e=>e.options.get("encoding")==="xml",My=e=>et.explode(e.options.get("images_file_types")),OS=sn("table_tab_navigation"),Vk=Ut,DS=ft,qp=e=>{const n=e.parentNode;n&&n.removeChild(e)},Ny=e=>{const n=dt(e);return{count:e.length-n.length,text:n}},By=e=>{let n;for(;(n=e.data.lastIndexOf(ie))!==-1;)e.deleteData(n,1)},Bh=(e,n)=>(Eg(e),n),Xb=(e,n)=>{const o=Ny(e.data.substr(0,n.offset())),r=Ny(e.data.substr(n.offset()));return(o.text+r.text).length>0?(By(e),Ee(e,n.offset()-o.count)):n},Py=(e,n)=>{const o=n.container(),r=Ys(dr(o.childNodes),e).map(c=>c<n.offset()?Ee(o,n.offset()-1):n).getOr(n);return Eg(e),r},RS=(e,n)=>DS(e)&&n.container()===e?Xb(e,n):Bh(e,n),MS=(e,n)=>n.container()===e.parentNode?Py(e,n):Bh(e,n),NS=(e,n)=>Ee.isTextPosition(n)?RS(e,n):MS(e,n),Eg=e=>{Vk(e)&&qo(e)&&(pr(e)?e.removeAttribute("data-mce-caret"):qp(e)),DS(e)&&(By(e),e.data.length===0&&qp(e))},BS=Ts,Kp=ia,zk=_c,$y="*[contentEditable=false],video,audio,embed,object",PS=(e,n,o)=>{const r=qw(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Uk=e=>{var n,o;const r=Ec(ae.fromDom(e),$y);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(Cd(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,um(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},Wk=(e,n,o,r)=>{const c=tc();let u,f;const b=$l(e),y=e.dom,E=(j,ee)=>{let ye;if(N(),zk(ee))return null;if(o(ee)){const pe=au(b,ee,j),we=PS(n,ee,j);y.setStyle(pe,"top",we.top),f=pe;const De=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(De,{...we}),y.add(n,De),c.set({caret:De,element:ee,before:j}),j&&y.addClass(De,"mce-visual-caret-before"),R(),ye=ee.ownerDocument.createRange(),ye.setStart(pe,0),ye.setEnd(pe,0)}else return f=Bi(ee,j),ye=ee.ownerDocument.createRange(),Yp(f.nextSibling)?(ye.setStart(f,0),ye.setEnd(f,0)):(ye.setStart(f,1),ye.setEnd(f,1)),ye;return ye},N=()=>{Uk(n),f&&(Eg(f),f=null),c.on(j=>{y.remove(j.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=setInterval(()=>{c.on(j=>{r()?y.toggleClass(j.caret,"mce-visual-caret-hidden"):y.addClass(j.caret,"mce-visual-caret-hidden")})},500)};return{show:E,hide:N,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(j=>{const ee=PS(n,j.element,j.before);y.setStyles(j.caret,{...ee})})},destroy:()=>clearInterval(u)}},Jb=()=>es.browser.isFirefox(),Yp=e=>BS(e)||Kp(e),Tm=e=>(Yp(e)||Wr(e)&&Jb())&&sm(ae.fromDom(e)).exists(To),Zk=Bs,Fy=Ts,$S=ia,Xc=Qf("display","block table table-cell table-caption list-item"),FS=qo,kg=no,jk=Ut,Xp=ft,IS=bi,Ph=e=>e>0,_g=e=>e<0,Jp=(e,n)=>{let o;for(;o=e(n);)if(!kg(o))return o;return null},hf=(e,n,o,r,c)=>{const u=new Ba(e,r),f=Fy(e)||kg(e);let b;if(_g(n)){if(f&&(b=Jp(u.prev.bind(u),!0),o(b)))return b;for(;b=Jp(u.prev.bind(u),c);)if(o(b))return b}if(Ph(n)){if(f&&(b=Jp(u.next.bind(u),!0),o(b)))return b;for(;b=Jp(u.next.bind(u),c);)if(o(b))return b}return null},Gk=(e,n)=>{const o=c=>Zk(c.dom),r=c=>c.dom===n;return ar(ae.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Ga=(e,n)=>{for(;e&&e!==n;){if(Xc(e))return e;e=e.parentNode}return null},pl=(e,n,o)=>Ga(e.container(),o)===Ga(n.container(),o),Qb=(e,n)=>{if(!n)return H.none();const o=n.container(),r=n.offset();return jk(o)?H.from(o.childNodes[r+e]):H.none()},LS=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},HS=(e,n,o)=>Ga(n,e)===Ga(o,e),Iy=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&FS(u)&&(u=u[r]),Fy(u)||$S(u)){if(HS(n,u,c))return u;break}if(IS(u))break;c=c.parentNode}return null},Ag=qe(LS,!0),Qp=qe(LS,!1),Og=(e,n,o)=>{let r;const c=qe(Iy,!0,n),u=qe(Iy,!1,n),f=o.startContainer,b=o.startOffset;if(no(f)){const y=Xp(f)?f.parentNode:f,E=y.getAttribute("data-mce-caret");if(E==="before"&&(r=y.nextSibling,Tm(r)))return Ag(r);if(E==="after"&&(r=y.previousSibling,Tm(r)))return Qp(r)}if(!o.collapsed)return o;if(ft(f)){if(FS(f)){if(e===1){if(r=u(f),r)return Ag(r);if(r=c(f),r)return Qp(r)}if(e===-1){if(r=c(f),r)return Qp(r);if(r=u(f),r)return Ag(r)}return o}if(Cd(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Ag(r):o;if(um(f)&&b<=1)return e===-1&&(r=c(f),r)?Qp(r):o;if(b===f.data.length)return r=u(f),r?Ag(r):o;if(b===0)return r=c(f),r?Qp(r):o}return o},PO=(e,n)=>Qb(e?0:-1,n).filter(Fy),$h=(e,n,o)=>{const r=Og(e,n,o);return e===-1?Ee.fromRangeStart(r):Ee.fromRangeEnd(r)},e1=e=>H.from(e.getNode()).map(ae.fromDom),Dg=e=>H.from(e.getNode(!0)).map(ae.fromDom),Ly=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Fh=(e,n)=>{const o=pl(e,n);return!o&&Pr(e.getNode())?!0:o};var hc;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(hc||(hc={}));const Hy=Ts,Zu=ft,Rd=Ut,pf=Pr,Rg=bi,e0=Ov,t0=Pi,qk=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},n0=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,t1=(e,n)=>{if(Ph(e)){if(Rg(n.previousSibling)&&!Zu(n.previousSibling))return Ee.before(n);if(Zu(n))return Ee(n,0)}if(_g(e)){if(Rg(n.nextSibling)&&!Zu(n.nextSibling))return Ee.after(n);if(Zu(n))return Ee(n,n.data.length)}return _g(e)?pf(n)?Ee.before(n):Ee.after(n):Ee.before(n)},VS=(e,n)=>{const o=n.nextSibling;return o&&Rg(o)?Zu(o)?Ee(o,0):Ee.before(o):o0(hc.Forwards,Ee.after(n),e)},o0=(e,n,o)=>{let r,c,u,f;if(!Rd(o)||!n)return null;if(n.isEqual(Ee.after(o))&&o.lastChild){if(f=Ee.after(o.lastChild),_g(e)&&Rg(o.lastChild)&&Rd(o.lastChild))return pf(o.lastChild)?Ee.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Zu(b)){if(_g(e)&&y>0)return Ee(b,--y);if(Ph(e)&&y<b.length)return Ee(b,++y);r=b}else{if(_g(e)&&y>0&&(c=n0(b,y-1),Rg(c)))return!e0(c)&&(u=hf(c,e,t0,c),u)?Zu(u)?Ee(u,u.data.length):Ee.after(u):Zu(c)?Ee(c,c.data.length):Ee.before(c);if(Ph(e)&&y<b.childNodes.length&&(c=n0(b,y),Rg(c)))return pf(c)?VS(o,c):!e0(c)&&(u=hf(c,e,t0,c),u)?Zu(u)?Ee(u,0):Ee.before(u):Zu(c)?Ee(c,0):Ee.after(c);r=c||f.getNode()}if(r&&(Ph(e)&&f.isAtEnd()||_g(e)&&f.isAtStart())&&(r=hf(r,e,Qe,o,!0),t0(r,o)))return t1(e,r);c=r&&hf(r,e,t0,o);const E=Yt(Rt(qk(b,o),Hy));return E&&(!c||!E.contains(c))?(Ph(e)?f=Ee.after(E):f=Ee.before(E),f):c?t1(e,c):null},gu=e=>({next:n=>o0(hc.Forwards,n,e),prev:n=>o0(hc.Backwards,n,e)}),Kk=(e,n,o)=>{const r=e?Ee.before(o):Ee.after(o);return Ll(e,n,r)},Yk=e=>Pr(e)?Ee.before(e):Ee.after(e),Vy=e=>Ee.isTextPosition(e)?e.offset()===0:bi(e.getNode()),zy=e=>{if(Ee.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return bi(e.getNode(!0))},n1=(e,n)=>!Ee.isTextPosition(e)&&!Ee.isTextPosition(n)&&e.getNode()===n.getNode(!0),zS=e=>!Ee.isTextPosition(e)&&Pr(e.getNode()),US=(e,n,o)=>e?!n1(n,o)&&!zS(n)&&zy(n)&&Vy(o):!n1(o,n)&&Vy(n)&&zy(o),Ll=(e,n,o)=>{const r=gu(n);return H.from(e?r.next(o):r.prev(o))},s0=(e,n,o)=>Ll(e,n,o).bind(r=>pl(o,r,n)&&US(e,o,r)?Ll(e,n,r):H.some(r)),WS=(e,n,o,r)=>s0(e,n,o).bind(c=>r(c)?WS(e,n,c,r):H.some(c)),Md=(e,n)=>{const o=e?n.firstChild:n.lastChild;return ft(o)?H.some(Ee(o,e?0:o.data.length)):o?bi(o)?H.some(e?Ee.before(o):Yk(o)):Kk(e,n,o):H.none()},bl=qe(Ll,!0),hu=qe(Ll,!1),Qi=qe(Md,!0),bf=qe(Md,!1),vf="_mce_caret",Yr=e=>Ut(e)&&e.id===vf,Em=(e,n)=>{let o=n;for(;o&&o!==e;){if(Yr(o))return o;o=o.parentNode}return null},o1=e=>K(e.start),Mg=e=>hn(e,"rng"),r0=e=>hn(e,"id"),a0=e=>hn(e,"name"),Uy=e=>et.isArray(e.start),c0=e=>!a0(e)&&ht(e.forward)?e.forward:!0,ZS=(e,n)=>(Ut(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),Xk=(e,n)=>{const o=H.from(uy(e.getRoot(),n.start)),r=H.from(uy(e.getRoot(),n.end));return ta(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:c0(n)}})},Nd=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ie);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},s1=e=>!e.hasChildNodes(),Wy=(e,n)=>bf(e).fold(Se,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Bd=(e,n,o)=>s1(n)&&Em(e,n)?(Nd(n,o),!0):!1,Zy=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const E=f.childNodes;if(Bd(u,f,r))return!0;if(c[y]>E.length-1)return Bd(u,f,r)?!0:Wy(f,r);f=E[c[y]]}ft(f)&&(b=Math.min(c[0],f.data.length)),Ut(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},r1=e=>ft(e)&&e.data.length>0,yf=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):r1(r.nextSibling)?(f=r.nextSibling,b=0):r1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):r1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,E=r.nextSibling;et.each(et.grep(r.childNodes),R=>{ft(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let N;for(;N=e.get(o.id+"_"+n);)e.remove(N,!0);if(ft(E)&&ft(y)&&!es.browser.isOpera()){const R=y.data.length;y.appendData(E.data),e.remove(E),f=y,b=R}}return H.some(Ee(f,b))}else return H.none()},jy=(e,n)=>{const o=e.createRng();return Zy(e,!0,n,o)&&Zy(e,!1,n,o)?H.some({range:o,forward:c0(n)}):H.none()},jS=(e,n)=>{const o=yf(e,"start",n),r=yf(e,"end",n);return ta(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(ZS(e,c.container()),c.offset()),f.setEnd(ZS(e,u.container()),u.offset()),{range:f,forward:c0(n)}})},Gy=(e,n)=>H.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Cf=(e,n)=>{const o=e.dom;if(n){if(Uy(n))return jy(o,n);if(o1(n))return Xk(o,n);if(r0(n))return jS(o,n);if(a0(n))return Gy(o,n);if(Mg(n))return H.some({range:n.rng,forward:c0(n)})}return H.none()},Jk=(e,n,o)=>pk(e,n,o),Pd=(e,n)=>{Cf(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},vl=e=>Ut(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",i0=(e=>n=>e===n)(Vs),a1=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,qy=e=>!a1(e)&&!i0(e)&&!tg(e),Qk=e=>({value:qS(e)}),qS=e=>Qt(e,"#").toUpperCase(),Ky=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},l0=e=>{const n=Ky(e.red)+Ky(e.green)+Ky(e.blue);return Qk(n)},e_=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,t_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,u0=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),KS=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return u0(c,u,f,b)},$O=e=>{if(e==="transparent")return H.some(u0(0,0,0,0));const n=e_.exec(e);if(n!==null)return H.some(KS(n[1],n[2],n[3],"1"));const o=t_.exec(e);return o!==null?H.some(KS(o[1],o[2],o[3],o[4])):H.none()},Ih=e=>$O(e).map(l0).map(n=>"#"+n.value).getOr(e),Mo=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},km=e=>Ir(e,n=>{const o=uu(n);return o?[ae.fromDom(o)]:[]}),Lh=e=>Mo(e).length>1,Yy=e=>Rt(km(e),Ni),n_=e=>Ec(e,"td[data-mce-selected],th[data-mce-selected]"),c1=(e,n)=>{const o=n_(n);return o.length>0?o:Yy(e)},Ng=e=>c1(Mo(e.selection.getSel()),ae.fromDom(e.getBody())),Bg=(e,n)=>ge(e,"table",n),Xy=e=>{const n=e.startContainer,o=e.startOffset;return ft(n)?o===0?H.some(ae.fromDom(n)):H.none():H.from(n.childNodes[o]).map(ae.fromDom)},Jy=e=>{const n=e.endContainer,o=e.endOffset;return ft(n)?o===n.data.length?H.some(ae.fromDom(n)):H.none():H.from(n.childNodes[o-1]).map(ae.fromDom)},Qy=e=>fd(e).fold(rt([e]),n=>[e].concat(Qy(n))),YS=e=>Oi(e).fold(rt([e]),n=>As(n)==="br"?Gc(n).map(o=>[e].concat(YS(o))).getOr([]):[e].concat(YS(n))),i1=(e,n)=>ta(Xy(n),Jy(n),(o,r)=>{const c=Wo(Qy(e),qe(ys,o)),u=Wo(YS(e),qe(ys,r));return c.isSome()&&u.isSome()}).getOr(!1),d0=(e,n,o,r)=>{const c=o,u=new Ba(o,c),f=rs(e.schema.getMoveCaretBeforeOnEnterElements(),(y,E)=>!Ue(["td","th","table"],E.toLowerCase()));let b=o;do{if(ft(b)&&et.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},e2=e=>{const n=e.selection.getSel();return Ze(n)&&n.rangeCount>0},t2=(e,n)=>{const o=Ng(e);o.length>0?xe(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},m0=(e,n,o)=>{const r=sS(e,n);o(r),e.moveToBookmark(r)},l1=e=>Uo(e==null?void 0:e.nodeType),_m=e=>Ut(e)&&!vl(e)&&!Yr(e)&&!gi(e),XS=(e,n)=>{if(_m(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},$d=e=>e.isContentEditable===!0,wf=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=Ts(u);m0(r,!0,()=>{n()}),f&&Ts(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&o_(c,r)},o_=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!XS(e,b)&&Ut(u)){const y=u.childNodes,E=e.getRoot();let N;if(f<y.length){const R=y[f];N=new Ba(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:E)}else{const R=y[y.length-1];N=new Ba(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:E),N.next(!0)}for(let R=N.current();R;R=N.next()){if(e.getContentEditable(R)==="false")return;if(ft(R)&&!Vh(R)){c.setStart(R,0),n.setRng(c);return}}}},JS=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(Ut(e)||!Vh(e))return e}},n2=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||fm(e,n),Hh=(e,n,o)=>e.schema.isValidChild(n,o),Vh=(e,n=!1)=>{if(Ze(e)&&ft(e)){const o=n?e.data.replace(/ /g," "):e.data;return $i(o)}else return!1},s_=e=>Ze(e)&&ft(e)&&e.length===0,r_=(e,n)=>{const o="[data-mce-cef-wrappable]",r=vS(e),c=jo(r)?o:`${o},${r}`;return $c(ae.fromDom(n),c)},QS=(e,n)=>{const o=e.dom;return _m(n)&&o.getContentEditable(n)==="false"&&r_(e,n)&&o.select('[contenteditable="true"]',n).length===0},Sf=(e,n)=>he(e)?e(n):(Ze(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),o2=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),s2=(e,n)=>{if(Pt(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=Ih(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},f0=(e,n,o)=>{const r=e.getStyle(n,o);return s2(r,o)},Pg=(e,n)=>{let o;return e.getParent(n,r=>Ut(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},g0=(e,n,o)=>e.getParents(n,o,e.getRoot()),Ft=(e,n,o)=>{const r=e.formatter.get(n);return Ze(r)&&wt(r,o)},pc=(e,n)=>Ft(e,n,r=>{const c=u=>he(u)||u.length>1&&u.charAt(0)==="%";return wt(["styles","attributes"],u=>Jo(r,u).exists(f=>{const b=ut(f)?f:Dr(f);return wt(b,c)}))}),h0=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>rs(u,(f,b)=>wt(r,y=>y===b));return Ft(e,n,u=>{const f=c(u);return Ft(e,o,b=>{const y=c(b);return Jr(f,y)})})},Sr=e=>Er(e,"block"),pu=e=>Sr(e)&&e.wrapper===!0,ex=e=>Sr(e)&&e.wrapper!==!0,Hi=e=>Er(e,"selector"),qa=e=>Er(e,"inline"),p0=e=>Hi(e)&&qa(e)&&Vr(Jo(e,"mixed"),!0),b0=e=>Hi(e)&&e.expand!==!1&&!qa(e),Am=vl,tx=g0,r2=Vh,nx=n2,a2=e=>Pr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,c2=(e,n)=>{let o=n;for(;o;){if(Ut(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},i2=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},u1=(e,n,o)=>i2(e,n,o,r=>i0(r)||a1(r)),v0=(e,n,o)=>i2(e,n,o,qy),d1=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(N,R,L)=>{const Q=kr(e),te=c?Q.backwards:Q.forwards;return H.from(te(N,R,(j,ee)=>Am(j.parentNode)?-1:(f=j,L(c,j,ee)),b))};return y(o,r,u1).bind(N=>u?y(N.container,N.offset+(c?-1:0),v0):H.some(N)).orThunk(()=>f?H.some({container:f,offset:c?0:f.length}):H.none())},m1=(e,n,o,r,c)=>{const u=r[c];ft(r)&&jo(r.data)&&u&&(r=u);const f=tx(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const E=n[y];if(!(Ze(E.collapsed)&&E.collapsed!==o.collapsed)&&Hi(E)&&e.is(f[b],E.selector))return f[b]}return r},y0=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(Sr(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(ft(o)?o.parentNode:o,E=>E!==f&&nx(e.schema,E),y)}if(u&&Sr(b)&&b.wrapper&&(u=tx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!o2(u,"br")););return u||o},ox=(e,n,o,r)=>{const c=o.parentNode;return Ze(o[r])?!1:c===n||Pt(c)||e.isBlock(c)?!0:ox(e,n,c,r)},Om=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(ft(o)&&!r2(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const E=ft(y)&&!ox(e,b,y,f);if(!Am(y)&&!a2(y)&&!r2(y,E))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Fd=e=>Am(e.parentNode)||Am(e),$g=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return Ut(c)&&c.hasChildNodes()&&(c=wm(c,u),ft(c)&&(u=0)),Ut(f)&&f.hasChildNodes()&&(f=wm(f,n.collapsed?b:b-1),ft(f)&&(b=f.data.length)),c=c2(e,c),f=c2(e,f),Fd(c)&&(c=Am(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,ft(c)&&(u=n.collapsed?c.length:0)),Fd(f)&&(f=Am(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,ft(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(d1(e,e.getRoot(),c,u,!0,r).each(({container:R,offset:L})=>{c=R,u=L}),d1(e,e.getRoot(),f,b,!1,r).each(({container:R,offset:L})=>{f=R,b=L})),(qa(y)||y.block_expand)&&((!qa(y)||!ft(c)||u===0)&&(c=Om(e,o,c,u,!0)),(!qa(y)||!ft(f)||b===f.data.length)&&(f=Om(e,o,f,b,!1))),b0(y)&&(c=m1(e,o,n,c,"previousSibling"),f=m1(e,o,n,f,"nextSibling")),(Sr(y)||Hi(y))&&(c=y0(e,o,c,"previousSibling"),f=y0(e,o,f,"nextSibling"),Sr(y)&&(e.isBlock(c)||(c=Om(e,o,c,u,!0)),e.isBlock(f)||(f=Om(e,o,f,b,!1)))),Ut(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),Ut(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},zh=(e,n,o)=>{var r;const c=n.startOffset,u=wm(n.startContainer,c),f=n.endOffset,b=wm(n.endContainer,f-1),y=ee=>{const ye=ee[0];ft(ye)&&ye===u&&c>=ye.data.length&&ee.splice(0,1);const pe=ee[ee.length-1];return f===0&&ee.length>0&&pe===b&&ft(pe)&&ee.splice(ee.length-1,1),ee},E=(ee,ye,pe)=>{const we=[];for(;ee&&ee!==pe;ee=ee[ye])we.push(ee);return we},N=(ee,ye)=>e.getParent(ee,pe=>pe.parentNode===ye,ye),R=(ee,ye,pe)=>{const we=pe?"nextSibling":"previousSibling";for(let De=ee,Xe=De.parentNode;De&&De!==ye;De=Xe){Xe=De.parentNode;const Ot=E(De===ee?De:De[we],we);Ot.length&&(pe||Ot.reverse(),o(y(Ot)))}};if(u===b)return o(y([u]));const L=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,L,!0);if(e.isChildOf(b,u))return R(b,L);const Q=N(u,L)||u,te=N(b,L)||b;R(u,Q,!0);const j=E(Q===u?Q:Q.nextSibling,"nextSibling",te===b?te.nextSibling:te);j.length&&o(y(j)),R(b,te)},l2=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],a_=e=>xc(e)&&qr(e)===ie,sx=(e,n,o,r)=>di(n).fold(()=>"skipping",c=>r==="br"||a_(n)?"valid":zw(n)?"existing":Yr(n.dom)?"caret":wt(l2,u=>$c(n,u))?"valid-block":!Hh(e,o,r)||!Hh(e,As(c),o)?"invalid-child":"valid"),C0=(e,n)=>{const o=$g(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},rx=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;Au(e,fg()),Gr(e,`${Cm()}`,f),Gr(e,`${Th()}`,r);const{attributes:y={},classes:E=[]}=c(f,b);if(lc(e,y),jw(e,E),u){E.length>0&&Gr(e,`${lu()}`,E.join(","));const N=Rs(y);N.length>0&&Gr(e,`${Eh()}`,N.join(","))}},w0=e=>{cd(e,fg()),Br(e,`${Cm()}`),Br(e,`${Th()}`),Br(e,`${hl()}`);const n=ei(e,`${Eh()}`).map(r=>r.split(",")).getOr([]),o=ei(e,`${lu()}`).map(r=>r.split(",")).getOr([]);xe(n,r=>Br(e,r)),lk(e,o),Br(e,`${lu()}`),Br(e,`${Eh()}`)},oc=(e,n,o,r,c)=>{const u=ae.fromTag("span",e);return rx(u,n,o,r,c,!1),u},bu=(e,n,o,r,c,u)=>{const f=[],b=oc(e.getDoc(),o,u,r,c),y=tc(),E=()=>{y.clear()},N=()=>y.get().getOrThunk(()=>{const te=gg(b);return f.push(te),y.set(te),te}),R=te=>{xe(te,L)},L=te=>{switch(sx(e,te,"span",As(te))){case"invalid-child":{E();const ee=za(te);R(ee),E();break}case"valid-block":{E(),rx(te,o,u,r,c,!0);break}case"valid":{const ee=N();lb(te,ee);break}}},Q=te=>{const j=Ge(te,ae.fromDom);R(j)};return zh(e.dom,n,te=>{E(),Q(te)}),f},Hl=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Ng(e).length>0,b=Jv("mce-annotation");if(u.collapsed&&!f&&C0(e,u),c.getRng().collapsed&&!f){const y=oc(e.getDoc(),b,r,n,o.decorate);bd(y,Vs),c.getRng().insertNode(y.dom),c.select(y.dom)}else m0(c,!1,()=>{t2(e,y=>{bu(e,y,b,n,o.decorate,r)})})})},f1=e=>{const n=Ww();ik(e,n);const o=ck(e,n),r=il("span"),c=u=>{xe(u,f=>{r(f)?Sa(f):w0(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Hl(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Yv(e,H.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();bt(Xv(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=Xv(e,u);return io(f,b=>Ge(b,y=>y.dom))}}},el=e=>({getBookmark:qe(Jk,e),moveToBookmark:qe(Pd,e)});el.isBookmarkNode=vl;const ax=(e,n,o)=>o.collapsed?!1:wt(o.getClientRects(),r=>Nb(r,e,n)),u2=(e,n)=>e.dispatch("PreProcess",n),d2=(e,n)=>e.dispatch("PostProcess",n),m2=e=>{e.dispatch("remove")},c_=e=>{e.dispatch("detach")},f2=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},i_=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},l_=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},g2=e=>{e.dispatch("PreInit")},h2=e=>{e.dispatch("PostRender")},er=e=>{e.dispatch("Init")},Id=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},p2=(e,n,o)=>{e.dispatch(n,o)},b2=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},v2=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},y2=(e,n)=>e.dispatch("BeforeSetContent",n),C2=(e,n)=>e.dispatch("SetContent",n),w2=(e,n)=>e.dispatch("BeforeGetContent",n),S2=(e,n)=>e.dispatch("GetContent",n),u_=(e,n)=>{e.dispatch("AutocompleterStart",n)},cx=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},d_=e=>{e.dispatch("AutocompleterEnd")},x2=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),m_=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),xf=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),rn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||rn.metaKeyPressed(e),metaKeyPressed:e=>es.os.isMacOS()||es.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Dm="data-mce-selected",f_="table,img,figure.image,hr,video,span.mce-preview-object",Ta=Math.abs,ma=Math.round,Tf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},S0=e=>e.type==="longpress"||e.type.indexOf("touch")===0,ix=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,E,N,R,L,Q,te,j,ee,ye,pe,we,De,Xe,Ot;const xt=It=>Ze(It)&&(hb(It)||o.is(It,"figure.image")),Fe=It=>ia(It)||o.hasClass(It,"mce-preview-object"),$e=(It,Bo)=>{if(S0(It)){const Po=It.touches[0];return xt(It.target)&&!ax(Po.clientX,Po.clientY,Bo)}else return xt(It.target)&&!ax(It.clientX,It.clientY,Bo)},Gt=It=>{const Bo=It.target;$e(It,n.selection.getRng())&&!It.isDefaultPrevented()&&n.selection.select(Bo)},gn=It=>o.hasClass(It,"mce-preview-object")&&Ze(It.firstElementChild)?[It,It.firstElementChild]:o.is(It,"figure.image")?[It.querySelector("img")]:[It],On=It=>{const Bo=gS(n);return!Bo||It.getAttribute("data-mce-resize")==="false"||It===n.getBody()?!1:o.hasClass(It,"mce-preview-object")&&Ze(It.firstElementChild)?$c(ae.fromDom(It.firstElementChild),Bo):$c(ae.fromDom(It),Bo)},fo=It=>Fe(It)?o.create("img",{src:es.transparentSrc}):It.cloneNode(!0),Vo=(It,Bo,Po)=>{if(Ze(Po)){const Mc=gn(It);xe(Mc,Ar=>{Ar.style[Bo]||!n.schema.isValid(Ar.nodeName.toLowerCase(),Bo)?o.setStyle(Ar,Bo,Po):o.setAttrib(Ar,Bo,""+Po)})}},Os=(It,Bo,Po)=>{Vo(It,"width",Bo),Vo(It,"height",Po)},nr=It=>{let Bo,Po,Mc,Ar,ao;Bo=It.screenX-R,Po=It.screenY-L,we=Bo*E[2]+j,De=Po*E[3]+ee,we=we<5?5:we,De=De<5?5:De,(xt(f)||Fe(f))&&hS(n)!==!1?Mc=!rn.modifierPressed(It):Mc=rn.modifierPressed(It),Mc&&(Ta(Bo)>Ta(Po)?(De=ma(we*ye),we=ma(De/ye)):(we=ma(De/ye),De=ma(we*ye))),Os(b,we,De),Ar=E.startPos.x+Bo,ao=E.startPos.y+Po,Ar=Ar>0?Ar:0,ao=ao>0?ao:0,o.setStyles(y,{left:Ar,top:ao,display:"block"}),y.innerHTML=we+" &times; "+De,E[2]<0&&b.clientWidth<=we&&o.setStyle(b,"left",Q+(j-we)),E[3]<0&&b.clientHeight<=De&&o.setStyle(b,"top",te+(ee-De)),Bo=u.scrollWidth-Xe,Po=u.scrollHeight-Ot,Bo+Po!==0&&o.setStyles(y,{left:Ar-Bo,top:ao-Po}),pe||(i_(n,f,j,ee,"corner-"+E.name),pe=!0)},pa=()=>{const It=pe;pe=!1,It&&(Vo(f,"width",we),Vo(f,"height",De)),o.unbind(r,"mousemove",nr),o.unbind(r,"mouseup",pa),c!==r&&(o.unbind(c,"mousemove",nr),o.unbind(c,"mouseup",pa)),o.remove(b),o.remove(y),o.remove(N),zc(f),It&&(l_(n,f,we,De,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},zc=It=>{$t();const Bo=o.getPos(It,u),Po=Bo.x,Mc=Bo.y,Ar=It.getBoundingClientRect(),ao=Ar.width||Ar.right-Ar.left,hs=Ar.height||Ar.bottom-Ar.top;f!==It&&(Ct(),f=It,we=De=0);const Us=n.dispatch("ObjectSelected",{target:It});On(It)&&!Us.isDefaultPrevented()?bt(Tf,(or,sa)=>{const ka=Ka=>{const Ju=gn(f)[0];R=Ka.screenX,L=Ka.screenY,j=Ju.clientWidth,ee=Ju.clientHeight,ye=ee/j,E=or,E.name=sa,E.startPos={x:ao*or[0]+Po,y:hs*or[1]+Mc},Xe=u.scrollWidth,Ot=u.scrollHeight,N=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(N,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=fo(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Po,top:Mc,margin:0}),Os(b,ao,hs),b.removeAttribute(Dm),u.appendChild(b),o.bind(r,"mousemove",nr),o.bind(r,"mouseup",pa),c!==r&&(o.bind(c,"mousemove",nr),o.bind(c,"mouseup",pa)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},j+" &times; "+ee)};let Fr=o.get("mceResizeHandle"+sa);Fr&&o.remove(Fr),Fr=o.add(u,"div",{id:"mceResizeHandle"+sa,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+sa+"-resize; margin:0; padding:0"}),o.bind(Fr,"mousedown",Ka=>{Ka.stopImmediatePropagation(),Ka.preventDefault(),ka(Ka)}),or.elm=Fr,o.setStyles(Fr,{left:ao*or[0]+Po-Fr.offsetWidth/2,top:hs*or[1]+Mc-Fr.offsetHeight/2})}):Ct(!1)},yc=Nl(zc,0),Ct=(It=!0)=>{yc.cancel(),$t(),f&&It&&f.removeAttribute(Dm),bt(Tf,(Bo,Po)=>{const Mc=o.get("mceResizeHandle"+Po);Mc&&(o.unbind(Mc),o.remove(Mc))})},dn=(It,Bo)=>o.isChildOf(It,Bo),cs=It=>{if(pe||n.removed||n.composing)return;const Bo=It.type==="mousedown"?It.target:e.getNode(),Po=En(ae.fromDom(Bo),f_).map(Ar=>Ar.dom).filter(Ar=>o.isEditable(Ar.parentElement)).getOrUndefined(),Mc=Ze(Po)?o.getAttrib(Po,Dm,"1"):"1";if(xe(o.select(`img[${Dm}],hr[${Dm}]`),Ar=>{Ar.removeAttribute(Dm)}),Ze(Po)&&dn(Po,u)){Tn();const Ar=e.getStart(!0);if(dn(Ar,Po)&&dn(e.getEnd(!0),Po)){o.setAttrib(Po,Dm,Mc),yc.throttle(Po);return}}Ct()},$t=()=>{bt(Tf,It=>{It.elm&&(o.unbind(It.elm),delete It.elm)})},Tn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Tn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",cs),n.on("keyup compositionend",It=>{f&&f.nodeName==="TABLE"&&cs(It)}),n.on("hide blur",Ct),n.on("contextmenu longpress",Gt,!0)}),n.on("remove",$t),{isResizable:On,showResizeRect:zc,hideResizeRect:Ct,updateResizeRect:cs,destroy:()=>{yc.cancel(),f=b=N=null}}},g_=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Ho=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},lx=(e,n,o)=>{const r=e.document.createRange();return g_(r,n),Ho(r,o),r},x0=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},Fg=mu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ux=(e,n,o)=>n(ae.fromDom(o.startContainer),o.startOffset,ae.fromDom(o.endContainer),o.endOffset),h_=(e,n)=>n.match({domRange:o=>({ltr:rt(o),rtl:H.none}),relative:(o,r)=>({ltr:fn(()=>lx(e,o,r)),rtl:fn(()=>H.some(lx(e,r,o)))}),exact:(o,r,c,u)=>({ltr:fn(()=>x0(e,o,r,c,u)),rtl:fn(()=>H.some(x0(e,c,u,o,r)))})}),T2=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>Fg.rtl(ae.fromDom(c.endContainer),c.endOffset,ae.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>ux(e,Fg.ltr,o)):ux(e,Fg.ltr,o)},p_=(e,n)=>{const o=h_(e,n);return T2(e,o)};Fg.ltr,Fg.rtl;const dx={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},E2=(e,n,o)=>{var r,c;return H.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return H.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),H.some(f)})},k2=(e,n,o)=>{var r,c;return H.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},mx=(()=>document.caretPositionFromPoint?E2:document.caretRangeFromPoint?k2:H.none)(),IO=(e,n,o)=>{const r=ae.fromDom(e.document);return mx(r,n,o).map(c=>dx.create(ae.fromDom(c.startContainer),c.startOffset,ae.fromDom(c.endContainer),c.endOffset))},T0=mu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),mF=(e,n,o,r)=>e.fold(n,o,r),b_=e=>e.fold(ko,ko,ko),v_=T0.before,LO=T0.on,Un=T0.after,Rm={before:v_,on:LO,after:Un,cata:mF,getStart:b_},_2=mu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),y_=e=>_2.exact(e.start,e.soffset,e.finish,e.foffset),g1=e=>e.match({domRange:n=>ae.fromDom(n.startContainer),relative:(n,o)=>Rm.getStart(n),exact:(n,o,r,c)=>n}),HO=_2.domRange,E0=_2.relative,C_=_2.exact,w_=e=>{const n=g1(e);return El(n)},A2=dx.create,Uh={domRange:HO,relative:E0,exact:C_,exactFromRange:y_,getWin:w_,range:A2},Wh=(e,n)=>{const o=As(e);return o==="input"?Rm.after(e):Ue(["br","img"],o)?n===0?Rm.before(e):Rm.after(e):Rm.on(e,n)},O2=(e,n)=>{const o=e.fold(Rm.before,Wh,Rm.after),r=n.fold(Rm.before,Wh,Rm.after);return Uh.relative(o,r)},k0=(e,n,o,r)=>{const c=Wh(e,n),u=Wh(o,r);return Uh.relative(c,u)},D2=e=>e.match({domRange:n=>{const o=ae.fromDom(n.startContainer),r=ae.fromDom(n.endContainer);return k0(o,n.startOffset,r,n.endOffset)},relative:O2,exact:k0}),R2=(e,n)=>{const r=(n||document).createDocumentFragment();return xe(e,c=>{r.appendChild(c.dom)}),ae.fromDom(r)},S_=e=>{const n=Uh.getWin(e).dom,o=(c,u,f,b)=>x0(n,c,u,f,b),r=D2(e);return p_(n,r).match({ltr:o,rtl:o})},_0=(e,n,o)=>IO(e,n,o),M2=(e,n,o)=>{const r=El(ae.fromDom(o));return _0(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},N2=(e,n)=>Ze(e)&&Ze(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,gs=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},fx=(e,n,o)=>gs(e,n,o)!==null,Ld=(e,n,o)=>fx(e,n,r=>r.nodeName===o),ju=(e,n)=>qo(e)&&!fx(e,n,Yr),h1=(e,n,o)=>{const r=n.parentNode;if(r){const c=new Ba(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Pr(u))return!0}return!1},tl=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},A0=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ts(o))return!0;o=o.parentNode}return!1},Ig=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,E;if(!b)return H.none();const N=e.getParent(b,e.isBlock)||u;if(r&&Pr(c)&&n&&e.isEmpty(N))return H.some(Ee(b,e.nodeIndex(c)));const R=new Ba(c,N);for(;E=R[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||ju(E,u))return H.none();if(ft(E)&&E.data.length>0)return Ld(E,u,"A")?H.none():H.some(Ee(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return H.none();y=E}return Mi(y)?H.none():o&&y?H.some(Ee(y,0)):H.none()},p1=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const E=Ut(b)&&y===b.childNodes.length,N=e.schema.getNonEmptyElements();let R=o;if(qo(b))return H.none();if(Ut(b)&&y>b.childNodes.length-1&&(R=!1),tf(b)&&(b=c,y=0),b===c){if(R&&(u=b.childNodes[y>0?y-1:0],u&&(qo(u)||N[u.nodeName]||Wr(u))))return H.none();if(b.hasChildNodes()){if(y=Math.min(!R&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=ft(b)&&E?b.data.length:0,!n&&b===c.lastChild&&Wr(b)||A0(c,b)||qo(b))return H.none();if(b.hasChildNodes()&&!Wr(b)){u=b;const L=new Ba(b,c);do{if(Ts(u)||qo(u)){f=!1;break}if(ft(u)&&u.data.length>0){y=R?0:u.data.length,b=u,f=!0;break}if(N[u.nodeName.toLowerCase()]&&!nf(u)){y=e.nodeIndex(u),b=u.parentNode,R||y++,f=!0;break}}while(u=R?L.next():L.prev())}}}return n&&(ft(b)&&y===0&&Ig(e,E,n,!0,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),Ut(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&Pr(u)&&!tl(u,"A")&&!h1(e,u,!1)&&!h1(e,u,!0)&&Ig(e,E,n,!0,u).each(L=>{b=L.container(),y=L.offset(),f=!0}))),R&&!n&&ft(b)&&y===b.data.length&&Ig(e,E,n,!1,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),f&&b?H.some(Ee(b,y)):H.none()},Mm=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=Ee.fromRangeStart(n);return p1(e,o,!0,r).each(u=>{(!o||!Ee.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||p1(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),N2(n,r)?H.none():H.some(r)},B2=(e,n)=>e.splitText(n),O0=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&ft(n)){if(o>0&&o<n.data.length)if(r=B2(n,o),n=r.previousSibling,c>o){c=c-o;const u=B2(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(ft(n)&&o>0&&o<n.data.length&&(n=B2(n,o),o=0),ft(r)&&c>0&&c<r.data.length){const u=B2(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Zh=e=>({walk:(u,f)=>zh(e,u,f),split:O0,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=$g(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Mm(e,u).fold(Se,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Zh.compareRanges=N2,Zh.getCaretRangeFromPoint=M2,Zh.getSelectedNode=uu,Zh.getNode=wm;const ns=((e,n)=>{const o=(b,y)=>{if(!Uo(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const E=b.dom;ks(E)&&(E.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const E=ll(b,e);return parseFloat(E)||0}return y},c=r,u=(b,y)=>$n(y,(E,N)=>{const R=ll(b,N),L=R===void 0?0:parseInt(R,10);return isNaN(L)?E:E+L},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,E)=>{const N=u(b,E);return y>N?y-N:0}}})("height",e=>{const n=e.dom;return kl(e)?n.getBoundingClientRect().height:n.offsetHeight}),vu=e=>ns.get(e),Lg=()=>ae.fromDom(document),gx=(e,n)=>e.view(n).fold(rt([]),r=>{const c=e.owner(r),u=gx(e,c);return[r].concat(u)}),b1=(e,n)=>{const o=n.owner(e);return gx(n,o)};var px=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?H.none():H.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ae.fromDom)},owner:e=>ti(e)});const P2=e=>{const n=Lg(),o=Sp(n),r=b1(e,px),c=_l(e),u=Tr(r,(f,b)=>{const y=_l(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return ul(u.left+c.left+o.left,u.top+c.top+o.top)},$2=e=>As(e)==="textarea",jh=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Hg=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},bx=(e,n)=>{const o=za(e);if(o.length===0||$2(e))return{element:e,offset:n};if(n<o.length&&!$2(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return $2(r)?{element:e,offset:n}:As(r)==="img"?{element:r,offset:1}:xc(r)?{element:r,offset:qr(r).length}:{element:r,offset:za(r).length}}},l=(e,n)=>{const o=mb(e),r=vu(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},m=(e,n)=>{const o=bx(e,n),r=ae.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ie+"</span>");return xs(o.element,r),l(r,()=>Js(r))},h=e=>l(ae.fromDom(e),Zt),v=(e,n,o,r)=>{U(e,(c,u)=>O(e,n,o,r),o)},T=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(jh(e,u))return;const f=Sp(n).top;o(n,f,r,c),Hg(e,u)},O=(e,n,o,r)=>{const c=ae.fromDom(e.getBody()),u=ae.fromDom(e.getDoc());ib(c);const f=m(ae.fromDom(o.startContainer),o.startOffset);T(e,u,n,f,r),f.cleanup()},$=(e,n,o,r)=>{const c=ae.fromDom(e.getDoc());T(e,c,o,h(n),r)},U=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(ae.fromDom(r),ae.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},J=(e,n,o,r)=>{const c=e.pos;if(o)Al(c.left,c.top,r);else{const u=c.top-n+e.height;Al(c.left,u,r)}},le=(e,n,o,r,c)=>{const u=o+n,f=r.pos.top,b=r.bottom,y=b-f>=o;f<n?J(r,o,c!==!1,e):f>u?J(r,o,y?c!==!1:c===!0,e):b>u&&!y&&J(r,o,c===!0,e)},Te=(e,n,o,r)=>{const c=El(e).dom.innerHeight;le(e,n,c,o,r)},lt=(e,n,o,r)=>{const c=El(e).dom.innerHeight;le(e,n,c,o,r);const u=P2(o.element),f=uh(window);u.top<f.y?lm(o.element,r!==!1):u.top>f.bottom&&lm(o.element,r===!0)},Nt=(e,n,o)=>v(e,Te,n,o),_t=(e,n,o)=>$(e,n,Te,o),Ye=(e,n,o)=>v(e,lt,n,o),Dt=(e,n,o)=>$(e,n,lt,o),Ke=(e,n,o)=>{(e.inline?_t:Dt)(e,n,o)},en=(e,n,o)=>{(e.inline?Nt:Ye)(e,n,o)},Hn=e=>e.dom.focus(),lo=e=>{const n=qi(e).dom;return e.dom===n.activeElement},tr=(e=Lg())=>H.from(e.dom.activeElement).map(ae.fromDom),Dc=e=>tr(qi(e)).filter(n=>e.dom.contains(n.dom)),na=(e,n)=>{const o=xc(n)?qr(n).length:za(n).length+1;return e>o?o:e<0?0:e},nl=e=>Uh.range(e.start,na(e.soffset,e.start),e.finish,na(e.foffset,e.finish)),Ef=(e,n)=>!vn(n.dom)&&(Ai(e,n)||ys(e,n)),v1=e=>n=>Ef(e,n.start)&&Ef(e,n.finish),F2=e=>e.inline||es.browser.isFirefox(),D0=e=>Uh.range(ae.fromDom(e.startContainer),e.startOffset,ae.fromDom(e.endContainer),e.endOffset),zs=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?H.none():H.from(n.getRangeAt(0))).map(D0)},wi=e=>{const n=El(e);return zs(n.dom).filter(v1(e))},Si=(e,n)=>H.from(n).filter(v1(e)).map(nl),yu=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),H.some(n)}catch{return H.none()}},ol=e=>{const n=F2(e)?wi(ae.fromDom(e.getBody())):H.none();e.bookmark=n.isSome()?n:e.bookmark},kf=e=>(e.bookmark?e.bookmark:H.none()).bind(o=>Si(ae.fromDom(e.getBody()),o)).bind(yu),xi=e=>{kf(e).each(n=>e.selection.setRng(n))},Gh={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},Vl=(e,n)=>(Uo(n)||(n=0),setTimeout(e,n)),Vc=(e,n)=>(Uo(n)||(n=0),setInterval(e,n)),zl={setEditorTimeout:(e,n,o)=>Vl(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=Vc(()=>{e.removed?clearInterval(r):n()},o);return r}},yx=e=>e.type==="nodechange"&&e.selectionChange,Cx=(e,n)=>{const o=()=>{n.throttle()};br.DOM.bind(document,"mouseup",o),e.on("remove",()=>{br.DOM.unbind(document,"mouseup",o)})},x_=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},T_=(e,n)=>{x_(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{yx(o)||ol(e)})},I2=e=>{const n=Nl(()=>{ol(e)},0);e.on("init",()=>{e.inline&&Cx(e,n),T_(e,n)}),e.on("remove",()=>{n.cancel()})};let qh;const Vg=br.DOM,VO=e=>Ut(e)&&Gh.isEditorUIElement(e),wx=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},y1=(e,n)=>{const o=Gp(e);return Vg.getParent(n,c=>VO(c)||(o?e.dom.is(c,o):!1))!==null},E_=e=>{try{const n=qi(ae.fromDom(e.getElement()));return tr(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},gF=(e,n)=>{const o=n.editor;I2(o);const r=(c,u)=>{if(_S(c)&&c.inline!==!0){const f=ae.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;wx(E_(o))&&r(o,Au),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{zl.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!wx(E_(o))||c!==o)&&r(o,cd),!y1(o,E_(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),qh||(qh=c=>{const u=e.activeEditor;u&&am(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!y1(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Vg.bind(document,"focusin",qh))},k_=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&qh&&(Vg.unbind(document,"focusin",qh),qh=null)},hF=e=>{e.on("AddEditor",qe(gF,e)),e.on("RemoveEditor",qe(k_,e))},zO=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),UO=e=>e.collapsed?H.from(wm(e.startContainer,e.startOffset)).map(ae.fromDom):H.none(),WO=(e,n)=>UO(n).bind(o=>pi(o)?H.some(o):Ai(e,o)?H.none():H.some(e)),ZO=(e,n)=>{WO(ae.fromDom(e.getBody()),n).bind(o=>Qi(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},__=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},pF=e=>lo(e)||Dc(e).isSome(),bF=e=>Ze(e.iframeElement)&&lo(ae.fromDom(e.iframeElement)),Sx=e=>{const n=e.getBody();return n&&pF(ae.fromDom(n))},jO=e=>{const n=qi(ae.fromDom(e.getElement()));return tr(n).filter(o=>!wx(o.dom)&&y1(e,o.dom)).isSome()},Kh=e=>e.inline?Sx(e):bF(e),GO=e=>Kh(e)||jO(e),qO=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Ze(e.bookmark)&&!Kh(e)&&kf(e).each(u=>{e.selection.setRng(u),r=u});const c=zO(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){__(c),ZO(e,r),A_(e);return}e.inline||(es.browser.isOpera()||__(o),e.getWin().focus()),(es.browser.isFirefox()||e.inline)&&(__(o),ZO(e,r)),A_(e)},A_=e=>e.editorManager.setActive(e),vF=(e,n)=>{e.removed||(n?A_(e):qO(e))},KO=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return H.from(u).map(ae.fromDom).map(b=>!r||!n.collapsed?md(b,c(b,f)).getOr(b):b).bind(b=>Hs(b)?H.some(b):di(b).filter(Hs)).map(b=>b.dom).getOr(e)},YO=(e,n,o=!1)=>KO(e,n,!0,o,(r,c)=>Math.min(Fc(r),c)),XO=(e,n,o=!1)=>KO(e,n,!1,o,(r,c)=>c>0?c-1:c),JO=(e,n)=>{const o=e;for(;e&&ft(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},yF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),ft(o)&&ft(r)&&(o.length===c?o=JO(o.nextSibling,!0):o=o.parentNode,u===0?r=JO(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=ft(f)?f.parentNode:f;return Ut(b)?b:e},CF=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||YO(u,n,n.collapsed),e.isBlock),b=e.getParent(r||XO(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y;const E=new Ba(f,u);for(;(y=E.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},wF=(e,n,o)=>H.from(n).bind(r=>H.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(d0(e,f,r,!0),d0(e,f,r,!1)),f})),O_=(e,n)=>Ge(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),SF=e=>As(e)==="img"?1:Ol(e).fold(()=>za(e).length,n=>n.length),xF=e=>Ol(e).filter(n=>n.trim().length!==0||n.indexOf(Vs)>-1).isSome(),xx=e=>Tl(e)&&Pc(e,"contenteditable")==="false",QO=["img","br"],D_=e=>xF(e)||Ue(QO,As(e))||xx(e),TF=e=>fe(e,D_),EF=e=>kF(e,D_),kF=(e,n)=>{const o=r=>{const c=za(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return H.some(f);const b=o(f);if(b.isSome())return b}return H.none()};return o(e)},eD="[data-mce-autocompleter]",_F=(e,n)=>{if(R_(ae.fromDom(e.getBody())).isNone()){const o=ae.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Ur(o,ae.fromDom(n.extractContents())),n.insertNode(o.dom),di(o).each(r=>r.dom.normalize()),EF(o).map(r=>{e.selection.setCursorLocation(r.dom,SF(r))})}},AF=e=>En(e,eD),R_=e=>Et(e,eD),OF=(e,n)=>R_(n).each(o=>{const r=e.selection.getBookmark();Sa(o),e.selection.moveToBookmark(r)}),tD={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},L2=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},DF=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!$i(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},nD=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class yl{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new yl(n,tD[n]||1);return o&&bt(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!K(n))return Ze(n)&&bt(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new yl(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=L2(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=L2(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(nD(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||nD(f))return!1}if(f.type===8||f.type===3&&!DF(f)||f.type===3&&f.parent&&o[f.parent.name]&&$i((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=L2(f,u));return!0}walk(n){return L2(this,null,n)}}const RF=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),oD=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&RF(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},MF=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){xn(y[2],"--")?b=oD(n,!1,y.index+3):b=oD(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const E=c.exec(n);if(G(E)||E.index!==r.lastIndex)continue;y[1]==="/"?f-=1:hn(u,y[2])||(f+=1),b=r.lastIndex+E[0].length;break}}return b},NF=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},sD=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=NF(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let E;u[f[1]]?E=b:E=MF(r,c,b),c=c.substring(0,b-y)+c.substring(E),o.lastIndex=b-y}return dt(c)},BF=sD,rD=e=>{const n=Ec(e,"[data-mce-bogus]");xe(n,o=>{Pc(o,"data-mce-bogus")==="all"?Js(o):Bu(o)?(xs(o,ae.fromText(la)),Js(o)):Sa(o)})},aD=e=>{const n=Ec(e,"input");xe(n,o=>{Br(o,"name")})},PF=(e,n)=>{const o=$l(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},$F=(e,n)=>{const o=e.getDoc(),r=qi(ae.fromDom(e.getBody())),c=ae.fromTag("div",o);Gr(c,"data-mce-bogus","all"),Kf(c,{position:"fixed",left:"-9999999px",top:"0"}),bd(c,n.innerHTML),rD(c),aD(c);const u=rh(r);Ur(u,c);const f=dt(c.dom.innerText);return Js(c),f},FF=(e,n,o)=>{let r;return n.format==="raw"?r=et.trim(BF(e.serializer,o.innerHTML)):n.format==="text"?r=$F(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=PF(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Qa(ae.fromDom(o))&&K(r)?et.trim(r):r},IF=(e,n)=>H.from(e.getBody()).fold(rt(n.format==="tree"?new yl("body",11):""),o=>FF(e,n,o)),cD=et.makeMap,iD=e=>{const n=[];e=e||{};const o=e.indent,r=cD(e.indent_before||""),c=cD(e.indent_after||""),u=cf.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,E)=>{if(o&&r[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let N=0,R=y.length;N<R;N++){const L=y[N];n.push(" ",L.name,'="',u(L.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&c[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Yh=(e={},n=gl())=>{const o=iD(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var E;o.text((E=y.value)!==null&&E!==void 0?E:"",y.raw)},8:y=>{var E;o.comment((E=y.value)!==null&&E!==void 0?E:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var E;o.doctype((E=y.value)!==null&&E!==void 0?E:"")},4:y=>{var E;o.cdata((E=y.value)!==null&&E!==void 0?E:"")},11:y=>{let E=y;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=y=>{var E;const N=f[y.type];if(N)N(y);else{const R=y.name,L=R in n.getVoidElements();let Q=y.attributes;if(u&&Q&&Q.length>1){const te=[];te.map={};const j=n.getElementRule(y.name);if(j){for(let ee=0,ye=j.attributesOrder.length;ee<ye;ee++){const pe=j.attributesOrder[ee];if(pe in Q.map){const we=Q.map[pe];te.map[pe]=we,te.push({name:pe,value:we})}}for(let ee=0,ye=Q.length;ee<ye;ee++){const pe=Q[ee].name;if(!(pe in te.map)){const we=Q.map[pe];te.map[pe]=we,te.push({name:pe,value:we})}}Q=te}}if(o.start(R,Q,L),!L){let te=y.firstChild;if(te){(R==="pre"||R==="textarea")&&te.type===3&&((E=te.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(te);while(te=te.next)}o.end(R)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},lD=new Set;xe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{lD.add(n)});const yn=["font","text-decoration","text-emphasis"],Tx=(e,n)=>Rs(e.parseStyle(e.getAttrib(n,"style"))),uD=e=>lD.has(e),LF=(e,n)=>Ss(Tx(e,n),o=>!uD(o)),M_=e=>Rt(e,n=>wt(yn,o=>xn(n,o))),HF=(e,n,o)=>{const r=Tx(e,n),c=Tx(e,o),u=f=>{var b,y;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",N=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Rn(E)&&Rn(N)&&E!==N};return wt(r,f=>{const b=y=>wt(y,E=>E===f);if(!b(c)&&b(yn)){const y=M_(c);return wt(y,u)}else return u(f)})},dD=(e,n,o)=>H.from(o.container()).filter(ft).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),N_=qe(dD,!0,a1),B_=qe(dD,!1,a1),VF=e=>{const n=e.container();return ft(n)&&(n.data.length===0||je(n.data)&&el.isBookmarkNode(n.parentNode))},Nm=(e,n)=>o=>Qb(e?0:-1,o).filter(n).isSome(),P_=e=>hb(e)&&ll(ae.fromDom(e),"display")==="block",zF=e=>Ts(e)&&!gh(e),UF=Nm(!0,P_),Jn=Nm(!1,P_),H2=Nm(!0,ia),ro=Nm(!1,ia),$_=Nm(!0,Wr),WF=Nm(!1,Wr),C1=Nm(!0,zF),Xh=Nm(!1,zF),mW=e=>e.slice(0,-1),fW=(e,n,o)=>Ai(n,e)?mW(jf(e,r=>o(r)||ys(r,n))):[],mD=(e,n)=>fW(e,n,Se),zg=(e,n)=>[e].concat(mD(e,n)),Bn=(e,n,o)=>WS(e,n,o,VF),fD=(e,n)=>Wo(zg(ae.fromDom(n.container()),e),Ac),gD=(e,n,o)=>Bn(e,n.dom,o).forall(r=>fD(n,o).fold(()=>!pl(r,o,n.dom),c=>!pl(r,o,n.dom)&&Ai(c,ae.fromDom(r.container())))),hD=(e,n,o)=>fD(n,o).fold(()=>Bn(e,n.dom,o).forall(r=>!pl(r,o,n.dom)),r=>Bn(e,r.dom,o).isNone()),w1=qe(hD,!1),F_=qe(hD,!0),ZF=qe(gD,!1),jF=qe(gD,!0),GF=e=>e1(e).exists(Bu),V2=(e,n,o)=>{const r=Rt(zg(ae.fromDom(o.container()),n),Ac),c=Xo(r).getOr(n);return Ll(e,c.dom,o).filter(GF)},I_=(e,n)=>e1(n).exists(Bu)||V2(!0,e,n).isSome(),pD=(e,n)=>Dg(n).exists(Bu)||V2(!1,e,n).isSome(),gW=qe(V2,!1),qF=qe(V2,!0),bD=e=>Ee.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),vD=(e,n)=>{const o=Rt(zg(ae.fromDom(n.container()),e),Ac);return Xo(o).getOr(e)},yD=(e,n)=>bD(n)?B_(n):B_(n)||hu(vD(e,n).dom,n).exists(B_),L_=(e,n)=>bD(n)?N_(n):N_(n)||bl(vD(e,n).dom,n).exists(N_),KF=e=>Ue(["pre","pre-wrap"],e),vo=e=>e1(e).bind(n=>k(n,Hs)).exists(n=>KF(ll(n,"white-space"))),CD=(e,n)=>hu(e.dom,n).isNone(),Ex=(e,n)=>bl(e.dom,n).isNone(),wD=(e,n)=>CD(e,n)||Ex(e,n)||w1(e,n)||F_(e,n)||pD(e,n)||I_(e,n),SD=e=>Ze(e)&&Ts(e)&&Xc(e),H_=(e,n)=>o=>SD(new Ba(o,e)[n]()),xD=(e,n)=>{const o=bl(e.dom,n).getOr(n),r=H_(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},TD=(e,n)=>{const o=hu(e.dom,n).getOr(n),r=H_(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},YF=(e,n)=>vo(n)?!1:wD(e,n)||yD(e,n)||L_(e,n),R0=(e,n)=>vo(n)?!1:w1(e,n)||ZF(e,n)||pD(e,n)||yD(e,n)||TD(e,n),XF=e=>{const n=e.container(),o=e.offset();return ft(n)&&o<n.data.length?Ee(n,o+1):e},z2=(e,n)=>vo(n)?!1:F_(e,n)||jF(e,n)||I_(e,n)||L_(e,n)||xD(e,n),V_=(e,n)=>R0(e,n)||z2(e,XF(n)),ED=(e,n)=>i0(e.charAt(n)),kD=(e,n)=>a1(e.charAt(n)),JF=e=>{const n=e.container();return ft(n)&&Sn(n.data,Vs)},QF=e=>{const n=e.split("");return Ge(n,(o,r)=>i0(o)&&r>0&&r<n.length-1&&qy(n[r-1])&&qy(n[r+1])?" ":o).join("")},_D=(e,n,o)=>{const r=n.data,c=Ee(n,0);return!o&&ED(r,0)&&!V_(e,c)?(n.data=" "+r.slice(1),!0):o&&kD(r,0)&&R0(e,c)?(n.data=Vs+r.slice(1),!0):!1},z_=e=>{const n=e.data,o=QF(n);return o!==n?(e.data=o,!0):!1},kx=(e,n,o)=>{const r=n.data,c=Ee(n,r.length-1);return!o&&ED(r,r.length-1)&&!V_(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&kD(r,r.length-1)&&z2(e,c)?(n.data=r.slice(0,-1)+Vs,!0):!1},eI=(e,n)=>{const o=n.container();if(!ft(o))return H.none();if(JF(n)){const r=_D(e,o,!1)||z_(o)||kx(e,o,!1);return xo(r,n)}else if(V_(e,n)){const r=_D(e,o,!0)||kx(e,o,!0);return xo(r,n)}else return H.none()},tI=e=>{const n=ae.fromDom(e.getBody());e.selection.isCollapsed()&&eI(n,Ee.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},AD=(e,n,o)=>{if(o===0)return;const r=ae.fromDom(e),c=ar(r,Ac).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&z2(c,Ee(e,e.data.length)),b=n===0&&R0(c,Ee(e,0));e.replaceData(n,o,rg(u,4,b,f))},_x=(e,n)=>{const o=e.data.slice(n),r=o.length-Va(o).length;AD(e,n,r)},U_=(e,n)=>{const o=e.data.slice(0,n),r=o.length-cc(o).length;AD(e,n-r,r)},W_=(e,n,o,r=!0)=>{const c=cc(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Js(ae.fromDom(f)),o&&_x(u,c),u},nI=(e,n)=>{const o=e.container(),r=e.offset();return!Ee.isTextPosition(e)&&o===n.parentNode&&r>Ee.before(n).offset()},oI=(e,n)=>nI(n,e)?Ee(n.container(),n.offset()-1):n,OD=e=>ft(e)?Ee(e,0):Ee.before(e),sI=e=>ft(e)?Ee(e,e.data.length):Ee.after(e),DD=e=>bi(e.previousSibling)?H.some(sI(e.previousSibling)):e.previousSibling?bf(e.previousSibling):H.none(),Jh=e=>bi(e.nextSibling)?H.some(OD(e.nextSibling)):e.nextSibling?Qi(e.nextSibling):H.none(),rI=(e,n)=>H.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>hu(e,Ee.before(o))).orThunk(()=>bl(e,Ee.after(n))),RD=(e,n)=>bl(e,Ee.after(n)).orThunk(()=>hu(e,Ee.before(n))),aI=(e,n)=>DD(n).orThunk(()=>Jh(n)).orThunk(()=>rI(e,n)),cI=(e,n)=>Jh(n).orThunk(()=>DD(n)).orThunk(()=>RD(e,n)),MD=(e,n,o)=>e?cI(n,o):aI(n,o),ND=(e,n,o)=>MD(e,n,o).map(qe(oI,o)),Z_=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},BD=e=>n=>n.dom===e,sl=(e,n)=>n&&hn(e.schema.getBlockElements(),As(n)),iI=e=>{if(qs(e)){const n=ae.fromHtml('<br data-mce-bogus="1">');return js(e),Ur(e,n),H.some(Ee.before(n.dom))}else return H.none()},lI=(e,n,o)=>{const r=Gc(e).filter(xc),c=dd(e).filter(xc);return Js(e),sd(r,c,n,(u,f,b)=>{const y=u.dom,E=f.dom,N=y.data.length;return W_(y,E,o),b.container()===E?Ee(y,N):b}).orThunk(()=>(o&&(r.each(u=>U_(u.dom,u.dom.length)),c.each(u=>_x(u.dom,0))),n))},uI=(e,n)=>hn(e.schema.getTextInlineElements(),As(n)),S1=(e,n,o,r=!0)=>{const c=ND(n,e.getBody(),o.dom),u=ar(o,qe(sl,e),BD(e.getBody())),f=lI(o,c,uI(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(iI).fold(()=>{r&&Z_(e,n,f)},b=>{r&&Z_(e,n,H.some(b))})},dI=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,x1=e=>dI.test(e),T1=(e,n)=>$c(ae.fromDom(n),jp(e))&&!fm(e.schema,n)&&e.dom.isEditable(n),mI=e=>{var n;return br.DOM.getStyle(e,"direction",!0)==="rtl"||x1((n=e.textContent)!==null&&n!==void 0?n:"")},$a=(e,n,o)=>Rt(br.DOM.getParents(o.container(),"*",n),e),Bm=(e,n,o)=>{const r=$a(e,n,o);return H.from(r[r.length-1])},hW=(e,n,o)=>{const r=Ga(n,e),c=Ga(o,e);return Ze(r)&&r===c},Jc=e=>uc(e)||Rl(e),No=(e,n)=>{const o=n.container(),r=n.offset();return e?Ps(o)?ft(o.nextSibling)?Ee(o.nextSibling,0):Ee.after(o):uc(n)?Ee(o,r+1):n:Ps(o)?ft(o.previousSibling)?Ee(o.previousSibling,o.previousSibling.data.length):Ee.before(o):Rl(n)?Ee(o,r-1):n},Cu=qe(No,!0),PD=qe(No,!1),j_=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},G_=e=>{e.execCommand("delete")},U2=e=>j_(e,"Delete"),$D=e=>j_(e,"ForwardDelete"),FD=e=>n=>Vr(di(n),e,ys),fI=e=>_e(e)||ru(e),Ax=(e,n)=>Ai(e,n)?k(n,fI,FD(e)):H.none(),W2=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},ID=(e,n,o)=>ta(Qi(o),bf(o),(r,c)=>{const u=No(!0,r),f=No(!1,c),b=No(!1,n);return e?bl(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):hu(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),Gu=e=>(ki(e)?Gc(e):Oi(e)).bind(Gu).orThunk(()=>H.some(e)),LD=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=Gu(o).getOr(o),f=ae.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?W2(e,r):qs(f)&&(I(f),r&&e.selection.setCursorLocation(f.dom,0)),!ys(o,f)){const b=Vr(di(f),o)?[]:oh(f);xe(b.concat(za(o)),y=>{!ys(y,f)&&!Ai(y,f)&&qs(y)&&Js(y)})}},gI=e=>n=>ys(e,n),HD=e=>Ec(e,"td,th"),q_=(e,n)=>{const o=E=>Bg(ae.fromDom(E),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=ta(r,c,ys).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},K_=(e,n)=>({start:e,end:n}),Z2=(e,n,o)=>({rng:e,table:n,cells:o}),j2=mu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Ug=(e,n)=>En(ae.fromDom(e),"td,th",n),wu=e=>!ys(e.start,e.end),M0=(e,n)=>Bg(e.start,n).bind(o=>Bg(e.end,n).bind(r=>xo(ys(o,r),o))),vr=(e,n)=>!wu(e)&&M0(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),G2=(e,n)=>{const o=Ug(e.startContainer,n),r=Ug(e.endContainer,n);return ta(o,r,K_)},VD=e=>n=>Bg(n,e).bind(o=>Ds(HD(o)).map(r=>K_(n,r))),zD=e=>n=>Bg(n,e).bind(o=>Xo(HD(o)).map(r=>K_(r,n))),q2=e=>n=>M0(n,e).map(o=>Z2(n,o,HD(o))),Ox=(e,n,o,r)=>{if(o.collapsed||!e.forall(wu))return H.none();if(n.isSameTable){const c=e.bind(q2(r));return H.some({start:c,end:c})}else{const c=Ug(o.startContainer,r),u=Ug(o.endContainer,r),f=c.bind(VD(r)).bind(q2(r)),b=u.bind(zD(r)).bind(q2(r));return H.some({start:f,end:b})}},Dx=(e,n)=>Fs(e,o=>ys(o,n)),K2=e=>ta(Dx(e.cells,e.rng.start),Dx(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),Rx=(e,n,o)=>e.exists(r=>vr(r,o)&&i1(r.start,n)),Mx=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},UD=(e,n,o,r)=>Ox(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=K2(c).getOr([]);if(u&&c.cells.length===f.length)return H.some(j2.fullTable(c.table));if(f.length>0){if(u)return H.some(j2.partialTable(f,H.none()));{const b=Mx(o,n);return H.some(j2.partialTable(f,H.some({...n,rng:b})))}}else return H.none()}),WD=(e,n,o,r)=>Ox(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(K2).getOr([]),b=u.bind(K2).getOr([]);if(f.length>0&&b.length>0){const y=Mx(o,n);return H.some(j2.multiTable(f,b,y))}else return H.none()}),ZD=(e,n)=>{const o=gI(e),r=G2(n,o),c=q_(n,o);return Rx(r,n,o)?r.map(u=>j2.singleCellTable(n,u.start)):c.isMultiTable?WD(r,c,n,o):UD(r,c,n,o)},Y_=e=>xe(e,n=>{Br(n,"contenteditable"),I(n)}),jD=(e,n)=>H.from(e.dom.getParent(n,e.dom.isBlock)).map(ae.fromDom),N0=(e,n,o)=>{o.each(r=>{n?Js(r):(I(r),e.selection.setCursorLocation(r.dom,0))})},Nx=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),Px(e,c,n,!1).each(u=>u())},Bx=e=>{const n=Ng(e),o=ae.fromDom(e.selection.getNode());_c(o.dom)&&qs(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&wt(n,r=>ys(r,o))&&Gr(o,"data-mce-selected","1")},GD=(e,n,o)=>H.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=jD(e,f?u.endContainer:u.startContainer);u.deleteContents(),N0(e,f,b.filter(qs));const y=f?n[0]:n[n.length-1];return Nx(e,y,r,f),qs(y)?H.none():H.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);Y_(c),Bx(e)}),hI=(e,n,o,r)=>H.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];Nx(e,u,c,!0),Nx(e,f,c,!1);const b=qs(u)?n:n.slice(1),y=qs(f)?o:o.slice(0,-1);Y_(b.concat(y)),r.deleteContents(),Bx(e)}),Px=(e,n,o,r=!0)=>H.some(()=>{LD(e,n,o,r)}),qD=(e,n)=>H.some(()=>S1(e,!1,n)),KD=(e,n,o)=>ZD(n,o).bind(r=>r.fold(qe(Px,e),qe(qD,e),qe(GD,e),qe(hI,e))),$x=(e,n)=>Y2(e,n),YD=(e,n,o,r)=>Fx(n,r).fold(()=>KD(e,n,o),c=>$x(e,c)),XD=(e,n,o)=>{const r=ae.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?GD(e,o,H.none()):YD(e,r,c,n)},X_=(e,n)=>Wo(zg(n,e),Ni),Fx=(e,n)=>Wo(zg(n,e),il("caption")),JD=(e,n,o,r,c)=>s0(o,e.getBody(),c).bind(u=>X_(n,ae.fromDom(u.getNode())).bind(f=>ys(f,r)?H.none():H.some(Zt))),Y2=(e,n)=>H.some(()=>{I(n),e.selection.setCursorLocation(n.dom,0)}),QD=(e,n,o,r)=>Qi(e.dom).bind(c=>bf(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),eR=(e,n)=>Y2(e,n),tR=(e,n,o)=>Fx(e,ae.fromDom(o.getNode())).fold(()=>H.some(Zt),r=>xo(!ys(r,n),Zt)),nR=(e,n,o,r,c)=>s0(o,e.getBody(),c).fold(()=>H.some(Zt),u=>QD(r,o,c,u)?eR(e,r):tR(n,r,u)),oR=(e,n,o,r)=>{const c=Ee.fromRangeStart(e.selection.getRng());return X_(o,r).bind(u=>qs(u)?Y2(e,u):JD(e,o,n,u,c))},sR=(e,n,o,r)=>{const c=Ee.fromRangeStart(e.selection.getRng());return qs(r)?Y2(e,r):nR(e,o,n,r,c)},J_=(e,n)=>e?$_(n):WF(n),rR=(e,n)=>{const o=Ee.fromRangeStart(e.selection.getRng());return J_(n,o)||Ll(n,e.getBody(),o).exists(r=>J_(n,r))},aR=(e,n,o)=>{const r=ae.fromDom(e.getBody());return Fx(r,o).fold(()=>oR(e,n,r,o).orThunk(()=>xo(rR(e,n),Zt)),c=>sR(e,n,r,c))},X2=(e,n)=>{const o=ae.fromDom(e.selection.getStart(!0)),r=Ng(e);return e.selection.isCollapsed()&&r.length===0?aR(e,n,o):XD(e,o,r)},_f=(e,n)=>{let o=n;for(;o&&o!==e;){if(Bs(o)||Ts(o))return o;o=o.parentNode}return null},cR=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],iR=et.each,B0=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const N={};return iR(n.getAttribs(E),R=>{const L=R.nodeName.toLowerCase();L!=="style"&&!c(L)&&(N[L]=n.getAttrib(E,L))}),N},y=(E,N)=>{for(const R in E)if(hn(E,R)){const L=N[R];if(Vn(L)||E[R]!==L)return!1;delete N[R]}for(const R in N)if(hn(N,R))return!1;return!0};return Ut(u)&&Ut(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!vl(u)&&!vl(f)},c=u=>wt(cR,f=>xn(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Q_=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},P0=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const E=r.attributes[y];E?E.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},eA=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Q_(o,c=>{P0(e,n,c,r)}),r},tA=(e,n)=>{const o=(r,c)=>{bt(r,u=>{const f=dr(u.nodes);xe(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const E=f[y];(!(c?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||Pt(E.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},E1=(e,n,o,r={})=>{const c=eA(e,n,o);tA(c,r)},J2=(e,n,o)=>{if(e.insert&&n(o)){const r=new yl("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new yl("#text",3)).value=Vs},nA=e=>{var n;return $0(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Vs},$0=(e,n)=>{const o=e==null?void 0:e.firstChild;return Ze(o)&&o===e.lastChild&&o.name===n},Qh=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},F0=(e,n,o,r)=>r.isEmpty(n,o,c=>Qh(e,c)),pI=(e,n)=>Ze(e)&&(n(e)||e.name==="br"),lR=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return H.from(n)},Ix=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Ix(c,n,o);e.unwrap()}},oA=(e,n,o,r=Zt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=et.makeMap("tr,td,th,tbody,thead,tfoot,table"),y=new Set,E=N=>N!==o&&!b[N.name];for(let N=0;N<e.length;N++){const R=e[N];let L,Q,te;if(!R.parent||y.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let ee=R.next;for(;ee&&c[ee.name];){ee.name="li",y.add(ee),R.parent.insert(ee,R.parent);ee=ee.next}R.unwrap();continue}const j=[R];for(L=R.parent;L&&!n.isValidChild(L.name,R.name)&&E(L);L=L.parent)j.push(L);if(L&&j.length>1)if(n.isValidChild(L.name,R.name)){j.reverse(),Q=j[0].clone(),r(Q);let ee=Q;for(let ye=0;ye<j.length-1;ye++){n.isValidChild(ee.name,j[ye].name)&&ye>0?(te=j[ye].clone(),r(te),ee.append(te)):te=ee;for(let pe=j[ye].firstChild;pe&&pe!==j[ye+1];){const we=pe.next;te.append(pe),pe=we}ee=te}F0(n,u,f,Q)?L.insert(R,j[0],!0):(L.insert(Q,j[0],!0),L.insert(R,Q)),L=j[0],(F0(n,u,f,L)||$0(L,"br"))&&L.empty().remove()}else Ix(R,n);else if(R.parent){if(R.name==="li"){let ee=R.prev;if(ee&&(ee.name==="ul"||ee.name==="ol")){ee.append(R);continue}if(ee=R.next,ee&&(ee.name==="ul"||ee.name==="ol")&&ee.firstChild){ee.insert(R,ee.firstChild,!0);continue}const ye=new yl("ul",1);r(ye),R.wrap(ye);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const ee=new yl("div",1);r(ee),R.wrap(ee)}else Ix(R,n)}}},pW=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},uR=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&pW(o,"a")),sA=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},Pm=e=>{const n=Ee.fromRangeStart(e),o=Ee.fromRangeEnd(e),r=e.commonAncestorContainer;return Ll(!1,r,o).map(c=>!pl(n,o,r)&&pl(n,c,r)?sA(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},Q2=e=>e.collapsed?e:Pm(e),Lx=e=>Ze(e.firstChild)&&e.firstChild===e.lastChild,rA=e=>e.name==="br"||e.value===Vs,bI=(e,n)=>e.getBlockElements()[n.name]&&Lx(n)&&rA(n.firstChild),dR=(e,n)=>{const o=e.getNonEmptyElements();return Ze(n)&&(n.isEmpty(o)||bI(e,n))},vI=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),dR(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},mR=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},aA=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return mR(c)},yI=e=>{var n;return Rt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},fR=e=>e.data===Vs||Pr(e),CI=e=>Ze(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&fR(e.firstChild),eC=e=>!e.firstChild||CI(e),gR=e=>e.length>0&&eC(e[e.length-1])?e.slice(0,-1):e,cA=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},hR=(e,n)=>!!cA(e,n),wI=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},SI=(e,n)=>{const o=Ee.before(e),c=gu(n).next(o);return c?c.toRange():null},pR=(e,n)=>{const o=Ee.after(e),c=gu(n).prev(o);return c?c.toRange():null},xI=(e,n,o,r)=>{const c=wI(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),et.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),pR(n[n.length-1],o)},TI=(e,n,o)=>{const r=e.parentNode;return r&&et.each(n,c=>{r.insertBefore(c,e)}),SI(e,o)},bR=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),pR(n[0],o)),EI=(e,n,o,r)=>{const c=aA(n,e,r),u=cA(n,o.startContainer),f=gR(yI(c.firstChild)),b=1,y=2,E=n.getRoot(),N=R=>{const L=Ee.fromRangeStart(o),Q=gu(n.getRoot()),te=R===b?Q.prev(L):Q.next(L),j=te==null?void 0:te.getNode();return j?cA(n,j)!==u:!0};return u?N(b)?TI(u,f,E):N(y)?bR(u,f,E,n):xI(u,f,E,o):null},iA=["pre"],k1=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,E=Ue(iA,u.name);if(y&&E){const N=u.attr("contenteditable")!=="false",R=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,L=H.from(_f(r,o)).forall(Bs);return N&&R&&L}else return!1},lA=_c,kI=(e,n,o)=>{if(Ze(o)){const r=e.getParent(n.endContainer,lA);return o===r&&i1(ae.fromDom(o),n)}else return!1},Hx=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},vR=(e,n)=>{H.from(e.getParent(n,"td,th")).map(ae.fromDom).each(Z)},yR=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=B0(e);et.each(r.select("*[data-mce-fragment]"),f=>{if(Ze(o[f.nodeName.toLowerCase()])&&LF(r,f)){for(let y=f.parentElement;Ze(y)&&y!==c&&!HF(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},_I=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},CR=e=>{et.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},AI=e=>!!e.getAttribute("data-mce-fragment"),_1=(e,n)=>Ze(n)&&!e.schema.getVoidElements()[n.nodeName],wR=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=_f(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let E=f.createRng();const N=n.previousSibling;if(ft(N)){E.setStart(N,(r=(o=N.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Q=n.nextSibling;ft(Q)&&(N.appendData(Q.data),(c=Q.parentNode)===null||c===void 0||c.removeChild(Q))}else E.setStartBefore(n),E.setEndBefore(n);const R=Q=>{let te=Ee.fromRangeStart(Q);return te=gu(e.getBody()).next(te),te==null?void 0:te.toRange()},L=f.getParent(n,f.isBlock);f.remove(n),L&&f.isEmpty(L)&&(js(ae.fromDom(L)),E.setStart(L,0),E.setEnd(L,0),!lA(L)&&!AI(L)&&(u=R(E))?(E=u,f.remove(L)):f.add(L,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(E)},SR=e=>{const n=e.dom,o=Q2(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,lA);kI(n,o,r)?Px(e,o,ae.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&ft(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},xR=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return H.some(n);return H.none()},Vx=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,E=Yh({validate:!0},e.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,N);let R=u.getRng();const L=R.startContainer,Q=e.getBody();L===Q&&u.isCollapsed()&&f.isBlock(Q.firstChild)&&_1(e,Q.firstChild)&&f.isEmpty(Q.firstChild)&&(R=f.createRng(),R.setStart(Q.firstChild,0),R.setEnd(Q.firstChild,0),u.setRng(R)),u.isCollapsed()||SR(e);const te=u.getNode(),j={context:te.nodeName.toLowerCase(),data:o.data,insert:!0},ee=b.parse(n,j);if(o.paste===!0&&vI(e.schema,ee)&&hR(f,te))return R=EI(E,f,u.getRng(),ee),R&&u.setRng(R),n;o.paste===!0&&k1(f,ee,te,e.getBody())&&((r=ee.firstChild)===null||r===void 0||r.unwrap()),_I(ee);let ye=ee.lastChild;if(ye&&ye.attr("id")==="mce_marker"){const pe=ye;for(ye=ye.prev;ye;ye=ye.walk(!0))if(ye.type===3||!f.isBlock(ye.name)){ye.parent&&e.schema.isValidChild(ye.parent.name,"span")&&ye.parent.insert(pe,ye,ye.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(te),!j.invalid)n=E.serialize(ee),Hx(e,n,te);else{e.selection.setContent(N);let pe=u.getNode(),we;const De=e.getBody();for(tf(pe)?pe=we=De:we=pe;we&&we!==De;)pe=we,we=we.parentNode;n=pe===De?De.innerHTML:f.getOuterHTML(pe);const Xe=b.parse(n),Ot=xR(Xe),xt=Ot.bind(lR).getOr(Xe);Ot.each(gn=>gn.replace(ee));const Fe=ee.children(),$e=(c=ee.parent)!==null&&c!==void 0?c:Xe;ee.unwrap();const Gt=Rt(Fe,gn=>uR(e.schema,gn,$e));oA(Gt,e.schema,xt),E1(b.getNodeFilters(),b.getAttributeFilters(),Xe),n=E.serialize(Xe),pe===De?f.setHTML(De,n):f.setOuterHTML(pe,n)}return yR(e,y),wR(e,f.get("mce_marker")),CR(e.getBody()),vR(f,u.getStart()),mm(e.schema,e.getBody(),u.getStart()),n},tC=e=>e instanceof yl,OI=e=>{Kh(e)&&Qi(e.getBody()).each(n=>{const o=n.getNode(),r=Wr(o)?Qi(o).getOr(n):n;e.selection.setRng(r.toRange())})},zx=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&OI(e)},DI=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=$l(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Wp(e),o)):o||(o=c),zx(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Yh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Qa(ae.fromDom(n))?o:et.trim(o);return zx(e,c,r.no_selection),{content:c,html:c}}},RI=(e,n,o,r)=>{E1(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=Yh({validate:!1},e.schema).serialize(o),u=Qa(ae.fromDom(n))?c:et.trim(c);return zx(e,u,r.no_selection),{content:o,html:u}},Ux=(e,n,o)=>H.from(e.getBody()).map(r=>tC(n)?RI(e,r,n,o):DI(e,r,n,o)).getOr({content:n,html:tC(o.content)?"":o.content}),TR=(e,n,o)=>ar(e,n,o).isSome(),uA=(e,n)=>M(e,n).isSome(),ER=e=>he(e)?e:Se,MI=(e,n,o)=>{let r=e.dom;const c=ER(o);for(;r.parentNode;){r=r.parentNode;const u=ae.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return H.none()},Wx=(e,n,o)=>{const r=n(e),c=ER(o);return r.orThunk(()=>c(e)?H.none():MI(e,n,c))},nC=o2,dA=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Hi(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},mA=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>dA(e,b,o)?!0:b.parentNode===u||!!qu(e,b,o,r,!0));return!!qu(e,f,o,r,c)},Zx=(e,n,o)=>qa(o)&&nC(n,o.inline)||Sr(o)&&nC(n,o.block)?!0:Hi(o)?Ut(n)&&e.is(n,o.selector):!1,kR=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(he(o.onmatch))return o.onmatch(n,o,r);if(f){if(Ha(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):f0(e,n,f[y]))return!0}else for(const y in f)if(hn(f,y)){const E=b?e.getAttrib(n,y):f0(e,n,y),N=Sf(f[y],u),R=Pt(E)||jo(E);if(R&&Pt(N))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!nC(E,s2(N,y)))return!1}}return!0},qu=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Ut(n))for(let b=0;b<u.length;b++){const y=u[b];if(Zx(e.dom,n,y)&&kR(f,n,y,"attributes",c,r)&&kR(f,n,y,"styles",c,r)){const E=y.classes;if(E){for(let N=0;N<E.length;N++)if(!e.dom.hasClass(n,Sf(E[N],r)))return}return y}}},$m=(e,n,o,r,c)=>{if(r)return mA(e,r,n,o,c);if(r=e.selection.getNode(),mA(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&mA(e,u,n,o,c))},NI=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&qu(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},fA=(e,n)=>{const o=c=>ys(c,ae.fromDom(e.getBody())),r=(c,u)=>qu(e,c.dom,u)?H.some(u):H.none();return H.from(e.selection.getStart(!0)).bind(c=>Wx(ae.fromDom(c),u=>aa(n,f=>r(u,f)),o)).getOrNull()},Fa=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=g0(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Hi(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},gA=(e,n,o)=>$n(o,(r,c)=>{const u=pc(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),ep=ie,Wg=(e,n)=>e.importNode(n,!0),_R=e=>{const n=[];let o=e;for(;o;){if(ft(o)&&o.data!==ep||o.childNodes.length>1)return[];Ut(o)&&n.push(o),o=o.firstChild}return n},jx=e=>_R(e).length>0,I0=e=>{if(e){const n=new Ba(e,e);for(let o=n.current();o;o=n.next())if(ft(o))return o}return null},hA=e=>{const n=ae.fromTag("span");return lc(n,{id:vf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ur(n,ae.fromText(ep)),n},BI=e=>{const n=I0(e);return n&&n.data.charAt(0)===ep&&n.deleteData(0,1),n},tp=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(jx(n))S1(e,!1,ae.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,E=u.endContainer,N=u.endOffset,R=BI(n);r.remove(n,!0),b===R&&y>0&&u.setStart(R,y-1),E===R&&N>0&&u.setEnd(R,N-1),f&&r.isEmpty(f)&&I(ae.fromDom(f)),c.setRng(u)}},pA=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)tp(e,n,o);else if(n=Em(e.getBody(),c.getStart()),!n)for(;n=r.get(vf);)tp(e,n,!1)},A1=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,qe(n2,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(w(ae.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},AR=(e,n)=>(e.appendChild(n),n),Zg=(e,n)=>{var o;const r=Tr(e,(u,f)=>AR(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return AR(r,c.createTextNode(ep))},Hd=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=Rt(Rs(f.get()),R=>R!==r&&!Sn(R,"removeformat")),E=gA(e,o,y);if(Rt(E,R=>!h0(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,c,R,u),b.remove(R),H.some(R)}else return H.none()},Gx=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=Em(e.getBody(),c.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&N.test(E.charAt(b))&&N.test(E.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let L=$g(e.dom,f,u);L=O0(L),e.formatter.apply(n,o,L),c.moveToBookmark(R)}else{let R=r?I0(r):null;(!r||(R==null?void 0:R.data)!==ep)&&(r=Wg(e.getDoc(),hA(!0).dom),R=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(R,b)}},bA=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),E=y.startContainer,N=y.startOffset;let R=E;ft(E)&&(N!==E.data.length&&(f=!0),R=R.parentNode);const L=[];let Q;for(;R;){if(qu(e,R,n,o,r)){Q=R;break}R.nextSibling&&(f=!0),L.push(R),R=R.parentNode}if(Q)if(f){const te=u.getBookmark();y.collapse(!0);let j=$g(c,y,b,!0);j=O0(j),e.formatter.remove(n,o,j,r),u.moveToBookmark(te)}else{const te=Em(e.getBody(),Q),j=hA(!1).dom;A1(e,j,te??Q);const ee=Hd(e,j,Q,n,o,r),ye=Zg(L.concat(ee.toArray()),j);te&&tp(e,te,!1),u.setCursorLocation(ye,1),c.isEmpty(Q)&&c.remove(Q)}},PI=(e,n)=>{const o=e.selection,r=e.getBody();pA(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===ep&&pA(e,Em(r,o.getStart())),(n===37||n===39)&&pA(e,Em(r,o.getStart()))},$I=e=>{e.on("mouseup keydown",n=>{PI(e,n.keyCode)})},oC=e=>{const n=hA(!1),o=Zg(e,n.dom);return{caretContainer:n,caretPosition:Ee(o,0)}},OR=(e,n)=>{const{caretContainer:o,caretPosition:r}=oC(n);return xs(ae.fromDom(e),o),Js(ae.fromDom(e)),r},Vd=(e,n)=>{const{caretContainer:o,caretPosition:r}=oC(n);return e.selection.getRng().insertNode(o.dom),r},sC=(e,n)=>{const o=e.schema.getTextInlineElements();return hn(o,As(n))&&!Yr(n.dom)&&!gi(n.dom)},vA=e=>Yr(e.dom)&&jx(e.dom),O1={},qx=oi(["pre"]),D1=(e,n)=>{O1[e]||(O1[e]=[]),O1[e].push(n)},yA=(e,n)=>{hn(O1,e)&&xe(O1[e],o=>{o(n)})};D1("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return qx(f)&&Ue(c,f)},r=(c,u)=>{const f=ae.fromDom(u),b=ti(f).dom;Js(f),Mu(ae.fromDom(c),[ae.fromTag("br",b),ae.fromTag("br",b),...za(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Rt(Rt(c,qx),o(c));xe(u,f=>{r(f.previousSibling,f)})}});const DR=["fontWeight","fontStyle","color","fontSize","fontFamily"],RR=e=>ot(e.styles)&&wt(Rs(e.styles),n=>Ue(DR,n)),FI=e=>Wo(e,n=>qa(n)&&n.inline==="span"&&RR(n)),MR=(e,n)=>{const o=e.get(n);return ut(o)?FI(o):H.none()},NR=(e,n)=>hu(n,Ee.fromRangeStart(e)).isNone(),BR=(e,n)=>bl(n,Ee.fromRangeEnd(e)).exists(o=>!Pr(o.getNode())||bl(n,o).isSome())===!1,L0=e=>n=>yd(n)&&e.isEditable(n),II=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return NR(o,n[0])&&BR(o,n[0])?n:[];{const r=Xo(n).filter(f=>NR(o,f)).toArray(),c=Ds(n).filter(f=>BR(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},PR=e=>Rt(II(e),L0(e.dom)),Kx=e=>Rt(e.getSelectedBlocks(),L0(e.dom)),CA=et.each,Yx=e=>Ut(e)&&!vl(e)&&!Yr(e)&&!gi(e),wA=(e,n)=>{for(let o=e;o;o=o[n]){if(ft(o)&&Rn(o.data))return e;if(Ut(o)&&!vl(o))return o}return e},$R=(e,n,o)=>{const r=B0(e),c=Ut(n)&&$d(n),u=Ut(o)&&$d(o);if(c&&u){const f=wA(n,"previousSibling"),b=wA(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const E=y;y=y.nextSibling,f.appendChild(E)}return e.dom.remove(b),et.each(et.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},FR=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=$R(e,JS(r),r))!==null&&c!==void 0?c:r;$R(e,u,JS(u,!0))}},LI=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";CA(e.select(r,o),c=>{Yx(c)&&$d(c)&&CA(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},SA=(e,n,o)=>{CA(e.childNodes,r=>{Yx(r)&&(n(r)&&o(r),r.hasChildNodes()&&SA(r,n,o))})},HI=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},IR=(e,n)=>o=>!!(o&&f0(e,o,n)),LR=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),HI(e,r)},R1=mu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),VI=/^(src|href|style)$/,xA=et.each,Xx=o2,zI=e=>/^(TR|TH|TD)$/.test(e.nodeName),HR=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),TA=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Ut(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return ft(r)&&o&&c>=r.data.length&&(r=new Ba(r,e.getBody()).next()||r),ft(r)&&!o&&c===0&&(r=new Ba(r,e.getBody()).prev()||r),r},VR=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return zI(e)&&r?e.nodeName==="TR"&&r[o]||r:e},np=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},zR=(e,n,o,r,c)=>{const u=ae.fromDom(n),f=ae.fromDom(e.create(r,c)),b=o?ni(u):sh(u);return Mu(f,b),o?(xs(u,f),gd(f,u)):(Ru(u,f),Ur(f,u)),f.dom},UI=(e,n)=>n.links&&e.nodeName==="A",UR=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=$l(e);Sr(o)&&r===u.getRoot()&&(!o.list_block||!Xx(n,o.list_block))&&xe(dr(n.childNodes),b=>{Hh(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=np(u,b,f),u.setAttribs(c,Wp(e))):c=null}),!(p0(o)&&!Xx(o.inline,n))&&u.remove(n,!0)},WR=(e,n,o)=>Uo(e)?{name:n,value:null}:{name:e,value:Sf(n,o)},EA=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},ZR=(e,n,o,r,c)=>{let u=!1;xA(o.styles,(f,b)=>{const{name:y,value:E}=WR(b,f,r),N=s2(E,y);(o.remove_similar||G(E)||!Ut(c)||Xx(f0(e,c,y),N))&&e.setStyle(n,y,""),u=!0}),u&&EA(e,n)},WI=(e,n,o)=>{n==="removeformat"?xe(Kx(e.selection),r=>{xe(DR,c=>e.dom.setStyle(r,c,"")),EA(e.dom,r)}):MR(e.formatter,n).each(r=>{xe(Kx(e.selection),c=>ZR(e.dom,c,r,o,null))})},jR=(e,n,o,r,c)=>{const u=e.dom,f=B0(e),b=e.schema;if(qa(n)&&_p(b,n.inline)&&fm(b,r)&&r.parentElement===e.getBody())return UR(e,r,n),R1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Zx(u,r,n)&&!UI(r,n))return R1.keep();const y=r,E=n.preserve_attributes;if(qa(n)&&n.remove==="all"&&ut(E)){const N=Rt(u.getAttribs(y),R=>Ue(E,R.name.toLowerCase()));if(u.removeAllAttribs(y),xe(N,R=>u.setAttrib(y,R.name,R.value)),N.length>0)return R1.rename("span")}if(n.remove!=="all"){ZR(u,y,n,o,c),xA(n.attributes,(R,L)=>{const{name:Q,value:te}=WR(L,R,o);if(n.remove_similar||G(te)||!Ut(c)||Xx(u.getAttrib(c,Q),te)){if(Q==="class"){const j=u.getAttrib(y,Q);if(j){let ee="";if(xe(j.split(/\s+/),ye=>{/mce\-\w+/.test(ye)&&(ee+=(ee?" ":"")+ye)}),ee){u.setAttrib(y,Q,ee);return}}}if(VI.test(Q)&&y.removeAttribute("data-mce-"+Q),Q==="style"&&oi(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(Q),u.setStyle(y,"list-style-type","none");return}Q==="class"&&y.removeAttribute("className"),y.removeAttribute(Q)}}),xA(n.classes,R=>{R=Sf(R,o),(!Ut(c)||u.hasClass(c,R))&&u.removeClass(y,R)});const N=u.getAttribs(y);for(let R=0;R<N.length;R++){const L=N[R].nodeName;if(!f.isAttributeInternal(L))return R1.keep()}}return n.remove!=="none"?(UR(e,y,n),R1.removed()):R1.keep()},rC=(e,n,o,r,c)=>jR(e,n,o,r,c).fold(Se,u=>(e.dom.rename(r,u),!0),Qe),ZI=(e,n,o,r,c)=>{let u;return n.parentNode&&xe(g0(e.dom,n.parentNode).reverse(),f=>{if(!u&&Ut(f)&&f.id!=="_start"&&f.id!=="_end"){const b=qu(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},jI=(e,n,o,r)=>jR(e,n,o,r,r).fold(rt(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),rt(null)),GI=(e,n,o,r,c,u,f,b)=>{var y,E;let N,R;const L=e.dom;if(o){const Q=o.parentNode;for(let te=r.parentNode;te&&te!==Q;te=te.parentNode){let j=L.clone(te,!1);for(let ee=0;ee<n.length&&(j=jI(e,n[ee],b,j),j!==null);ee++);j&&(N&&j.appendChild(N),R||(R=j),N=j)}u&&(!f.mixed||!L.isBlock(o))&&(r=(y=L.split(o,r))!==null&&y!==void 0?y:r),N&&R&&((E=c.parentNode)===null||E===void 0||E.insertBefore(N,c),R.appendChild(c),qa(f)&&FR(e,f,b,N))}return r},GR=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,E=j=>{const ee=ZI(e,j,n,o,c);return GI(e,u,ee,j,j,!0,f,o)},N=j=>vl(j)&&Ut(j)&&(j.id==="_start"||j.id==="_end"),R=j=>wt(u,ee=>rC(e,ee,o,j,j)),L=j=>{const ee=dr(j.childNodes),pe=R(j)||wt(u,Xe=>Zx(b,j,Xe)),we=j.parentNode;if(!pe&&Ze(we)&&b0(f)&&R(we),f.deep&&ee.length)for(let Xe=0;Xe<ee.length;Xe++)L(ee[Xe]);xe(["underline","line-through","overline"],Xe=>{Ut(j)&&e.dom.getStyle(j,"text-decoration")===Xe&&j.parentNode&&Pg(b,j.parentNode)===Xe&&rC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Xe}},void 0,j)})},Q=j=>{const ee=b.get(j?"_start":"_end");if(ee){let ye=ee[j?"firstChild":"lastChild"];return N(ye)&&(ye=ye[j?"firstChild":"lastChild"]),ft(ye)&&ye.data.length===0&&(ye=j?ee.previousSibling||ee.nextSibling:ee.nextSibling||ee.previousSibling),b.remove(ee,!0),ye}else return null},te=j=>{let ee,ye,pe=$g(b,j,u,j.collapsed);if(f.split){if(pe=O0(pe),ee=TA(e,pe,!0),ye=TA(e,pe),ee!==ye){if(ee=VR(ee,!0),ye=VR(ye,!1),HR(b,ee,ye)){const De=H.from(ee.firstChild).getOr(ee);E(zR(b,De,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Q(!0);return}if(HR(b,ye,ee)){const De=H.from(ye.lastChild).getOr(ye);E(zR(b,De,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Q(!1);return}ee=np(b,ee,"span",{id:"_start","data-mce-type":"bookmark"}),ye=np(b,ye,"span",{id:"_end","data-mce-type":"bookmark"});const we=b.createRng();we.setStartAfter(ee),we.setEndBefore(ye),zh(b,we,De=>{xe(De,Xe=>{!vl(Xe)&&!vl(Xe.parentNode)&&E(Xe)})}),E(ee),E(ye),ee=Q(!0),ye=Q()}else ee=ye=E(ee);pe.startContainer=ee.parentNode?ee.parentNode:ee,pe.startOffset=b.nodeIndex(ee),pe.endContainer=ye.parentNode?ye.parentNode:ye,pe.endOffset=b.nodeIndex(ye)+1}zh(b,pe,we=>{xe(we,L)})};if(r){if(l1(r)){const j=b.createRng();j.setStartBefore(r),j.setEndAfter(r),te(j)}else te(r);v2(e,n,r,o);return}!y.isCollapsed()||!qa(f)||Ng(e).length?(wf(e,()=>t2(e,te),j=>qa(f)&&$m(e,n,o,j)),e.nodeChanged()):bA(e,n,o,c),WI(e,n,o),v2(e,n,r,o)},qR=et.each,qI=(e,n,o,r)=>{const c=u=>{if(Ut(u)&&Ut(u.parentNode)&&$d(u)){const f=Pg(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(et.walk(r,c,"childNodes"),c(r))},kA=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=IR(e,"fontSize");SA(r,u=>c(u)&&$d(u),LR(e,"backgroundColor",Sf(n.styles.backgroundColor,o)))}},KR=(e,n,o,r)=>{if(qa(n)&&(n.inline==="sub"||n.inline==="sup")){const c=IR(e,"fontSize");SA(r,f=>c(f)&&$d(f),LR(e,"fontSize",""));const u=Rt(e.select(n.inline==="sup"?"sub":"sup",r),$d);e.remove(u,!0)}},bW=(e,n,o,r)=>{qR(n,c=>{qa(c)&&qR(e.dom.select(c.inline,r),u=>{Yx(u)&&rC(e,c,o,u,c.exact?u:null)}),LI(e.dom,c,r)})},aC=(e,n,o,r,c)=>{const u=c.parentNode;qu(e,u,o,r)&&rC(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>qu(e,f,o,r)?(rC(e,n,r,c),!0):!1)},cC=et.each,iC=(e,n,o,r)=>{if(bS(e)&&qa(n)&&o.parentNode){const c=Nw(e.schema),u=uA(ae.fromDom(o),f=>Yr(f.dom));return Er(c,r)&&qs(ae.fromDom(o.parentNode),!1)&&!u}else return!1},H0=(e,n,o,r)=>{if(cC(o.styles,(c,u)=>{e.setStyle(n,u,Sf(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},_A=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,E=(te,j=u)=>{he(j.onformat)&&j.onformat(te,j,o,r),H0(b,te,j,o),cC(j.attributes,(ee,ye)=>{b.setAttrib(te,ye,Sf(ee,o))}),cC(j.classes,ee=>{const ye=Sf(ee,o);b.hasClass(te,ye)||b.addClass(te,ye)})},N=(te,j)=>{let ee=!1;return cC(te,ye=>Hi(ye)?b.getContentEditable(j)==="false"&&!ye.ceFalseOverride||Ze(ye.collapsed)&&ye.collapsed!==f?!0:b.is(j,ye.selector)&&!Yr(j)?(E(j,ye),ee=!0,!1):!0:!1),ee},R=te=>{if(K(te)){const j=b.create(te);return E(j),j}else return null},L=(te,j,ee)=>{const ye=[];let pe=!0;const we=u.inline||u.block,De=R(we),Xe=Fe=>pu(u)&&qu(e,Fe,n,o),Ot=(Fe,$e,Gt)=>{const gn=ex(u)&&n2(e.schema,Fe)&&Hh(e,$e,we);return Gt&&gn},xt=(Fe,$e,Gt,gn)=>{const On=Fe.nodeName.toLowerCase(),fo=Hh(e,we,On)&&Hh(e,$e,we),Vo=!ee&&ft(Fe)&&je(Fe.data),Os=Yr(Fe),nr=!qa(u)||!te.isBlock(Fe);return(Gt||gn)&&fo&&!Vo&&!Os&&nr};zh(te,j,Fe=>{let $e;const Gt=gn=>{let On=!1,fo=pe,Vo=!1;const Os=gn.parentNode,nr=Os.nodeName.toLowerCase(),pa=te.getContentEditable(gn);Ze(pa)&&(fo=pe,pe=pa==="true",On=!0,Vo=QS(e,gn));const zc=pe&&!On;if(Pr(gn)&&!iC(e,u,gn,nr)){$e=null,Sr(u)&&te.remove(gn);return}if(Xe(gn)){$e=null;return}if(Ot(gn,nr,zc)){const yc=te.rename(gn,we);E(yc),ye.push(yc),$e=null;return}if(Hi(u)){let yc=N(c,gn);if(!yc&&Ze(Os)&&b0(u)&&(yc=N(c,Os)),!qa(u)||yc){$e=null;return}}Ze(De)&&xt(gn,nr,zc,Vo)?($e||($e=te.clone(De,!1),Os.insertBefore($e,gn),ye.push($e)),Vo&&On&&(pe=fo),$e.appendChild(gn)):($e=null,xe(dr(gn.childNodes),Gt),On&&(pe=fo),$e=null)};xe(Fe,Gt)}),u.links===!0&&xe(ye,Fe=>{const $e=Gt=>{Gt.nodeName==="A"&&E(Gt,u),xe(dr(Gt.childNodes),$e)};$e(Fe)}),xe(ye,Fe=>{const $e=On=>{let fo=0;return xe(On.childNodes,Vo=>{!s_(Vo)&&!vl(Vo)&&fo++}),fo},Gt=On=>Wo(On.childNodes,_m).filter(Vo=>te.getContentEditable(Vo)!=="false"&&Zx(te,Vo,u)).map(Vo=>{const Os=te.clone(Vo,!1);return E(Os),te.replace(Os,On,!0),te.remove(Vo,!0),Os}).getOr(On),gn=$e(Fe);if((ye.length>1||!te.isBlock(Fe))&&gn===0){te.remove(Fe,!0);return}(qa(u)||Sr(u)&&u.wrapper)&&(!u.exact&&gn===1&&(Fe=Gt(Fe)),bW(e,c,o,Fe),aC(e,u,n,o,Fe),kA(te,u,o,Fe),qI(te,u,o,Fe),KR(te,u,o,Fe),FR(e,u,o,Fe))})},Q=l1(r)?r:y.getNode();if(b.getContentEditable(Q)==="false"&&!QS(e,Q)){r=Q,N(c,r),b2(e,n,r,o);return}if(u){if(r)if(l1(r)){if(!N(c,r)){const te=b.createRng();te.setStartBefore(r),te.setEndAfter(r),L(b,$g(b,te,c),!0)}}else L(b,r,!0);else!f||!qa(u)||Ng(e).length?(y.setRng(Q2(y.getRng())),wf(e,()=>{t2(e,(te,j)=>{const ee=j?te:$g(b,te,c);L(b,ee,!1)})},Qe),e.nodeChanged()):Gx(e,n,o),MR(e.formatter,n).each(te=>{xe(PR(e.selection),j=>H0(b,j,te,o))});yA(n,e)}b2(e,n,r,o)},KI=e=>hn(e,"vars"),YI=(e,n)=>{e.set({}),n.on("NodeChange",o=>{JI(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=H.from(o.node).map(c=>l1(c)?c:c.startContainer).bind(c=>Ut(c)?H.some(c):H.from(c.parentElement)).getOrThunk(()=>XI(n));JI(n,r,e.get())})},XI=e=>e.selection.getStart(),YR=(e,n,o,r,c)=>ur(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!Vn(y)},b=>dA(e,b,o)?!0:r?!1:Ze(e.formatter.matchNode(b,o,c,!0))),XR=(e,n)=>{const o=n??XI(e);return Rt(g0(e.dom,o),r=>Ut(r)&&!gi(r))},JI=(e,n,o)=>{const r=XR(e,n);bt(o,(c,u)=>{const f=b=>{const y=YR(e,r,u,b.similar,KI(b)?b.vars:void 0),E=y.isSome();if(b.state.get()!==E){b.state.set(E);const N=y.getOr(n);KI(b)?b.callback(E,{node:N,format:u,parents:r}):xe(b.callbacks,R=>R(E,{node:N,format:u,parents:r}))}};xe([c.withSimilar,c.withoutSimilar],f),xe(c.withVars,f)})},QI=(e,n,o,r,c,u)=>{const f=n.get();xe(o.split(","),b=>{const y=Jo(f,b).getOrThunk(()=>{const N={withSimilar:{state:Wa(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Wa(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=N,N}),E=()=>{const N=XR(e);return YR(e,N,b,c,u).isSome()};if(Vn(u)){const N=c?y.withSimilar:y.withoutSimilar;N.callbacks.push(r),N.callbacks.length===1&&N.state.set(E())}else y.withVars.push({state:Wa(E()),similar:c,vars:u,callback:r})}),n.set(f)},JR=(e,n,o)=>{const r=e.get();xe(n.split(","),c=>Jo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Rt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Rt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Rt(u.withVars,f=>f.callback!==o)}})),e.set(r)},e6=(e,n,o,r,c,u)=>(QI(e,n,o,r,c,u),{unbind:()=>JR(n,o,r)}),QR=(e,n,o,r)=>{const c=e.formatter.get(n);c&&($m(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?GR(e,n,o,r):_A(e,n,o,r))},eM=et.explode,lC=()=>{const e={};return{addFilter:(c,u)=>{xe(eM(c),f=>{hn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Dr(e),removeFilter:(c,u)=>{xe(eM(c),f=>{if(hn(e,f))if(Ze(u)){const b=e[f],y=Rt(b.callbacks,E=>E!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},tM=(e,n)=>{xe(n,o=>{e.attr(o,null)})},bc=(e,n,o)=>{e.addNodeFilter("font",r=>{xe(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Lr(y).each(E=>{u["font-size"]=o[E-1]}),c.name="span",c.attr("style",n.serialize(u)),tM(c,["color","face","size"])})})},vW=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";xe(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},yW=(e,n,o)=>{var r;const c=Tb();n.convert_fonts_to_spans&&bc(e,c,et.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),vW(e,o,c)},CW=(e,n,o)=>{n.inline_styles&&yW(e,n,o)},wW=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),zd=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},V0=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?zd(r):decodeURIComponent(r);return H.some({type:c[1],data:f,base64Encoded:u})}else return H.none()},op=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return H.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return H.some(new Blob([c],{type:e}))},M1=e=>new Promise((n,o)=>{V0(e).bind(({type:r,data:c,base64Encoded:u})=>op(r,c,u)).fold(()=>o("Invalid data URI"),n)}),t6=e=>xn(e,"blob:")?wW(e):xn(e,"data:")?M1(e):Promise.reject("Unknown URI format"),nM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let z0=0;const U0=e=>(e||"blobid")+z0++,N1=(e,n,o)=>V0(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return H.none();{const f=u?r:btoa(r);return o(f,c)}}),oM=(e,n,o)=>{const r=e.create(U0(),n,o);return e.add(r),r},Jx=(e,n,o=!1)=>N1(n,o,(r,c)=>H.from(e.getByData(r,c)).orThunk(()=>op(c,r).map(u=>oM(e,u,r)))),sM=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(xn(n,"blob:")){const r=e.getByUri(n);return Ze(r)?Promise.resolve(r):t6(n).then(c=>nM(c).then(u=>N1(u,!1,f=>H.some(oM(e,c,f))).getOrThunk(o)))}else return xn(n,"data:")?Jx(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},rM=e=>Ze(e.attr("data-mce-bogus")),n6=e=>e.attr("src")===es.transparentSrc||Ze(e.attr("data-mce-placeholder")),o6=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");n6(c)||rM(c)||Pt(u)||Jx(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>xe(c,r))}},aM=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=et.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),E=o.getWhitespaceElements();b.body=1;const N=R=>R.name in b&&Pv(o,R);for(let R=0,L=c.length;R<L;R++){let Q=c[R],te=Q.parent;if(te&&b[te.name]&&Q===te.lastChild){let j=Q.prev;for(;j;){const ee=j.name;if(ee!=="span"||j.attr("data-mce-type")!=="bookmark"){ee==="br"&&(Q=null);break}j=j.prev}if(Q&&(Q.remove(),F0(o,y,E,te))){const ee=o.getElementRule(te.name);ee&&(ee.removeEmpty?te.remove():ee.paddEmpty&&J2(f,N,te))}}else{let j=Q;for(;te&&te.firstChild===j&&te.lastChild===j&&(j=te,!b[te.name]);)te=te.parent;if(j===te){const ee=new yl("#text",3);ee.value=Vs,Q.replace(ee)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(N=>N.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const E=y?et.trim(y):"";return/\b(noopener)\b/g.test(E)?E:f(E)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,E;for(;u--;)if(E=c[u],E.name==="a"&&E.firstChild&&!E.attr("href"))for(y=E.parent,f=E.lastChild;f&&y;)b=f.prev,y.insert(f,E),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new yl("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",E=et.explode(y," ");let N="";for(let R=0;R<E.length;R++){const L=E[R];let Q=!1,te=r["*"];te&&te[L]&&(Q=!0),te=r[b.name],!Q&&te&&te[L]&&(Q=!0),Q&&(N&&(N+=" "),N+=L)}N.length||(N=null),b.attr("class",N)}}),o6(e,n)};function B1(e){return B1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},B1(e)}function AA(e,n){return AA=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},AA(e,n)}function s6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qx(e,n,o){return s6()?Qx=Reflect.construct:Qx=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),E=new y;return f&&AA(E,f.prototype),E},Qx.apply(null,arguments)}function Fm(e){return cM(e)||r6(e)||uC(e)||a6()}function cM(e){if(Array.isArray(e))return eT(e)}function r6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uC(e,n){if(e){if(typeof e=="string")return eT(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return eT(e,n)}}function eT(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function a6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var iM=Object.hasOwnProperty,lM=Object.setPrototypeOf,uM=Object.isFrozen,c6=Object.getPrototypeOf,i6=Object.getOwnPropertyDescriptor,Cl=Object.freeze,Im=Object.seal,dM=Object.create,OA=typeof Reflect<"u"&&Reflect,dC=OA.apply,tT=OA.construct;dC||(dC=function(n,o,r){return n.apply(o,r)}),Cl||(Cl=function(n){return n}),Im||(Im=function(n){return n}),tT||(tT=function(n,o){return Qx(n,Fm(o))});var l6=Vi(Array.prototype.forEach),u6=Vi(Array.prototype.pop),mC=Vi(Array.prototype.push),W0=Vi(String.prototype.toLowerCase),fC=Vi(String.prototype.match),jg=Vi(String.prototype.replace),mM=Vi(String.prototype.indexOf),nT=Vi(String.prototype.trim),Ul=Vi(RegExp.prototype.test),DA=RA(TypeError);function Vi(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return dC(e,n,r)}}function RA(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return tT(e,o)}}function Ks(e,n){lM&&lM(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=W0(r);c!==r&&(uM(n)||(n[o]=c),r=c)}e[r]=!0}return e}function Lm(e){var n=dM(null),o;for(o in e)dC(iM,e,[o])&&(n[o]=e[o]);return n}function gC(e,n){for(;e!==null;){var o=i6(e,n);if(o){if(o.get)return Vi(o.get);if(typeof o.value=="function")return Vi(o.value)}e=c6(e)}function r(c){return console.warn("fallback value for",c),null}return r}var oT=Cl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sT=Cl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rT=Cl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),d6=Cl(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),MA=Cl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),m6=Cl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),aT=Cl(["#text"]),fM=Cl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),cT=Cl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gM=Cl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),iT=Cl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),f6=Im(/\{\{[\w\W]*|[\w\W]*\}\}/gm),P1=Im(/<%[\w\W]*|[\w\W]*%>/gm),hM=Im(/^data-[\-\w.\u00B7-\uFFFF]/),g6=Im(/^aria-[\-\w]+$/),pM=Im(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),h6=Im(/^(?:\w+script|data):/i),bM=Im(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hC=Im(/^html$/i),NA=function(){return typeof window>"u"?null:window},p6=function(n,o){if(B1(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function BA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NA(),n=function(Ve){return BA(Ve)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,E=e.NamedNodeMap,N=E===void 0?e.NamedNodeMap||e.MozNamedAttrMap:E,R=e.HTMLFormElement,L=e.DOMParser,Q=e.trustedTypes,te=b.prototype,j=gC(te,"cloneNode"),ee=gC(te,"nextSibling"),ye=gC(te,"childNodes"),pe=gC(te,"parentNode");if(typeof u=="function"){var we=r.createElement("template");we.content&&we.content.ownerDocument&&(r=we.content.ownerDocument)}var De=p6(Q,o),Xe=De?De.createHTML(""):"",Ot=r,xt=Ot.implementation,Fe=Ot.createNodeIterator,$e=Ot.createDocumentFragment,Gt=Ot.getElementsByTagName,gn=o.importNode,On={};try{On=Lm(r).documentMode?r.documentMode:{}}catch{}var fo={};n.isSupported=typeof pe=="function"&&xt&&typeof xt.createHTMLDocument<"u"&&On!==9;var Vo=f6,Os=P1,nr=hM,pa=g6,zc=h6,yc=bM,Ct=pM,dn=null,cs=Ks({},[].concat(Fm(oT),Fm(sT),Fm(rT),Fm(MA),Fm(aT))),$t=null,Tn=Ks({},[].concat(Fm(fM),Fm(cT),Fm(gM),Fm(iT))),kn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),It=null,Bo=null,Po=!0,Mc=!0,Ar=!1,ao=!1,hs=!1,Us=!1,or=!1,sa=!1,ka=!1,Fr=!1,Ka=!0,Ju=!0,ii=!1,Um={},ql=null,nb=Ks({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ob=null,Wm=Ks({},["audio","video","img","source","image","track"]),Jd=null,rc=Ks({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qu="http://www.w3.org/1998/Math/MathML",Zm="http://www.w3.org/2000/svg",zi="http://www.w3.org/1999/xhtml",ed=zi,zf=!1,Ei,Qg=["application/xhtml+xml","text/html"],jm="text/html",Kl,Uf=null,fw=r.createElement("form"),jE=function(Ve){return Ve instanceof RegExp||Ve instanceof Function},gw=function(Ve){Uf&&Uf===Ve||((!Ve||B1(Ve)!=="object")&&(Ve={}),Ve=Lm(Ve),dn="ALLOWED_TAGS"in Ve?Ks({},Ve.ALLOWED_TAGS):cs,$t="ALLOWED_ATTR"in Ve?Ks({},Ve.ALLOWED_ATTR):Tn,Jd="ADD_URI_SAFE_ATTR"in Ve?Ks(Lm(rc),Ve.ADD_URI_SAFE_ATTR):rc,ob="ADD_DATA_URI_TAGS"in Ve?Ks(Lm(Wm),Ve.ADD_DATA_URI_TAGS):Wm,ql="FORBID_CONTENTS"in Ve?Ks({},Ve.FORBID_CONTENTS):nb,It="FORBID_TAGS"in Ve?Ks({},Ve.FORBID_TAGS):{},Bo="FORBID_ATTR"in Ve?Ks({},Ve.FORBID_ATTR):{},Um="USE_PROFILES"in Ve?Ve.USE_PROFILES:!1,Po=Ve.ALLOW_ARIA_ATTR!==!1,Mc=Ve.ALLOW_DATA_ATTR!==!1,Ar=Ve.ALLOW_UNKNOWN_PROTOCOLS||!1,ao=Ve.SAFE_FOR_TEMPLATES||!1,hs=Ve.WHOLE_DOCUMENT||!1,sa=Ve.RETURN_DOM||!1,ka=Ve.RETURN_DOM_FRAGMENT||!1,Fr=Ve.RETURN_TRUSTED_TYPE||!1,or=Ve.FORCE_BODY||!1,Ka=Ve.SANITIZE_DOM!==!1,Ju=Ve.KEEP_CONTENT!==!1,ii=Ve.IN_PLACE||!1,Ct=Ve.ALLOWED_URI_REGEXP||Ct,ed=Ve.NAMESPACE||zi,Ve.CUSTOM_ELEMENT_HANDLING&&jE(Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kn.tagNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&jE(Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kn.attributeNameCheck=Ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ve.CUSTOM_ELEMENT_HANDLING&&typeof Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(kn.allowCustomizedBuiltInElements=Ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ei=Qg.indexOf(Ve.PARSER_MEDIA_TYPE)===-1?Ei=jm:Ei=Ve.PARSER_MEDIA_TYPE,Kl=Ei==="application/xhtml+xml"?function(ln){return ln}:W0,ao&&(Mc=!1),ka&&(sa=!0),Um&&(dn=Ks({},Fm(aT)),$t=[],Um.html===!0&&(Ks(dn,oT),Ks($t,fM)),Um.svg===!0&&(Ks(dn,sT),Ks($t,cT),Ks($t,iT)),Um.svgFilters===!0&&(Ks(dn,rT),Ks($t,cT),Ks($t,iT)),Um.mathMl===!0&&(Ks(dn,MA),Ks($t,gM),Ks($t,iT))),Ve.ADD_TAGS&&(dn===cs&&(dn=Lm(dn)),Ks(dn,Ve.ADD_TAGS)),Ve.ADD_ATTR&&($t===Tn&&($t=Lm($t)),Ks($t,Ve.ADD_ATTR)),Ve.ADD_URI_SAFE_ATTR&&Ks(Jd,Ve.ADD_URI_SAFE_ATTR),Ve.FORBID_CONTENTS&&(ql===nb&&(ql=Lm(ql)),Ks(ql,Ve.FORBID_CONTENTS)),Ju&&(dn["#text"]=!0),hs&&Ks(dn,["html","head","body"]),dn.table&&(Ks(dn,["tbody"]),delete It.tbody),Cl&&Cl(Ve),Uf=Ve)},TO=Ks({},["mi","mo","mn","ms","mtext"]),hw=Ks({},["foreignobject","desc","title","annotation-xml"]),EO=Ks({},["title","style","font","a","script"]),Qd=Ks({},sT);Ks(Qd,rT),Ks(Qd,d6);var sb=Ks({},MA);Ks(sb,m6);var Re=function(Ve){var ln=pe(Ve);(!ln||!ln.tagName)&&(ln={namespaceURI:zi,tagName:"template"});var Kn=W0(Ve.tagName),_a=W0(ln.tagName);return Ve.namespaceURI===Zm?ln.namespaceURI===zi?Kn==="svg":ln.namespaceURI===Qu?Kn==="svg"&&(_a==="annotation-xml"||TO[_a]):!!Qd[Kn]:Ve.namespaceURI===Qu?ln.namespaceURI===zi?Kn==="math":ln.namespaceURI===Zm?Kn==="math"&&hw[_a]:!!sb[Kn]:Ve.namespaceURI===zi?ln.namespaceURI===Zm&&!hw[_a]||ln.namespaceURI===Qu&&!TO[_a]?!1:!sb[Kn]&&(EO[Kn]||!Qd[Kn]):!1},Me=function(Ve){mC(n.removed,{element:Ve});try{Ve.parentNode.removeChild(Ve)}catch{try{Ve.outerHTML=Xe}catch{Ve.remove()}}},Tt=function(Ve,ln){try{mC(n.removed,{attribute:ln.getAttributeNode(Ve),from:ln})}catch{mC(n.removed,{attribute:null,from:ln})}if(ln.removeAttribute(Ve),Ve==="is"&&!$t[Ve])if(sa||ka)try{Me(ln)}catch{}else try{ln.setAttribute(Ve,"")}catch{}},gt=function(Ve){var ln,Kn;if(or)Ve="<remove></remove>"+Ve;else{var _a=fC(Ve,/^[\r\n\t ]+/);Kn=_a&&_a[0]}Ei==="application/xhtml+xml"&&(Ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ve+"</body></html>");var ku=De?De.createHTML(Ve):Ve;if(ed===zi)try{ln=new L().parseFromString(ku,Ei)}catch{}if(!ln||!ln.documentElement){ln=xt.createDocument(ed,"template",null);try{ln.documentElement.innerHTML=zf?"":ku}catch{}}var xl=ln.body||ln.documentElement;return Ve&&Kn&&xl.insertBefore(r.createTextNode(Kn),xl.childNodes[0]||null),ed===zi?Gt.call(ln,hs?"html":"body")[0]:hs?ln.documentElement:xl},wn=function(Ve){return Fe.call(Ve.ownerDocument||Ve,Ve,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},$o=function(Ve){return Ve instanceof R&&(typeof Ve.nodeName!="string"||typeof Ve.textContent!="string"||typeof Ve.removeChild!="function"||!(Ve.attributes instanceof N)||typeof Ve.removeAttribute!="function"||typeof Ve.setAttribute!="function"||typeof Ve.namespaceURI!="string"||typeof Ve.insertBefore!="function")},lr=function(Ve){return B1(f)==="object"?Ve instanceof f:Ve&&B1(Ve)==="object"&&typeof Ve.nodeType=="number"&&typeof Ve.nodeName=="string"},xr=function(Ve,ln,Kn){fo[Ve]&&l6(fo[Ve],function(_a){_a.call(n,ln,Kn,Uf)})},Wf=function(Ve){var ln;if(xr("beforeSanitizeElements",Ve,null),$o(Ve)||Ul(/[\u0080-\uFFFF]/,Ve.nodeName))return Me(Ve),!0;var Kn=Kl(Ve.nodeName);if(xr("uponSanitizeElement",Ve,{tagName:Kn,allowedTags:dn}),Ve.hasChildNodes()&&!lr(Ve.firstElementChild)&&(!lr(Ve.content)||!lr(Ve.content.firstElementChild))&&Ul(/<[/\w]/g,Ve.innerHTML)&&Ul(/<[/\w]/g,Ve.textContent)||Kn==="select"&&Ul(/<template/i,Ve.innerHTML))return Me(Ve),!0;if(!dn[Kn]||It[Kn]){if(!It[Kn]&&eF(Kn)&&(kn.tagNameCheck instanceof RegExp&&Ul(kn.tagNameCheck,Kn)||kn.tagNameCheck instanceof Function&&kn.tagNameCheck(Kn)))return!1;if(Ju&&!ql[Kn]){var _a=pe(Ve)||Ve.parentNode,ku=ye(Ve)||Ve.childNodes;if(ku&&_a)for(var xl=ku.length,Xr=xl-1;Xr>=0;--Xr)_a.insertBefore(j(ku[Xr],!0),ee(Ve))}return Me(Ve),!0}return Ve instanceof b&&!Re(Ve)||(Kn==="noscript"||Kn==="noembed")&&Ul(/<\/no(script|embed)/i,Ve.innerHTML)?(Me(Ve),!0):(ao&&Ve.nodeType===3&&(ln=Ve.textContent,ln=jg(ln,Vo," "),ln=jg(ln,Os," "),Ve.textContent!==ln&&(mC(n.removed,{element:Ve.cloneNode()}),Ve.textContent=ln)),xr("afterSanitizeElements",Ve,null),!1)},Yl=function(Ve,ln,Kn){if(Ka&&(ln==="id"||ln==="name")&&(Kn in r||Kn in fw))return!1;if(!(Mc&&!Bo[ln]&&Ul(nr,ln))){if(!(Po&&Ul(pa,ln))){if(!$t[ln]||Bo[ln]){if(!(eF(Ve)&&(kn.tagNameCheck instanceof RegExp&&Ul(kn.tagNameCheck,Ve)||kn.tagNameCheck instanceof Function&&kn.tagNameCheck(Ve))&&(kn.attributeNameCheck instanceof RegExp&&Ul(kn.attributeNameCheck,ln)||kn.attributeNameCheck instanceof Function&&kn.attributeNameCheck(ln))||ln==="is"&&kn.allowCustomizedBuiltInElements&&(kn.tagNameCheck instanceof RegExp&&Ul(kn.tagNameCheck,Kn)||kn.tagNameCheck instanceof Function&&kn.tagNameCheck(Kn))))return!1}else if(!Jd[ln]){if(!Ul(Ct,jg(Kn,yc,""))){if(!((ln==="src"||ln==="xlink:href"||ln==="href")&&Ve!=="script"&&mM(Kn,"data:")===0&&ob[Ve])){if(!(Ar&&!Ul(zc,jg(Kn,yc,"")))){if(Kn)return!1}}}}}}return!0},eF=function(Ve){return Ve.indexOf("-")>0},tF=function(Ve){var ln,Kn,_a,ku;xr("beforeSanitizeAttributes",Ve,null);var xl=Ve.attributes;if(xl){var Xr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$t};for(ku=xl.length;ku--;){ln=xl[ku];var td=ln,rl=td.name,kO=td.namespaceURI;Kn=rl==="value"?ln.value:nT(ln.value),_a=Kl(rl);var GE=Kn;if(Xr.attrName=_a,Xr.attrValue=Kn,Xr.keepAttr=!0,Xr.forceKeepAttr=void 0,xr("uponSanitizeAttribute",Ve,Xr),Kn=Xr.attrValue,!Xr.forceKeepAttr){if(!Xr.keepAttr){Tt(rl,Ve);continue}if(Ul(/\/>/i,Kn)){Tt(rl,Ve);continue}ao&&(Kn=jg(Kn,Vo," "),Kn=jg(Kn,Os," "));var _O=Kl(Ve.nodeName);if(!Yl(_O,_a,Kn)){Tt(rl,Ve);continue}if(Kn!==GE)try{kO?Ve.setAttributeNS(kO,rl,Kn):Ve.setAttribute(rl,Kn)}catch{Tt(rl,Ve)}}}xr("afterSanitizeAttributes",Ve,null)}},zU=function yo(Ve){var ln,Kn=wn(Ve);for(xr("beforeSanitizeShadowDOM",Ve,null);ln=Kn.nextNode();)xr("uponSanitizeShadowNode",ln,null),!Wf(ln)&&(ln.content instanceof c&&yo(ln.content),tF(ln));xr("afterSanitizeShadowDOM",Ve,null)};return n.sanitize=function(yo,Ve){var ln,Kn,_a,ku,xl;if(zf=!yo,zf&&(yo="<!-->"),typeof yo!="string"&&!lr(yo)){if(typeof yo.toString!="function")throw DA("toString is not a function");if(yo=yo.toString(),typeof yo!="string")throw DA("dirty is not a string, aborting")}if(!n.isSupported){if(B1(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof yo=="string")return e.toStaticHTML(yo);if(lr(yo))return e.toStaticHTML(yo.outerHTML)}return yo}if(Us||gw(Ve),n.removed=[],typeof yo=="string"&&(ii=!1),ii){if(yo.nodeName){var Xr=Kl(yo.nodeName);if(!dn[Xr]||It[Xr])throw DA("root node is forbidden and cannot be sanitized in-place")}}else if(yo instanceof f)ln=gt("<!---->"),Kn=ln.ownerDocument.importNode(yo,!0),Kn.nodeType===1&&Kn.nodeName==="BODY"||Kn.nodeName==="HTML"?ln=Kn:ln.appendChild(Kn);else{if(!sa&&!ao&&!hs&&yo.indexOf("<")===-1)return De&&Fr?De.createHTML(yo):yo;if(ln=gt(yo),!ln)return sa?null:Fr?Xe:""}ln&&or&&Me(ln.firstChild);for(var td=wn(ii?yo:ln);_a=td.nextNode();)_a.nodeType===3&&_a===ku||Wf(_a)||(_a.content instanceof c&&zU(_a.content),tF(_a),ku=_a);if(ku=null,ii)return yo;if(sa){if(ka)for(xl=$e.call(ln.ownerDocument);ln.firstChild;)xl.appendChild(ln.firstChild);else xl=ln;return $t.shadowroot&&(xl=gn.call(o,xl,!0)),xl}var rl=hs?ln.outerHTML:ln.innerHTML;return hs&&dn["!doctype"]&&ln.ownerDocument&&ln.ownerDocument.doctype&&ln.ownerDocument.doctype.name&&Ul(hC,ln.ownerDocument.doctype.name)&&(rl="<!DOCTYPE "+ln.ownerDocument.doctype.name+`>
`+rl),ao&&(rl=jg(rl,Vo," "),rl=jg(rl,Os," ")),De&&Fr?De.createHTML(rl):rl},n.setConfig=function(yo){gw(yo),Us=!0},n.clearConfig=function(){Uf=null,Us=!1},n.isValidAttribute=function(yo,Ve,ln){Uf||gw({});var Kn=Kl(yo),_a=Kl(Ve);return Yl(Kn,_a,ln)},n.addHook=function(yo,Ve){typeof Ve=="function"&&(fo[yo]=fo[yo]||[],mC(fo[yo],Ve))},n.removeHook=function(yo){if(fo[yo])return u6(fo[yo])},n.removeHooks=function(yo){fo[yo]&&(fo[yo]=[])},n.removeAllHooks=function(){fo={}},n}var b6=BA();const lT=et.each,PA=et.trim,$A=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],vM={ftp:21,http:80,https:443,mailto:25},yM=["img","video"],v6=(e,n)=>Ze(e)?!e:Ze(n)?!Ue(yM,n):!0,Af=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},uT=(e,n,o)=>{const r=Af(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?v6(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Hm{constructor(n,o={}){this.path="",this.directory="",n=PA(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Hm(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&lT($A,(b,y)=>{let E=f[y];E&&(E=E.replace(/\(mce_at\)/g,"@@")),c[b]=E}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=cf.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!uT(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Hm(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Hm(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?vM[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];lT(u,R=>{R&&b.push(R)});const y=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}y.push(f[R])}const E=b.length-r;let N;return E<=0?N=is(y).join("/"):N=b.slice(0,E).join("/")+"/"+is(y).join("/"),N.indexOf("/")!==0&&(N="/"+N),c&&N.lastIndexOf("/")!==N.length-1&&(N+=c),N}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const y6=et.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),dT="data-mce-type";let FA=0;const Z0=(e,n,o,r)=>{var c,u,f,b;const y=n.validate,E=o.getSpecialElements();e.nodeType===Zs&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const N=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==Sc||N==="body")return;const R=ae.fromDom(e),L=Xa(R,dT),Q=Pc(R,"data-mce-bogus");if(!L&&K(Q)){Q==="all"?Js(R):Sa(R);return}const te=o.getElementRule(N);if(y&&!te){hn(E,N)?Js(R):Sa(R);return}else Ze(r)&&(r.allowedTags[N]=!0);if(y&&te&&!L){if(xe((f=te.attributesForced)!==null&&f!==void 0?f:[],j=>{Gr(R,j.name,j.value==="{$uid}"?`mce_${FA++}`:j.value)}),xe((b=te.attributesDefault)!==null&&b!==void 0?b:[],j=>{Xa(R,j.name)||Gr(R,j.name,j.value==="{$uid}"?`mce_${FA++}`:j.value)}),te.attributesRequired&&!wt(te.attributesRequired,j=>Xa(R,j))){Sa(R);return}if(te.removeEmptyAttrs&&jc(R)){Sa(R);return}te.outputName&&te.outputName!==N&&dk(R,te.outputName)}},CM=(e,n,o,r,c)=>!(r in y6&&uT(e,c,o))&&(!e.validate||n.isValid(o,r)||xn(r,"data-")||xn(r,"aria-")),wM=(e,n)=>e.hasAttribute(dT)&&(n==="id"||n==="class"||n==="style"),SM=(e,n)=>e in n.getBoolAttrs(),C6=(e,n,o)=>{const{attributes:r}=e;for(let c=r.length-1;c>=0;c--){const u=r[c],f=u.name,b=u.value;!CM(n,o,e.tagName.toLowerCase(),f,b)&&!wM(e,f)?e.removeAttribute(f):SM(f,o)&&e.setAttribute(f,f)}},w6=(e,n)=>{const o=b6();return o.addHook("uponSanitizeElement",(r,c)=>{Z0(r,e,n,c)}),o.addHook("uponSanitizeAttribute",(r,c)=>{const u=r.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=CM(e,n,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,SM(f,n)&&(c.attrValue=f),e.allow_svg_data_urls&&xn(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):wM(r,f)&&(c.forceKeepAttr=!0)}),o},xM=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},S6=(e,n)=>{if(e.sanitize){const o=w6(e,n);return(r,c)=>{o.sanitize(r,xM(e,c)),o.removed=[]}}else return(o,r)=>{const c=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=c.nextNode();)Z0(u,e,n),Ut(u)&&C6(u,e,n)}},TM=et.makeMap,EM=et.extend,IA=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],E=new yl(y.nodeName.toLowerCase(),y.nodeType);if(Ut(y)){const N=y.attributes;for(let R=0,L=N.length;R<L;R++){const Q=N[R];E.attr(Q.name,Q.value)}}else ft(y)?(E.value=y.data,c&&(E.raw=!0)):(Mi(y)||kv(y)||gb(y))&&(E.value=y.data);IA(E,y,o),e.append(E)}},LA=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;xe(n,b=>b(f)),Pt(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];xe(o,f=>f(u))}},kM=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=EM(TM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=Nw(n),E=/[ \t\r\n]+/g,N=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,L=pe=>{let we=pe.parent;for(;Ze(we);){if(we.name in f)return!0;we=we.parent}return!1},Q=pe=>{let we=pe;for(;Ze(we);){if(we.name in y)return F0(n,u,f,we);we=we.parent}return!1},te=pe=>pe.name in b&&!Pv(n,pe),j=(pe,we)=>{const De=we?pe.prev:pe.next;return Ze(De)||Pt(pe.parent)?!1:te(pe.parent)&&(pe.parent!==e||r.isRootContent===!0)};return[pe=>{var we;if(pe.type===3&&!L(pe)){let De=(we=pe.value)!==null&&we!==void 0?we:"";De=De.replace(E," "),(pI(pe.prev,te)||j(pe,!0))&&(De=De.replace(N,"")),De.length===0?pe.remove():pe.value=De}},pe=>{var we;if(pe.type===1){const De=n.getElementRule(pe.name);if(c&&De){const Xe=F0(n,u,f,pe);De.paddInEmptyBlock&&Xe&&Q(pe)?J2(r,te,pe):De.removeEmpty&&Xe?te(pe)?pe.remove():pe.unwrap():De.paddEmpty&&(Xe||nA(pe))&&J2(r,te,pe)}}else if(pe.type===3&&!L(pe)){let De=(we=pe.value)!==null&&we!==void 0?we:"";(pe.next&&te(pe.next)||j(pe,!1))&&(De=De.replace(R,"")),De.length===0?pe.remove():pe.value=De}}]},_M=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},sp=(e={},n=gl())=>{const o=lC(),r=lC(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=S6(c,n),b=(we,De,Xe="html")=>{const Ot=Xe==="xhtml"?"application/xhtml+xml":"text/html",xt=hn(n.getSpecialElements(),De.toLowerCase()),Fe=xt?`<${De}>${we}</${De}>`:we,$e=Xe==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Fe}</body></html>`:`<body>${Fe}</body>`,Gt=u.parseFromString($e,Ot).body;return f(Gt,Ot),xt?Gt.firstChild:Gt},y=o.addFilter,E=o.getFilters,N=o.removeFilter,R=r.addFilter,L=r.getFilters,Q=r.removeFilter,te=(we,De)=>{uR(n,we)&&De.push(we)},j=(we,De)=>{const Xe=K(De.attr(dT)),Ot=De.type===1&&!hn(we,De.name)&&!Ew(n,De);return De.type===3||Ot&&!Xe},ee=(we,De)=>{const Xe=EM(TM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ot=/^[ \t\r\n]+/,xt=/[ \t\r\n]+$/;let Fe=we.firstChild,$e=null;const Gt=gn=>{var On,fo;gn&&(Fe=gn.firstChild,Fe&&Fe.type===3&&(Fe.value=(On=Fe.value)===null||On===void 0?void 0:On.replace(Ot,"")),Fe=gn.lastChild,Fe&&Fe.type===3&&(Fe.value=(fo=Fe.value)===null||fo===void 0?void 0:fo.replace(xt,"")))};if(n.isValidChild(we.name,De.toLowerCase())){for(;Fe;){const gn=Fe.next;j(Xe,Fe)?($e||($e=new yl(De,1),$e.attr(c.forced_root_block_attrs),we.insert($e,Fe)),$e.append(Fe)):(Gt($e),$e=null),Fe=gn}Gt($e)}},pe={schema:n,addAttributeFilter:R,getAttributeFilters:L,removeAttributeFilter:Q,addNodeFilter:y,getNodeFilters:E,removeNodeFilter:N,parse:(we,De={})=>{var Xe;const Ot=c.validate,xt=(Xe=De.context)!==null&&Xe!==void 0?Xe:c.root_name,Fe=b(we,xt,De.format);dm(n,Fe);const $e=new yl(xt,11);IA($e,Fe,n.getSpecialElements()),Fe.innerHTML="";const[Gt,gn]=kM($e,n,c,De),On=[],fo=Ot?pa=>te(pa,On):Zt,Vo={nodes:{},attributes:{}},Os=pa=>P0(E(),L(),pa,Vo);if(LA($e,[Gt,Os],[gn,fo]),On.reverse(),Ot&&On.length>0)if(De.context){const{pass:pa,fail:zc}=eo(On,yc=>yc.parent===$e);oA(zc,n,$e,Os),De.invalid=pa.length>0}else oA(On,n,$e,Os);const nr=_M(c,De);return nr&&($e.name==="body"||De.isRootContent)&&ee($e,nr),De.invalid||tA(Vo,De),$e}};return aM(pe,c),CW(pe,c,n),pe},AM=e=>tC(e)?Yh({validate:!1}).serialize(e):e,HA=(e,n,o)=>{const r=AM(e),c=n(r);if(c.isDefaultPrevented())return c;if(tC(e))if(c.content!==r){const u=sp({validate:!1,forced_root_block:!1,sanitize:o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},VA=(e,n)=>{if(n.no_events)return Kr.value(n);{const o=w2(e,n);return o.isDefaultPrevented()?Kr.error(S2(e,{content:"",...o}).content):Kr.value(o)}},zA=(e,n,o)=>o.no_events?n:HA(n,c=>S2(e,{...o,content:c}),Yb(e)).content,UA=(e,n)=>{if(n.no_events)return Kr.value(n);{const o=HA(n.content,r=>y2(e,{...n,content:r}),Yb(e));return o.isDefaultPrevented()?(C2(e,o),Kr.error(void 0)):Kr.value(o)}},pC=(e,n,o)=>{o.no_events||C2(e,{...o,content:n})},WA=(e,n,o)=>({element:e,width:n,rows:o}),bC=(e,n)=>({element:e,cells:n}),x6=(e,n)=>({x:e,y:n}),OM=(e,n)=>ei(e,n).bind(Lr).getOr(1),T6=(e,n,o,r,c)=>{const u=OM(c,"rowspan"),f=OM(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=bC(ey(r),[]));for(let E=n;E<n+f;E++){const N=b[y].cells;N[E]=y===o&&E===n?c:gg(c)}}},DM=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},RM=(e,n,o)=>{for(;DM(e,n,o);)n++;return n},MM=e=>$n(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),NM=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(ys(c[u],n))return H.some(x6(u,r))}return H.none()},BM=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,E=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(bC(f[b].element,E))}return u},E6=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?BM(e,r,c,u,f):BM(e,r,f,u,c);return WA(e.element,MM(b),b)},PM=(e,n)=>{const o=gg(e.element),r=ae.fromTag("tbody");return Mu(r,n),Ur(o,r),o},SW=e=>Ge(e.rows,n=>{const o=Ge(n.cells,c=>{const u=ey(c);return Br(u,"colspan"),Br(u,"rowspan"),u}),r=gg(n.element);return Mu(r,o),r}),k6=e=>{const n=WA(gg(e),0,[]);return xe(Ec(e,"tr"),(o,r)=>{xe(Ec(o,"td,th"),(c,u)=>{T6(n,RM(n,u,r),r,o,c)})}),WA(n.element,MM(n.rows),n.rows)},_6=e=>PM(e,SW(e)),A6=(e,n,o)=>NM(e,n).bind(r=>NM(e,o).map(c=>E6(e,r,c))),O6=e=>Wo(e,n=>As(n)==="ul"||As(n)==="ol"),D6=(e,n)=>Wo(e,o=>As(o)==="li"&&i1(o,n)).fold(rt([]),o=>O6(e).map(r=>{const c=ae.fromTag(As(r)),u=rs(Di(r),(f,b)=>xn(b,"list-style"));return Kf(c,u),[ae.fromTag("li"),c]}).getOr([])),R6=(e,n)=>{const o=$n(n,(r,c)=>(Ur(c,r),c),e);return n.length>0?R2([o]):o},M6=e=>ru(e)?di(e).filter(si).fold(rt([]),n=>[e,n]):si(e)?[e]:[],$M=(e,n)=>{const o=ae.fromDom(n.commonAncestorContainer),r=zg(o,e),c=Rt(r,Av),u=D6(r,n),f=c.concat(u.length?u:M6(o));return Ge(f,gg)},FM=()=>R2([]),N6=(e,n)=>R6(ae.fromDom(n.cloneContents()),$M(e,n)),B6=(e,n)=>ge(n,"table",qe(ys,e)),P6=(e,n)=>B6(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=k6(o);return A6(u,r,c).map(f=>R2([_6(f)]))}).getOrThunk(FM),$6=(e,n)=>n.length>0&&n[0].collapsed?FM():N6(e,n[0]),xW=(e,n)=>{const o=c1(n,e);return o.length>0?P6(e,o):$6(e,n)},ZA=(e,n)=>n>=0&&n<e.length&&a1(e.charAt(n)),IM=e=>dt(e.innerText),F6=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),TW=e=>H.from(e.selection.getRng()).map(n=>{var o;const r=H.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=F6(r),f=ae.fromDom(n.cloneContents());rD(f),aD(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=IM(b),E=dt((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),ZA(E,0)||ZA(E,E.length-1)){const N=r.getOr(c),R=IM(N),L=R.indexOf(y);if(L===-1)return y;{const Q=ZA(R,L-1),te=ZA(R,L+y.length);return(Q?" ":"")+y+(te?" ":"")}}else return y}).getOr(""),I6=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=O_(e,Mo(c)),f=n.contextual?xW(ae.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},fa=(e,n)=>{if(n.format==="text")return TW(e);{const o=I6(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},jA=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),EW=(e,n,o={})=>{const r=jA(o,n);return VA(e,r).fold(ko,c=>{const u=fa(e,c);return zA(e,u,c)})},GA=0,LM=1,$1=2,kW=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(N,R,L)=>({start:N,end:R,diag:L}),f=(N,R,L,Q,te)=>{const j=y(N,R,L,Q);if(j===null||j.start===R&&j.diag===R-Q||j.end===N&&j.diag===N-L){let ee=N,ye=L;for(;ee<R||ye<Q;)ee<R&&ye<Q&&e[ee]===n[ye]?(te.push([GA,e[ee]]),++ee,++ye):R-N>Q-L?(te.push([$1,e[ee]]),++ee):(te.push([LM,n[ye]]),++ye)}else{f(N,j.start,L,j.start-j.diag,te);for(let ee=j.start;ee<j.end;++ee)te.push([GA,e[ee]]);f(j.end,R,j.end-j.diag,Q,te)}},b=(N,R,L,Q)=>{let te=N;for(;te-R<Q&&te<L&&e[te]===n[te-R];)++te;return u(N,te,R)},y=(N,R,L,Q)=>{const te=R-N,j=Q-L;if(te===0||j===0)return null;const ee=te-j,ye=j+te,pe=(ye%2===0?ye:ye+1)/2;r[1+pe]=N,c[1+pe]=R+1;let we,De,Xe,Ot,xt;for(we=0;we<=pe;++we){for(De=-we;De<=we;De+=2){for(Xe=De+pe,De===-we||De!==we&&r[Xe-1]<r[Xe+1]?r[Xe]=r[Xe+1]:r[Xe]=r[Xe-1]+1,Ot=r[Xe],xt=Ot-N+L-De;Ot<R&&xt<Q&&e[Ot]===n[xt];)r[Xe]=++Ot,++xt;if(ee%2!==0&&ee-we<=De&&De<=ee+we&&c[Xe-ee]<=r[Xe])return b(c[Xe-ee],De+N-L,R,Q)}for(De=ee-we;De<=ee+we;De+=2){for(Xe=De+pe-ee,De===ee-we||De!==ee+we&&c[Xe+1]<=c[Xe-1]?c[Xe]=c[Xe+1]-1:c[Xe]=c[Xe-1],Ot=c[Xe]-1,xt=Ot-N+L-De;Ot>=N&&xt>=L&&e[Ot]===n[xt];)c[Xe]=Ot--,xt--;if(ee%2===0&&-we<=De&&De<=we&&c[Xe]<=r[Xe+ee])return b(c[Xe],De+N-L,R,Q)}}return null},E=[];return f(0,e.length,0,n.length,E),E},L6=e=>Ut(e)?e.outerHTML:ft(e)?cf.encodeRaw(e.data,!1):Mi(e)?"<!--"+e.data+"-->":"",ai=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},HM=(e,n,o)=>{const r=ai(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},VM=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},zM=(e,n)=>{let o=0;xe(e,r=>{r[0]===GA?o++:r[0]===LM?(HM(n,r[1],o),o++):r[0]===$1&&VM(n,o)})},H6=e=>Rt(Ge(dr(e.childNodes),L6),n=>n.length>0),V6=(e,n)=>{const o=Ge(dr(n.childNodes),L6);return zM(kW(o,e),n),n},mT=fn(()=>document.implementation.createHTMLDocument("undo")),z6=e=>e.indexOf("</iframe>")!==-1,qA=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),U6=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),vC=e=>{const n=H6(e.getBody()),o=Ir(n,c=>{const u=sD(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return z6(r)?qA(o):U6(r)},fT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?V6(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Ze(r)&&Uy(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},yC=e=>e.type==="fragmented"?e.fragments.join(""):e.content,KA=e=>{const n=ae.fromTag("body",mT());return bd(n,yC(e)),xe(Ec(n,"*[data-mce-bogus]"),Sa),im(n)},YA=(e,n)=>yC(e)===yC(n),W6=(e,n)=>KA(e)===KA(n),XA=(e,n)=>!e||!n?!1:YA(e,n)?!0:W6(e,n),JA=e=>e.get()===0,wl=(e,n,o)=>{JA(o)&&(e.typing=n)},UM=(e,n)=>{e.typing&&(wl(e,!1,n),e.add())},Z6=e=>{e.typing&&(e.typing=!1,e.add())},j6=(e,n,o)=>{JA(n)&&o.set(mc(e.selection))},G6=(e,n,o,r,c,u,f)=>{const b=vC(e),y=et.extend(u||{},b);if(!JA(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&XA(E,y))return null;n.data[o.get()]&&c.get().each(L=>{n.data[o.get()].beforeBookmark=L});const N=kk(e);if(N&&n.data.length>N){for(let L=0;L<n.data.length-1;L++)n.data[L]=n.data[L+1];n.data.length--,o.set(n.data.length)}y.bookmark=mc(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const R={level:y,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),y},q6=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},WM=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];fT(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},K6=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],fT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},Y6=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,wl(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],fT(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},X6=e=>{e.clear(),e.add()},gT=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!XA(vC(e),n.data[0]),J6=(e,n)=>n.get()<e.data.length-1&&!e.typing,Q6=(e,n,o)=>(UM(e,n),e.beforeChange(),e.ignore(o),e.add()),ZM=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},QA=(e,n)=>{const o=e.dom,r=Ze(n)?n:e.getBody();xe(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=Dk(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=Oy(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},jM=e=>({init:{bindEvents:Zt},undoManager:{beforeChange:(n,o)=>j6(e,n,o),add:(n,o,r,c,u,f)=>G6(e,n,o,r,c,u,f),undo:(n,o,r)=>Y6(e,n,o,r),redo:(n,o)=>K6(e,n,o),clear:(n,o)=>q6(e,n,o),reset:n=>X6(n),hasUndo:(n,o)=>gT(e,n,o),hasRedo:(n,o)=>J6(n,o),transact:(n,o,r)=>Q6(n,o,r),ignore:(n,o)=>ZM(n,o),extra:(n,o,r,c)=>WM(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>$m(e,n,o,r,c),matchAll:(n,o)=>NI(e,n,o),matchNode:(n,o,r,c)=>qu(e,n,o,r,c),canApply:n=>Fa(e,n),closest:n=>fA(e,n),apply:(n,o,r)=>_A(e,n,o,r),remove:(n,o,r,c)=>GR(e,n,o,r,c),toggle:(n,o,r)=>QR(e,n,o,r),formatChanged:(n,o,r,c,u)=>e6(e,n,o,r,c,u)},editor:{getContent:n=>IF(e,n),setContent:(n,o)=>Ux(e,n,o),insertContent:(n,o)=>Vx(e,n,o),addVisual:n=>QA(e,n)},selection:{getContent:(n,o)=>EW(e,n,o)},autocompleter:{addDecoration:n=>_F(e,n),removeDecoration:()=>OF(e,ae.fromDom(e.getBody()))},raw:{getModel:()=>H.none()}}),e8=e=>{const n=E=>ot(E)?E:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,N,R)=>r.transact(R),ignore:(E,N)=>r.ignore(N),extra:(E,N,R,L)=>r.extra(R,L)},formatter:{match:(E,N,R,L)=>c.match(E,n(N),L),matchAll:c.matchAll,matchNode:c.matchNode,canApply:E=>c.canApply(E),closest:E=>c.closest(E),apply:(E,N,R)=>c.apply(E,n(N)),remove:(E,N,R,L)=>c.remove(E,n(N)),toggle:(E,N,R)=>c.toggle(E,n(N)),formatChanged:(E,N,R,L,Q)=>c.formatChanged(N,R,L,Q)},editor:{getContent:E=>u.getContent(E),setContent:(E,N)=>({content:u.setContent(E,N),html:""}),insertContent:(E,N)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,N)=>f.getContent(N)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>H.some(y.getRawModel())}}},_W=()=>{const e=rt(null),n=rt("");return{init:{bindEvents:Zt},undoManager:{beforeChange:Zt,add:e,undo:e,redo:e,clear:Zt,reset:Zt,hasUndo:Se,hasRedo:Se,transact:e,ignore:Zt,extra:Zt},formatter:{match:Se,matchAll:rt([]),matchNode:rt(void 0),canApply:Se,closest:n,apply:Zt,remove:Zt,toggle:Zt,formatChanged:rt({unbind:Zt})},editor:{getContent:n,setContent:rt({content:"",html:""}),insertContent:rt(""),addVisual:Zt},selection:{getContent:n},autocompleter:{addDecoration:Zt,removeDecoration:Zt},raw:{getModel:rt(H.none())}}},Of=e=>hn(e.plugins,"rtc"),t8=e=>Jo(e.plugins,"rtc").bind(n=>H.from(n.setup)),n8=e=>{const n=e;return t8(e).fold(()=>(n.rtcInstance=jM(e),H.none()),o=>(n.rtcInstance=_W(),H.some(()=>o().then(r=>(n.rtcInstance=e8(r),r.rtc.isRemote)))))},e3=e=>e.rtcInstance?e.rtcInstance:jM(e),ga=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},hT=(e,n,o)=>{ga(e).undoManager.beforeChange(n,o)},CC=(e,n,o,r,c,u,f)=>ga(e).undoManager.add(n,o,r,c,u,f),GM=(e,n,o,r)=>ga(e).undoManager.undo(n,o,r),qM=(e,n,o)=>ga(e).undoManager.redo(n,o),o8=(e,n,o)=>{ga(e).undoManager.clear(n,o)},KM=(e,n)=>{ga(e).undoManager.reset(n)},s8=(e,n,o)=>ga(e).undoManager.hasUndo(n,o),r8=(e,n,o)=>ga(e).undoManager.hasRedo(n,o),a8=(e,n,o,r)=>ga(e).undoManager.transact(n,o,r),c8=(e,n,o)=>{ga(e).undoManager.ignore(n,o)},YM=(e,n,o,r,c)=>{ga(e).undoManager.extra(n,o,r,c)},i8=(e,n,o,r,c)=>ga(e).formatter.match(n,o,r,c),l8=(e,n,o)=>ga(e).formatter.matchAll(n,o),wC=(e,n,o,r,c)=>ga(e).formatter.matchNode(n,o,r,c),XM=(e,n)=>ga(e).formatter.canApply(n),JM=(e,n)=>ga(e).formatter.closest(n),u8=(e,n,o,r)=>{ga(e).formatter.apply(n,o,r)},d8=(e,n,o,r,c)=>{ga(e).formatter.remove(n,o,r,c)},m8=(e,n,o,r)=>{ga(e).formatter.toggle(n,o,r)},QM=(e,n,o,r,c,u)=>ga(e).formatter.formatChanged(n,o,r,c,u),f8=(e,n)=>e3(e).editor.getContent(n),g8=(e,n,o)=>e3(e).editor.setContent(n,o),h8=(e,n,o)=>e3(e).editor.insertContent(n,o),p8=(e,n,o)=>ga(e).selection.getContent(n,o),AW=(e,n)=>ga(e).editor.addVisual(n),Ud=e=>ga(e).init.bindEvents(),t3=(e,n)=>ga(e).autocompleter.addDecoration(n),b8=e=>ga(e).autocompleter.removeDecoration(),v8=(e,n={})=>{const o=n.format?n.format:"html";return p8(e,o,n)},eN=e=>e.dom.length===0?(Js(e),H.none()):H.some(e),y8=(e,n)=>e.filter(o=>el.isBookmarkNode(o.dom)).bind(n?dd:Gc),Es=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(W_(c,u,!1,!r),o.setStart(u,f)):(W_(u,c,!1,!r),o.setEnd(u,f))},OW=(e,n)=>{di(e).each(o=>{const r=e.dom;n&&R0(o,Ee(r,0))?_x(r,0):!n&&z2(o,Ee(r,r.length))&&U_(r,r.length)})},tN=(e,n,o,r)=>{e.bind(c=>((r?U_:_x)(c.dom,r?c.dom.length:0),n.filter(xc).map(f=>Es(c,f,o,r)))).orThunk(()=>y8(n,r).or(n).filter(xc).map(u=>OW(u,r)))},C8=(e,n)=>{const o=H.from(n.firstChild).map(ae.fromDom),r=H.from(n.lastChild).map(ae.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Gc).filter(xc).bind(eN),u=r.bind(dd).filter(xc).bind(eN);tN(c,o,e,!0),tN(u,r,e,!1),e.collapse(!1)},oa=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),w8=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return Yh({validate:!1},e.schema).serialize(u)}else return n.content},SC=(e,n,o={})=>{const r=oa(o,n);UA(e,r).each(c=>{const u=w8(e,c),f=e.selection.getRng();C8(f,f.createContextualFragment(u)),e.selection.setRng(f),en(e,f),pC(e,u,c)})},nN=(e,n,o)=>{if(hn(e,n)){const r=Rt(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var S8=(e,n)=>{let o,r;const c=(b,y)=>Wo(y,E=>e.is(E,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,E=u(y),N={};bt(o,(R,L)=>{c(L,E).each(Q=>{r[L]||(xe(R,te=>{te(!0,{node:Q,selector:L,parents:E})}),r[L]=R),N[L]=R})}),bt(r,(R,L)=>{N[L]||(delete r[L],xe(R,Q=>{Q(!1,{node:y,selector:L,parents:E})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{nN(o,b,y),nN(r,b,y)}})}};const oN=e=>!!(e&&e.ownerDocument)&&Ai(ae.fromDom(e.ownerDocument),ae.fromDom(e)),sN=e=>e?oN(e.startContainer)&&oN(e.endContainer):!1,Gg=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=S8(e,r),b=(Ct,dn)=>{const cs=e.createRng();Ze(Ct)&&Ze(dn)?(cs.setStart(Ct,dn),cs.setEnd(Ct,dn),De(cs),ye(!1)):(d0(e,cs,r.getBody(),!0),De(cs))},y=Ct=>v8(r,Ct),E=(Ct,dn)=>SC(r,Ct,dn),N=Ct=>YO(r.getBody(),we(),Ct),R=Ct=>XO(r.getBody(),we(),Ct),L=(Ct,dn)=>zc.getBookmark(Ct,dn),Q=Ct=>zc.moveToBookmark(Ct),te=(Ct,dn)=>(wF(e,Ct,dn).each(De),Ct),j=()=>{const Ct=we(),dn=pe();return!Ct||Ct.item?!1:Ct.compareEndPoints?Ct.compareEndPoints("StartToEnd",Ct)===0:!dn||Ct.collapsed},ee=()=>{const Ct=we(),dn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return dn.length>0?Ss(dn,cs=>e.isEditable(cs.parentElement)):Ct.startContainer===Ct.endContainer?e.isEditable(Ct.startContainer):e.isEditable(Ct.startContainer)&&e.isEditable(Ct.endContainer)},ye=Ct=>{const dn=we();dn.collapse(!!Ct),De(dn)},pe=()=>n.getSelection?n.getSelection():n.document.selection,we=()=>{let Ct;const dn=($t,Tn,kn)=>{try{return Tn.compareBoundaryPoints($t,kn)}catch{return-1}},cs=n.document;if(Ze(r.bookmark)&&!Kh(r)){const $t=kf(r);if($t.isSome())return $t.map(Tn=>O_(r,[Tn])[0]).getOr(cs.createRange())}try{const $t=pe();$t&&!vn($t.anchorNode)&&($t.rangeCount>0?Ct=$t.getRangeAt(0):Ct=cs.createRange(),Ct=O_(r,[Ct])[0])}catch{}if(Ct||(Ct=cs.createRange()),tf(Ct.startContainer)&&Ct.collapsed){const $t=e.getRoot();Ct.setStart($t,0),Ct.setEnd($t,0)}return c&&u&&(dn(Ct.START_TO_START,Ct,c)===0&&dn(Ct.END_TO_END,Ct,c)===0?Ct=u:(c=null,u=null)),Ct},De=(Ct,dn)=>{if(!sN(Ct))return;const cs=pe();if(Ct=r.dispatch("SetSelectionRange",{range:Ct,forward:dn}).range,cs){u=Ct;try{cs.removeAllRanges(),cs.addRange(Ct)}catch{}dn===!1&&cs.extend&&(cs.collapse(Ct.endContainer,Ct.endOffset),cs.extend(Ct.startContainer,Ct.startOffset)),c=cs.rangeCount>0?cs.getRangeAt(0):null}if(!Ct.collapsed&&Ct.startContainer===Ct.endContainer&&(cs!=null&&cs.setBaseAndExtent)&&Ct.endOffset-Ct.startOffset<2&&Ct.startContainer.hasChildNodes()){const Tn=Ct.startContainer.childNodes[Ct.startOffset];Tn&&Tn.nodeName==="IMG"&&(cs.setBaseAndExtent(Ct.startContainer,Ct.startOffset,Ct.endContainer,Ct.endOffset),(cs.anchorNode!==Ct.startContainer||cs.focusNode!==Ct.endContainer)&&cs.setBaseAndExtent(Tn,0,Tn,1))}r.dispatch("AfterSetSelectionRange",{range:Ct,forward:dn})},Xe=Ct=>(E(e.getOuterHTML(Ct)),Ct),Ot=()=>yF(r.getBody(),we()),xt=(Ct,dn)=>CF(e,we(),Ct,dn),Fe=()=>{const Ct=pe(),dn=Ct==null?void 0:Ct.anchorNode,cs=Ct==null?void 0:Ct.focusNode;if(!Ct||!dn||!cs||vn(dn)||vn(cs))return!0;const $t=e.createRng(),Tn=e.createRng();try{$t.setStart(dn,Ct.anchorOffset),$t.collapse(!0),Tn.setStart(cs,Ct.focusOffset),Tn.collapse(!0)}catch{return!0}return $t.compareBoundaryPoints($t.START_TO_START,Tn)<=0},pa={dom:e,win:n,serializer:o,editor:r,expand:(Ct={type:"word"})=>De(Zh(e).expand(we(),Ct)),collapse:ye,setCursorLocation:b,getContent:y,setContent:E,getBookmark:L,moveToBookmark:Q,select:te,isCollapsed:j,isEditable:ee,isForward:Fe,setNode:Xe,getNode:Ot,getSel:pe,setRng:De,getRng:we,getStart:N,getEnd:R,getSelectedBlocks:xt,normalize:()=>{const Ct=we(),dn=pe();if(!Lh(dn)&&e2(r)){const cs=Mm(e,Ct);return cs.each($t=>{De($t,Fe())}),cs.getOr(Ct)}return Ct},selectorChanged:(Ct,dn)=>(f(Ct,dn),pa),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Ct,dn=e.getRoot();for(;dn&&dn.nodeName!=="BODY";){if(dn.scrollHeight>dn.clientHeight){Ct=dn;break}dn=dn.parentNode}return Ct},scrollIntoView:(Ct,dn)=>{Ze(Ct)?Ke(r,Ct,dn):en(r,we(),dn)},placeCaretAt:(Ct,dn)=>De(M2(Ct,dn,r.getDoc())),getBoundingClientRect:()=>{const Ct=we();return Ct.collapsed?Ee.fromRangeStart(Ct).getClientRects()[0]:Ct.getBoundingClientRect()},destroy:()=>{n=c=u=null,yc.destroy()}},zc=el(pa),yc=ix(pa,r);return pa.bookmarkManager=zc,pa.controlSelection=yc,pa},Wl=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const E=r[y];let N=E.attr(u);N!==void 0?(E.attr(c,N.length>0?N:null),E.attr(u,null)):(N=E.attr(c),c==="style"?N=o.serializeStyle(o.parseStyle(N),E.name):f&&(N=f.call(b,N,c,E.name)),E.attr(c,N.length>0?N:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(H.from(b.firstChild).exists(E=>{var N;return!je((N=E.value)!==null&&N!==void 0?N:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=cf.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],E=y.firstChild,N=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(c==="script"){const R=y.attr("type");R&&y.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&N.length>0&&(E.value=`// <![CDATA[
`+f(N)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&N.length>0&&(E.value=`<!--
`+f(N)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{xe(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},xC=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},F1=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");et.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return u2(e,{...o,node:u}),r&&(c.doc=r),u},Df=(e,n)=>Ze(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,TC=(e,n,o)=>Df(e,o)?F1(e,n,o):n,n3=(e,n,o)=>{et.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},o3=(e,n,o)=>!n.no_events&&e?d2(e,{...n,content:o}).content:o,rN=(e,n,o)=>{const r=dt(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Qa(ae.fromDom(n))?r:et.trim(r)},aN=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return xC(c),c},x8=(e,n,o)=>Yh(e,n).serialize(o),T8=(e,n,o,r,c)=>{const u=x8(n,o,r);return o3(e,c,u)},cN=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:br.DOM,c=n&&n.schema?n.schema:gl(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=sp(e,c);Wl(u,e,r);const f=(b,y={})=>{const E={format:"html",...y},N=TC(n,b,E),R=rN(r,N,E),L=aN(u,R,E);return E.format==="tree"?L:T8(n,e,c,L,E)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:qe(n3,u,o),getTempAttrs:rt(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},s3=(e,n)=>{const o=cN(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},iN="html",lN=(e,n)=>({...e,format:n,get:!0,getInner:!0}),r3=(e,n={})=>{const o=n.format?n.format:iN,r=lN(n,o);return VA(e,r).fold(ko,c=>{const u=f8(e,c);return zA(e,u,c)})},DW="html",E8=(e,n)=>({format:DW,...e,set:!0,content:n}),uN=(e,n,o={})=>{const r=E8(o,n);return UA(e,r).map(c=>{const u=g8(e,c.content,c);return pC(e,u.html,c),u.content}).getOr(n)},k8="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),_8="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Rf="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),A8=[{name:"template",replacedWith:"Advanced Template"}],O8=(e,n)=>{const o=Rt(n,r=>hn(e,r));return ls(o)},D8=e=>{const n=O8(e,k8),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),ls(n)},EC=e=>O8(e,_8),dN=(e,n)=>{const o=et.makeMap(e.plugins," "),c=Rt(n,u=>hn(o,u));return ls(c)},mN=e=>dN(e,Rf),fN=e=>dN(e,A8.map(n=>n.name)),gN=(e,n)=>{const o=D8(e),r=mN(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",E=c?`

Plugins:${b}${r.join(b)}`:"",N=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+E+N)}},R8=e=>Wo(A8,n=>n.name===e).fold(()=>e,n=>`${e}, replaced by ${n.replacedWith}`),M8=(e,n)=>{const o=EC(e),r=fN(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(R8).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},rp=(e,n)=>{gN(e,n),M8(e,n)},pT=br.DOM,N8=e=>{pT.setStyle(e.id,"display",e.orgDisplay)},bT=e=>H.from(e).each(n=>n.destroy()),B8=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},P8=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),pT.unbind(n,"submit reset",e.formEventDelegate))},$8=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Ze(c==null?void 0:c.nextSibling)&&pT.remove(c.nextSibling),m2(e),e.editorManager.remove(e),!e.inline&&r&&N8(e),c_(e),pT.remove(e.getContainer()),bT(n),bT(o),e.destroy()}},F8=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),bT(o),bT(r)),P8(e),B8(e),e.destroyed=!0}},vT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>hn(e,c)}})(),j0=$s.ModelManager,hN=(e,n)=>n.dom[e],I8=(e,n)=>parseInt(ll(n,e),10),kC=qe(hN,"clientWidth"),L8=qe(hN,"clientHeight"),a3=qe(I8,"margin-top"),H8=qe(I8,"margin-left"),V8=e=>e.dom.getBoundingClientRect(),z8=(e,n,o)=>{const r=kC(e),c=L8(e);return n>=0&&o>=0&&n<=r&&o<=c},U8=(e,n,o,r)=>{const c=V8(n),u=e?c.left+n.dom.clientLeft+H8(n):0,f=e?c.top+n.dom.clientTop+a3(n):0,b=o-u,y=r-f;return{x:b,y}},I1=(e,n,o)=>{const r=ae.fromDom(e.getBody()),c=e.inline?r:nh(r),u=U8(e.inline,c,n,o);return z8(c,u.x,u.y)},L1=e=>H.from(e).map(ae.fromDom),yT=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return L1(n).map(kl).getOr(!1)};var CT=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const ap=e=>{const n=[],o=()=>{const L=e.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():CT()},r=()=>H.from(n[0]),c=(L,Q)=>L.type===Q.type&&L.text===Q.text&&!L.progressBar&&!L.timeout&&!Q.progressBar&&!Q.timeout,u=()=>{xe(n,L=>{L.reposition()})},f=L=>{n.push(L)},b=L=>{Fs(n,Q=>Q===L).each(Q=>{n.splice(Q,1)})},y=(L,Q=!0)=>e.removed||!yT(e)?{}:(Q&&e.dispatch("BeforeOpenNotification",{notification:L}),Wo(n,te=>c(o().getArgs(te),L)).getOrThunk(()=>{e.editorManager.setActive(e);const te=o().open(L,()=>{b(te),u(),r().fold(()=>e.focus(),j=>Hn(ae.fromDom(j.getEl())))});return f(te),u(),e.dispatch("OpenNotification",{notification:{...te}}),te})),E=()=>{r().each(L=>{o().close(L),b(L),u()})},N=rt(n);return(L=>{L.on("SkinLoaded",()=>{const Q=pS(L);Q&&y({text:Q,type:"warning",timeout:0},!1),u()}),L.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),L.on("remove",()=>{xe(n.slice(),Q=>{o().close(Q)})})})(e),{open:y,close:E,getNotifications:N}},Wd=$s.PluginManager,Mf=$s.ThemeManager;var wT=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const c3=e=>{let n=[];const o=()=>{const j=e.theme;return j&&j.getWindowManagerImpl?j.getWindowManagerImpl():wT()},r=(j,ee)=>(...ye)=>ee?ee.apply(j,ye):void 0,c=j=>{e.dispatch("OpenWindow",{dialog:j})},u=j=>{e.dispatch("CloseWindow",{dialog:j})},f=j=>{n.push(j),c(j)},b=j=>{u(j),n=Rt(n,ee=>ee!==j),n.length===0&&e.focus()},y=()=>H.from(n[n.length-1]),E=j=>{e.editorManager.setActive(e),ol(e),e.ui.show();const ee=j();return f(ee),ee},N=(j,ee)=>E(()=>o().open(j,ee,b)),R=j=>E(()=>o().openUrl(j,b)),L=(j,ee,ye)=>{const pe=o();pe.alert(j,r(ye||pe,ee))},Q=(j,ee,ye)=>{const pe=o();pe.confirm(j,r(ye||pe,ee))},te=()=>{y().each(j=>{o().close(j),b(j)})};return e.on("remove",()=>{xe(n,j=>{o().close(j)})}),{open:N,openUrl:R,alert:L,confirm:Q,close:te}},ST=(e,n)=>{e.notificationManager.open({type:"error",text:n})},G0=(e,n)=>{e._skinLoaded?ST(e,n):e.on("SkinLoaded",()=>{ST(e,n)})},pN=(e,n)=>{G0(e,Hu.translate(["Failed to upload image: {0}",n]))},q0=(e,n,o)=>{p2(e,n,{message:o}),console.error(o)},Nf=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,bN=(e,n,o)=>{q0(e,"PluginLoadError",Nf("plugin",n,o))},vN=(e,n,o)=>{q0(e,"IconsLoadError",Nf("icons",n,o))},yN=(e,n,o)=>{q0(e,"LanguageLoadError",Nf("language",n,o))},xT=(e,n,o)=>{q0(e,"ThemeLoadError",Nf("theme",n,o))},CN=(e,n,o)=>{q0(e,"ModelLoadError",Nf("model",n,o))},wN=(e,n,o)=>{const r=Hu.translate(["Failed to initialize plugin: {0}",n]);p2(e,"PluginLoadError",{message:r}),_C(r,o),G0(e,r)},_C=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},SN=e=>/^[a-z0-9\-]+$/i.test(e),qg=e=>Ku(e,Zb(e)),cp=e=>Ku(e,Sy(e)),Ku=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Ge(n,u=>SN(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},W8=e=>{e.contentCSS=e.contentCSS.concat(qg(e),cp(e))},Z8=e=>e?dr(e.getElementsByTagName("img")):[],j8=(e,n)=>{const o={};return{findAll:(c,u=Qe)=>{const f=Rt(Z8(c),y=>{const E=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!E||E===es.transparentSrc?!1:xn(E,"blob:")?!e.isUploaded(E)&&u(y):xn(E,"data:")?u(y):!1}),b=Ge(f,y=>{const E=y.src;if(hn(o,E))return o[E].then(N=>K(N)?N:{image:y,blobInfo:N.blobInfo});{const N=sM(n,E).then(R=>(delete o[E],{image:y,blobInfo:R})).catch(R=>(delete o[E],R));return o[E]=N,N}});return Promise.all(b)}}},xN=()=>{let o={};const r=(L,Q)=>({status:L,resultUri:Q}),c=L=>L in o;return{hasBlobUri:c,getResultUri:L=>{const Q=o[L];return Q?Q.resultUri:null},isPending:L=>c(L)?o[L].status===1:!1,isUploaded:L=>c(L)?o[L].status===2:!1,markPending:L=>{o[L]=r(1,null)},markUploaded:(L,Q)=>{o[L]=r(2,Q)},removeFailed:L=>{delete o[L]},destroy:()=>{o={}}}};let G8=0;const q8=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},K8=e=>e+G8+++q8(),Y8=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,L,Q,te,j)=>{if(K(R))return r({id:R,name:te,filename:j,blob:L,base64:Q});if(ot(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const L=R.id||K8("blobid"),Q=R.name||L,te=R.blob;return{id:rt(L),name:rt(Q),filename:rt(R.filename||Q+"."+n(te.type)),blob:rt(te),base64:rt(R.base64),blobUri:rt(R.blobUri||URL.createObjectURL(te)),uri:rt(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>Wo(e,R).getOrUndefined(),f=R=>u(L=>L.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(L=>L.blobUri()===R),getByData:(R,L)=>u(Q=>Q.base64()===R&&Q.blob().type===L),findFirst:u,removeByUri:R=>{e=Rt(e,L=>L.blobUri()===R?(URL.revokeObjectURL(L.blobUri()),!1):!0)},destroy:()=>{xe(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},X8=(e,n)=>{const o={},r=(j,ee)=>j?j.replace(/\/$/,"")+"/"+ee.replace(/^\//,""):ee,c=(j,ee)=>new Promise((ye,pe)=>{const we=new XMLHttpRequest;we.open("POST",n.url),we.withCredentials=n.credentials,we.upload.onprogress=Xe=>{ee(Xe.loaded/Xe.total*100)},we.onerror=()=>{pe("Image upload failed due to a XHR Transport error. Code: "+we.status)},we.onload=()=>{if(we.status<200||we.status>=300){pe("HTTP Error: "+we.status);return}const Xe=JSON.parse(we.responseText);if(!Xe||!K(Xe.location)){pe("Invalid JSON: "+we.responseText);return}ye(r(n.basePath,Xe.location))};const De=new FormData;De.append("file",j.blob(),j.filename()),we.send(De)}),u=he(n.handler)?n.handler:c,f=()=>new Promise(j=>{j([])}),b=(j,ee)=>({url:ee,blobInfo:j,status:!0}),y=(j,ee)=>({url:"",blobInfo:j,status:!1,error:ee}),E=(j,ee)=>{et.each(o[j],ye=>{ye(ee)}),delete o[j]},N=(j,ee,ye)=>(e.markPending(j.blobUri()),new Promise(pe=>{let we,De;try{const Xe=()=>{we&&(we.close(),De=Zt)},Ot=Fe=>{Xe(),e.markUploaded(j.blobUri(),Fe),E(j.blobUri(),b(j,Fe)),pe(b(j,Fe))},xt=Fe=>{Xe(),e.removeFailed(j.blobUri()),E(j.blobUri(),y(j,Fe)),pe(y(j,Fe))};De=Fe=>{Fe<0||Fe>100||H.from(we).orThunk(()=>H.from(ye).map(pt)).each($e=>{we=$e,$e.progressBar.value(Fe)})},ee(j,De).then(Ot,Fe=>{xt(K(Fe)?{message:Fe}:Fe)})}catch(Xe){pe(y(j,Xe))}})),R=j=>j===c,L=j=>{const ee=j.blobUri();return new Promise(ye=>{o[ee]=o[ee]||[],o[ee].push(ye)})},Q=(j,ee)=>(j=et.grep(j,ye=>!e.isUploaded(ye.blobUri())),Promise.all(et.map(j,ye=>e.isPending(ye.blobUri())?L(ye):N(ye,u,ee))));return{upload:(j,ee)=>!n.url&&R(u)?f():Q(j,ee)}},TN=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),EN=(e,n)=>X8(n,{url:ff(e),basePath:dS(e),credentials:wy(e),handler:Ck(e)}),J8=e=>{const n=xN(),o=EN(e,n);return{upload:(r,c=!0)=>o.upload(r,c?TN(e):void 0)}},i3=e=>{const n=Y8();let o,r;const c=xN(),u=[],f=we=>De=>e.selection?we(De):[],b=we=>we+(we.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(we,De,Xe)=>{let Ot=0;do Ot=we.indexOf(De,Ot),Ot!==-1&&(we=we.substring(0,Ot)+Xe+we.substr(Ot+De.length),Ot+=Xe.length-De.length+1);while(Ot!==-1);return we},E=(we,De,Xe)=>{const Ot=`src="${Xe}"${Xe===es.transparentSrc?' data-mce-placeholder="1"':""}`;return we=y(we,`src="${De}"`,Ot),we=y(we,'data-mce-src="'+De+'"','data-mce-src="'+Xe+'"'),we},N=(we,De)=>{xe(e.undoManager.data,Xe=>{Xe.type==="fragmented"?Xe.fragments=Ge(Xe.fragments,Ot=>E(Ot,we,De)):Xe.content=E(Xe.content,we,De)})},R=(we,De)=>{const Xe=e.convertURL(De,"src");N(we.src,De),lc(ae.fromDom(we),{src:Fl(e)?b(De):De,"data-mce-src":Xe})},L=()=>(o||(o=EN(e,c)),ee().then(f(we=>{const De=Ge(we,Xe=>Xe.blobInfo);return o.upload(De,TN(e)).then(f(Xe=>{const Ot=[];let xt=!1;const Fe=Ge(Xe,($e,Gt)=>{const{blobInfo:gn,image:On}=we[Gt];let fo=!1;return $e.status&&yk(e)?($e.url&&!Sn(On.src,$e.url)&&(xt=!0),n.removeByUri(On.src),Of(e)||R(On,$e.url)):$e.error&&($e.error.remove&&(N(On.src,es.transparentSrc),Ot.push(On),fo=!0),pN(e,$e.error.message)),{element:On,status:$e.status,uploadUri:$e.url,blobInfo:gn,removed:fo}});return Ot.length>0&&!Of(e)?e.undoManager.transact(()=>{xe(Ot,$e=>{e.dom.remove($e),n.removeByUri($e.src)})}):xt&&e.undoManager.dispatchChange(),Fe}))}))),Q=()=>zb(e)?L():Promise.resolve([]),te=we=>Ss(u,De=>De(we)),j=we=>{u.push(we)},ee=()=>(r||(r=j8(c,n)),r.findAll(e.getBody(),te).then(f(we=>{const De=Rt(we,Xe=>K(Xe)?(G0(e,Xe),!1):!0);return Of(e)||xe(De,Xe=>{N(Xe.image.src,Xe.blobInfo.blobUri()),Xe.image.src=Xe.blobInfo.blobUri(),Xe.image.removeAttribute("data-mce-src")}),De}))),ye=()=>{n.destroy(),c.destroy(),r=o=null},pe=we=>we.replace(/src="(blob:[^"]+)"/g,(De,Xe)=>{const Ot=c.getResultUri(Xe);if(Ot)return'src="'+Ot+'"';let xt=n.getByUri(Xe);return xt||(xt=$n(e.editorManager.get(),(Fe,$e)=>Fe||$e.editorUpload&&$e.editorUpload.blobCache.getByUri(Xe),void 0)),xt?'src="data:'+xt.blob().type+";base64,"+xt.base64()+'"':De});return e.on("SetContent",()=>{zb(e)?Q():ee()}),e.on("RawSaveContent",we=>{we.content=pe(we.content)}),e.on("GetContent",we=>{we.source_view||we.format==="raw"||we.format==="tree"||(we.content=pe(we.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",we=>{xe(we,De=>{const Xe=De.attr("src");if(!Xe||n.getByUri(Xe))return;const Ot=c.getResultUri(Xe);Ot&&De.attr("src",Ot)})})}),{blobCache:n,addFilter:j,uploadImages:L,uploadImagesAuto:Q,scanForImages:ee,destroy:ye}},l3=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Ut(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{et.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return et.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},u3={remove_similar:!0,inherit:!1},K0={selector:"td,th",...u3},Q8={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...K0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...K0},tablecellbordercolor:{styles:{borderColor:"%value"},...K0},tablecellclass:{classes:["%value"],...K0},tableclass:{selector:"table",classes:["%value"],...u3},tablecellborderstyle:{styles:{borderStyle:"%value"},...K0},tablecellborderwidth:{styles:{borderWidth:"%value"},...K0}},kN=rt(Q8),_N=e=>{const n={},o=f=>Ze(f)?n[f]:n,r=f=>hn(n,f),c=(f,b)=>{f&&(K(f)?(ut(b)||(b=[b]),xe(b,y=>{Vn(y.deep)&&(y.deep=!Hi(y)),Vn(y.split)&&(y.split=!Hi(y)||qa(y)),Vn(y.remove)&&Hi(y)&&!qa(y)&&(y.remove="none"),Hi(y)&&qa(y)&&(y.mixed=!0,y.block_expand=!0),K(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):bt(f,(y,E)=>{c(E,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(l3(e)),c(kN()),c(ri(e)),{get:o,has:r,register:c,unregister:u}},Y0=et.each,Su=br.DOM,TT=e=>Ze(e)&&ot(e),ET=(e,n)=>{const o=n&&n.schema||gl({}),r=(y,E)=>{E.classes.length>0&&Su.addClass(y,E.classes.join(" ")),Su.setAttribs(y,E.attrs)},c=y=>{const E=K(y)?{name:y,classes:[],attrs:{}}:y,N=Su.create(E.name);return r(N,E),N},u=(y,E)=>{const N=o.getElementRule(y.nodeName.toLowerCase()),R=N==null?void 0:N.parentsRequired;return R&&R.length?E&&Ue(R,E)?E:R[0]:!1},f=(y,E,N)=>{let R;const L=E[0],Q=TT(L)?L.name:void 0,te=u(y,Q);if(te)Q===te?(R=L,E=E.slice(1)):R=te;else if(L)R=L,E=E.slice(1);else if(!N)return y;const j=R?c(R):Su.create("div");j.appendChild(y),N&&et.each(N,ye=>{const pe=c(ye);j.insertBefore(pe,y)});const ee=TT(R)?R.siblings:void 0;return f(j,E,ee)},b=Su.create("div");if(e.length>0){const y=e[0],E=c(y),N=TT(y)?y.siblings:void 0;b.appendChild(f(E,e.slice(1),N))}return b},eL=e=>{e=et.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":et.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},tL=e=>K(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),et.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=et.map(n.split(/(?:~\+|~|\+)/),eL),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],Bf=(e,n)=>{let o="",r=Ey(e);if(r==="")return"";const c=L=>K(L)?L.replace(/%(\w+)/g,""):"",u=(L,Q)=>Su.getStyle(Q??e.getBody(),L,!0);if(K(n)){const L=e.formatter.get(n);if(!L)return"";n=L[0]}if("preview"in n){const L=n.preview;if(L===!1)return"";r=L||r}let f=n.block||n.inline||"span",b;const y=tL(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=ET(y,e)):b=ET([f],e);const E=Su.select(f,b)[0]||b.firstChild;Y0(n.styles,(L,Q)=>{const te=c(L);te&&Su.setStyle(E,Q,te)}),Y0(n.attributes,(L,Q)=>{const te=c(L);te&&Su.setAttrib(E,Q,te)}),Y0(n.classes,L=>{const Q=c(L);Su.hasClass(E,Q)||Su.addClass(E,Q)}),e.dispatch("PreviewFormats"),Su.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const N=u("fontSize"),R=/px$/.test(N)?parseInt(N,10):0;return Y0(r.split(" "),L=>{let Q=u(L,E);if(!(L==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Q)&&(Q=u(L),Ih(Q).toLowerCase()==="#ffffff"))&&!(L==="color"&&Ih(Q).toLowerCase()==="#000000")){if(L==="font-size"&&/em|%$/.test(Q)){if(R===0)return;Q=parseFloat(Q)/(/%$/.test(Q)?100:1)*R+"px"}L==="border"&&Q&&(o+="padding:0 2px;"),o+=L+":"+Q+";"}}),e.dispatch("AfterPreviewFormats"),Su.remove(b),o},Zd=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},AC=e=>{const n=_N(e),o=Wa({});return Zd(e),$I(e),Of(e)||YI(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{u8(e,r,c,u)},remove:(r,c,u,f)=>{d8(e,r,c,u,f)},toggle:(r,c,u)=>{m8(e,r,c,u)},match:(r,c,u,f)=>i8(e,r,c,u,f),closest:r=>JM(e,r),matchAll:(r,c)=>l8(e,r,c),matchNode:(r,c,u,f)=>wC(e,r,c,u,f),canApply:r=>XM(e,r),formatChanged:(r,c,u,f)=>QM(e,o,r,c,u,f),getCssText:qe(Bf,e)}},d3=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},kT=(e,n,o)=>{const r=Wa(!1),c=y=>{wl(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const E=y.command;d3(E)||(UM(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const E=y.command;d3(E)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const E=y.keyCode;y.isDefaultPrevented()||((E>=33&&E<=36||E>=37&&E<=40||E===45||y.ctrlKey)&&(c(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!XA(vC(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&c(y);return}const N=y.ctrlKey&&!y.altKey||y.metaKey;(E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!N&&(n.beforeChange(),wl(n,!0,o),n.add({},y),r.set(!0))}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},AN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},m3=e=>{const n=tc(),o=Wa(0),r=Wa(0),c={data:[],typing:!1,beforeChange:()=>{hT(e,o,n)},add:(u,f)=>CC(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=vC(e);u.bookmark=mc(e.selection),e.dispatch("change",{level:u,lastLevel:ss(c.data,r.get()).getOrUndefined()})},undo:()=>GM(e,c,o,r),redo:()=>qM(e,r,c.data),clear:()=>{o8(e,c,r)},reset:()=>{KM(e,c)},hasUndo:()=>s8(e,c,r),hasRedo:()=>r8(e,c,r),transact:u=>a8(e,c,o,u),ignore:u=>{c8(e,o,u)},extra:(u,f)=>{YM(e,c,r,u,f)}};return Of(e)||kT(e,c,o),AN(e),c},ON=[9,27,rn.HOME,rn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,rn.DOWN,rn.UP,rn.LEFT,rn.RIGHT].concat(es.browser.isFirefox()?[224]:[]),f3="data-mce-placeholder",g3=e=>e.type==="keydown"||e.type==="keyup",h3=e=>{const n=e.keyCode;return n===rn.BACKSPACE||n===rn.DELETE},_T=e=>{if(g3(e)){const n=e.keyCode;return!h3(e)&&(rn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Ue(ON,n))}else return!1},p3=e=>g3(e)&&!(h3(e)||e.type==="keyup"&&e.keyCode===229),nL=(e,n,o)=>{if(qs(ae.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},oL=e=>{var n;const o=e.dom,r=$l(e),c=(n=xy(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(_T(f))return;const y=e.getBody(),E=p3(f)?!1:nL(o,y,r);(o.getAttrib(y,f3)!==""!==E||b)&&(o.setAttrib(y,f3,E?c:null),o.setAttrib(y,"aria-placeholder",E?c:null),Id(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};Rn(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>zl.setEditorTimeout(e,()=>u(b)))})},sL=(e,n)=>({block:e,position:n}),rL=(e,n)=>({from:e,to:n}),AT=(e,n)=>{const o=ae.fromDom(e),r=ae.fromDom(n.container());return Ax(o,r).map(c=>sL(c,n))},aL=e=>!ys(e.from.block,e.to.block),DN=(e,n)=>k(n,c=>Ni(c)||Bs(c.dom),c=>ys(c,e)).filter(Hs).getOr(e),b3=(e,n)=>{const o=ae.fromDom(e);return ys(DN(o,n.from.block),DN(o,n.to.block))},cL=e=>Ts(e.from.block.dom)===!1&&Ts(e.to.block.dom)===!1,iL=e=>{const n=o=>_e(o)||rf(o.dom);return n(e.from.block)&&n(e.to.block)},lL=(e,n,o)=>Pr(o.position.getNode())&&!qs(o.block)?Md(!1,o.block.dom).bind(r=>r.isEqual(o.position)?Ll(n,e,r).bind(c=>AT(e,c)):H.some(o)).getOr(o):o,uL=(e,n,o)=>{const r=AT(e,Ee.fromRangeStart(o)),c=r.bind(u=>Ll(n,e,u.position).bind(f=>AT(e,f).map(b=>lL(e,n,b))));return ta(r,c,rL).filter(u=>aL(u)&&b3(e,u)&&cL(u)&&iL(u))},dL=(e,n,o)=>o.collapsed?uL(e,n,o):H.none(),mL=e=>{const n=za(e);return Fs(n,Ac).fold(rt(n),o=>n.slice(0,o))},RN=e=>{const n=mL(e);return xe(n,Js),n},OC=(e,n)=>{const o=zg(n,e);return Wo(o.reverse(),r=>qs(r)).each(Js)},v3=e=>Rt(sh(e),n=>!qs(n)).length===0,fL=(e,n,o,r)=>{if(qs(o))return I(o),Qi(o.dom);v3(r)&&qs(n)&&xs(r,ae.fromTag("br"));const c=hu(o.dom,Ee.before(r.dom));return xe(RN(n),u=>{xs(r,u)}),OC(e,n),c},gL=(e,n,o)=>{if(qs(o)){if(qs(n)){const u=Tr((f=>{const b=(y,E)=>fd(y).fold(()=>E,N=>Hc(N)?b(N,E.concat(gg(N))):E);return b(f,[])})(o),(f,b)=>(lb(f,b),b),S());js(n),Ur(n,u)}return Js(o),Qi(n.dom)}const r=bf(o.dom);return xe(RN(n),c=>{Ur(o,c)}),OC(e,n),r},hL=(e,n)=>{const o=zg(n,e);return H.from(o[o.length-1])},pL=(e,n)=>Ai(n,e)?hL(n,e):H.none(),y3=(e,n)=>{Md(e,n.dom).bind(o=>H.from(o.getNode())).map(ae.fromDom).filter(Bu).each(Js)},MN=(e,n,o)=>(y3(!0,n),y3(!1,o),pL(n,o).fold(qe(gL,e,n,o),qe(fL,e,n,o))),NN=(e,n,o,r)=>n?MN(e,r,o):MN(e,o,r),DC=(e,n)=>{const o=ae.fromDom(e.getBody());return dL(o.dom,n,e.selection.getRng()).map(c=>()=>{NN(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},bL=(e,n)=>{const o=n.getRng();return ta(Ax(e,ae.fromDom(o.startContainer)),Ax(e,ae.fromDom(o.endContainer)),(r,c)=>ys(r,c)?H.none():H.some(()=>{o.deleteContents(),NN(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(H.none())},BN=(e,n)=>{const o=ae.fromDom(n),r=qe(ys,e);return ar(o,Ni,r).isSome()},vL=(e,n)=>BN(e,n.startContainer)||BN(e,n.endContainer),yL=(e,n)=>{const o=hu(e.dom,Ee.fromRangeStart(n)).isNone(),r=bl(e.dom,Ee.fromRangeEnd(n)).isNone();return!vL(e,n)&&o&&r},CL=e=>H.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),wL=e=>{const n=ae.fromDom(e.getBody()),o=e.selection.getRng();return yL(n,o)?CL(e):bL(n,e.selection)},C3=(e,n)=>e.selection.isCollapsed()?H.none():wL(e),jd=(e,n,o,r,c)=>H.from(n._selectionOverrides.showCaret(e,o,r,c)),OT=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},RC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?H.none():H.some(OT(n)),SL=(e,n,o)=>{const r=Og(1,e.getBody(),n),c=Ee.fromRangeStart(r),u=c.getNode();if(Yp(u))return jd(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Yp(f))return jd(1,e,f,!1,!1);const b=_f(e.dom.getRoot(),c.getNode());return Yp(b)?jd(1,e,b,!1,o):H.none()},X0=(e,n,o)=>n.collapsed?SL(e,n,o).getOr(n):n,xL=e=>C1(e)||H2(e),TL=e=>Xh(e)||ro(e),EL=(e,n)=>{ft(n)&&n.data.length===0&&e.remove(n)},PN=(e,n,o,r,c,u)=>{jd(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),EL(e.dom,o)},kL=(e,n)=>{const o=e.selection.getRng();if(!ft(o.commonAncestorContainer))return H.none();const r=n?hc.Forwards:hc.Backwards,c=gu(e.getBody()),u=qe(Ly,n?c.next:c.prev),f=n?xL:TL,b=$h(r,e.getBody(),o),y=u(b),E=y&&No(n,y);if(!E||!Fh(b,E))return H.none();if(f(E))return H.some(()=>PN(e,o,b.getNode(),r,n,E));const N=u(E);return N&&f(N)&&Fh(E,N)?H.some(()=>PN(e,o,b.getNode(),r,n,N)):H.none()},w3=(e,n)=>kL(e,n),S3=(e,n)=>{const o=e.getBody();return n?Qi(o).filter(C1):bf(o).filter(Xh)},x3=e=>{const n=e.selection.getRng();return!n.collapsed&&(S3(e,!0).exists(o=>o.isEqual(Ee.fromRangeStart(n)))||S3(e,!1).exists(o=>o.isEqual(Ee.fromRangeEnd(n))))},_L=e=>Ze(e)&&(Ni(ae.fromDom(e))||ru(ae.fromDom(e))),xu=mu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),AL=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ut(o)&&o.getAttribute("data-mce-caret")===r},MW=(e,n,o,r)=>{const c=u=>Hc(ae.fromDom(u))&&!pl(o,r,e);return PO(!n,o).fold(()=>PO(n,r).fold(Se,c),c)},Yu=(e,n,o,r)=>{const c=r.getNode(!n);return Ax(ae.fromDom(e),ae.fromDom(o.getNode())).map(u=>qs(u)?xu.remove(u.dom):xu.moveToElement(c)).orThunk(()=>H.some(xu.moveToElement(c)))},DT=(e,n,o)=>Ll(n,e,o).bind(r=>_L(r.getNode())||MW(e,n,o,r)?H.none():n&&Ts(r.getNode())||!n&&Ts(r.getNode(!0))?Yu(e,n,o,r):n&&Xh(o)||!n&&C1(o)?H.some(xu.moveToPosition(r)):H.none()),$N=(e,n)=>Pt(n)?H.none():e&&Ts(n.nextSibling)?H.some(xu.moveToElement(n.nextSibling)):!e&&Ts(n.previousSibling)?H.some(xu.moveToElement(n.previousSibling)):H.none(),FN=(e,n,o)=>o.fold(r=>H.some(xu.remove(r)),r=>H.some(xu.moveToElement(r)),r=>pl(n,r,e)?H.none():H.some(xu.moveToPosition(r))),OL=(e,n,o)=>AL(n,o)?$N(n,o.getNode(!n)).orThunk(()=>DT(e,n,o)):DT(e,n,o).bind(r=>FN(e,o,r)),IN=(e,n,o)=>{const r=Og(n?1:-1,e,o),c=Ee.fromRangeStart(r),u=ae.fromDom(e);return!n&&Xh(c)?H.some(xu.remove(c.getNode(!0))):n&&C1(c)?H.some(xu.remove(c.getNode())):!n&&C1(c)&&pD(u,c)?gW(u,c).map(f=>xu.remove(f.getNode())):n&&Xh(c)&&I_(u,c)?qF(u,c).map(f=>xu.remove(f.getNode())):OL(e,n,c)},DL=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),S1(e,n,ae.fromDom(o)),!0),LN=(e,n)=>o=>{const r=n?Ee.before(o):Ee.after(o);return e.selection.setRng(r.toRange()),!0},RL=e=>n=>(e.selection.setRng(n.toRange()),!0),HN=(e,n)=>H.from(_f(e.getBody(),n)),ML=(e,n)=>{const o=e.selection.getNode();return HN(e,o).filter(Ts).fold(()=>IN(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(DL(e,n),LN(e,n),RL(e))),()=>H.some(Zt))},J0=e=>{xe(Ec(e,".mce-offscreen-selection"),Js)},VN=(e,n)=>{const o=e.selection.getNode();return Ts(o)&&!_c(o)?HN(e,o.parentNode).filter(Ts).fold(()=>H.some(()=>{J0(ae.fromDom(e.getBody())),S1(e,n,ae.fromDom(e.selection.getNode())),W2(e)}),()=>H.some(Zt)):x3(e)?H.some(()=>{LD(e,e.selection.getRng(),ae.fromDom(e.getBody()))}):H.none()},T3=e=>{const n=e.dom,o=e.selection,r=_f(e.getBody(),o.getNode());if(Bs(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(Ee.before(c).toRange())}return!0},RT=(e,n)=>e.selection.isCollapsed()?ML(e,n):VN(e,n),E3=(e,n)=>{const o=Ee.fromRangeStart(e.selection.getRng());return Ll(n,e.getBody(),o).filter(r=>n?UF(r):Jn(r)).bind(r=>Qb(n?0:-1,r)).map(r=>()=>e.selection.select(r))},k3=(e,n)=>e.selection.isCollapsed()?E3(e,n):H.none(),Q0=ft,zN=e=>Q0(e)&&e.data[0]===ie,NL=e=>Q0(e)&&e.data[e.data.length-1]===ie,BL=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ie)},NW=e=>{var n;if(Q0(e.previousSibling))return NL(e.previousSibling)||e.previousSibling.appendData(ie),e.previousSibling;if(Q0(e))return zN(e)||e.insertData(0,ie),e;{const o=BL(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},Gd=e=>{var n,o;if(Q0(e.nextSibling))return zN(e.nextSibling)||e.nextSibling.insertData(0,ie),e.nextSibling;if(Q0(e))return NL(e)||e.appendData(ie),e;{const r=BL(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},MT=(e,n)=>e?NW(n):Gd(n),PL=qe(MT,!0),UN=qe(MT,!1),NT=(e,n)=>ft(e.container())?MT(n,e.container()):MT(n,e.getNode()),$L=(e,n)=>{const o=n.get();return o&&e.container()===o&&Ps(o)},WN=(e,n)=>n.fold(o=>{Eg(e.get());const r=PL(o);return e.set(r),H.some(Ee(r,r.length-1))},o=>Qi(o).map(r=>{if($L(r,e)){const c=e.get();return Ee(c,1)}else{Eg(e.get());const c=NT(r,!0);return e.set(c),Ee(c,1)}}),o=>bf(o).map(r=>{if($L(r,e)){const c=e.get();return Ee(c,c.length-1)}else{Eg(e.get());const c=NT(r,!1);return e.set(c),Ee(c,c.length-1)}}),o=>{Eg(e.get());const r=UN(o);return e.set(r),H.some(Ee(r,1))}),FL=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return H.none()},ha=mu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),ZN=(e,n)=>{const o=Ga(n,e);return o||e},IL=(e,n,o)=>{const r=Cu(o),c=ZN(n,r.container());return Bm(e,c,r).fold(()=>bl(c,r).bind(qe(Bm,e,c)).map(u=>ha.before(u)),H.none)},LL=(e,n)=>Em(e,n)===null,jN=(e,n,o)=>Bm(e,n,o).filter(qe(LL,n)),HL=(e,n,o)=>{const r=PD(o);return jN(e,n,r).bind(c=>hu(c,r).isNone()?H.some(ha.start(c)):H.none())},VL=(e,n,o)=>{const r=Cu(o);return jN(e,n,r).bind(c=>bl(c,r).isNone()?H.some(ha.end(c)):H.none())},H1=(e,n,o)=>{const r=PD(o),c=ZN(n,r.container());return Bm(e,c,r).fold(()=>hu(c,r).bind(qe(Bm,e,c)).map(u=>ha.after(u)),H.none)},GN=e=>!mI(_3(e)),Pf=(e,n,o)=>FL([IL,HL,VL,H1],[e,n,o]).filter(GN),_3=e=>e.fold(ko,ko,ko,ko),BT=e=>e.fold(rt("before"),rt("start"),rt("end"),rt("after")),ev=e=>e.fold(ha.before,ha.before,ha.after,ha.after),PT=e=>e.fold(ha.start,ha.start,ha.end,ha.end),qN=(e,n)=>BT(e)===BT(n)&&_3(e)===_3(n),KN=(e,n,o,r,c,u)=>ta(Bm(n,o,r),Bm(n,o,c),(f,b)=>f!==b&&hW(o,f,b)?ha.after(e?f:b):u).getOr(u),zL=(e,n)=>e.fold(Qe,o=>!qN(o,n)),MC=(e,n,o,r,c)=>{const u=No(e,c);return Ll(e,o,u).map(qe(No,e)).fold(()=>r.map(ev),y=>Pf(n,o,y).map(qe(KN,e,n,o,u,y)).filter(qe(zL,r))).filter(GN)},UL=(e,n)=>e?n.fold(A(H.some,ha.start),H.none,A(H.some,ha.after),H.none):n.fold(H.none,A(H.some,ha.before),H.none,A(H.some,ha.end)),WL=(e,n,o,r)=>{const c=No(e,r),u=Pf(n,o,c);return Pf(n,o,c).bind(qe(UL,e)).orThunk(()=>MC(e,n,o,u,r))},ZL=e=>he(e.selection.getSel().modify),YN=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ee(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},jL=(e,n)=>{const o=n.selection.getRng(),r=e?Ee.fromRangeEnd(o):Ee.fromRangeStart(o);return ZL(n)?e&&uc(r)?YN(!0,n.selection,r):!e&&Rl(r)?YN(!1,n.selection,r):!1:!1};var $f;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})($f||($f={}));const $T=(e,n)=>e===hc.Backwards?is(n):n,XN=(e,n,o)=>e===hc.Forwards?n.next(o):n.prev(o),GL=(e,n,o,r)=>Pr(r.getNode(n===hc.Forwards))?$f.Br:pl(o,r)===!1?$f.Block:$f.Wrap,ip=(e,n,o,r)=>{const c=gu(o);let u=r;const f=[];for(;u;){const b=XN(n,c,u);if(!b)break;if(Pr(b.getNode(!1)))return n===hc.Forwards?{positions:$T(n,f).concat([b]),breakType:$f.Br,breakAt:H.some(b)}:{positions:$T(n,f),breakType:$f.Br,breakAt:H.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=GL(o,n,u,b);return{positions:$T(n,f),breakType:y,breakAt:H.some(b)}}f.push(b),u=b}return{positions:$T(n,f),breakType:$f.Eol,breakAt:H.none()}},A3=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===hc.Backwards?u.concat(c):[c].concat(u)}).getOr([]),NC=(e,n)=>$n(e,(o,r)=>o.fold(()=>H.some(r),c=>ta(Xo(c.getClientRects()),Xo(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),H.none()),BC=(e,n)=>Xo(n.getClientRects()).bind(o=>NC(e,o.left)),V1=qe(ip,Ee.isAbove,-1),qd=qe(ip,Ee.isBelow,1),O3=qe(A3,-1,V1),Tu=qe(A3,1,qd),z1=(e,n)=>V1(e,n).breakAt.isNone(),D3=(e,n)=>qd(e,n).breakAt.isNone(),qL=e=>Qi(e).map(n=>[n].concat(qd(e,n).positions)).getOr([]),JN=e=>bf(e).map(n=>V1(e,n).positions.concat(n)).getOr([]),KL=(e,n)=>BC(O3(e,n),n),YL=(e,n)=>BC(Tu(e,n),n),XL=Ts,QN=(e,n)=>Math.abs(e.left-n),eB=(e,n)=>Math.abs(e.right-n),tB=e=>Er(e,"node"),nB=(e,n)=>Ie(e,(o,r)=>{const c=Math.min(QN(o,n),eB(o,n)),u=Math.min(QN(r,n),eB(r,n));return u===c&&tB(r)&&XL(r.node)||u<c?r:o}),JL=e=>{const n=o=>Ge(o,r=>{const c=hg(r);return c.node=e,c});if(Ut(e))return n(e.getClientRects());if(ft(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},U1=e=>Ir(e,JL);var W1;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(W1||(W1={}));const oB=(e,n,o,r)=>{let c=r;for(;c=hf(c,e,Pi,n);)if(o(c))return},R3=(e,n,o,r,c,u)=>{let f=0;const b=[],y=R=>{let L=U1([R]);e===-1&&(L=L.reverse());for(let Q=0;Q<L.length;Q++){const te=L[Q];if(!o(te,E)){if(b.length>0&&n(te,Yt(b))&&f++,te.line=f,c(te))return!0;b.push(te)}}return!1},E=Yt(u.getClientRects());if(!E)return b;const N=u.getNode();return N&&(y(N),oB(e,r,y,N)),b},M3=(e,n)=>n.line>e,QL=(e,n)=>n.line===e,e7=qe(R3,W1.Up,Li,pg),t7=qe(R3,W1.Down,pg,Li),sB=e=>Yt(e.getClientRects()),n7=(e,n,o,r)=>{const c=gu(n);let u,f,b,y;const E=[];let N=0;e===1?(u=c.next,f=pg,b=Li,y=Ee.after(r)):(u=c.prev,f=Li,b=pg,y=Ee.before(r));const R=sB(y);do{if(!y.isVisible())continue;const L=sB(y);if(b(L,R))continue;E.length>0&&f(L,Yt(E))&&N++;const Q=hg(L);if(Q.position=y,Q.line=N,o(Q))return E;E.push(Q)}while(y=u(y));return E},rB=e=>n=>M3(e,n),N3=e=>n=>QL(e,n),Ff=(e,n)=>{e.selection.setRng(n),en(e,e.selection.getRng())},B3=(e,n,o)=>H.some(X0(e,n,o)),aB=(e,n,o,r,c,u)=>{const f=n===hc.Forwards,b=gu(e.getBody()),y=qe(Ly,f?b.next:b.prev),E=f?r:c;if(!o.collapsed){const te=uu(o);if(u(te))return jd(n,e,te,n===hc.Backwards,!1);if(x3(e)){const j=o.cloneRange();return j.collapse(n===hc.Backwards),H.from(j)}}const N=$h(n,e.getBody(),o);if(E(N))return RC(e,N.getNode(!f));let R=y(N);const L=bh(o);if(R)R=No(f,R);else return L?H.some(o):H.none();if(E(R))return jd(n,e,R.getNode(!f),f,!1);const Q=y(R);return Q&&E(Q)&&Fh(R,Q)?jd(n,e,Q.getNode(!f),f,!1):L?B3(e,R.toRange(),!1):H.none()},Zl=(e,n,o,r,c,u)=>{const f=$h(n,e.getBody(),o),b=Yt(f.getClientRects()),y=n===W1.Down,E=e.getBody();if(!b)return H.none();if(x3(e)){const ee=y?Ee.fromRangeEnd(o):Ee.fromRangeStart(o);return(y?YL:KL)(E,ee).orThunk(()=>H.from(ee)).map(pe=>pe.toRange())}const R=(y?t7:e7)(E,rB(1),f),L=Rt(R,N3(1)),Q=b.left,te=nB(L,Q);if(te&&u(te.node)){const ee=Math.abs(Q-te.left),ye=Math.abs(Q-te.right);return jd(n,e,te.node,ee<ye,!1)}let j;if(r(f)?j=f.getNode():c(f)?j=f.getNode(!0):j=uu(o),j){const ee=n7(n,E,rB(1),j);let ye=nB(Rt(ee,N3(1)),Q);if(ye||(ye=Yt(Rt(ee,N3(0))),ye))return B3(e,ye.position.toRange(),!1)}return L.length===0?P3(e,y).filter(y?c:r).map(ee=>X0(e,ee.toRange(),!1)):H.none()},P3=(e,n)=>{const o=e.selection.getRng(),r=n?Ee.fromRangeEnd(o):Ee.fromRangeStart(o),c=Gk(r.container(),e.getBody());if(n){const u=qd(c,r);return Ds(u.positions)}else{const u=V1(c,r);return Xo(u.positions)}},FT=(e,n,o)=>P3(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),PC=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},IT=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},cB=(e,n,o)=>WN(n,o).map(r=>(PC(e,r),o)),o7=(e,n,o)=>{const r=Ee.fromRangeStart(e);if(e.collapsed)return r;{const c=Ee.fromRangeEnd(e);return o?hu(n,c).getOr(c):bl(n,r).getOr(r)}},s7=(e,n,o)=>{const r=e.getBody(),c=o7(e.selection.getRng(),r,o),u=qe(T1,e);return WL(o,u,r,c).bind(b=>cB(e,n,b))},r7=(e,n,o)=>{const r=Ge(Ec(ae.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Rt(r,e),u=Rt(o,e);xe(Uc(c,u),qe(IT,!1)),xe(Uc(u,c),qe(IT,!0))},a7=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ee.fromRangeStart(e.selection.getRng());Ee.isTextPosition(r)&&!Jc(r)&&(PC(e,NS(o,r)),n.set(null))}},iB=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Rt(r,e);xe(c,u=>{const f=Ee.fromRangeStart(n.selection.getRng());Pf(e,n.getBody(),f).bind(b=>cB(n,o,b))})}},lB=(e,n,o)=>Rh(e)?s7(e,n,o).isSome():!1,uB=(e,n,o)=>Rh(n)?jL(e,n):!1,$C=e=>{const n=Wa(null),o=qe(T1,e);return e.on("NodeChange",r=>{Rh(e)&&(r7(o,e.dom,r.parents),a7(e,n),iB(o,e,n,r.parents))}),n},Kg=qe(uB,!0),Z1=qe(uB,!1),j1=(e,n,o)=>{if(Rh(e)){const r=P3(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?Ee.fromRangeEnd(c):Ee.fromRangeStart(c)});return Pf(qe(T1,e),e.getBody(),r).exists(c=>{const u=ev(c);return WN(o,u).exists(f=>(PC(e,f),!0))})}else return!1},$3=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},F3=e=>ta(Qi(e),bf(e),(n,o)=>{const r=No(!0,n),c=No(!1,o);return bl(e,r).forall(u=>u.isEqual(c))}).getOr(!0),I3=(e,n)=>o=>WN(n,o).map(r=>()=>PC(e,r)),dB=(e,n,o,r)=>{const c=e.getBody(),u=qe(T1,e);e.undoManager.ignore(()=>{e.selection.setRng($3(o,r)),U2(e),Pf(u,c,Ee.fromRangeStart(e.selection.getRng())).map(PT).bind(I3(e,n)).each(un)}),e.nodeChanged()},mB=(e,n)=>{const o=Ga(n,e);return o||e},fB=(e,n,o,r)=>{const c=mB(e.getBody(),r.container()),u=qe(T1,e),f=Pf(u,c,r);return f.bind(y=>o?y.fold(rt(H.some(PT(y))),H.none,rt(H.some(ev(y))),H.none):y.fold(H.none,rt(H.some(ev(y))),H.none,rt(H.some(PT(y))))).map(I3(e,n)).getOrThunk(()=>{const y=s0(o,c,r),E=y.bind(N=>Pf(u,c,N));return ta(f,E,()=>Bm(u,c,r).bind(N=>F3(N)?H.some(()=>{S1(e,o,ae.fromDom(N))}):H.none())).getOrThunk(()=>E.bind(()=>y.map(N=>()=>{o?dB(e,n,r,N):dB(e,n,N,r)})))})},L3=(e,n,o)=>{if(e.selection.isCollapsed()&&Rh(e)){const r=Ee.fromRangeStart(e.selection.getRng());return fB(e,n,o,r)}return H.none()},c7=e=>Fc(e)>1,gB=(e,n)=>{const o=ae.fromDom(e.getBody()),r=ae.fromDom(e.selection.getStart()),c=zg(r,o);return Fs(c,n).fold(rt(c),u=>c.slice(0,u))},i7=e=>gB(e,n=>Ac(n)||c7(n)),l7=e=>gB(e,Ac),hB=(e,n)=>{const o=qe(sC,e);return Ir(n,r=>o(r)?[r.dom]:[])},H3=e=>{const n=l7(e);return hB(e,n)},pB=(e,n,o,r)=>{const c=hB(n,r);if(c.length===0)S1(n,e,o);else{const u=OR(o.dom,c);n.selection.setRng(u.toRange())}},BW=(e,n)=>{const o=i7(e);return Ds(o).bind(r=>{const c=Ee.fromRangeStart(e.selection.getRng());return ID(n,c,r.dom)&&!vA(r)?H.some(()=>pB(n,e,r,o)):H.none()})},PW=(e,n)=>{const o=n.parentElement;return Pr(n)&&!G(o)&&e.dom.isEmpty(o)},$W=e=>vA(ae.fromDom(e)),bB=(e,n)=>{const o=e.selection.getStart(),r=PW(e,o)||$W(o)?OR(o,n):Vd(e,n);e.selection.setRng(r.toRange())},FW=(e,n)=>{const o=Uc(n,H3(e));o.length>0&&bB(e,o)},u7=e=>ft(e.startContainer),d7=e=>e.startOffset===0&&u7(e),m7=(e,n)=>{const o=n.startContainer.parentElement;return!G(o)&&sC(e,ae.fromDom(o))},IW=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!G(n)&&!G(o)&&n.isEqualNode(o)},f7=e=>{const n=e.endContainer;return e.endOffset===(ft(n)?n.length:n.childNodes.length)},jl=e=>IW(e)&&f7(e),vB=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),FC=e=>jl(e)||vB(e),g7=e=>{const n=e.selection.getRng();return d7(n)&&m7(e,n)&&FC(n)},yB=e=>{if(g7(e)){const n=H3(e);return H.some(()=>{U2(e),FW(e,n)})}else return H.none()},LT=(e,n)=>e.selection.isCollapsed()?BW(e,n):yB(e),V3=e=>TR(e,n=>Yr(n.dom),Ac),h7=e=>V3(ae.fromDom(e.selection.getStart())),p7=e=>{const n=e.selection.getRng();return n.collapsed&&(u7(n)||e.dom.isEmpty(n.startContainer))&&!h7(e)},tv=e=>(p7(e)&&bB(e,[]),!0),z3=(e,n,o)=>Ze(o)?H.some(()=>{e._selectionOverrides.hideFakeCaret(),S1(e,n,ae.fromDom(o))}):H.none(),b7=(e,n)=>{const o=n?H2:ro,r=n?hc.Forwards:hc.Backwards,c=$h(r,e.getBody(),e.selection.getRng());return o(c)?z3(e,n,c.getNode(!n)):H.from(No(n,c)).filter(u=>o(u)&&Fh(c,u)).bind(u=>z3(e,n,u.getNode(!n)))},U3=(e,n)=>{const o=e.selection.getNode();return ia(o)?z3(e,n,o):H.none()},W3=(e,n)=>e.selection.isCollapsed()?b7(e,n):U3(e,n),LW=e=>k(e,n=>Bs(n.dom)||Ts(n.dom)).exists(n=>Bs(n.dom)),Z3=e=>Lr(e??"").getOr(0),CB=(e,n)=>{const o=e||bb(n)?"margin":"padding",r=ll(n,"direction")==="rtl"?"-right":"-left";return o+r},j3=(e,n,o,r,c,u)=>{const f=CB(o,ae.fromDom(u)),b=Z3(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},wB=(e,n)=>Ss(n,o=>{const r=CB(wg(e),o),c=Ic(o,r).map(Z3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),v7=e=>{const n=xB(e);return!e.mode.isReadOnly()&&(n.length>1||wB(e,n))},SB=e=>si(e)||ru(e),y7=e=>di(e).exists(SB),xB=e=>Rt(pd(e.selection.getSelectedBlocks()),n=>!SB(n)&&!y7(n)&&LW(n)),HT=(e,n)=>{var o,r;const{dom:c}=e,u=fS(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=Z3(u),y=wg(e);xe(xB(e),E=>{j3(c,n,y,b,f,E.dom)})},VT=e=>HT(e,"indent"),G3=e=>HT(e,"outdent"),q3=e=>{if(e.selection.isCollapsed()&&v7(e)){const n=e.dom,o=e.selection.getRng(),r=Ee.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&w1(ae.fromDom(c),r))return H.some(()=>G3(e))}return H.none()},TB=(e,n,o)=>aa([q3,RT,w3,(r,c)=>L3(r,n,c),DC,X2,k3,W3,C3,LT],r=>r(e,o)).filter(r=>e.selection.isEditable()),C7=(e,n)=>{TB(e,n,!1).fold(()=>{U2(e),W2(e)},un)},K3=(e,n)=>{TB(e,n,!0).fold(()=>$D(e),un)},w7=(e,n)=>{e.addCommand("delete",()=>{C7(e,n)}),e.addCommand("forwardDelete",()=>{K3(e,n)})},EB=5,S7=400,kB=e=>e.touches===void 0||e.touches.length!==1?H.none():H.some(e.touches[0]),Kd=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>EB||r>EB},_B=e=>{const n=tc(),o=Wa(!1),r=vi(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},S7);e.on("touchstart",c=>{kB(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),kB(c).each(u=>{n.on(f=>{Kd(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},zT=(e,n)=>hn(e,n.nodeName),HW=(e,n)=>ft(n)?!0:Ut(n)?!zT(e.getBlockElements(),n)&&!vl(n)&&!fm(e,n):!1,VW=(e,n,o)=>wt(mD(ae.fromDom(o),ae.fromDom(n)),r=>zT(e,r.dom)),zW=(e,n)=>{if(ft(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||zT(e,n.nextSibling)))return!0}return!1},x7=e=>e.dom.create($l(e),Wp(e)),T7=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,E=!1;const N=$l(e);if(!u||!Ut(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,N.toLowerCase())||VW(c,f,u))return;const L=o.getRng(),{startContainer:Q,startOffset:te,endContainer:j,endOffset:ee}=L,ye=Kh(e);let pe=f.firstChild;for(;pe;)if(Ut(pe)&&Td(r,pe),HW(r,pe)){if(zW(c,pe)){y=pe,pe=pe.nextSibling,n.remove(y);continue}b||(b=x7(e),f.insertBefore(b,pe),E=!0),y=pe,pe=pe.nextSibling,b.appendChild(y)}else b=null,pe=pe.nextSibling;E&&ye&&(L.setStart(Q,te),L.setEnd(j,ee),o.setRng(L),e.nodeChanged())},IC=(e,n,o)=>{const r=ae.fromDom(x7(e)),c=S();Ur(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},E7=e=>{e.on("NodeChange",qe(T7,e))},UT=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,AB=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},OB=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],AB(e,c,Ry(e)));o.content=c}},DB=e=>{const n="contenteditable",o=" "+et.trim($k(e))+" ",r=" "+et.trim(Ry(e))+" ",c=UT(o),u=UT(r),f=Fk(e);f.length>0&&e.on("BeforeSetContent",b=>{OB(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const E=b[y];c(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const E=b[y];!c(E)&&!u(E)||(f.length>0&&E.attr("data-mce-content")?(E.name="#text",E.type=3,E.raw=!0,E.value=E.attr("data-mce-content")):E.attr(n,null))}})},k7=e=>Et(ae.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),RB=(e,n)=>{n.hasAttribute("data-mce-caret")&&(wd(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},_7=(e,n)=>{const o=k7(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),RB(e,o);return}pr(o)&&(RB(e,o),e.undoManager.add())}},A7=e=>{e.on("keyup compositionstart",qe(_7,e))},LC=Ts,O7=(e,n,o)=>aB(n,e,o,C1,Xh,LC),D7=(e,n,o)=>Zl(n,e,o,u=>C1(u)||$_(u),u=>Xh(u)||WF(u),LC),R7=e=>{const n=e.dom.create($l(e));return n.innerHTML='<br data-mce-bogus="1">',n},WT=(e,n,o)=>{const r=gu(e.getBody()),c=qe(Ly,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Ee.fromRangeStart(o))){const b=ae.fromDom(R7(e));n===1?Ru(ae.fromDom(u),b):xs(ae.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},M7=(e,n)=>{const o=n?hc.Forwards:hc.Backwards,r=e.selection.getRng();return O7(o,e,r).orThunk(()=>(WT(e,o,r),H.none()))},N7=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return D7(o,e,r).orThunk(()=>(WT(e,o,r),H.none()))},Y3=(e,n)=>M7(e,n).exists(o=>(Ff(e,o),!0)),MB=(e,n)=>N7(e,n).exists(o=>(Ff(e,o),!0)),NB=(e,n)=>FT(e,n,n?Xh:C1),ZT=(e,n)=>S3(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Ff(e,o),!0)),B7=e=>Ue(["figcaption"],As(e)),P7=(e,n)=>{const o=qe(ys,n);return k(ae.fromDom(e.container()),Ac,o).filter(B7)},$7=(e,n,o)=>n?D3(e.dom,o):z1(e.dom,o),X3=(e,n)=>{const o=ae.fromDom(e.getBody()),r=Ee.fromRangeStart(e.selection.getRng());return P7(r,o).exists(()=>{if($7(o,n,r)){const u=IC(e,o,n?Ur:gd);return e.selection.setRng(u),!0}else return!1})},BB=(e,n)=>e.selection.isCollapsed()?X3(e,n):!1,J3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},F7=e=>Ge(e,n=>({...J3,...n})),I7=e=>Ge(e,n=>({...J3,...n})),PB=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,L7=(e,n)=>Ir(F7(e),o=>PB(o,n)?[o]:[]),H7=(e,n)=>Ir(I7(e),o=>PB(o,n)?[o]:[]),go=(e,...n)=>()=>e.apply(null,n),Ea=(e,n)=>Wo(L7(e,n),o=>o.action()),$B=(e,n)=>aa(H7(e,n),o=>o.action()),FB=(e,n)=>{const o=n?hc.Forwards:hc.Backwards,r=e.selection.getRng();return aB(e,o,r,H2,ro,ia).exists(c=>(Ff(e,c),!0))},IB=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Zl(e,o,r,H2,ro,ia).exists(c=>(Ff(e,c),!0))},Q3=(e,n)=>FT(e,n,n?ro:H2),jT=mu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Yd={...jT,none:e=>jT.none(e)},e4=(e,n)=>t4(e,n,Qe),t4=(e,n,o)=>Ir(za(e),r=>$c(r,n)?o(r)?[r]:[]:t4(r,n,o)),n4=(e,n,o=Se)=>{if(o(n))return H.none();if(Ue(e,As(n)))return H.some(n);const r=c=>$c(c,"table")||o(c);return ge(n,e.join(","),r)},o4=(e,n)=>n4(["td","th"],e,n),s4=e=>e4(e,"th,td"),r4=(e,n)=>En(e,"table",n),nv=(e,n,o,r,c=Qe)=>{const u=r===1;if(!u&&o<=0)return Yd.first(e[0]);if(u&&o>=e.length-1)return Yd.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?Yd.middle(n,b):nv(e,n,f,r,c)}},HC=(e,n)=>r4(e,n).bind(o=>{const r=s4(o);return Fs(r,u=>ys(e,u)).map(u=>({index:u,all:r}))}),VC=(e,n,o)=>HC(e,o).fold(()=>Yd.none(e),c=>nv(c.all,e,c.index,1,n)),zC=(e,n,o)=>HC(e,o).fold(()=>Yd.none(),c=>nv(c.all,e,c.index,-1,n)),If=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),UC=(e,n)=>Ir(n,o=>{const r=If(hg(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),LB=(e,n,o)=>$n(e,(r,c)=>r.fold(()=>H.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return H.some(b<f?c:u)}),H.none()),a4=(e,n,o,r,c)=>{const u=Ec(ae.fromDom(o),"td,th,caption").map(b=>b.dom),f=Rt(UC(e,u),b=>n(b,c));return LB(f,r,c).map(b=>b.cell)},z7=e=>e.bottom,HB=e=>e.top,U7=(e,n)=>e.y<n,W7=(e,n)=>e.y>n,VB=qe(a4,z7,U7),Z7=qe(a4,HB,W7),j7=(e,n)=>Xo(n.getClientRects()).bind(o=>VB(e,o.left,o.top)).bind(o=>BC(JN(o),n)),G7=(e,n)=>Ds(n.getClientRects()).bind(o=>Z7(e,o.left,o.top)).bind(o=>BC(qL(o),n)),q7=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),K7=e=>e.breakType===$f.Wrap&&e.positions.length===0,Y7=e=>e.breakType===$f.Br&&e.positions.length===1,zB=(e,n,o)=>{const r=e(n,o);return K7(r)||!Pr(o.getNode())&&Y7(r)?!q7(e,n,r):r.breakAt.isNone()},X7=qe(zB,V1),J7=qe(zB,qd),Q7=(e,n,o)=>{const r=Ee.fromRangeStart(n);return Md(!e,o).exists(c=>c.isEqual(r))},eH=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return Jb()&&Q7(n,c,o)?(jd(u,e,o,!n,!1).each(f=>{Ff(e,f)}),!0):!1},tH=(e,n,o)=>j7(n,o).orThunk(()=>Xo(o.getClientRects()).bind(r=>NC(O3(e,Ee.before(n)),r.left))).getOr(Ee.before(n)),nH=(e,n,o)=>G7(n,o).orThunk(()=>Xo(o.getClientRects()).bind(r=>NC(Tu(e,Ee.after(n)),r.left))).getOr(Ee.after(n)),c4=(e,n)=>{const o=n.getNode(e);return Wr(o)?H.some(o):H.none()},UB=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Ru:xs,c=IC(n,ae.fromDom(o),r);Ff(n,c)})},i4=(e,n,o)=>{const r=c4(!!n,o),c=n===!1;r.fold(()=>Ff(e,o.toRange()),u=>Md(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Ff(e,o.toRange()),f=>UB(n,e,u)))},oH=(e,n,o,r)=>{const c=e.selection.getRng(),u=Ee.fromRangeStart(c),f=e.getBody();if(!n&&X7(r,u)){const b=tH(f,o,u);return i4(e,n,b),!0}else if(n&&J7(r,u)){const b=nH(f,o,u);return i4(e,n,b),!0}else return!1},WB=(e,n,o)=>H.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>H.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),ZB=(e,n)=>WB(e,n,eH),jB=(e,n)=>WB(e,n,oH),GB=e=>{const n=Uh.exact(e,0,e,0);return S_(n)},qB=(e,n,o)=>o.fold(H.none,H.none,(r,c)=>TF(c).map(u=>GB(u)),r=>(e.execCommand("mceTableInsertRowAfter"),l4(e,n,r))),l4=(e,n,o)=>qB(e,n,VC(o,To)),sH=(e,n,o)=>qB(e,n,zC(o,To)),u4=(e,n)=>{const o=["table","li","dl"],r=ae.fromDom(e.getBody()),c=b=>{const y=As(b);return ys(b,r)||Ue(o,y)},u=e.selection.getRng(),f=ae.fromDom(n?u.endContainer:u.startContainer);return o4(f,c).map(b=>(r4(b,c).each(N=>{e.model.table.clearSelectedCells(N.dom)}),e.selection.collapse(!n),(n?l4:sH)(e,c,b).each(N=>{e.selection.setRng(N)}),!0)).getOr(!1)},KB=(e,n,o)=>{const r=es.os.isMacOS()||es.os.isiOS();Ea([{keyCode:rn.RIGHT,action:go(Y3,e,!0)},{keyCode:rn.LEFT,action:go(Y3,e,!1)},{keyCode:rn.UP,action:go(MB,e,!1)},{keyCode:rn.DOWN,action:go(MB,e,!0)},...r?[{keyCode:rn.UP,action:go(ZT,e,!1),metaKey:!0,shiftKey:!0},{keyCode:rn.DOWN,action:go(ZT,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:rn.RIGHT,action:go(ZB,e,!0)},{keyCode:rn.LEFT,action:go(ZB,e,!1)},{keyCode:rn.UP,action:go(jB,e,!1)},{keyCode:rn.DOWN,action:go(jB,e,!0)},{keyCode:rn.RIGHT,action:go(FB,e,!0)},{keyCode:rn.LEFT,action:go(FB,e,!1)},{keyCode:rn.UP,action:go(IB,e,!1)},{keyCode:rn.DOWN,action:go(IB,e,!0)},{keyCode:rn.RIGHT,action:go(lB,e,n,!0)},{keyCode:rn.LEFT,action:go(lB,e,n,!1)},{keyCode:rn.RIGHT,ctrlKey:!r,altKey:r,action:go(Kg,e,n)},{keyCode:rn.LEFT,ctrlKey:!r,altKey:r,action:go(Z1,e,n)},{keyCode:rn.UP,action:go(BB,e,!1)},{keyCode:rn.DOWN,action:go(BB,e,!0)}],o).each(c=>{o.preventDefault()})},rH=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||KB(e,n,o)})},Vm=(e,n)=>({container:e,offset:n}),GT=br.DOM,WC=e=>n=>e===n?-1:0,aH=e=>n=>e.isBlock(n)||Ue(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",d4=(e,n,o)=>{if(ft(e)&&n>=0)return H.some(Vm(e,n));{const r=kr(GT);return H.from(r.backwards(e,n,WC(e),o)).map(c=>Vm(c.container,c.container.data.length))}},YB=(e,n,o)=>{if(ft(e)&&n>=e.length)return H.some(Vm(e,n));{const r=kr(GT);return H.from(r.forwards(e,n,WC(e),o)).map(c=>Vm(c.container,0))}},m4=(e,n,o)=>{if(!ft(e))return H.none();const r=e.data;if(n>=0&&n<=r.length)return H.some(Vm(e,n));{const c=kr(GT);return H.from(c.backwards(e,n,WC(e),o)).bind(u=>{const f=u.container.data;return m4(u.container,n+f.length,o)})}},XB=(e,n,o)=>{if(!ft(e))return H.none();const r=e.data;if(n<=r.length)return H.some(Vm(e,n));{const c=kr(GT);return H.from(c.forwards(e,n,WC(e),o)).bind(u=>XB(u.container,n-r.length,o))}},qT=(e,n,o,r,c)=>{const u=kr(e,aH(e));return H.from(u.backwards(n,o,r,c))},cH=e=>e.collapsed&&ft(e.startContainer),JB=e=>dt(e.toString().replace(/\u00A0/g," ")),QB=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,KT=(e,n)=>e.substring(n.length),eP=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(QB(u))return H.none();if(c===u&&Sn(e,o,r,n))break}return H.some(r)},iH=(e,n,o,r=0)=>{if(!cH(n))return H.none();const c={text:"",offset:0},u=(b,y,E)=>(c.text=E+c.text,c.offset+=y,eP(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return qT(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return H.none();const E=JB(y);return E.lastIndexOf(o)!==0||KT(E,o).length<r?H.none():H.some({text:KT(E,o),range:y,trigger:o})})},tP=(e,n,o,r=0)=>AF(ae.fromDom(n.startContainer)).fold(()=>iH(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=JB(u);return H.some({range:u,text:KT(f,o),trigger:o})}),lH=e=>e.nodeType===Zc,uH=e=>e.nodeType===Sc,nP=e=>{if(lH(e))return Vm(e,e.data.length);{const n=e.childNodes;return n.length>0?nP(n[n.length-1]):Vm(e,n.length)}},oP=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?oP(o[n],0):o.length>0&&uH(e)&&o.length===n?nP(o[o.length-1]):Vm(e,n)},dH=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return qT(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!QB(u)}).isSome()},mH=e=>n=>{const o=oP(n.startContainer,n.startOffset);return!dH(e,o)},UW=(e,n,o)=>aa(o.triggers,r=>tP(e,n,r)),fH=(e,n)=>{const o=n(),r=e.selection.getRng();return UW(e.dom,r,o).bind(c=>ZC(e,n,c))},ZC=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=Rt(u.lookupByTrigger(o.trigger),N=>o.text.length>=N.minChars&&N.matches.getOrThunk(()=>mH(e.dom))(o.range,b,o.text));if(y.length===0)return H.none();const E=Promise.all(Ge(y,N=>N.fetch(o.text,N.maxResults,r).then(L=>({matchText:o.text,items:L,columns:N.columns,onAction:N.onAction,highlightOn:N.highlightOn}))));return H.some({lookupData:E,context:o})};var Xd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Xd||(Xd={}));const YT=(e,n,o)=>e.stype===Xd.Error?n(e.serror):o(e.svalue),gH=e=>{const n=[],o=[];return xe(e,r=>{YT(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},sP=(e,n)=>e.stype===Xd.Error?{stype:Xd.Error,serror:n(e.serror)}:e,rP=(e,n)=>e.stype===Xd.Value?{stype:Xd.Value,svalue:n(e.svalue)}:e,hH=(e,n)=>e.stype===Xd.Value?n(e.svalue):e,pH=(e,n)=>e.stype===Xd.Error?n(e.serror):e,aP=e=>({stype:Xd.Value,svalue:e}),f4=e=>({stype:Xd.Error,serror:e}),ci={fromResult:e=>e.fold(f4,aP),toResult:e=>YT(e,Kr.error,Kr.value),svalue:aP,partition:gH,serror:f4,bind:hH,bindError:pH,map:rP,mapError:sP,fold:YT},g4=e=>ot(e)&&Rs(e).length>100?" removed due to size":JSON.stringify(e,null,2),bH=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:rt("... (only showing first ten failures)")}]):e;return Ge(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},jC=(e,n)=>ci.serror([{path:e,getErrorInfo:n}]),vH=(e,n,o)=>jC(e,()=>'Could not find valid *required* value for "'+n+'" in '+g4(o)),yH=(e,n)=>jC(e,()=>'Choice schema did not contain choice key: "'+n+'"'),CH=(e,n,o)=>jC(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+g4(n)),wH=(e,n)=>jC(e,rt(n)),SH=(e,n,o,r)=>Jo(o,r).fold(()=>CH(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),Rc=(e,n)=>({extract:(c,u)=>Jo(u,e).fold(()=>yH(c,e),b=>SH(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Rs(n)}),Lf=(e,n)=>n,xH=(e,n)=>zt(e)&&zt(n)?XT(e,n):n,TH=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)hn(c,u)&&(o[u]=e(o[u],c[u]))}return o},XT=TH(xH),EH=TH(Lf),iP=()=>({tag:"required",process:{}}),kH=e=>({tag:"defaultedThunk",process:e}),h4=e=>kH(rt(e)),ov=()=>({tag:"option",process:{}}),ZW=(e,n)=>e.length>0?ci.svalue(XT(n,EH.apply(void 0,e))):ci.svalue(n),lP=e=>A(ci.serror,ba)(e),_H={consolidateObj:(e,n)=>{const o=ci.partition(e);return o.errors.length>0?lP(o.errors):ZW(o.values,n)},consolidateArr:e=>{const n=ci.partition(e);return n.errors.length>0?lP(n.errors):ci.svalue(n.values)}},AH=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),uP=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),dP=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},GC=e=>{const n=(r,c)=>ci.bindError(e(c),u=>wH(r,u)),o=rt("val");return{extract:n,toString:o}},mP=GC(ci.svalue),OH=(e,n,o,r)=>Jo(n,o).fold(()=>vH(e,o,n),r),fP=(e,n,o,r)=>{const c=Jo(e,n).getOrThunk(()=>o(e));return r(c)},DH=(e,n,o)=>o(Jo(e,n)),gP=(e,n,o,r)=>{const c=Jo(e,n).map(u=>u===!0?o(e):u);return r(c)},hP=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>ci.svalue(H.none()),y=>{const E=c.extract(n.concat([r]),y);return ci.map(E,H.some)});switch(e.tag){case"required":return OH(n,o,r,u);case"defaultedThunk":return fP(o,r,e.process,u);case"option":return DH(o,r,f);case"defaultedOptionThunk":return gP(o,r,e.process,f);case"mergeWithThunk":return fP(o,r,rt({}),b=>{const y=XT(e.process(o),b);return u(y)})}},p4=(e,n,o)=>{const r={},c=[];for(const u of o)dP(u,(f,b,y,E)=>{const N=hP(y,e,n,f,E);ci.fold(N,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(n)});return c.length>0?ci.serror(c):ci.svalue(r)},qC=e=>({extract:(r,c)=>p4(r,c,e),toString:()=>`obj{
`+Ge(e,c=>dP(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),JT=e=>({extract:(r,c)=>{const u=Ge(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return _H.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),RH=e=>GC(n=>e(n).fold(ci.serror,ci.svalue)),MH=(e,n,o)=>{const r=n.extract([e],o);return ci.mapError(r,c=>({input:o,errors:c}))},NH=(e,n,o)=>ci.toResult(MH(e,n,o)),BH=e=>`Errors: 
`+bH(e.errors).join(`
`)+`

Input object: `+g4(e.input),QT=(e,n)=>Rc(e,io(n,qC)),pP=rt(mP),eE=(e,n)=>GC(o=>{const r=typeof o;return e(o)?ci.svalue(o):ci.serror(`Expected type: ${n} but got: ${r}`)}),bP=eE(Uo,"number"),tE=eE(K,"string"),b4=eE(ht,"boolean"),v4=eE(he,"function"),KC=AH,vP=uP,PH=e=>RH(n=>Ue(e,n)?Kr.value(n):Kr.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),yP=(e,n)=>KC(e,e,iP(),n),y4=e=>yP(e,tE),nE=e=>yP(e,v4),CP=(e,n)=>KC(e,e,iP(),JT(n)),oE=(e,n)=>KC(e,e,ov(),n),sE=e=>oE(e,tE),$H=e=>oE(e,v4),FH=(e,n)=>KC(e,e,h4(n),pP()),Yg=(e,n,o)=>KC(e,e,h4(n),o),C4=(e,n)=>Yg(e,n,bP),wP=(e,n)=>Yg(e,n,tE),SP=(e,n,o)=>Yg(e,n,PH(o)),w4=(e,n)=>Yg(e,n,b4),xP=(e,n)=>Yg(e,n,v4),GW=(e,n,o)=>Yg(e,n,JT(o)),qW=y4("type"),IH=nE("fetch"),TP=nE("onAction"),LH=xP("onSetup",()=>Zt),HH=sE("text"),KW=sE("icon"),VH=sE("tooltip"),sc=sE("label"),S4=w4("active",!1),Vf=w4("enabled",!0),x4=w4("primary",!1),EP=e=>FH("columns",e),YC=e=>wP("type",e),T4=qC([qW,y4("trigger"),C4("minChars",1),EP(1),C4("maxResults",10),$H("matches"),IH,TP,GW("highlightOn",[],tE)]),E4=e=>NH("Autocompleter",T4,{trigger:e.ch,...e}),rE=[Vf,VH,KW,HH,LH],k4=[S4].concat(rE),zH=[xP("predicate",Se),SP("scope","node",["node","editor"]),SP("position","selection",["node","selection","line"])],UH=rE.concat([YC("contextformbutton"),x4,TP,vP("original",ko)]),WH=k4.concat([YC("contextformbutton"),x4,TP,vP("original",ko)]),ZH=rE.concat([YC("contextformbutton")]),jH=k4.concat([YC("contextformtogglebutton")]),kP=QT("type",{contextformbutton:UH,contextformtogglebutton:WH});qC([YC("contextform"),xP("initValue",rt("")),sc,CP("commands",kP),oE("launch",QT("type",{contextformbutton:ZH,contextformtogglebutton:jH}))].concat(zH));const GH=e=>{const n=e.ui.registry.getAll().popups,o=io(n,f=>E4(f).fold(b=>{throw new Error(BH(b))},ko)),r=Oa(La(o,f=>f.trigger)),c=Dr(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Rt(c,b=>b.trigger===f)}},qH=(e,n)=>{const o=vi(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},KH=e=>{const n=tc(),o=Wa(!1),r=n.isSet,c=()=>{r()&&(b8(e),d_(e),o.set(!1),n.clear())},u=E=>{r()||(t3(e,E.range),n.set({trigger:E.trigger,matchLength:E.text.length}))},f=fn(()=>GH(e)),b=E=>n.get().map(N=>tP(e.dom,e.selection.getRng(),N.trigger).bind(R=>ZC(e,f,R,E))).getOrThunk(()=>fH(e,f)),y=E=>{b(E).fold(c,N=>{u(N.context),N.lookupData.then(R=>{n.get().map(L=>{const Q=N.context;L.trigger===Q.trigger&&(Q.text.length-L.matchLength>=10?c():(n.set({...L,matchLength:Q.text.length}),o.get()?cx(e,{lookupData:R}):(o.set(!0),u_(e,{lookupData:R}))))})})})};e.addCommand("mceAutocompleterReload",(E,N)=>{const R=ot(N)?N.fetchOptions:{};y(R)}),e.addCommand("mceAutocompleterClose",c),qH(e,{cancelIfNecessary:c,load:y})},_P=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Zt,inputType:o},f=Ch(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},_4=_P("input"),aE=_P("beforeinput"),AP=(e,n,o)=>{const r=o.keyCode===rn.BACKSPACE?"deleteContentBackward":"deleteContentForward";$B([{keyCode:rn.BACKSPACE,action:go(q3,e)},{keyCode:rn.BACKSPACE,action:go(RT,e,!1)},{keyCode:rn.DELETE,action:go(RT,e,!0)},{keyCode:rn.BACKSPACE,action:go(w3,e,!1)},{keyCode:rn.DELETE,action:go(w3,e,!0)},{keyCode:rn.BACKSPACE,action:go(L3,e,n,!1)},{keyCode:rn.DELETE,action:go(L3,e,n,!0)},{keyCode:rn.BACKSPACE,action:go(X2,e,!1)},{keyCode:rn.DELETE,action:go(X2,e,!0)},{keyCode:rn.BACKSPACE,action:go(k3,e,!1)},{keyCode:rn.DELETE,action:go(k3,e,!0)},{keyCode:rn.BACKSPACE,action:go(W3,e,!1)},{keyCode:rn.DELETE,action:go(W3,e,!0)},{keyCode:rn.BACKSPACE,action:go(C3,e,!1)},{keyCode:rn.DELETE,action:go(C3,e,!0)},{keyCode:rn.BACKSPACE,action:go(DC,e,!1)},{keyCode:rn.DELETE,action:go(DC,e,!0)},{keyCode:rn.BACKSPACE,action:go(LT,e,!1)},{keyCode:rn.DELETE,action:go(LT,e,!0)}],o).filter(c=>e.selection.isEditable()).each(c=>{o.preventDefault(),aE(e,r).isDefaultPrevented()||(c(),_4(e,r))})},YH=(e,n,o)=>{const r=Do(),c=r.os,u=r.browser,f=c.isMacOS()?[{keyCode:rn.BACKSPACE,altKey:!0,action:go(tv,e)},{keyCode:rn.DELETE,altKey:!0,action:go(tv,e)}]:[{keyCode:rn.BACKSPACE,ctrlKey:!0,action:go(tv,e)},{keyCode:rn.DELETE,ctrlKey:!0,action:go(tv,e)}];c.isMacOS()&&o&&f.push({keyCode:u.isFirefox()?224:91,action:go(tv,e)}),Ea([{keyCode:rn.BACKSPACE,action:go(T3,e)},{keyCode:rn.DELETE,action:go(T3,e)},...f],n)},XH=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===rn.BACKSPACE,r.isDefaultPrevented()||AP(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||YH(e,r,o),o=!1})},YW=e=>{for(;e;){if(Ut(e)||ft(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},G1=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=YW(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Vs),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Ba(n,n);let f=n,b;for(;b=u.current();){if(ft(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else Pr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),en(e,c)},cE=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},A4=e=>H.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),JH=e=>A4(e).fold(rt(""),n=>n.nodeName.toUpperCase()),OP=e=>A4(e).filter(n=>ru(ae.fromDom(n))).isSome(),QH=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,DP=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},RP=(e,n)=>{const o=e==null?void 0:e.parentNode;return Ze(o)&&o.nodeName===n},MP=e=>Ze(e)&&/^(OL|UL|LI)$/.test(e.nodeName),XW=e=>Ze(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Ti=e=>MP(e)&&MP(e.parentNode),iE=e=>{const n=e.parentNode;return XW(n)?n:e},lE=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ut(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},e9=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Ti(o)&&(c="LI");let y=n(c);if(lE(o,r,!0)&&lE(o,r,!1))if(RP(o,"LI")){const E=iE(o);u.insertAfter(y,E),DP(o)?u.remove(E):u.remove(o)}else u.replace(y,o);else if(lE(o,r,!0))RP(o,"LI")?(u.insertAfter(y,iE(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(lE(o,r,!1))u.insertAfter(y,iE(o)),u.remove(r);else{o=iE(o);const E=f.cloneRange();E.setStartAfter(r),E.setEndAfter(o);const N=E.extractContents();c==="LI"&&QH(N,"LI")?(y=N.firstChild,u.insertAfter(N,o)):(u.insertAfter(N,o),u.insertAfter(y,o)),u.remove(r)}G1(e,y)},t9=e=>{xe(dh(ae.fromDom(e),xc),n=>{const o=n.dom;o.nodeValue=dt(o.data)})},n9=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},o9=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),O4=e=>{e.innerHTML='<br data-mce-bogus="1">'},sv=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,D4=(e,n)=>Ze(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",s9=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Ut(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||o9(e,u))&&e.remove(u)},XC=(e,n,o)=>ft(n)?e?o===1&&n.data.charAt(o-1)===ie?0:o:o===n.data.length-1&&n.data.charAt(o)===ie?n.data.length:o:o,R4=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,XC(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,XC(!1,e.endContainer,e.endOffset)),n},r9=e=>{let n=e;do ft(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},JW=(e,n,o)=>{const r=e.dom;H.from(o.style).map(r.parseStyle).each(y=>{const N={...Di(ae.fromDom(n)),...y};r.setStyles(n,N)});const c=H.from(o.class).map(y=>y.split(/\s+/)),u=H.from(n.className).map(y=>Rt(y.split(/\s+/),E=>E!==""));ta(c,u,(y,E)=>{const N=Rt(E,L=>!Ue(y,L)),R=[...y,...N];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],b=rs(o,(y,E)=>!Ue(f,E));r.setAttribs(n,b)},uE=(e,n)=>{if($l(e).toLowerCase()===n.tagName.toLowerCase()){const r=Wp(e);JW(e,n,r)}},a9=(e,n,o,r,c)=>{var u,f;const b=e.dom,y=(u=cE(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!D4(b,E)){if(E=E||y,!E.hasChildNodes()){const Q=b.create(n);return uE(e,Q),E.appendChild(Q),o.setStart(Q,0),o.setEnd(Q,0),Q}let N=r;for(;N&&N.parentNode!==E;)N=N.parentNode;let R;for(;N&&!b.isBlock(N);)R=N,N=N.previousSibling;const L=(f=R==null?void 0:R.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&L&&e.schema.isValidChild(L,n.toLowerCase())){const Q=R.parentNode,te=b.create(n);for(uE(e,te),Q.insertBefore(te,R),N=R;N&&!b.isBlock(N);){const j=N.nextSibling;te.appendChild(N),N=j}o.setStart(r,c),o.setEnd(r,c)}}return r},c9=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ut(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},QW=(e,n)=>{const o=Uu(e);return Pt(n)?!1:K(o)?Ue(et.explode(o),n.nodeName.toLowerCase()):o},NP={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,E=y.getNonEmptyElements(),N=e.selection.getRng(),R=$l(e),L=Ot=>{let xt=o;const Fe=y.getTextInlineElements();let $e;Ot||c==="TABLE"||c==="HR"?$e=b.create(Ot||R):$e=pe.cloneNode(!1);let Gt=$e;if(Ad(e)===!1)b.setAttrib($e,"style",null),b.setAttrib($e,"class",null);else do if(Fe[xt.nodeName]){if(Yr(xt)||vl(xt))continue;const gn=xt.cloneNode(!1);b.setAttrib(gn,"id",""),$e.hasChildNodes()?(gn.appendChild($e.firstChild),$e.appendChild(gn)):(Gt=gn,$e.appendChild(gn))}while((xt=xt.parentNode)&&xt!==ye);return uE(e,$e),O4(Gt),$e},Q=Ot=>{const xt=XC(Ot,o,r);if(ft(o)&&(Ot?xt>0:xt<o.data.length))return!1;if(o.parentNode===pe&&f&&!Ot||Ot&&Ut(o)&&o===pe.firstChild)return!0;if(sv(o,"TABLE")||sv(o,"HR"))return f&&!Ot||!f&&Ot;const Fe=new Ba(o,pe);ft(o)&&(Ot&&xt===0?Fe.prev():!Ot&&xt===o.data.length&&Fe.next());let $e;for(;$e=Fe.current();){if(Ut($e)){if(!$e.getAttribute("data-mce-bogus")){const Gt=$e.nodeName.toLowerCase();if(E[Gt]&&Gt!=="br")return!1}}else if(ft($e)&&!$i($e.data))return!1;Ot?Fe.prev():Fe.next()}return!0},te=()=>{let Ot;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&we!=="HGROUP"?Ot=L(R):Ot=L(),QW(e,u)&&D4(b,u)&&b.isEmpty(pe)?Ot=b.split(u,pe):b.insertAfter(Ot,pe),G1(e,Ot),Ot};Mm(b,N).each(Ot=>{N.setStart(Ot.startContainer,Ot.startOffset),N.setEnd(Ot.endContainer,Ot.endOffset)}),o=N.startContainer,r=N.startOffset;const j=!!(n&&n.shiftKey),ee=!!(n&&n.ctrlKey);Ut(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&ft(o)?r=o.data.length:r=0);const ye=cE(b,o);if(!ye||n9(e,o))return;j||(o=a9(e,R,N,o,r));let pe=b.getParent(o,b.isBlock)||b.getRoot();u=Ze(pe==null?void 0:pe.parentNode)?b.getParent(pe.parentNode,b.isBlock):null,c=pe?pe.nodeName.toUpperCase():"";const we=u?u.nodeName.toUpperCase():"";if(we==="LI"&&!ee){const Ot=u;pe=Ot,u=Ot.parentNode,c=we}if(/^(LI|DT|DD)$/.test(c)&&Ut(u)&&b.isEmpty(pe)){e9(e,L,u,pe,R);return}if(pe===e.getBody()||!D4(b,pe))return;const De=pe.parentNode;let Xe;if(no(pe))Xe=wd(pe),b.isEmpty(pe)&&O4(pe),uE(e,Xe),G1(e,Xe);else if(Q(!1))Xe=te();else if(Q(!0)&&De)Xe=De.insertBefore(L(),pe),G1(e,sv(pe,"HR")?Xe:pe);else{const Ot=R4(N).cloneRange();Ot.setEndAfter(pe);const xt=Ot.extractContents();t9(xt),r9(xt),Xe=xt.firstChild,b.insertAfter(xt,pe),s9(b,E,Xe),c9(b,pe),b.isEmpty(pe)&&O4(pe),Xe.normalize(),b.isEmpty(Xe)?(b.remove(Xe),te()):(uE(e,Xe),G1(e,Xe))}b.setAttrib(Xe,"id",""),e.dispatch("NewBlock",{newBlock:Xe})},fakeEventName:"insertParagraph"},i9=(e,n,o)=>{const r=new Ba(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||ft(c)&&c.length>0)return!0;return!1},Xg=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),en(e,r)},l9=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Mm(r,c).each(Q=>{c.setStart(Q.startContainer,Q.startOffset),c.setEnd(Q.endContainer,Q.endOffset)});let b=c.startOffset,y=c.startContainer;if(Ut(y)&&y.hasChildNodes()){const Q=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,Q&&ft(y)?b=y.data.length:b=0}let E=r.getParent(y,r.isBlock);const N=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,R=N?N.nodeName.toUpperCase():"",L=!!(n&&n.ctrlKey);R==="LI"&&!L&&(E=N),ft(y)&&b>=y.data.length&&(i9(e.schema,y,E||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),ir(r,c,u),Xg(e,u,f),e.undoManager.add()},BP=(e,n)=>{const o=ae.fromTag("br");xs(ae.fromDom(n),o),e.undoManager.add()},u9=(e,n)=>{m9(e.getBody(),n)||Ru(ae.fromDom(n),ae.fromTag("br"));const o=ae.fromTag("br");Ru(ae.fromDom(n),o),Xg(e,o.dom,!1),e.undoManager.add()},d9=e=>Pr(e.getNode()),m9=(e,n)=>d9(Ee.after(n))?!0:bl(e,Ee.after(n)).map(o=>Pr(o.getNode())).getOr(!1),PP=e=>e&&e.nodeName==="A"&&"href"in e,f9=e=>e.fold(Se,PP,PP,Se),g9=e=>{const n=qe(T1,e),o=Ee.fromRangeStart(e.selection.getRng());return Pf(n,e.getBody(),o).filter(f9)},h9=(e,n)=>{n.fold(Zt,qe(BP,e),qe(u9,e),Zt)},JC={insert:(e,n)=>{const o=g9(e);o.isSome()?o.each(qe(h9,e)):l9(e,n)},fakeEventName:"insertLineBreak"},FP=(e,n)=>A4(e).filter(o=>n.length>0&&$c(ae.fromDom(o),n)).isSome(),b9=e=>FP(e,Cy(e)),v9=e=>FP(e,Zp(e)),Xu=mu.generate([{br:[]},{block:[]},{none:[]}]),y9=(e,n)=>v9(e),M4=e=>(n,o)=>OP(n)===e,IP=(e,n)=>(o,r)=>JH(o)===e.toUpperCase()===n,LP=e=>{const n=cE(e.dom,e.selection.getStart());return Pt(n)},rv=e=>IP("pre",e),C9=()=>IP("summary",!0),dE=e=>(n,o)=>Pl(n)===e,N4=(e,n)=>b9(e),mE=(e,n)=>n,w9=e=>{const n=$l(e),o=cE(e.dom,e.selection.getStart());return Ze(o)&&e.schema.isValidChild(o.nodeName,n)},Gl=(e,n)=>(o,r)=>$n(e,(u,f)=>u&&f(o,r),!0)?H.some(n):H.none(),S9=(e,n)=>FL([Gl([y9],Xu.none()),Gl([rv(!0),LP],Xu.none()),Gl([C9()],Xu.br()),Gl([rv(!0),dE(!1),mE],Xu.br()),Gl([rv(!0),dE(!1)],Xu.block()),Gl([rv(!0),dE(!0),mE],Xu.block()),Gl([rv(!0),dE(!0)],Xu.br()),Gl([M4(!0),mE],Xu.br()),Gl([M4(!0)],Xu.block()),Gl([N4],Xu.br()),Gl([mE],Xu.br()),Gl([w9],Xu.block())],[e,!!(n&&n.shiftKey)]).getOr(Xu.none()),av=(e,n,o)=>{n.selection.isCollapsed()||G_(n),!(Ze(o)&&aE(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Ze(o)&&_4(n,e.fakeEventName))},fE=(e,n)=>{const o=()=>av(JC,e,n),r=()=>av(NP,e,n),c=S9(e,n);switch(fu(e)){case"linebreak":c.fold(o,o,Zt);break;case"block":c.fold(r,r,Zt);break;case"invert":c.fold(r,o,Zt);break;default:c.fold(o,r,Zt);break}},HP=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),Z6(e.undoManager),e.undoManager.transact(()=>{fE(e,n)}))},x9=e=>{e.on("keydown",n=>{n.keyCode===rn.ENTER&&HP(e,n)})},tZ=(e,n,o)=>{const r=es.os.isMacOS()||es.os.isiOS();Ea([{keyCode:rn.END,action:go(NB,e,!0)},{keyCode:rn.HOME,action:go(NB,e,!1)},...r?[]:[{keyCode:rn.HOME,action:go(ZT,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:rn.END,action:go(ZT,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:rn.END,action:go(Q3,e,!0)},{keyCode:rn.HOME,action:go(Q3,e,!1)},{keyCode:rn.END,action:go(j1,e,!0,n)},{keyCode:rn.HOME,action:go(j1,e,!1,n)}],o).each(c=>{o.preventDefault()})},up=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||tZ(e,n,o)})},T9=e=>{e.on("input",n=>{n.isComposing||tI(e)})},E9=Do(),k9=(e,n,o)=>{Ea([{keyCode:rn.PAGE_UP,action:go(j1,e,!1,n)},{keyCode:rn.PAGE_DOWN,action:go(j1,e,!0,n)}],o)},QC=e=>e.stopImmediatePropagation(),B4=e=>e.keyCode===rn.PAGE_UP||e.keyCode===rn.PAGE_DOWN,P4=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",QC,!0):!o&&e.get()&&n.off("NodeChange",QC),e.set(o)},_9=(e,n)=>{if(E9.os.isMacOS())return;const o=Wa(!1);e.on("keydown",r=>{B4(r)&&P4(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||k9(e,n,r),B4(r)&&o.get()&&(P4(o,e,!1),e.nodeChanged())})},$4=(e,n)=>{const o=n.container(),r=n.offset();return ft(o)?(o.insertData(r,e),H.some(Ee(o,r+e.length))):e1(n).map(c=>{const u=ae.fromText(e);return n.isAtEnd()?Ru(c,u):xs(c,u),Ee(u.dom,e.length)})},A9=qe($4,Vs),O9=qe($4," "),D9=e=>n=>n.fold(o=>hu(e.dom,Ee.before(o)),o=>Qi(o),o=>bf(o),o=>bl(e.dom,Ee.after(o))),VP=(e,n)=>o=>YF(e,o)?A9(n):O9(n),F4=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),R9=e=>{const n=Ee.fromRangeStart(e.selection.getRng()),o=ae.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=qe(T1,e),c=Ee.fromRangeStart(e.selection.getRng());return Pf(r,e.getBody(),c).bind(D9(o)).map(u=>()=>VP(o,n)(u).each(F4(e)))}else return H.none()},I4=(e,n)=>{$B([{keyCode:rn.SPACEBAR,action:go(R9,e)}],n).each(o=>{n.preventDefault(),aE(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),_4(e,"insertText",{data:" "}))})},zP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||I4(e,n)})},gE=e=>OS(e)?[{keyCode:rn.TAB,action:go(u4,e,!0)},{keyCode:rn.TAB,shiftKey:!0,action:go(u4,e,!1)}]:[],UP=(e,n)=>{Ea([...gE(e)],n).each(o=>{n.preventDefault()})},WP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||UP(e,n)})},M9=e=>{if(e.addShortcut("Meta+P","","mcePrint"),KH(e),Of(e))return Wa(null);{const n=$C(e);return A7(e),rH(e,n),XH(e,n),x9(e),zP(e),T9(e),WP(e),up(e,n),_9(e,n),n}};class N9{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!N2(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&e2(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&e2(n)&&(n.selection.getNode().nodeName==="IMG"?zl.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!_k(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=is(r.dom.getParents(n,Qe,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const ew="x-tinymce/html",tw=rt(ew),L4="<!-- "+ew+" -->",B9=e=>L4+e,ZP=e=>e.replace(L4,""),jP=e=>e.indexOf(L4)!==-1,P9=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),$9=(e,n)=>{let o="<"+e;const r=La(n,(c,u)=>u+'="'+cf.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},F9=(e,n,o)=>{const r=e.split(/\n\n/),c=$9(n,o),u="</"+n+">",f=Ge(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:Ge(f,b).join("")},GP="%MCEPASTEBIN%",qP=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},GP);es.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},I9=(e,n)=>{const o=e.dom;if(hE(e)){let r;const c=n.get();for(;r=hE(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},hE=e=>e.dom.get("mcepastebin"),L9=e=>Ze(e)&&e.id==="mcepastebin",H9=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=Rt(e.getBody().childNodes,L9);xe(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},KP=e=>e===GP,V9=e=>{const n=Wa(null);return{create:()=>qP(e,n),remove:()=>I9(e,n),getEl:()=>hE(e),getHtml:()=>H9(e),getLastRng:n.get}},YP=(e,n)=>(et.each(n,o=>{ct(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),cv=e=>{const n=gl(),o=sp({},n);let r="";const c=n.getVoidElements(),u=et.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const E=y.name,N=y;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(c[E]&&(r+=" "),u[E]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let R=y.firstChild;if(R)do b(R);while(R=R.next)}f[E]&&N.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=YP(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},XP=e=>(e=YP(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Vs],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),z9=e=>{let n=0;return()=>e+n++},JP=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return et.hasOwn(o,n)?"image/"+o[n]:"image/"+n},U9=(e,n)=>{const o=sp({sanitize:Yb(e)},e.schema);o.addNodeFilter("meta",c=>{et.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Yh({validate:!0},e.schema).serialize(r)},QP=(e,n)=>({content:e,cancelled:n}),W9=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=m_(e,r,o);return QP(c.node.innerHTML,c.isDefaultPrevented())},e$=(e,n,o)=>{const r=x2(e,n,o),c=U9(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?W9(e,c,o):QP(c,r.isDefaultPrevented())},Z9=(e,n,o)=>e$(e,n,o),H4=(e,n)=>(e.insertContent(n,{merge:TS(e),paste:!0}),!0),t$=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),pE=(e,n)=>t$(n)&&wt(My(e),o=>us(n.toLowerCase(),`.${o.toLowerCase()}`)),j9=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),G9=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),q9=(e,n,o)=>!e.selection.isCollapsed()&&t$(n)?G9(e,n,o):!1,K9=(e,n,o)=>pE(e,n)?j9(e,n,o):!1,Y9=(e,n)=>{et.each([q9,K9,H4],o=>!o(e,n,H4))},X9=(e,n,o)=>{o||!Wu(e)?H4(e,n):Y9(e,n)},J9=z9("mceclip"),n$=(e,n,o,r)=>{const c=Z9(e,n,o);c.cancelled||X9(e,c.content,r)},bE=(e,n,o)=>{const r=o||jP(n);n$(e,ZP(n),r,!1)},V4=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=rg(o,Dy(e)),c=F9(r,$l(e),Wp(e));n$(e,c,!1,!0)},o$=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},dp=(e,n)=>n in e&&e[n].length>0,s$=e=>dp(e,"text/html")||dp(e,"text/plain"),yr=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Ze(o)?e.dom.encode(o[1]):void 0},Q9=(e,n,o,r)=>{const c=J9(),u=Fl(e)&&Ze(o.name),f=u?yr(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},r$=(e,n)=>{V0(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),E=y??Q9(e,b,f,u);bE(e,`<img src="${E.blobUri()}">`,!1)})},eV=e=>e.type==="paste",z4=e=>Promise.all(Ge(e,n=>nM(n).then(o=>({file:n,uri:o})))),a$=e=>{const n=My(e);return o=>xn(o.type,"image/")&&wt(n,r=>JP(r)===o.type)},c$=(e,n)=>{const o=n.items?Ir(dr(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?dr(n.files):[];return Rt(o.length>0?o:r,a$(e))},i$=(e,n,o)=>{const r=eV(n)?n.clipboardData:n.dataTransfer;if(Tg(e)&&r){const c=c$(e,r);if(c.length>0)return n.preventDefault(),z4(c).then(u=>{o&&e.selection.setRng(o),xe(u,f=>{r$(e,f)})}),!0}return!1},l$=e=>{var n,o;return es.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},tV=e=>rn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,U4=(e,n,o,r)=>{let c=XP(o);const u=dp(n,tw())||jP(o),f=!u&&P9(c),b=t$(c);(KP(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(dp(n,"text/plain")&&f?c=n["text/plain"]:c=cv(c)),!KP(c)&&(r?V4(e,c):bE(e,c,u))},u$=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{tV(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||l$(u))return;const f=o.get()==="text"||r;r=!1;const b=o$(u.clipboardData);!s$(b)&&i$(e,u,c())||(dp(b,"text/html")?(u.preventDefault(),U4(e,b,b["text/html"],f)):dp(b,"text/plain")&&dp(b,"text/uri-list")?(u.preventDefault(),U4(e,b,b["text/plain"],f)):(n.create(),zl.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),U4(e,b,y,f)},0)))})},nV=e=>{const n=c=>xn(c,"webkit-fake-url"),o=c=>xn(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!Tg(e)&&r(f))for(const b of c){const y=b.attr("src");K(y)&&!b.attr("data-mce-object")&&y!==es.transparentSrc&&(n(y)||!ES(e)&&o(y))&&b.remove()}})},oV=(e,n,o)=>{u$(e,n,o),nV(e)},vE=(e,n)=>{n.get()==="text"?(n.set("html"),xf(e,!1)):(n.set("text"),xf(e,!0)),e.focus()},nw=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{vE(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&bE(e,r.html,r.internal),r.text&&V4(e,r.text)})},d$=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(tw(),n),!0}catch{return!1}else return!1},Eu=(e,n,o,r)=>{d$(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},m$=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),zl.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},q1=e=>({html:B9(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),ow=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),f$=e=>!e.selection.isCollapsed()||ow(e),sV=e=>n=>{!n.isDefaultPrevented()&&f$(e)&&Eu(n,q1(e),m$(e),()=>{if(es.browser.isChromium()||es.browser.isFirefox()){const o=e.selection.getRng();zl.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},iv=e=>n=>{!n.isDefaultPrevented()&&f$(e)&&Eu(n,q1(e),m$(e),Zt)},rV=e=>{e.on("cut",sV(e)),e.on("copy",iv(e))},yE=(e,n)=>{var o,r;return Zh.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},W4=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},Z4=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},aV=e=>wt(e.files,n=>/^image\//.test(n.type)),cV=(e,n,o,r)=>{const c=e.getParent(o,u=>fm(n,u));if(c&&hn(r,"text/html")){const u=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!G(u.querySelector(c.nodeName.toLowerCase()))}else return!1},g$=(e,n)=>{Gb(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Tg(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&aV(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=yE(e,o);if(Pt(r))return;const c=o$(o.dataTransfer),u=dp(c,tw());if((!s$(c)||W4(c))&&i$(e,o,r))return;const f=c[tw()],b=f||c["text/html"]||c["text/plain"],y=cV(e.dom,e.schema,r.startContainer,c);n.get()&&!y||b&&(o.preventDefault(),zl.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),Z4(e,r);const E=XP(b);c["text/html"]?bE(e,E,u):V4(e,E)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Tg(e)&&!n.get()&&(o.preventDefault(),Z4(e,yE(e,o))),o.type==="dragend"&&n.set(!1)})},h$=e=>{const n=c=>u=>{c(e,u)},o=qb(e);he(o)&&e.on("PastePreProcess",n(o));const r=xS(e);he(r)&&e.on("PastePostProcess",n(r))},iV=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},lV=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,p$=e=>et.trim(e).replace(lV,Ih).toLowerCase(),b$=(e,n,o)=>{const r=Dd(e);if(o||r==="all"||!Kb(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,E,N)=>{const R=u.parseStyle(u.decode(E)),L={};for(let te=0;te<c.length;te++){const j=R[c[te]];let ee=j,ye=u.getStyle(f,c[te],!0);/color/.test(c[te])&&(ee=p$(ee),ye=p$(ye)),ye!==ee&&(L[c[te]]=j)}const Q=u.serializeStyle(L,"span");return Q?y+' style="'+Q+'"'+N:y+N})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},uV=e=>{(es.browser.isChromium()||es.browser.isSafari())&&iV(e,b$)},v$=e=>{const n=Wa(!1),o=Wa(gf(e)?"text":"html"),r=V9(e);uV(e),nw(e,o),h$(e),e.on("PreInit",()=>{rV(e),g$(e,n),oV(e,r,o)})},dV=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},mV=e=>{e.parser.addNodeFilter("details",n=>{xe(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{xe(n,o=>{const r=o.attr("data-mce-open");o.attr("open",K(r)?r:null),o.attr("data-mce-open",null)})})},y$=e=>{dV(e),mV(e)},fV=Pr,C$=ft,gV=e=>Ts(e.dom),w$=e=>Bs(e.dom),S$=e=>n=>ys(ae.fromDom(e),n),hV=(e,n)=>k(ae.fromDom(e),o=>w$(o)||Ac(o),S$(n)).getOr(ae.fromDom(n)).dom,x$=(e,n)=>k(ae.fromDom(e),gV,S$(n)),T$=(e,n,o)=>{const r=new Ba(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!fV(f);f=c())bi(f)&&(u=f);return u},pV=(e,n)=>{const r=Ee.fromRangeStart(e).getNode(),c=hV(r,n),u=T$(r,c,!1),f=T$(r,c,!0),b=document.createRange();return x$(u,c).fold(()=>{C$(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),x$(f,c).fold(()=>{C$(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},bV=e=>{const n=pV(e.selection.getRng(),e.getBody());e.selection.setRng(Q2(n))},vV=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),bV(e))})};var K1;(function(e){e.Before="before",e.After="after"})(K1||(K1={}));const yV=(e,n)=>Math.abs(e.left-n),CV=(e,n)=>Math.abs(e.right-n),wV=(e,n)=>e>=n.top&&e<=n.bottom,SV=(e,n)=>e.top<n.bottom&&e.bottom>n.top,xV=(e,n)=>{const o=Yw(e,n)/Math.min(e.height,n.height);return SV(e,n)&&o>.5},E$=(e,n)=>{const o=Rt(e,r=>wV(n,r));return ty(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=eo(e,f=>xV(f,r));return[c,u]})},TV=(e,n)=>({node:e.node,position:yV(e,n)<CV(e,n)?K1.Before:K1.After}),EV=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),j4=(e,n,o)=>{const r=N=>bi(N.node)?H.some(N):Ut(N.node)?j4(dr(N.node.childNodes),n,o):H.none(),c=(N,R)=>{if(N.length>=2){const L=r(N[0]).getOr(N[0]),Q=r(N[1]).getOr(N[1]);if(Math.abs(R(L,n,o)-R(Q,n,o))<2){if(ft(L.node))return H.some(L);if(ft(Q.node))return H.some(Q)}}return H.none()},u=(N,R)=>{const L=ls(N,(Q,te)=>R(Q,n,o)-R(te,n,o));return c(L,R).orThunk(()=>aa(L,r))},[f,b]=E$(U1(e),o),{pass:y,fail:E}=eo(b,N=>N.top<o);return u(f,EV).orThunk(()=>u(E,Kw)).orThunk(()=>u(y,Kw))},kV=(e,n,o,r)=>{const c=(u,f)=>{const b=E=>Ut(E)&&E.classList.contains("mce-drag-container"),y=Rt(u.dom.childNodes,po(b));return f.fold(()=>j4(y,o,r),E=>{const N=Rt(y,R=>R!==E.dom);return j4(N,o,r)}).orThunk(()=>(ys(u,e)?H.none():sm(u)).bind(N=>c(N,H.some(u))))};return c(n,H.none())},_V=(e,n,o)=>{const r=ae.fromDom(e),c=ti(r),f=ae.fromPoint(c,n,o).filter(b=>Ai(r,b)).getOr(r);return kV(r,f,n,o)},k$=(e,n,o)=>_V(e,n,o).filter(r=>Tm(r.node)).map(r=>TV(r,n)),_$=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},CE=e=>e.inline?_$(e.getBody()):{left:0,top:0},A$=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},AV=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},O$=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=_$(e.getContentAreaContainer()),r=AV(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},D$=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),G4=(e,n)=>D$(CE(e),A$(e),O$(e,n)),OV=(e,n,o)=>({...n,dataTransfer:null,type:e,...o}),R$=(e,n)=>{const o=os("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:e,composedPath:o,initEvent:o,preventDefault:Zt,stopImmediatePropagation:Zt,stopPropagation:Zt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:null,...n}},M$=e=>({target:e,srcElement:e}),N$=e=>n=>R$(e,M$(n)),q4=e=>(n,o)=>OV(e,n,M$(o)),B$=q4("dragstart"),DV=q4("drop"),RV=N$("dragend"),P$=q4("dragend"),mp=32,MV=100,wE=8,sw=16,$$=Ts,NV=mk($$,Bs),BV=(e,n,o)=>$$(o)&&o!==n&&e.isEditable(o.parentElement),PV=(e,n,o)=>Pt(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),$V=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},SE=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},F$=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},rw=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},I$=rw("left",-mp),L$=rw("left",mp),H$=rw("top",-mp),FV=rw("top",mp),IV=(e,n,o,r,c,u,f,b,y,E,N,R)=>{let L=0,Q=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(L=n.pageX+o-c),n.pageY+r>u&&(Q=n.pageY+r-u),e.style.width=o-L+"px",e.style.height=r-Q+"px";const te=y.clientHeight,j=y.clientWidth,ee=f+y.getBoundingClientRect().top,ye=b+y.getBoundingClientRect().left;N.on(pe=>{pe.intervalId.clear(),pe.dragging&&R&&(f+wE>=te?pe.intervalId.set(FV(E)):f-wE<=0?pe.intervalId.set(H$(E)):b+wE>=j?pe.intervalId.set(L$(E)):b-wE<=0?pe.intervalId.set(I$(E)):ee+sw>=window.innerHeight?pe.intervalId.set(FV(window)):ee-sw<=0?pe.intervalId.set(H$(window)):ye+sw>=window.innerWidth?pe.intervalId.set(L$(window)):ye-sw<=0&&pe.intervalId.set(I$(window)))})},xE=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},K4=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);xE(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&I(ae.fromDom(o))},TE=e=>e.button===0,LV=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),HV=(e,n)=>o=>{if(TE(o)){const r=Wo(n.dom.getParents(o.target),NV).getOr(null);if(Ze(r)&&BV(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:SE(n,r,r.offsetWidth,r.offsetHeight),intervalId:da(MV)})}}},V$=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),k$(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===K1.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},VV=(e,n)=>{const o=Nl((c,u)=>V$(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",B$(c,u.element)).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=LV(u,G4(n,c));F$(u.ghost,n.getBody()),IV(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Y4=e=>{const n=e.getSel();if(Ze(n)){const r=n.getRangeAt(0).startContainer;return ft(r)?r.parentNode:r}else return null},z$=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(PV(n,Y4(n.selection),r.element)){const u=$V(r.element),f=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();n.dispatch("drop",DV(o,f)).isDefaultPrevented()||n.undoManager.transact(()=>{K4(n.dom,r.element),n.insertContent(n.dom.getOuterHTML(u)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend",P$(o,n.getBody()))}}),X4(e)},U$=(e,n,o)=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){const c=o.fold(()=>RV(r.element),u=>P$(u,r.element));n.dispatch("dragend",c)}}),X4(e)},zV=(e,n)=>o=>U$(e,n,H.some(o)),X4=e=>{e.on(n=>{n.intervalId.clear(),xE(n.ghost)}),e.clear()},UV=e=>{const n=tc(),o=br.DOM,r=document,c=HV(n,e),u=VV(n,e),f=z$(n,e),b=zV(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===rn.ESC&&U$(n,e,H.none())})},nZ=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Ue(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&G0(e,"Dropped file type is not supported"))}},o=c=>{y1(e,c.target)&&n(c)},r=()=>{const c=br.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];xe(y,E=>{c.bind(f,E,o),u.bind(b,E,n)}),e.on("remove",()=>{xe(y,E=>{c.unbind(f,E,o),u.unbind(b,E,n)})})};e.on("init",()=>{zl.setEditorTimeout(e,r,0)})},WV=e=>{UV(e),Ak(e)&&nZ(e)},ZV=e=>{const n=Nl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=X0(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},jV=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(ia(o)){const r=_f(e.getBody(),o),c=Ts(r)?r:o;e.selection.getNode()!==c&&RC(e,c).each(u=>e.selection.setRng(u))}})})},lv=Ts,W$=(e,n)=>_f(e.getBody(),n),Z$=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=Wk(e,r,o.isBlock,()=>Kh(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=xt=>Ze(xt)&&o.hasClass(xt,"mce-offscreen-selection"),E=xt=>xt!==r&&(lv(xt)||ia(xt))&&o.isChildOf(xt,r)&&o.isEditable(xt.parentNode),N=xt=>{xt&&n.setRng(xt)},R=(xt,Fe,$e,Gt=!0)=>e.dispatch("ShowCaret",{target:Fe,direction:xt,before:$e}).isDefaultPrevented()?null:(Gt&&n.scrollIntoView(Fe,xt===-1),c.show($e,Fe)),L=xt=>{xt.hasAttribute("data-mce-caret")&&(wd(xt),n.scrollIntoView(xt))},Q=()=>{e.on("click",Fe=>{o.isEditable(Fe.target)||(Fe.preventDefault(),e.focus())}),e.on("blur NewBlock",De),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Fe=>{const $e=Fe.target,Gt=W$(e,$e);lv(Gt)?(Fe.preventDefault(),RC(e,Gt).each(we)):E($e)&&RC(e,$e).each(we)},!0),e.on("mousedown",Fe=>{const $e=Fe.target;if($e!==r&&$e.nodeName!=="HTML"&&!o.isChildOf($e,r)||!I1(e,Fe.clientX,Fe.clientY))return;De(),Ot();const Gt=W$(e,$e);lv(Gt)?(Fe.preventDefault(),RC(e,Gt).each(we)):k$(r,Fe.clientX,Fe.clientY).each(gn=>{Fe.preventDefault();const On=R(1,gn.node,gn.position===K1.Before,!1);N(On),Ut(Gt)?Gt.focus():e.getBody().focus()})}),e.on("keypress",Fe=>{rn.modifierPressed(Fe)||lv(n.getNode())&&Fe.preventDefault()}),e.on("GetSelectionRange",Fe=>{let $e=Fe.range;if(b){if(!b.parentNode){b=null;return}$e=$e.cloneRange(),$e.selectNode(b),Fe.range=$e}}),e.on("SetSelectionRange",Fe=>{Fe.range=ee(Fe.range);const $e=we(Fe.range,Fe.forward);$e&&(Fe.range=$e)});const xt=Fe=>Ut(Fe)&&Fe.id==="mcepastebin";e.on("AfterSetSelectionRange",Fe=>{const $e=Fe.range,Gt=$e.startContainer.parentElement;!j($e)&&!xt(Gt)&&Ot(),y(Gt)||De()}),WV(e),ZV(e),jV(e)},te=xt=>qo(xt)||um(xt)||Cd(xt),j=xt=>te(xt.startContainer)||te(xt.endContainer),ee=xt=>{const Fe=e.schema.getVoidElements(),$e=o.createRng(),Gt=xt.startContainer,gn=xt.startOffset,On=xt.endContainer,fo=xt.endOffset;return hn(Fe,Gt.nodeName.toLowerCase())?gn===0?$e.setStartBefore(Gt):$e.setStartAfter(Gt):$e.setStart(Gt,gn),hn(Fe,On.nodeName.toLowerCase())?fo===0?$e.setEndBefore(On):$e.setEndAfter(On):$e.setEnd(On,fo),$e},ye=(xt,Fe)=>{const $e=ae.fromDom(e.getBody()),Gt=e.getDoc(),gn=Et($e,"#"+u).getOrThunk(()=>{const Vo=ae.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Gt);return Gr(Vo,"id",u),Ur($e,Vo),Vo}),On=o.createRng();js(gn),Mu(gn,[ae.fromText(Vs,Gt),ae.fromDom(Fe),ae.fromText(Vs,Gt)]),On.setStart(gn.dom.firstChild,1),On.setEnd(gn.dom.lastChild,0),Kf(gn,{top:o.getPos(xt,e.getBody()).y+"px"}),Hn(gn);const fo=n.getSel();return fo&&(fo.removeAllRanges(),fo.addRange(On)),On},pe=xt=>{const Fe=xt.cloneNode(!0),$e=e.dispatch("ObjectSelected",{target:xt,targetClone:Fe});if($e.isDefaultPrevented())return null;const Gt=ye(xt,$e.targetClone),gn=ae.fromDom(xt);return xe(Ec(ae.fromDom(e.getBody()),`*[${f}]`),On=>{ys(gn,On)||Br(On,f)}),o.getAttrib(xt,f)||xt.setAttribute(f,"1"),b=xt,Ot(),Gt},we=(xt,Fe)=>{if(!xt)return null;if(xt.collapsed){if(!j(xt)){const On=Fe?1:-1,fo=$h(On,r,xt),Vo=fo.getNode(!Fe);if(Ze(Vo)){if(Tm(Vo))return R(On,Vo,Fe?!fo.isAtEnd():!1,!1);if(Ps(Vo)&&Ts(Vo.nextSibling)){const nr=o.createRng();return nr.setStart(Vo,0),nr.setEnd(Vo,0),nr}}const Os=fo.getNode(Fe);if(Ze(Os)){if(Tm(Os))return R(On,Os,Fe?!1:!fo.isAtEnd(),!1);if(Ps(Os)&&Ts(Os.previousSibling)){const nr=o.createRng();return nr.setStart(Os,1),nr.setEnd(Os,1),nr}}}return null}let $e=xt.startContainer,Gt=xt.startOffset;const gn=xt.endOffset;if(ft($e)&&Gt===0&&lv($e.parentNode)&&($e=$e.parentNode,Gt=o.nodeIndex($e),$e=$e.parentNode),!Ut($e))return null;if(gn===Gt+1&&$e===xt.endContainer){const On=$e.childNodes[Gt];if(E(On))return pe(On)}return null},De=()=>{b&&b.removeAttribute(f),Et(ae.fromDom(e.getBody()),"#"+u).each(Js),b=null},Xe=()=>{c.destroy(),b=null},Ot=()=>{c.hide()};return Of(e)||Q(),{showCaret:R,showBlockCaretContainer:L,hideFakeCaret:Ot,destroy:Xe}},GV=(e,n)=>{let o=n;for(let r=e.previousSibling;ft(r);r=r.previousSibling)o+=r.data.length;return o},j$=(e,n,o,r,c)=>{if(ft(o)&&(r<0||r>o.data.length))return[];const u=c&&ft(o)?[GV(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},J4=(e,n,o,r,c,u,f=!1)=>{const b=j$(e,n,o,r,f),y=j$(e,n,c,u,f);return{start:b,end:y}},G$=(e,n)=>{const o=n.slice(),r=o.pop();return Uo(r)?$n(o,(u,f)=>u.bind(b=>H.from(b.childNodes[f])),H.some(e)).bind(u=>ft(u)&&(r<0||r>u.data.length)?H.none():H.some({node:u,offset:r})):H.none()},q$=(e,n)=>G$(e,n.start).bind(({node:o,offset:r})=>G$(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),K$=(e,n,o,r=!1)=>J4(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),aw=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),aw(e,r,o)}},EE=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(ft(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),ft(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),aw(e,c,o),c!==u&&aw(e,u,o))},kE=(e,n)=>H.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),Y$=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Ib(r).concat(e.blockPatterns),inlinePatterns:Up(r).concat(e.inlinePatterns)}},_E=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},qV=e=>/^\s[^\s]/.test(e),X$=(e,n,o)=>{YB(n,0,n).each(c=>{const u=c.container;XB(u,o.start.length,n).each(y=>{const E=e.createRng();E.setStart(u,0),E.setEnd(y.container,y.offset),EE(e,E,N=>N===n)});const f=ae.fromDom(u),b=qr(f);qV(b)&&xp(f,b.slice(1))})},KV=(e,n)=>{const o=e.dom,r=n.pattern,c=q$(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return ut(y)&&Xo(y).exists(E=>hn(E,"block"))};return kE(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{X$(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{X$(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},J$=e=>ls(e,(n,o)=>o.start.length-n.start.length),AE=(e,n)=>{const o=J$(e),r=n.replace(Vs," ");return Wo(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},Q$=(e,n,o,r)=>{var c;const u=e.dom,f=$l(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return AE(o.blockPatterns,b).map(y=>et.trim(b).length===y.start.length?[]:[{pattern:y,range:J4(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},e5=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();xe(n,r=>KV(e,r)),e.selection.moveToBookmark(o)},t5=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),OE=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},Q4=(e,n,o)=>{const r=q$(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(t5(e,n+"-end"),f),start:y.insertBefore(t5(e,n+"-start"),b)}},n5=(e,n,o)=>{aw(e,e.get(n.prefix+"-end"),o),aw(e,e.get(n.prefix+"-start"),o)},eO=e=>e.start.length===0,YV=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},DE=(e,n,o,r)=>{const c=n.start;return qT(e,r.container,r.offset,YV(c),o).bind(f=>{var b,y;const E=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(E!==-1&&f.offset>=E+c.length){const R=e.createRng();return R.setStart(f.container,f.offset-c.length),R.setEnd(f.container,f.offset),H.some(R)}else{const R=f.offset-c.length;return m4(f.container,R,o).map(L=>{const Q=e.createRng();return Q.setStart(L.container,L.offset),Q.setEnd(f.container,f.offset),Q}).filter(L=>L.toString()===c).orThunk(()=>DE(e,n,o,Vm(f.container,0)))}})},XV=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),H.some(f)}return d4(o,r,c).bind(f=>DE(e,n,c,f).bind(y=>{var E;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return H.none();if(f.offset===0&&((E=y.endContainer.textContent)===null||E===void 0?void 0:E.length)===y.endOffset)return H.none()}return H.some(y)}))},JV=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return m4(b,y-o.pattern.end.length,n).bind(E=>{const N=J4(c,u,E.container,E.offset,b,y,r);if(eO(f))return H.some({matches:[{pattern:f,startRng:N,endRng:N}],position:E});{const R=RE(e,o.remainingPatterns,E.container,E.offset,n,r),L=R.getOr({matches:[],position:E}),Q=L.position;return XV(c,f,Q.container,Q.offset,n,R.isNone()).map(j=>{const ee=K$(c,u,j,r);return{matches:L.matches.concat([{pattern:f,startRng:ee,endRng:N}]),position:Vm(j.startContainer,j.startOffset)}})}})},RE=(e,n,o,r,c,u)=>{const f=e.dom;return d4(o,r,f.getRoot()).bind(b=>{const y=_E(f,c,o,r);for(let E=0;E<n.length;E++){const N=n[E];if(!us(y,N.end))continue;const R=n.slice();R.splice(E,1);const L=JV(e,c,{pattern:N,remainingPatterns:R,position:b},u);if(L.isNone()&&r>0)return RE(e,n,o,r-1,c,u);if(L.isSome())return L}return H.none()})},o5=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?xe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},QV=(e,n,o,r)=>{const c=OE(e.dom,o);EE(e.dom,c,r),o5(e,n,c)},ez=(e,n,o,r,c)=>{const u=e.dom,f=OE(u,r),b=OE(u,o);EE(u,b,c),EE(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},E=OE(u,y);o5(e,n,E)},s5=(e,n)=>{const o=Jv("mce_textpattern"),r=Tr(n,(c,u)=>{const f=Q4(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Tr(r,(c,u)=>{const f=r.length-c.length-1,b=eO(u.pattern)?u.endMarker:Q4(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},r5=e=>ls(e,(n,o)=>o.end.length-n.end.length),tO=(e,n)=>{const o=Ss(e,r=>wt(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},ME=(e,n,o,r,c,u)=>{const f=RE(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=RE(e,r5(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return tO(f,b)},a5=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=s5(o,n);xe(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;eO(u.pattern)?QV(e,u.pattern,u.endMarker,b):ez(e,u.pattern,u.startMarker,u.endMarker,b),n5(o,u.endMarker,b),n5(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},nO=(e,n)=>{const o=e.selection.getRng();return kE(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=Y$(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=ME(e,r,o.startContainer,u,f,!0),y=Q$(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(la),a5(e,b),e5(e,y);const E=e.selection.getRng(),N=d4(E.startContainer,E.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),N.each(R=>{const L=R.container;L.data.charAt(R.offset-1)===la&&(L.deleteData(R.offset-1,1),aw(e.dom,L.parentNode,Q=>Q===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},tz=(e,n)=>{const o=e.selection.getRng();kE(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=_E(e.dom,r,o.startContainer,c),f=Y$(n,r,u),b=ME(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{a5(e,b)})})},c5=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},i5=(e,n)=>c5(e,n,(o,r)=>o===r.keyCode&&!rn.modifierPressed(r)),nz=(e,n)=>c5(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),oz=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Lb(Bk(e),Pk(e)),c=()=>Ik(e);e.on("keydown",f=>{if(f.keyCode===13&&!rn.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&nO(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&tz(e,f)}};e.on("keyup",f=>{i5(o,f)&&u()}),e.on("keypress",f=>{nz(n,f)&&zl.setEditorTimeout(e,u)})},sz=e=>{oz(e)},rz=e=>{const n=et.each,o=rn.BACKSPACE,r=rn.DELETE,c=e.dom,u=e.selection,f=e.parser,b=es.browser,y=b.isFirefox(),E=b.isChromium()||b.isSafari(),N=es.deviceType.isiPhone()||es.deviceType.isiPad(),R=es.os.isMacOS()||es.os.isiOS(),L=($t,Tn)=>{try{e.getDoc().execCommand($t,!1,String(Tn))}catch{}},Q=$t=>$t.isDefaultPrevented(),te=()=>{const $t=kn=>{const It=c.create("body"),Bo=kn.cloneContents();return It.appendChild(Bo),u.serializer.serialize(It,{format:"html"})},Tn=kn=>{const It=$t(kn),Bo=c.createRng();Bo.selectNode(e.getBody());const Po=$t(Bo);return It===Po};e.on("keydown",kn=>{const It=kn.keyCode;if(!Q(kn)&&(It===r||It===o)&&e.selection.isEditable()){const Bo=e.selection.isCollapsed(),Po=e.getBody();if(Bo&&!c.isEmpty(Po)||!Bo&&!Tn(e.selection.getRng()))return;kn.preventDefault(),e.setContent(""),Po.firstChild&&c.isBlock(Po.firstChild)?e.selection.setCursorLocation(Po.firstChild,0):e.selection.setCursorLocation(Po,0),e.nodeChanged()}})},j=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ee=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",$t=>{let Tn;if($t.target===e.getDoc().documentElement)if(Tn=u.getRng(),e.getBody().focus(),$t.type==="mousedown"){if(qo(Tn.startContainer))return;u.placeCaretAt($t.clientX,$t.clientY)}else u.setRng(Tn)})},ye=()=>{e.on("keydown",$t=>{if(!Q($t)&&$t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Tn=u.getNode(),kn=Tn.previousSibling;if(Tn.nodeName==="HR"){c.remove(Tn),$t.preventDefault();return}kn&&kn.nodeName&&kn.nodeName.toLowerCase()==="hr"&&(c.remove(kn),$t.preventDefault())}}})},pe=()=>{Range.prototype.getClientRects||e.on("mousedown",$t=>{if(!Q($t)&&$t.target.nodeName==="HTML"){const Tn=e.getBody();Tn.blur(),zl.setEditorTimeout(e,()=>{Tn.focus()})}})},we=()=>{const $t=Oy(e);e.on("click",Tn=>{const kn=Tn.target;/^(IMG|HR)$/.test(kn.nodeName)&&c.isEditable(kn.parentNode)&&(Tn.preventDefault(),e.selection.select(kn),e.nodeChanged()),kn.nodeName==="A"&&c.hasClass(kn,$t)&&kn.childNodes.length===0&&c.isEditable(kn.parentNode)&&(Tn.preventDefault(),u.select(kn))})},De=()=>{const $t=()=>{const kn=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const It=u.getStart();It!==e.getBody()&&(c.setAttrib(It,"style",null),n(kn,Bo=>{It.setAttributeNode(Bo.cloneNode(!0))}))}},Tn=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",kn=>{let It;return!Q(kn)&&(kn.keyCode===8||kn.keyCode===46)&&Tn()?(It=$t(),e.getDoc().execCommand("delete",!1),It(),kn.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",kn=>{if(!Q(kn)&&Tn()){const It=$t();zl.setEditorTimeout(e,()=>{It()})}})},Xe=()=>{e.on("keydown",$t=>{if(!Q($t)&&$t.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Tn=u.getNode().previousSibling;if(Tn&&Tn.nodeName&&Tn.nodeName.toLowerCase()==="table")return $t.preventDefault(),!1}return!0})},Ot=()=>{e.on("keydown",$t=>{if(Q($t)||$t.keyCode!==rn.BACKSPACE)return;let Tn=u.getRng();const kn=Tn.startContainer,It=Tn.startOffset,Bo=c.getRoot();let Po=kn;if(!(!Tn.collapsed||It!==0)){for(;Po.parentNode&&Po.parentNode.firstChild===Po&&Po.parentNode!==Bo;)Po=Po.parentNode;Po.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Po),Tn=c.createRng(),Tn.setStart(kn,0),Tn.setEnd(kn,0),u.setRng(Tn))}})},xt=()=>{const $t=()=>{L("StyleWithCSS",!1),L("enableInlineTableEditing",!1),gS(e)||L("enableObjectResizing",!1)};Mh(e)||e.on("BeforeExecCommand mousedown",$t)},Fe=()=>{const $t=()=>{n(c.select("a:not([data-mce-block])"),Tn=>{var kn;let It=Tn.parentNode;const Bo=c.getRoot();if((It==null?void 0:It.lastChild)===Tn){for(;It&&!c.isBlock(It);){if(((kn=It.parentNode)===null||kn===void 0?void 0:kn.lastChild)!==It||It===Bo)return;It=It.parentNode}c.add(It,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Tn=>{(Tn.type==="setcontent"||Tn.command==="mceInsertLink")&&$t()})},$e=()=>{e.on("init",()=>{L("DefaultParagraphSeparator",$l(e))})},Gt=$t=>{const Tn=$t.getBody(),kn=$t.selection.getRng();return kn.startContainer===kn.endContainer&&kn.startContainer===Tn&&kn.startOffset===0&&kn.endOffset===Tn.childNodes.length},gn=()=>{e.on("keyup focusin mouseup",$t=>{!rn.modifierPressed($t)&&!Gt(e)&&u.normalize()},!0)},On=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},fo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Vo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",$t=>{let Tn;$t.target.nodeName==="HTML"&&(Tn=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Tn),e.selection.normalize(),e.nodeChanged())}))},Os=()=>{R&&e.on("keydown",$t=>{rn.metaKeyPressed($t)&&!$t.shiftKey&&($t.keyCode===37||$t.keyCode===39)&&($t.preventDefault(),e.selection.getSel().modify("move",$t.keyCode===37?"backward":"forward","lineboundary"))})},nr=()=>{e.on("click",$t=>{let Tn=$t.target;do if(Tn.tagName==="A"){$t.preventDefault();return}while(Tn=Tn.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},pa=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",$t=>{$t.preventDefault()})})},zc=()=>{f.addNodeFilter("br",$t=>{let Tn=$t.length;for(;Tn--;)$t[Tn].attr("class")==="Apple-interchange-newline"&&$t[Tn].remove()})},yc=Zt,Ct=()=>{if(!y||e.removed)return!1;const $t=e.selection.getSel();return!$t||!$t.rangeCount||$t.rangeCount===0},dn=()=>{E&&(ee(),we(),pa(),j(),N&&(fo(),Vo(),nr())),y&&(pe(),xt(),On(),Os())},cs=()=>{Ot(),te(),es.windowsPhone||gn(),E&&(ee(),we(),$e(),pa(),Xe(),zc(),N?(fo(),Vo(),nr()):j()),y&&(ye(),pe(),De(),xt(),Fe(),On(),Os(),Xe())};return Of(e)?dn():cs(),{refreshContentEditable:yc,isHidden:Ct}},oO=br.DOM,az=(e,n)=>{const o=ae.fromDom(e.getBody()),r=rm(qi(o)),c=ae.fromTag("style");Gr(c,"type","text/css"),Ur(c,ae.fromText(n)),Ur(r,c),e.on("remove",()=>{Js(c)})},cz=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,NE=e=>rs(e,n=>Vn(n)===!1),l5=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return NE({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:cz(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},BE=e=>{const n=e.options.get;return NE({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},iz=e=>{const n=e.options.get;return{...l5(e),...BE(e),...NE({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},lz=e=>{const n=sp(l5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),kS(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new yl("br",1))}}),n},uz=e=>{const n=Mk(e);n&&zl.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},dz=e=>{const n=e.dom.getRoot();!e.inline&&(!e2(e)||e.selection.getStart(!0)===n)&&Qi(n).each(o=>{const r=o.getNode(),c=Wr(r)?Qi(r).getOr(o):o;e.selection.setRng(c.toRange())})},mz=e=>{e.bindPendingEventDelegates(),e.initialized=!0,er(e),e.focus(!0),dz(e),e.nodeChanged({initial:!0});const n=SS(e);he(n)&&n.call(e,e),uz(e)},u5=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,PE=(e,n,o)=>{const r=[u5(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},d5=e=>{const n=u5(e),o=Sy(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";et.each(e.contentStyles,E=>{y+=E+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(PE(e,r,o)).then(u).catch(u),b=Sk(e);return b&&az(e,b),f},fz=e=>{const n=e.getDoc(),o=e.getBody();g2(e),Nk(e)||(n.body.spellcheck=!1,oO.setAttrib(o,"spellcheck","false")),e.quirks=rz(e),h2(e);const r=xk(e);r!==void 0&&(o.dir=r);const c=Nh(e);c&&e.on("BeforeSetContent",u=>{et.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},gz=e=>{Of(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},sO=e=>{e.removed!==!0&&(gz(e),mz(e))},m5=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(oO.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Mh(e),e.readonly||(e.inline&&oO.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=i3(e),e.schema=gl(BE(e)),e.dom=br(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:mS(e),referrerPolicy:Dh(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=lz(e),e.serializer=s3(iz(e),e),e.selection=Gg(e.dom,e.getWin(),e.serializer,e),e.annotator=f1(e),e.formatter=AC(e),e.undoManager=m3(e),e._nodeChangeDispatcher=new N9(e),e._selectionOverrides=Z$(e),_B(e),y$(e),DB(e),Of(e)||(vV(e),sz(e));const c=M9(e);w7(e,c),E7(e),oL(e),v$(e);const u=n8(e);fz(e),u.fold(()=>{d5(e).then(()=>sO(e))},f=>{e.setProgressState(!0),d5(e).then(()=>{f().then(b=>{e.setProgressState(!1),sO(e),Ud(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),sO(e),Ud(e)})})})},hz=Qe,pz=(e,n,o)=>Yf(e,n,hz,o),rO=br.DOM,bz=(e,n,o,r)=>{const c=ae.fromTag("iframe");return r.each(u=>Gr(c,"tabindex",u)),lc(c,o),lc(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Au(c,"tox-edit-area__iframe"),c},f5=e=>{let n=bk(e)+"<html><head>";fc(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=vk(e),r=lS(e),c=e.translate(wS(e));return uS(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+uS(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},vz=(e,n)=>{const o=e.translate("Rich Text Area"),r=ei(ae.fromDom(e.getElement()),"tabindex").bind(Lr),c=bz(e.id,o,yt(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=f5(e),rO.add(n.iframeContainer,c)},g5=e=>{const n=e.iframeElement,o=pz(ae.fromDom(n),"load",()=>{o.unbind(),e.contentDocument=n.contentDocument,m5(e)});if(es.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close()}else n.srcdoc=e.iframeHTML},yz=(e,n)=>{vz(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=rO.isHidden(n.editorContainer)),e.getElement().style.display="none",rO.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,g5(e)},h5=br.DOM,p5=(e,n,o)=>{const r=Wd.get(o),c=Wd.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=et.trim(o),r&&et.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,he(u.init)&&(u.init(e,c),n.push(o))}catch(u){wN(e,o,u)}}},cw=e=>e.replace(/^\-/,""),Cz=e=>{const n=[];xe(Ay(e),o=>{p5(e,n,cw(o))})},b5=e=>{const n=et.trim(Ub(e)),o=e.ui.registry.getAll().icons,r={...vT.get("default").icons,...vT.get(n).icons};bt(r,(c,u)=>{hn(o,u)||e.ui.registry.addIcon(u,c)})},wz=e=>{const n=Od(e);if(K(n)){const o=Mf.get(n);e.theme=o(e,Mf.urls[n])||{},he(e.theme.init)&&e.theme.init(e,Mf.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},Sz=e=>{const n=Il(e),o=j0.get(n);e.model=o(e,j0.urls[n])},xz=e=>{const n=e.theme.renderUI;return n?n():cO(e)},Tz=e=>{const n=e.getElement(),r=Od(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},aO=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),Ez=e=>{const n=h5.create("div");return h5.insertAfter(n,e),aO(n,n)},cO=e=>{const n=e.getElement();return e.inline?aO(null):Ez(n)},kz=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,K(Od(e))?xz(e):he(Od(e))?Tz(e):cO(e)},_z=(e,n)=>{const o={show:H.from(n.show).getOr(Zt),hide:H.from(n.hide).getOr(Zt),isEnabled:H.from(n.isEnabled).getOr(Qe),setEnabled:r=>{e.mode.isReadOnly()||H.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},Az=async e=>{e.dispatch("ScriptsLoaded"),b5(e),wz(e),Sz(e),Cz(e);const n=await kz(e);_z(e,H.from(n.api).getOr({})),e.editorContainer=n.editorContainer,W8(e),e.inline?m5(e):yz(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Y1=br.DOM,v5=e=>e.charAt(0)==="-",Oz=(e,n)=>{const o=gc(n),r=wk(n);if(!Hu.hasCode(o)&&o!=="en"){const c=Rn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{yN(n,c,o)})}},Dz=(e,n)=>{const o=Od(e);if(K(o)&&!v5(o)&&!hn(Mf.urls,o)){const r=jb(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Mf.load(o,c).catch(()=>{xT(e,c,o)})}},Rz=(e,n)=>{const o=Il(e);if(o!=="plugin"&&!hn(j0.urls,o)){const r=Qs(e),c=K(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;j0.load(o,c).catch(()=>{CN(e,c,o)})}},Mz=e=>H.from(Wb(e)).filter(Rn).map(n=>({url:n,name:H.none()})),iO=(e,n,o)=>H.from(n).filter(r=>Rn(r)&&!vT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:H.some(r)})),lO=(e,n,o)=>{const r=iO(n,"default",o),c=Mz(n).orThunk(()=>iO(n,Ub(n),""));xe(gr([r,c]),u=>{e.add(u.url).catch(()=>{vN(n,u.url,u.name.getOrUndefined())})})},y5=(e,n)=>{const o=(r,c)=>{Wd.load(r,c).catch(()=>{bN(e,c,r)})};bt(Sg(e),(r,c)=>{o(c,r),e.options.set("plugins",Ay(e).concat(c))}),xe(Ay(e),r=>{r=et.trim(r),r&&!Wd.urls[r]&&!v5(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},C5=e=>{const n=Od(e);return!K(n)||Ze(Mf.get(n))},Nz=e=>{const n=Il(e);return Ze(j0.get(n))},Bz=(e,n)=>{const o=vm.ScriptLoader,r=()=>{!e.removed&&C5(e)&&Nz(e)&&Az(e)};Dz(e,n),Rz(e,n),Oz(o,e),lO(o,e,n),y5(e,n),o.loadQueue().then(r,r)},Pz=(e,n)=>_w.forElement(e,{contentCssCors:_y(n),referrerPolicy:Dh(n)}),w5=e=>{const n=e.id;Hu.setCode(gc(e));const o=()=>{Y1.unbind(window,"ready",o),e.render()};if(!bm.Event.domLoaded){Y1.bind(window,"ready",o);return}if(!e.getElement())return;const r=ae.fromDom(e.getElement()),c=nm(r);e.on("remove",()=>{Io(r.dom.attributes,f=>Br(r,f.name)),lc(r,c)}),e.ui.styleSheetLoader=Pz(r,e),ky(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Y1.getParent(n,"form");u&&(e.formElement=u,yS(e)&&!eg(e.getElement())&&(Y1.insertAfter(Y1.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Y1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),CS(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=c3(e),e.notificationManager=ap(e),AS(e)&&e.on("GetContent",f=>{f.save&&(f.content=Y1.encode(f.content))}),Tk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Ek(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Bz(e,e.suffix)},S5=(e,n)=>({sections:rt(e),options:rt(n)}),x5=Do().deviceType,T5=x5.isPhone(),uO=x5.isTablet(),fp=e=>{if(Pt(e))return[];{const n=ut(e)?e:e.split(/[ ,]/),o=Ge(n,Da);return Rt(o,Rn)}},$E=(e,n)=>{const o=Aa(n,(r,c)=>Ue(e,c));return S5(o.t,o.f)},Jg=(e,n,o={})=>{const r=e.sections(),c=Jo(r,n).getOr({});return et.extend({},o,c)},uv=(e,n)=>hn(e.sections(),n),dv=(e,n)=>uv(e,n)?e.sections()[n]:{},E5=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Jo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),$z=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?et.extend({},e.external_plugins,r):r},Fz=(e,n)=>[...fp(e),...fp(n)],k5=(e,n,o,r)=>e&&uv(n,"mobile")?r:o,Iz=(e,n,o,r)=>{const c=fp(o.forced_plugins),u=fp(r.plugins),f=dv(n,"mobile"),b=f.plugins?fp(f.plugins):u,y=k5(e,n,u,b),E=Fz(c,y);return et.extend(r,{forced_plugins:c,plugins:E})},dO=(e,n)=>e&&uv(n,"mobile"),FE=(e,n,o,r,c)=>{var u;const f=e?{mobile:E5((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=$E(["mobile"],XT(f,c)),y=et.extend(o,r,b.options(),dO(e,b)?Jg(b,"mobile"):{},{external_plugins:$z(r,b.options())});return Iz(e,b,r,y)},gp=(e,n)=>FE(T5||uO,T5,n,e,n),X1=(e,n)=>AW(e,n),_5=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{xe("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Lz=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return wt(c,u=>Ze(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Hz=e=>{_5(e),Lz(e)},Vz=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(es.os.isMacOS()||es.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},zz=(e,n,o)=>{const r=ae.fromDom(e.getRoot());return R0(r,Ee.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),z2(r,Ee.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},Uz=e=>{if(typeof e!="string"){const n=et.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},Wz=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?zz(r,o.getRng(),n):n},iw=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=Uz(n);UA(e,{...r,content:Wz(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=h8(e,c.content,r);pC(e,u,c),e.addVisual()})}},Zz=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{iw(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{iw(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{iw(e,r)},mceInsertContent:(n,o,r)=>{iw(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},jz={"font-size":"size","font-family":"face"},Gz=il("font"),oZ=(e,n,o)=>{const r=u=>Ic(u,e).orThunk(()=>Gz(u)?Jo(jz,e).bind(f=>ei(u,f)):H.none()),c=u=>ys(ae.fromDom(n),u);return Wx(ae.fromDom(o),u=>r(u),c)},qz=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),mO=(e,n)=>H.from(br.DOM.getStyle(n,e,!0)),A5=e=>(n,o)=>H.from(o).map(ae.fromDom).filter(Hs).bind(r=>oZ(e,n,r.dom).or(mO(e,r.dom))).getOr(""),Kz=A5("font-size"),O5=A(qz,A5("font-family")),Yz=e=>Qi(e.getBody()).bind(n=>{const o=n.container();return H.from(ft(o)?o.parentNode:o)}),D5=e=>H.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?H.none():H.from(e.selection.getStart(!0))}),Xz=(e,n)=>D5(e).orThunk(qe(Yz,e)).map(ae.fromDom).filter(Hs).bind(n),lw=(e,n)=>Xz(e,Co(H.some,n)),R5=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Lk(e),c=Hk(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},Jz=e=>{const n=e.split(/\s*,\s*/);return Ge(n,o=>o.indexOf(" ")!==-1&&!(xn(o,'"')||xn(o,"'"))?`'${o}'`:o).join(",")},Qz=(e,n)=>{const o=R5(e,n);e.formatter.toggle("fontname",{value:Jz(o)}),e.nodeChanged()},eU=e=>lw(e,n=>O5(e.getBody(),n.dom)).getOr(""),M5=(e,n)=>{e.formatter.toggle("fontsize",{value:R5(e,n)}),e.nodeChanged()},fO=e=>lw(e,n=>Kz(e.getBody(),n.dom)).getOr(""),N5=e=>lw(e,n=>{const o=ae.fromDom(e.getBody()),r=Wx(n,u=>Ic(u,"line-height"),qe(ys,o)),c=()=>{const u=parseFloat(ll(n,"line-height")),f=parseFloat(ll(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),gO=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},tU=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Qz(e,c)},FontSize:(o,r,c)=>{M5(e,c)},LineHeight:(o,r,c)=>{gO(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(K(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},sZ=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>eU(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>fO(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>N5(e))},rZ=e=>{tU(e),sZ(e)},nU=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},B5=e=>{e.editorCommands.addCommands({Indent:()=>{VT(e)},Outdent:()=>{G3(e)}}),e.editorCommands.addCommands({Outdent:()=>v7(e)},"state")},oU=e=>{const n=(o,r,c)=>{const u=K(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");ot(u)&&K(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},sU=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},rU=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},aZ=e=>{sU(e),rU(e)},cZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{av(NP,e)},mceInsertNewLine:(n,o,r)=>{fE(e,r)},InsertLineBreak:(n,o,r)=>{av(JC,e)}})},P5=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Ut(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Bs);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},$5=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{vF(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},aU=e=>{Hz(e),Vz(e),nU(e),P5(e),Zz(e),oU(e),B5(e),cZ(e),aZ(e),rZ(e),$5(e)},cU=["toggleview"],F5=e=>Ue(cU,e.toLowerCase());class iU{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():xi(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return he(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!F5(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return he(r)?r(o):!1}queryCommandValue(n){if(!F5(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return he(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;bt(n,(c,u)=>{xe(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const mv="data-mce-contenteditable",iZ=(e,n,o)=>{ld(e,n)&&!o?cd(e,n):o&&Au(e,n)},hO=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},pO=(e,n)=>{e.dom.contentEditable=n?"true":"false"},lU=e=>{xe(Ec(e,'*[contenteditable="true"]'),n=>{Gr(n,mv,"true"),pO(n,!1)})},J1=e=>{xe(Ec(e,`*[${mv}="true"]`),n=>{Br(n,mv),pO(n,!0)})},bO=e=>{H.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},IE=e=>{e.selection.setRng(e.selection.getRng())},I5=(e,n)=>{const o=ae.fromDom(e.getBody());iZ(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),bO(e),e.readonly=!0,pO(o,!1),lU(o)):(e.readonly=!1,pO(o,!0),J1(o),hO(e,"StyleWithCSS",!1),hO(e,"enableInlineTableEditing",!1),hO(e,"enableObjectResizing",!1),GO(e)&&e.focus(),IE(e),e.nodeChanged())},hp=e=>e.readonly,vO=e=>{e.parser.addAttributeFilter("contenteditable",n=>{hp(e)&&xe(n,o=>{o.attr(mv,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(mv,n=>{hp(e)&&xe(n,o=>{o.attr("contenteditable",o.attr(mv))})}),e.serializer.addTempAttr(mv)},uU=e=>{e.serializer?vO(e):e.on("PreInit",()=>{vO(e)})},dU=e=>e.type==="click",mU=["copy"],fU=e=>Ue(mU,e.type),Q1=(e,n)=>En(n,"a",r=>ys(r,ae.fromDom(e.getBody()))).bind(r=>ei(r,"href")),gU=(e,n)=>{if(dU(n)&&!rn.metaKeyPressed(n)){const o=ae.fromDom(n.target);Q1(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Qt(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else fU(n)&&e.dispatch(n.type,n)},L5=e=>{e.on("ShowCaret",n=>{hp(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{hp(e)&&n.preventDefault()})},hU=et.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class fv{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Se}static isNative(n){return!!hU[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=wh(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Se),o){const u={func:o,removed:!1};c&&et.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let E=this.bindings[y];E||(E=[],this.toggleEvent(y,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[y]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return bt(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=eo(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,xe(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else bt(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const uw=e=>(e._eventDispatcher||(e._eventDispatcher=new fv({scope:e,toggleEvent:(n,o)=>{fv.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),yO={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return wh(e.toLowerCase(),n??{},r);const c=uw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return uw(this).on(e,n,o)},off(e,n){return uw(this).off(e,n)},once(e,n){return uw(this).once(e,n)},hasEventListeners(e){return uw(this).has(e)}},LE=br.DOM;let pp;const HE=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Ty(e);return o?(e.eventRoot||(e.eventRoot=LE.select(o)[0]),e.eventRoot):e.getBody()},pU=e=>!e.hidden&&!hp(e),H5=(e,n,o)=>{pU(e)?e.dispatch(n,o):hp(e)&&gU(e,o)},V5=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=HE(e,n);if(Ty(e)){if(pp||(pp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||pp&&(bt(pp,(c,u)=>{e.dom.unbind(HE(e,u))}),pp=null)})),pp[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||LE.isChildOf(u,y))&&H5(f[b],n,c)}};pp[n]=r,LE.bind(o,n,r)}else{const r=c=>{H5(e,n,c)};LE.bind(o,n,r),e.delegates[n]=r}},VE={...yO,bindPendingEventDelegates(){const e=this;et.each(e._pendingNativeEvents,n=>{V5(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?V5(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(HE(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(bt(e.delegates,(r,c)=>{e.dom.unbind(HE(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},bU=e=>K(e)?{value:e.split(/[ ,]/),valid:!0}:Ln(e,K)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},vU=e=>{const n=(()=>{switch(e){case"array":return ut;case"boolean":return ht;case"function":return he;case"number":return Uo;case"object":return ot;case"string":return K;case"string[]":return bU;case"object[]":return o=>Ln(o,ot);case"regexp":return o=>ct(o,RegExp);default:return Qe}})();return o=>dw(o,n,`The value must be a ${e}.`)},vc=e=>K(e.processor),z5=(e,n)=>{const o=jo(n.message)?"":`. ${n.message}`;return e+o},U5=e=>e.valid,dw=(e,n,o="")=>{const r=n(e);return ht(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},W5=(e,n,o)=>{if(!Vn(n)){const r=dw(n,o);if(U5(r))return r.value;console.error(z5(`Invalid default value passed for the "${e}" option`,r))}},CO=(e,n)=>{const o={},r={},c=(R,L,Q)=>{const te=dw(L,Q);return U5(te)?(r[R]=te.value,!0):(console.warn(z5(`Invalid value passed for the ${R} option`,te)),!1)},u=(R,L)=>{const Q=vc(L)?vU(L.processor):L.processor,te=W5(R,L.default,Q);o[R]={...L,default:te,processor:Q},Jo(r,R).orThunk(()=>Jo(n,R)).each(ee=>c(R,ee,Q))},f=R=>hn(o,R);return{register:u,isRegistered:f,get:R=>Jo(r,R).orThunk(()=>Jo(o,R).map(L=>L.default)).getOrUndefined(),set:(R,L)=>{if(f(R)){const Q=o[R];return Q.immutable?(console.error(`"${R}" is an immutable option and cannot be updated`),!1):c(R,L,Q.processor)}else return console.warn(`"${R}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:R=>{const L=f(R);return L&&delete r[R],L},isSet:R=>hn(r,R)}},yU=["design","readonly"],Z5=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&I5(e,u.editorReadOnly),n.set(r),f2(e,r)},CU=(e,n,o,r)=>{if(r!==o.get()){if(!hn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Z5(e,o,n,r):e.on("init",()=>Z5(e,o,n,r))}},wU=(e,n,o)=>{if(Ue(yU,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},SU=e=>{const n=Wa("design"),o=Wa({design:{activate:Zt,deactivate:Zt,editorReadOnly:!1},readonly:{activate:Zt,deactivate:Zt,editorReadOnly:!0}});return uU(e),L5(e),{isReadOnly:()=>hp(e),set:r=>CU(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(wU(o.get(),r,c))}}},wO=et.each,SO=et.explode,xU={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},eb=et.makeMap("alt,ctrl,shift,meta,access"),zm=e=>e in eb,TU=e=>{const n={},o=es.os.isMacOS()||es.os.isiOS();wO(SO(e.toLowerCase(),"+"),u=>{zm(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=xU[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in eb)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class j5{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(wO(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return wO(SO(et.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:et.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=et.map(SO(n,">"),TU);return u[u.length-1]=et.extend(u[u.length-1],{func:r,scope:c||this.editor}),et.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const EU=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(N,R)=>(L,Q)=>{N[L.toLowerCase()]={...Q,type:R}},E=(N,R)=>r[N.toLowerCase()]=R;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:E,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},kU=()=>{const e=EU();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},tb=br.DOM,G5=et.extend,_U=et.each;class zE{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,G5(this,VE);const c=this;this.id=n,this.hidden=!1;const u=gp(r.defaultOptions,o);this.options=CO(c,u),iS(c);const f=this.options.get;f("deprecation_warnings")&&rp(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const E=Dh(c);E&&(vm.ScriptLoader._setReferrerPolicy(E),br.DOM.styleSheetLoader._setReferrerPolicy(E));const N=_y(c);Ze(N)&&br.DOM.styleSheetLoader._setContentCssCors(N),$s.languageLoad=f("language_load"),$s.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Hm(fc(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ky(c),this.hasVisual=Ok(c),this.shortcuts=new j5(this),this.editorCommands=new iU(this),aU(this);const R=f("cache_suffix");R&&(es.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:kU(),styleSheetLoader:void 0,show:Zt,hide:Zt,setEnabled:Zt,isEnabled:Qe},this.mode=SU(c),r.dispatch("SetupEditor",{editor:this});const L=xg(c);he(L)&&L.call(c,c)}render(){w5(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Kh(this)}translate(n){return Hu.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Ze(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:Qe,default:o})),!c.isSet(n)&&!Vn(o)?o:c.get(n)}hasPlugin(n,o){return Ue(Ay(this),n)?o?Wd.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(tb.show(n.getContainer()),tb.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(tb.hide(n.getContainer()),tb.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=eg(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,eg(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=tb.getParent(o.id,"form");b&&_U(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return uN(this,n,o)}getContent(n){return r3(this,n)}insertContent(n,o){o&&(n=G5({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?uN(this,this.startContent,{format:"raw"}):uN(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||tb.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=tb.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=Rk(c);return he(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||ot(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){X1(this,n)}remove(){$8(this)}destroy(n){F8(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const gv=br.DOM,xO=et.each;let q5=!1,UE,Sl=[];const WE=e=>{const n=e.type;xO(bp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},K5=e=>{if(e!==q5){const n=br.DOM;e?(n.bind(window,"resize",WE),n.bind(window,"scroll",WE)):(n.unbind(window,"resize",WE),n.unbind(window,"scroll",WE)),q5=e}},Y5=e=>{const n=Sl;return Sl=Rt(Sl,o=>e!==o),bp.activeEditor===e&&(bp.activeEditor=Sl.length>0?Sl[0]:null),bp.focusedEditor===e&&(bp.focusedEditor=null),n.length!==Sl.length},lZ=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Y5(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},AU=document.compatMode!=="CSS1Compat",bp={...yO,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.1",releaseDate:"2023-03-29",i18n:Hu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Hm.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Hm(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Hm(e.baseURL),e.suffix=o,hF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&bt(r,(c,u)=>{$s.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=et.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(N,R)=>N.inline&&R.tagName.toLowerCase()in r,u=N=>{let R=N.id;return R||(R=Jo(N,"name").filter(L=>!gv.get(L)).getOrThunk(gv.uniqueId),N.setAttribute("id",R)),R},f=N=>{const R=e[N];if(R)return R.apply(n,[])},b=N=>es.browser.isIE()||es.browser.isEdge()?(_C("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):AU?(_C("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):K(N.selector)?gv.select(N.selector):Ze(N.target)?[N.target]:[];let y=N=>{o=N};const E=()=>{let N=0;const R=[];let L;const Q=(te,j,ee)=>{const ye=new zE(te,j,n);R.push(ye),ye.on("init",()=>{++N===L.length&&y(R)}),ye.targetElm=ye.targetElm||ee,ye.render()};gv.unbind(window,"ready",E),f("onpageload"),L=mr(b(e)),et.each(L,te=>{lZ(n.get(te.id))}),L=et.grep(L,te=>!n.get(te.id)),L.length===0?y([]):xO(L,te=>{c(e,te)?_C("Could not initialize inline editor on invalid inline target element",te):Q(u(te),e,te)})};return gv.bind(window,"ready",E),new Promise(N=>{o?N(o):y=R=>{N(R)}})},get(e){return arguments.length===0?Sl.slice(0):K(e)?Wo(Sl,n=>n.id===e).getOr(null):Uo(e)&&Sl[e]?Sl[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Sl.push(e),K5(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),UE||(UE=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",UE))),e},createEditor(e,n){return this.add(new zE(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Sl.length-1;r>=0;r--)n.remove(Sl[r]);return}if(K(e)){xO(gv.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,G(n.get(o.id))?null:(Y5(o)&&n.dispatch("RemoveEditor",{editor:o}),Sl.length===0&&window.removeEventListener("beforeunload",UE),o.remove(),K5(Sl.length>0),o)},execCommand(e,n,o){var r;const c=this,u=ot(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new zE(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{xO(Sl,e=>{e.save()})},addI18n:(e,n)=>{Hu.add(e,n)},translate:e=>Hu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Hm(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Hm(this.baseURL)}};bp.setup();const OU=(()=>{const e=tc(),n=u=>({items:u,types:Rs(u),getType:f=>Jo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),X5=Math.min,hv=Math.max,ZE=Math.round,J5=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,E=(o||"").split("");return E[0]==="b"&&(c+=y),E[1]==="r"&&(r+=b),E[0]==="c"&&(c+=ZE(y/2)),E[1]==="c"&&(r+=ZE(b/2)),E[3]==="b"&&(c-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(c-=ZE(f/2)),E[4]==="c"&&(r-=ZE(u/2)),pv(r,c,u,f)},DU=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=J5(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},RU=(e,n,o)=>pv(e.x-n,e.y-o,e.w+n*2,e.h+o*2),MU=(e,n)=>{const o=hv(e.x,n.x),r=hv(e.y,n.y),c=X5(e.x+e.w,n.x+n.w),u=X5(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:pv(o,r,c-o,u-r)},NU=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,E=hv(0,n.x-r),N=hv(0,n.y-c),R=hv(0,u-b),L=hv(0,f-y);return r+=E,c+=N,o&&(u+=E,f+=N,r-=R,c-=L),u-=R,f-=L,pv(r,c,u-r,f-c)},pv=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),BU={inflate:RU,relativePosition:J5,findBestRelativePosition:DU,intersect:MU,clamp:NU,create:pv,fromClientRect:e=>pv(e.left,e.top,e.width,e.height)},PU=(e,n,o=1e3)=>{let r=!1,c=null;const u=E=>(...N)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),E.apply(null,N))},f=u(e),b=u(n);return{start:(...E)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},FU=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const E=new Promise((N,R)=>{const L=PU(N,R);n[u]=L.resolve,vm.ScriptLoader.loadScript(f).then(()=>L.start(y),()=>L.reject(b))});return e[u]=E,E}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),IU=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let mw;try{const e="__storage_test__";mw=window.localStorage,mw.setItem(e,e),mw.removeItem(e)}catch{mw=IU()}var LU=mw;const HU={geom:{Rect:BU},util:{Delay:zl,Tools:et,VK:rn,URI:Hm,EventDispatcher:fv,Observable:yO,I18n:Hu,LocalStorage:LU,ImageUploader:J8},dom:{EventUtils:bm,TreeWalker:Ba,TextSeeker:kr,DOMUtils:br,ScriptLoader:vm,RangeUtils:Zh,Serializer:s3,StyleSheetLoader:cg,ControlSelection:ix,BookmarkManager:el,Selection:Gg,Event:bm.Event},html:{Styles:Tb,Entities:cf,Node:yl,Schema:gl,DomParser:sp,Writer:iD,Serializer:Yh},Env:es,AddOnManager:$s,Annotator:f1,Formatter:AC,UndoManager:m3,EditorCommands:iU,WindowManager:c3,NotificationManager:ap,EditorObservable:VE,Shortcuts:j5,Editor:zE,FocusManager:Gh,EditorManager:bp,DOM:br.DOM,ScriptLoader:vm.ScriptLoader,PluginManager:Wd,ThemeManager:Mf,ModelManager:j0,IconManager:vT,Resource:FU,FakeClipboard:OU,trim:et.trim,isArray:et.isArray,is:et.is,toArray:et.toArray,makeMap:et.makeMap,each:et.each,map:et.map,grep:et.grep,inArray:et.inArray,extend:et.extend,walk:et.walk,resolve:et.resolve,explode:et.explode,_addCacheSuffix:et._addCacheSuffix},Q5=et.extend(bp,HU),VU=e=>{try{Ht.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Q5),VU(Q5)})()})(xG);const TG=dW;var EG=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],kG=function(Ht){return EG.map(function(Qn){return Qn.toLowerCase()}).indexOf(Ht.toLowerCase())!==-1},_G=function(Ht,Qn,In){Object.keys(Qn).filter(kG).forEach(function(Mn){var Yn=Qn[Mn];typeof Yn=="function"&&(Mn==="onInit"?Yn(Ht,In):In.on(Mn.substring(2),function(Wn){return Yn(Wn,In)}))})},AG=function(Ht,Qn,In,Mn){var Yn=Ht.modelEvents?Ht.modelEvents:null,Wn=Array.isArray(Yn)?Yn.join(" "):Yn;iW(Mn,function(oo,Vt){In&&typeof oo=="string"&&oo!==Vt&&oo!==In.getContent({format:Ht.outputFormat})&&In.setContent(oo)}),In.on(Wn||"change input undo redo",function(){Qn.emit("update:modelValue",In.getContent({format:Ht.outputFormat}))})},OG=function(Ht,Qn,In,Mn,Yn,Wn){Mn.setContent(Wn()),In.attrs["onUpdate:modelValue"]&&AG(Qn,In,Mn,Yn),_G(Ht,In.attrs,Mn)},oj=0,ij=function(Ht){var Qn=Date.now(),In=Math.floor(Math.random()*1e9);return oj++,Ht+"_"+In+oj+String(Qn)},DG=function(Ht){return Ht!==null&&Ht.tagName.toLowerCase()==="textarea"},sj=function(Ht){return typeof Ht>"u"||Ht===""?[]:Array.isArray(Ht)?Ht:Ht.split(" ")},RG=function(Ht,Qn){return sj(Ht).concat(sj(Qn))},MG=function(Ht){return Ht==null},rj=function(){return{listeners:[],scriptId:ij("tiny-script"),scriptLoaded:!1}},NG=function(){var Ht=rj(),Qn=function(Yn,Wn,oo,Vt){var Wt=Wn.createElement("script");Wt.referrerPolicy="origin",Wt.type="application/javascript",Wt.id=Yn,Wt.src=oo;var Lt=function(){Wt.removeEventListener("load",Lt),Vt()};Wt.addEventListener("load",Lt),Wn.head&&Wn.head.appendChild(Wt)},In=function(Yn,Wn,oo){Ht.scriptLoaded?oo():(Ht.listeners.push(oo),Yn.getElementById(Ht.scriptId)||Qn(Ht.scriptId,Yn,Wn,function(){Ht.listeners.forEach(function(Vt){return Vt()}),Ht.scriptLoaded=!0}))},Mn=function(){Ht=rj()};return{load:In,reinitialize:Mn}},BG=NG(),PG=function(){return typeof window<"u"?window:global},Cw=function(){var Ht=PG();return Ht&&Ht.tinymce?Ht.tinymce:null},$G={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(Ht){return Ht==="html"||Ht==="text"}}},ww=globalThis&&globalThis.__assign||function(){return ww=Object.assign||function(Ht){for(var Qn,In=1,Mn=arguments.length;In<Mn;In++){Qn=arguments[In];for(var Yn in Qn)Object.prototype.hasOwnProperty.call(Qn,Yn)&&(Ht[Yn]=Qn[Yn])}return Ht},ww.apply(this,arguments)},FG=function(Ht,Qn,In,Mn){return Ht(Mn||"div",{id:Qn,ref:In})},IG=function(Ht,Qn,In){return Ht("textarea",{id:Qn,visibility:"hidden",ref:In})},LG=aj({props:$G,setup:function(Ht,Qn){var In=Ht.init?ww({},Ht.init):{},Mn=iG(Ht),Yn=Mn.disabled,Wn=Mn.modelValue,oo=Mn.tagName,Vt=lW(null),Wt=null,Lt=Ht.id||ij("tiny-vue"),Oo=Ht.init&&Ht.init.inline||Ht.inline,Yo=!!Qn.attrs["onUpdate:modelValue"],ho=!0,_n=Ht.initialValue?Ht.initialValue:"",So="",Xn=function(ct){return Yo?function(){return Wn!=null&&Wn.value?Wn.value:""}:function(){return ct?_n:So}},mt=function(){var ct=Xn(ho),K=ww(ww({},In),{readonly:Ht.disabled,target:Vt.value,plugins:RG(In.plugins,Ht.plugins),toolbar:Ht.toolbar||In.toolbar,inline:Oo,setup:function(ot){Wt=ot,ot.on("init",function(zt){return OG(zt,Ht,Qn,ot,Wn,ct)}),typeof In.setup=="function"&&In.setup(ot)}});DG(Vt.value)&&(Vt.value.style.visibility=""),Cw().init(K),ho=!1};iW(Yn,function(ct){var K;Wt!==null&&(typeof((K=Wt.mode)===null||K===void 0?void 0:K.set)=="function"?Wt.mode.set(ct?"readonly":"design"):Wt.setMode(ct?"readonly":"design"))}),iW(oo,function(ct){var K;Yo||(So=Wt.getContent()),(K=Cw())===null||K===void 0||K.remove(Wt),ej(function(){return mt()})}),cj(function(){if(Cw()!==null)mt();else if(Vt.value&&Vt.value.ownerDocument){var ct=Ht.cloudChannel?Ht.cloudChannel:"6",K=Ht.apiKey?Ht.apiKey:"no-api-key",ot=MG(Ht.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(K,"/tinymce/").concat(ct,"/tinymce.min.js"):Ht.tinymceScriptSrc;BG.load(Vt.value.ownerDocument,ot,mt)}}),lG(function(){Cw()!==null&&Cw().remove(Wt)}),Oo||(uG(function(){ho||mt()}),dG(function(){var ct;Yo||(So=Wt.getContent()),(ct=Cw())===null||ct===void 0||ct.remove(Wt)}));var Nn=function(ct){var K;So=Wt.getContent(),(K=Cw())===null||K===void 0||K.remove(Wt),In=ww(ww({},In),ct),ej(function(){return mt()})};return Qn.expose({rerender:Nn,getEditor:function(){return Wt}}),function(){return Oo?FG(tj,Lt,Vt,Ht.tagName):IG(tj,Lt,Vt)}}});(function(){const Ht=Object.getPrototypeOf,Qn=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},In=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Qn(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Mn=t=>s=>In(s)===t,Yn=t=>s=>typeof s===t,Wn=t=>s=>t===s,oo=(t,s)=>Wt(t)&&Qn(t,s,(a,i)=>Ht(a)===i),Vt=Mn("string"),Wt=Mn("object"),Lt=t=>oo(t,Object),Oo=Mn("array"),Yo=Wn(null),ho=Yn("boolean"),_n=Wn(void 0),So=t=>t==null,Xn=t=>!So(t),mt=Yn("function"),Nn=Yn("number"),ct=(t,s)=>{if(Oo(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},K=()=>{},ot=t=>()=>t(),zt=(t,s)=>(...a)=>t(s.apply(null,a)),ut=(t,s)=>a=>t(s(a)),G=t=>()=>t,ht=t=>t,Vn=(t,s)=>t===s;function Pt(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const Ze=t=>s=>!t(s),he=t=>()=>{throw new Error(t)},Uo=t=>t(),Ln=G(!1),Zt=G(!0);class A{constructor(s,a){this.tag=s,this.value=a}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Xn(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const Co=Array.prototype.slice,rt=Array.prototype.indexOf,ko=Array.prototype.push,on=(t,s)=>rt.call(t,s),qe=(t,s)=>{const a=on(t,s);return a===-1?A.none():A.some(a)},po=(t,s)=>on(t,s)>-1,os=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},pt=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},un=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=Co.call(t,i,i+s);a.push(d)}return a},Se=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},Qe=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},H=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},ps=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:i).push(p)}return{pass:a,fail:i}},Dn=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},bo=(t,s,a)=>(H(t,(i,d)=>{a=s(a,i,d)}),a),An=(t,s,a)=>(Qe(t,(i,d)=>{a=s(a,i,d)}),a),Ys=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return A.some(g);if(a(g,i))break}return A.none()},Ue=(t,s)=>Ys(t,s,Ln),wt=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return A.some(a)}return A.none()},Ge=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!Oo(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);ko.apply(s,t[a])}return s},xe=(t,s)=>Ge(Se(t,s)),Io=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},eo=t=>{const s=Co.call(t,0);return s.reverse(),s},Rt=(t,s)=>Dn(t,a=>!po(s,a)),Tr=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},$n=t=>[t],ur=(t,s)=>{const a=Co.call(t,0);return a.sort(s),a},Wo=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),Fs=t=>Wo(t,0),ba=t=>Wo(t,t.length-1),Ir=mt(Array.from)?Array.from:t=>Co.call(t),Ss=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return A.none()},is=Object.keys,Uc=Object.hasOwnProperty,ts=(t,s)=>{const a=is(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];s(p,g)}},ls=(t,s)=>ss(t,(a,i)=>({k:i,v:s(a,i)})),ss=(t,s)=>{const a={};return ts(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Xo=t=>(s,a)=>{t[a]=s},Ds=(t,s,a,i)=>{ts(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},dr=(t,s)=>{const a={},i={};return Ds(t,s,Xo(a),Xo(i)),{t:a,f:i}},aa=(t,s)=>{const a={};return Ds(t,s,Xo(a),K),a},mr=(t,s)=>{const a=[];return ts(t,(i,d)=>{a.push(s(i,d))}),a},Rs=(t,s)=>{const a=is(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];if(s(p,g,t))return A.some(p)}return A.none()},Or=t=>mr(t,ht),bt=(t,s)=>io(t,s)?A.from(t[s]):A.none(),io=(t,s)=>Uc.call(t,s),ca=(t,s)=>io(t,s)&&t[s]!==void 0&&t[s]!==null,sr=(t,s,a=Vn)=>t.exists(i=>a(i,s)),ac=(t,s,a=Vn)=>La(t,s,a).getOr(t.isNone()&&s.isNone()),Aa=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},rs=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return A.none()}return A.some(s)},La=(t,s,a)=>t.isSome()&&s.isSome()?A.some(a(t.getOrDie(),s.getOrDie())):A.none(),Dr=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?A.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):A.none(),Jo=(t,s)=>t!=null?A.some(s(t)):A.none(),hn=(t,s)=>t?A.some(s):A.none(),Er=(t,s)=>t+s,Jr=(t,s)=>t.substring(s),Oa=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,Ha=(t,s)=>bs(t,s)?Jr(t,s.length):t,Is=(t,s)=>wr(t,s)?t:Er(t,s),Ws=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?_n(i)?!0:d+s.length<=i:!1},bs=(t,s)=>Oa(t,s,0),wr=(t,s)=>Oa(t,s,t.length-s.length),se=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Ie=t=>t.length>0,Ne=t=>!Ie(t),Yt=t=>t.style!==void 0&&mt(t.style.getPropertyValue),fn=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return jn(i.childNodes[0])},so=(t,s)=>{const i=(s||document).createElement(t);return jn(i)},Qo=(t,s)=>{const i=(s||document).createTextNode(t);return jn(i)},jn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},be={fromHtml:fn,fromTag:so,fromText:Qo,fromDom:jn,fromPoint:(t,s,a)=>A.from(t.dom.elementFromPoint(s,a)).map(jn)},Zo=typeof window<"u"?window:Function("return this;")(),re=(t,s)=>{let a=s??Zo;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},ce=(t,s)=>{const a=t.split(".");return re(a,s)},tt=(t,s)=>ce(t,s),nt=(t,s)=>{const a=tt(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},At=Object.getPrototypeOf,Xt=t=>nt("HTMLElement",t),qt=t=>{const s=ce("ownerDocument.defaultView",t);return Wt(t)&&(Xt(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(At(t).constructor.name))},Qt=9,Sn=11,xn=1,us=3,Ms=t=>t.dom.nodeName.toLowerCase(),Da=t=>t.dom.nodeType,Va=t=>s=>Da(s)===t,cc=t=>Rn(t)&&qt(t.dom),Rn=Va(xn),jo=Va(us),ds=Va(Qt),Lr=Va(Sn),jr=t=>s=>Rn(s)&&Ms(s)===t,Rr=(t,s)=>{const a=t.dom;if(a.nodeType!==xn)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Ls=t=>t.nodeType!==xn&&t.nodeType!==Qt&&t.nodeType!==Sn||t.childElementCount===0,Ql=(t,s)=>{const a=s===void 0?document:s.dom;return Ls(a)?[]:Se(a.querySelectorAll(t),be.fromDom)},Wi=(t,s)=>{const a=s===void 0?document:s.dom;return Ls(a)?A.none():A.from(a.querySelector(t)).map(be.fromDom)},ms=(t,s)=>t.dom===s.dom,va=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},Ra=t=>be.fromDom(t.dom.ownerDocument),fr=t=>ds(t)?t:Ra(t),Zi=t=>be.fromDom(fr(t).dom.documentElement),ic=t=>be.fromDom(fr(t).dom.defaultView),ya=t=>A.from(t.dom.parentNode).map(be.fromDom),Cc=t=>A.from(t.dom.parentElement).map(be.fromDom),al=(t,s)=>{const a=mt(s)?s:Ln;let i=t.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,p=be.fromDom(g);if(d.push(p),a(p)===!0)break;i=g}return d},li=t=>A.from(t.dom.offsetParent).map(be.fromDom),cl=t=>A.from(t.dom.nextSibling).map(be.fromDom),Ma=t=>Se(t.dom.childNodes,be.fromDom),Nc=(t,s)=>{const a=t.dom.childNodes;return A.from(a[s]).map(be.fromDom)},ji=t=>Nc(t,0),Wc=(t,s)=>({element:t,offset:s}),Gi=(t,s)=>{const a=Ma(t);return a.length>0&&s<a.length?Wc(a[s],0):Wc(t,s)},W=t=>Lr(t)&&Xn(t.dom.host),me=mt(Element.prototype.attachShadow)&&mt(Node.prototype.getRootNode),ve=G(me),Le=me?t=>be.fromDom(t.dom.getRootNode()):fr,it=t=>W(t)?t:be.fromDom(fr(t).dom.body),pn=t=>vs(t).isSome(),vs=t=>{const s=Le(t);return W(s)?A.some(s):A.none()},Mr=t=>be.fromDom(t.dom.host),Do=t=>{if(ve()&&Xn(t.target)){const s=be.fromDom(t.target);if(Rn(s)&&Nr(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Fs(a)}}return A.from(t.target)},Nr=t=>Xn(t.dom.shadowRoot),Go=t=>{const s=jo(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return vs(be.fromDom(s)).fold(()=>a.body.contains(s),ut(Go,Mr))},rr=()=>Bc(be.fromDom(document)),Bc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return be.fromDom(s)},wc=(t,s,a)=>{if(Vt(a)||ho(a)||Nn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},zn=(t,s,a)=>{wc(t.dom,s,a)},es=(t,s)=>{const a=t.dom;ts(s,(i,d)=>{wc(a,d,i)})},Qr=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},P=(t,s)=>A.from(Qr(t,s)),q=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ne=(t,s)=>{t.dom.removeAttribute(s)},Be=t=>An(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Mt=(t,s,a)=>{if(!Vt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Yt(t)&&t.style.setProperty(s,a)},to=(t,s)=>{Yt(t)&&t.style.removeProperty(s)},Kt=(t,s,a)=>{const i=t.dom;Mt(i,s,a)},Hr=(t,s)=>{const a=t.dom;ts(s,(i,d)=>{Mt(a,d,i)})},ea=(t,s)=>{const a=t.dom;ts(s,(i,d)=>{i.fold(()=>{to(a,d)},g=>{Mt(a,d,g)})})},et=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Go(t)?Vr(a,s):d},Vr=(t,s)=>Yt(t)?t.style.getPropertyValue(s):"",gr=(t,s)=>{const a=t.dom,i=Vr(a,s);return A.from(i).filter(d=>d.length>0)},ta=t=>{const s={},a=t.dom;if(Yt(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},sd=(t,s,a)=>{const i=be.fromTag(t);return Kt(i,s,a),gr(i,s).isSome()},xo=(t,s)=>{const a=t.dom;to(a,s),sr(P(t,"style").map(se),"")&&ne(t,"style")},Y=t=>t.dom.offsetWidth,oe=(t,s)=>{const a=(C,x)=>{if(!Nn(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const _=C.dom;Yt(_)&&(_.style[t]=x+"px")},i=C=>{const x=s(C);if(x<=0||x===null){const _=et(C,t);return parseFloat(_)||0}return x},d=i,g=(C,x)=>An(x,(_,D)=>{const B=et(C,D),F=B===void 0?0:parseInt(B,10);return isNaN(F)?_:_+F},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,x,_)=>{const D=g(C,_);return x>D?x-D:0}}},ke=oe("height",t=>{const s=t.dom;return Go(t)?s.getBoundingClientRect().height:s.offsetHeight}),ze=t=>ke.get(t),tn=t=>ke.getOuter(t),Lo=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=ke.max(t,s,a);Kt(t,"max-height",i+"px")},Xs=(t,s)=>({left:t,top:s,translate:(i,d)=>Xs(t+i,s+d)}),_o=Xs,Zs=t=>{const s=t.getBoundingClientRect();return _o(s.left,s.top)},Ca=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ns=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return _o(a.offsetLeft,a.offsetTop);const g=Ca(i==null?void 0:i.pageYOffset,d.scrollTop),p=Ca(i==null?void 0:i.pageXOffset,d.scrollLeft),C=Ca(d.clientTop,a.clientTop),x=Ca(d.clientLeft,a.clientLeft);return Sc(t).translate(p-x,g-C)},Sc=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?_o(i.offsetLeft,i.offsetTop):Go(t)?Zs(s):_o(0,0)},Zc=oe("width",t=>t.dom.offsetWidth),As=(t,s)=>Zc.set(t,s),wa=t=>Zc.get(t),hr=t=>Zc.getOuter(t),ki=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Zc.max(t,s,a);Kt(t,"max-width",i+"px")},Tl=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Hs=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),C=p||i("(pointer:coarse)"),x=d||!g&&p&&i("(min-device-width:768px)"),_=g||p&&!x,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,B=!_&&!x&&!D;return{isiPad:G(d),isiPhone:G(g),isTablet:G(x),isPhone:G(_),isTouch:G(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:G(D),isDesktop:G(B)}},xc=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},_i=(t,s)=>{const a=xc(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return Qc(i(1),i(2))},rd=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?il():_i(t,a)},il=()=>Qc(0,0),Qc=(t,s)=>({major:t,minor:s}),Gr={nu:Qc,detect:rd,unknown:il},lc=(t,s)=>Ss(s.brands,a=>{const i=a.brand.toLowerCase();return Ue(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Gr.nu(parseInt(a.version,10),0)}))}),Pc=(t,s)=>{const a=String(s).toLowerCase();return Ue(t,i=>i.search(a))},ei=(t,s)=>Pc(t,s).map(a=>{const i=Gr.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Xa=(t,s)=>Pc(t,s).map(a=>{const i=Gr.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Br=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,jc=t=>s=>Ws(s,t),nm=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Ws(t,"edge/")&&Ws(t,"chrome")&&Ws(t,"safari")&&Ws(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Br],search:t=>Ws(t,"chrome")&&!Ws(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Ws(t,"msie")||Ws(t,"trident")},{name:"Opera",versionRegexes:[Br,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:jc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:jc("firefox")},{name:"Safari",versionRegexes:[Br,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Ws(t,"safari")||Ws(t,"mobile/"))&&Ws(t,"applewebkit")}],eu=[{name:"Windows",search:jc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Ws(t,"iphone")||Ws(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:jc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:jc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:jc("linux"),versionRegexes:[]},{name:"Solaris",search:jc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:jc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:jc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tu={browsers:G(nm),oses:G(eu)},Gm="Edge",ui="Chromium",nu="IE",ad="Opera",zr="Firefox",om="Safari",Au=()=>Ou({current:void 0,version:Gr.unknown()}),Ou=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(Gm),isChromium:i(ui),isIE:i(nu),isOpera:i(ad),isFirefox:i(zr),isSafari:i(om)}},cd={unknown:Au,nu:Ou,edge:G(Gm),chromium:G(ui),ie:G(nu),opera:G(ad),firefox:G(zr),safari:G(om)},id="Windows",ld="iOS",Du="Android",qm="Linux",Km="macOS",ou="Solaris",vp="FreeBSD",ae="ChromeOS",ud=()=>$c({current:void 0,version:Gr.unknown()}),$c=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(id),isiOS:i(ld),isAndroid:i(Du),isMacOS:i(Km),isLinux:i(qm),isSolaris:i(ou),isFreeBSD:i(vp),isChromeOS:i(ae)}},Zf={unknown:ud,nu:$c,windows:G(id),ios:G(ld),android:G(Du),linux:G(qm),macos:G(Km),solaris:G(ou),freebsd:G(vp),chromeos:G(ae)},Cp={detect:(t,s,a)=>{const i=tu.browsers(),d=tu.oses(),g=s.bind(x=>lc(i,x)).orThunk(()=>ei(i,t)).fold(cd.unknown,cd.nu),p=Xa(d,t).fold(Zf.unknown,Zf.nu),C=Hs(p,g,t,a);return{browser:g,os:p,deviceType:C}}},ys=t=>window.matchMedia(t).matches;let Ai=Tl(()=>Cp.detect(navigator.userAgent,A.from(navigator.userAgentData),ys));const Tc=()=>Ai(),ti=(t,s,a,i,d,g,p)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:p}),nh=t=>{const s=be.fromDom(Do(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=zt(i,a);return ti(s,t.clientX,t.clientY,a,i,d,t)},El=(t,s)=>a=>{t(a)&&s(nh(a))},di=(t,s,a,i,d)=>{const g=El(a,i);return t.dom.addEventListener(s,g,d),{unbind:Pt(oh,t,s,g,d)}},sm=(t,s,a,i)=>di(t,s,a,i,!1),jf=(t,s,a,i)=>di(t,s,a,i,!0),oh=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},Gc=(t,s)=>{ya(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},dd=(t,s)=>{cl(t).fold(()=>{ya(t).each(d=>{ni(d,s)})},i=>{Gc(i,s)})},sh=(t,s)=>{ji(t).fold(()=>{ni(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},ni=(t,s)=>{t.dom.appendChild(s.dom)},za=(t,s,a)=>{Nc(t,a).fold(()=>{ni(t,s)},i=>{Gc(i,s)})},md=(t,s)=>{Qe(s,a=>{ni(t,a)})},fd=t=>{t.dom.textContent="",Qe(Ma(t),s=>{Oi(s)})},Oi=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Fc=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return _o(a,i)},Ym=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Xm=t=>{const s=t===void 0?window:t;return Tc().browser.isFirefox()?A.none():A.from(s.visualViewport)},Jm=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),Qm=t=>{const s=t===void 0?window:t,a=s.document,i=Fc(be.fromDom(a));return Xm(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Jm(i.left,i.top,g,p)},d=>Jm(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},qi=()=>be.fromDom(document),rm=(t,s)=>t.view(s).fold(G([]),i=>{const d=t.owner(i),g=rm(t,d);return[i].concat(g)}),rh=(t,s)=>{const a=s.owner(t),i=rm(s,a);return A.some(i)};var am=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(be.fromDom)},owner:t=>Ra(t)});const Gf=t=>{const s=qi(),a=Fc(s);return rh(t,am).fold(Pt(Ns,t),d=>{const g=Sc(t),p=bo(d,(C,x)=>{const _=Sc(x);return{left:C.left+_.left,top:C.top+_.top}},{left:0,top:0});return _o(p.left+g.left+a.left,p.top+g.top+a.top)})},kl=(t,s,a)=>({point:t,width:s,height:a}),qf=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),ar=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),k=t=>{const s=Ns(t),a=hr(t),i=tn(t);return ar(s.left,s.top,a,i)},M=t=>{const s=Gf(t),a=hr(t),i=tn(t);return ar(s.left,s.top,a,i)},z=(t,s)=>{const a=Math.max(t.x,s.x),i=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,C=g-i;return ar(a,i,p,C)},fe=(t,s)=>An(s,(a,i)=>z(a,i),t),ge=()=>Qm(window);var Et=tinymce.util.Tools.resolve("tinymce.ThemeManager");const En=t=>{const s=g=>g(t),a=G(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:Zt,isError:Ln,map:g=>St.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},Zn=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Ln,isError:Zt,map:s,mapError:i=>St.error(i(t)),bind:s,exists:Ln,forall:Zt,getOr:ht,or:ht,getOrThunk:Uo,orThunk:Uo,getOrDie:he(String(t)),each:K,toOptional:A.none};return a},St={value:En,error:Zn,fromOption:(t,s)=>t.fold(()=>Zn(s),En)};var ks;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(ks||(ks={}));const Na=(t,s,a)=>t.stype===ks.Error?s(t.serror):a(t.svalue),mi=t=>{const s=[],a=[];return Qe(t,i=>{Na(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},cm=(t,s)=>t.stype===ks.Error?{stype:ks.Error,serror:s(t.serror)}:t,Kf=(t,s)=>t.stype===ks.Value?{stype:ks.Value,svalue:s(t.svalue)}:t,ll=(t,s)=>t.stype===ks.Value?s(t.svalue):t,fi=(t,s)=>t.stype===ks.Error?s(t.serror):t,Ic=t=>({stype:ks.Value,svalue:t}),Di=t=>({stype:ks.Error,serror:t}),xs={fromResult:t=>t.fold(Di,Ic),toResult:t=>Na(t,St.error,St.value),svalue:Ic,partition:mi,serror:Di,bind:ll,bindError:fi,map:Kf,mapError:cm,fold:Na},Ru=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),gd=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Ur=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},lb=(t,s)=>s,Sv=(t,s)=>Lt(t)&&Lt(s)?js(t,s):s,Mu=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)io(d,g)&&(a[g]=t(a[g],d[g]))}return a},js=Mu(Sv),Js=Mu(lb),Sa=()=>({tag:"required",process:{}}),hd=t=>({tag:"defaultedThunk",process:t}),pd=t=>hd(G(t)),im=()=>({tag:"option",process:{}}),bd=t=>({tag:"mergeWithThunk",process:t}),Ro=t=>bd(G(t)),ch=(t,s)=>t.length>0?xs.svalue(js(s,Js.apply(void 0,t))):xs.svalue(s),wp=t=>zt(xs.serror,Ge)(t),Yf={consolidateObj:(t,s)=>{const a=xs.partition(t);return a.errors.length>0?wp(a.errors):ch(a.values,s)},consolidateArr:t=>{const s=xs.partition(t);return s.errors.length>0?wp(s.errors):xs.svalue(s.values)}},ub=t=>Wt(t)&&is(t).length>100?" removed due to size":JSON.stringify(t,null,2),Xf=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):t;return Se(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},ul=(t,s)=>xs.serror([{path:t,getErrorInfo:s}]),db=(t,s,a)=>ul(t,()=>'Could not find valid *required* value for "'+s+'" in '+ub(a)),ih=(t,s)=>ul(t,()=>'Choice schema did not contain choice key: "'+s+'"'),mb=(t,s,a)=>ul(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+ub(s)),_l=(t,s)=>ul(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Sp=(t,s)=>ul(t,G(s)),Al=t=>{const s=(i,d)=>xs.bindError(t(d),g=>Sp(i,g)),a=G("val");return{extract:s,toString:a}},lm=Al(xs.svalue),Ev=(t,s,a,i)=>bt(s,a).fold(()=>db(t,a,s),i),lh=(t,s,a,i)=>{const d=bt(t,s).getOrThunk(()=>a(t));return i(d)},uh=(t,s,a)=>a(bt(t,s)),fb=(t,s,a,i)=>{const d=bt(t,s).map(g=>g===!0?a(t):g);return i(d)},dh=(t,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),p=C=>C.fold(()=>xs.svalue(A.none()),x=>{const _=d.extract(s.concat([i]),x);return xs.map(_,A.some)});switch(t.tag){case"required":return Ev(s,a,i,g);case"defaultedThunk":return lh(a,i,t.process,g);case"option":return uh(a,i,p);case"defaultedOptionThunk":return fb(a,i,t.process,p);case"mergeWithThunk":return lh(a,i,G({}),C=>{const x=js(t.process(a),C);return g(x)})}},Ec=(t,s,a)=>{const i={},d=[];for(const g of a)Ur(g,(p,C,x,_)=>{const D=dh(x,t,s,p,_);xs.fold(D,B=>{d.push(...B)},B=>{i[C]=B})},(p,C)=>{i[p]=C(s)});return d.length>0?xs.serror(d):xs.svalue(i)},mh=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),Ba=t=>is(aa(t,Xn)),kc=t=>{const s=vn(t),a=bo(t,(d,g)=>Ur(g,p=>js(d,{[p]:!0}),G(d)),{});return{extract:(d,g)=>{const p=ho(g)?[]:Ba(g),C=Dn(p,x=>!ca(a,x));return C.length===0?s.extract(d,g):_l(d,C)},toString:s.toString}},vn=t=>({extract:(i,d)=>Ec(i,d,t),toString:()=>`obj{
`+Se(t,d=>Ur(d,(g,p,C,x)=>g+" -> "+x.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Ut=t=>({extract:(i,d)=>{const g=Se(d,(p,C)=>t.extract(i.concat(["["+C+"]"]),p));return Yf.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Jf=(t,s)=>{const a=s!==void 0?s:ht;return{extract:(g,p)=>{const C=[];for(const x of t){const _=x.extract(g,p);if(_.stype===ks.Value)return{stype:ks.Value,svalue:a(_.svalue)};C.push(_)}return Yf.consolidateArr(C)},toString:()=>"oneOf("+Se(t,g=>g.toString()).join(", ")+")"}},oi=(t,s)=>{const a=(g,p)=>Ut(Al(t)).extract(g,p);return{extract:(g,p)=>{const C=is(p),x=a(g,C);return xs.bind(x,_=>{const D=Se(_,B=>Ru(B,B,Sa(),s));return vn(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},Qf=(t,s)=>{const a=Tl(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},fh=zt(Ut,vn),Ri=G(lm),gi=(t,s)=>Al(a=>{const i=typeof a;return t(a)?xs.svalue(a):xs.serror(`Expected type: ${s} but got: ${i}`)}),gh=gi(Nn,"number"),Wr=gi(Vt,"string"),ef=gi(ho,"boolean"),eg=gi(mt,"function"),ft=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>ft(t[s]));default:return!1}},kv=Al(t=>ft(t)?xs.svalue(t):xs.serror("Expected value to be acceptable for sending via postMessage")),gb=(t,s,a,i)=>bt(a,i).fold(()=>mb(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),Mi=(t,s)=>({extract:(d,g)=>bt(g,t).fold(()=>ih(d,t),C=>gb(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+is(s)}),tf=()=>Ut(lm),vd=t=>Al(s=>t(s).fold(xs.serror,xs.svalue)),Pr=(t,s)=>oi(a=>xs.fromResult(t(a)),s),hb=(t,s,a)=>{const i=s.extract([t],a);return xs.mapError(i,d=>({input:a,errors:d}))},Bs=(t,s,a)=>xs.toResult(hb(t,s,a)),Ts=t=>t.fold(s=>{throw new Error(nf(s))},ht),_c=(t,s,a)=>Ts(Bs(t,s,a)),nf=t=>`Errors: 
`+Xf(t.errors).join(`
`)+`

Input object: `+ub(t.input),ia=(t,s)=>Mi(t,ls(s,vn)),yd=(t,s)=>Qf(t,s),la=Ru,Vs=gd,tg=t=>vd(s=>po(t,s)?St.value(s):St.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Je=t=>la(t,t,Sa(),Ri()),Ki=(t,s)=>la(t,t,Sa(),s),hh=t=>Ki(t,gh),qr=t=>Ki(t,Wr),Ol=(t,s)=>la(t,t,Sa(),tg(s)),xp=t=>Ki(t,ef),dl=t=>Ki(t,eg),_v=(t,s)=>la(t,t,im(),Al(a=>xs.serror("The field: "+t+" is forbidden. "+s))),Nu=(t,s)=>la(t,t,Sa(),vn(s)),pb=(t,s)=>la(t,t,Sa(),fh(s)),hi=(t,s)=>la(t,t,Sa(),Ut(s)),Cs=t=>la(t,t,im(),Ri()),su=(t,s)=>la(t,t,im(),s),ng=t=>su(t,gh),Lc=t=>su(t,Wr),Dl=(t,s)=>su(t,tg(s)),Ac=t=>su(t,eg),bb=(t,s)=>su(t,Ut(s)),Hc=(t,s)=>su(t,vn(s)),Bu=(t,s)=>su(t,kc(s)),_e=(t,s)=>la(t,t,pd(s),Ri()),si=(t,s,a)=>la(t,t,pd(s),a),ru=(t,s)=>si(t,s,gh),pi=(t,s)=>si(t,s,Wr),Ni=(t,s,a)=>si(t,s,tg(a)),Qa=(t,s)=>si(t,s,ef),Pa=(t,s)=>si(t,s,eg),Av=(t,s)=>si(t,s,kv),ph=(t,s,a)=>si(t,s,Ut(a)),w=(t,s,a)=>si(t,s,vn(a)),S=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Z={generate:t=>{if(!Oo(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return Qe(t,(i,d)=>{const g=is(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],C=i[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Oo(C))throw new Error("case arguments must be an array");s.push(p),a[p]=(...x)=>{const _=x.length;if(_!==C.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+C.length+" ("+C+"), got "+_);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,x)},match:B=>{const F=is(B);if(s.length!==F.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+F.join(","));if(!Io(s,X=>po(F,X)))throw new Error("Not all branches were specified when using match. Specified: "+F.join(", ")+`
Required: `+s.join(", "));return B[p].apply(null,x)},log:B=>{console.log(B,{constructors:s,constructor:p,params:x})}}}}),a}};Z.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ie=t=>{const s=[],a=[];return Qe(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},je=(t,s)=>{const a={};return ts(t,(i,d)=>{po(s,d)||(a[d]=i)}),a},dt=(t,s)=>({[t]:s}),Jt=t=>{const s={};return Qe(t,a=>{s[a.key]=a.value}),s},qn=(t,s)=>je(t,s),no=(t,s)=>dt(t,s),Ps=t=>Jt(t),qo=(t,s)=>t.length===0?St.value(s):St.value(js(s,Js.apply(void 0,t))),pr=t=>St.error(Ge(t)),Bi=(t,s)=>{const a=ie(t);return a.errors.length>0?pr(a.errors):qo(a.values,s)},uc=t=>mt(t)?t:Ln,Rl=(t,s,a)=>{let i=t.dom;const d=uc(a);for(;i.parentNode;){i=i.parentNode;const g=be.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return A.none()},au=(t,s,a)=>{const i=s(t),d=uc(a);return i.orThunk(()=>d(t)?A.none():Rl(t,s,d))},um=(t,s)=>ms(t.element,s.event.target),Cd={can:Zt,abort:Ln,run:K},Ml=t=>{if(!ca(t,"can")&&!ca(t,"abort")&&!ca(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Cd,...t}},wd=(t,s)=>(...a)=>An(t,(i,d)=>i&&s(d).apply(void 0,a),!0),bh=(t,s)=>(...a)=>An(t,(i,d)=>i||s(d).apply(void 0,a),!1),og=t=>mt(t)?{can:Zt,abort:Ln,run:t}:t,of=t=>{const s=wd(t,d=>d.can),a=bh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{Qe(t,g=>{g.run.apply(void 0,d)})}}},Ua=G,cu=Ua("touchstart"),Ko=Ua("touchmove"),Gs=Ua("touchend"),qc=Ua("touchcancel"),ua=Ua("mousedown"),bi=Ua("mousemove"),sg=Ua("mouseout"),Pu=Ua("mouseup"),ml=Ua("mouseover"),sf=Ua("focusin"),Ov=Ua("focusout"),Pi=Ua("keydown"),Sw=Ua("keyup"),$i=Ua("input"),$u=Ua("change"),fl=Ua("click"),vb=Ua("transitioncancel"),rg=Ua("transitionend"),xw=Ua("transitionstart"),ek=Ua("selectstart"),xa=t=>G("alloy."+t),yb={tap:xa("tap")},Sd=xa("focus"),Dv=xa("blur.post"),Rv=xa("paste.post"),ag=xa("receive"),qs=xa("execute"),xd=xa("focus.item"),Tp=yb.tap,Mv=xa("longpress"),vh=xa("sandbox.close"),Ep=xa("typeahead.cancel"),kp=xa("system.init"),tk=xa("system.touchmove"),Nv=xa("system.touchend"),Bv=xa("system.scroll"),dm=xa("system.resize"),Td=xa("system.attached"),mm=xa("system.detached"),rf=xa("system.dismissRequested"),_p=xa("system.repositionRequested"),Cb=xa("focusmanager.shifted"),fm=xa("slotcontainer.visibility"),Tw=xa("system.external.element.scroll"),Ew=xa("change.tab"),Pv=xa("dismiss.tab"),kw=xa("highlight"),Ap=xa("dehighlight"),fs=(t,s)=>{wb(t,t.element,s,{})},bn=(t,s,a)=>{wb(t,t.element,s,a)},gm=t=>{fs(t,qs())},cg=(t,s,a)=>{wb(t,s,a,{})},wb=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},_w=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},$v=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},cr=t=>Ps(t),Aw=(t,s)=>({key:t,value:Ml({abort:s})}),Fv=(t,s)=>({key:t,value:Ml({can:s})}),Ow=t=>({key:t,value:Ml({run:(s,a)=>{a.event.prevent()}})}),st=(t,s)=>({key:t,value:Ml({run:s})}),Iv=(t,s,a)=>({key:t,value:Ml({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),Lv=t=>s=>st(t,s),ig=t=>s=>({key:t,value:Ml({run:(a,i)=>{um(a,i)&&s(a,i)}})}),Sb=(t,s)=>st(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{$v(d,d.element,t,i)})}),hm=(t,s,a)=>{const i=s.partUids[a];return Sb(t,i)},Op=(t,s)=>st(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>au(d.target,C=>a.getSystem().getByDom(C).toOptional(),Ln).getOr(a));s(a,g,i)}),lg=t=>st(t,(s,a)=>{a.cut()}),Hv=t=>st(t,(s,a)=>{a.stop()}),iu=(t,s)=>ig(t)(s),Zr=ig(Td()),Fi=ig(mm()),Dp=ig(kp()),Fu=Lv(qs()),Dw=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Ma(be.fromDom(i))},Vv=t=>t.dom.innerHTML,af=(t,s)=>{const i=Ra(t).dom,d=be.fromDom(i.createDocumentFragment()),g=Dw(s,i);md(d,g),fd(t),ni(t,d)},zv=t=>{const s=be.fromTag("div"),a=be.fromDom(t.dom.cloneNode(!0));return ni(s,a),Vv(s)},Rw=(t,s)=>be.fromDom(t.dom.cloneNode(s)),pm=t=>Rw(t,!1),cf=t=>{if(W(t))return"#shadow-root";{const s=pm(t);return zv(s)}},Iu=t=>cf(t),xb=(t,s,a)=>ms(s,t.element)&&!ms(s,a),nk=cr([Fv(Sd(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return xb(t,i,d)?(console.warn(Sd()+` did not get interpreted by the desired target. 
Originator: `+Iu(i)+`
Target: `+Iu(d)+`
Check the `+Sd()+" event handlers"),!1):!0})]);var yh=Object.freeze({__proto__:null,events:nk});let ec=0;const nn=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return ec++,t+"_"+i+ec+String(a)},Uv=G("alloy-id-"),Mw=G("data-alloy-id"),Kc=Uv(),Wv=Mw(),Nw=(t,s)=>{const a=nn(Kc+t);return Zv(s,a),a},Zv=(t,s)=>{Object.defineProperty(t.dom,Wv,{value:s,writable:!0})},Ed=t=>{const s=Rn(t)?t.dom[Wv]:null;return A.from(s)},gl=t=>nn(t),Tb=ht,ug=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Iu(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:G("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Ln}},ok=ug(),Bw=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Rp(p.slice(0,1).concat(p.slice(3)))}),t},Rp=t=>Se(t,s=>wr(s,"/*")?s.substring(0,s.length-2):s),Ch=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Rp(g)}),t},wh=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Rp(g.slice(1))}),t},dg=nn("alloy-premade"),Pw=t=>(Object.defineProperty(t.element.dom,dg,{value:t.uid,writable:!0}),no(dg,t)),Eb=t=>io(t.dom,dg),mg=t=>bt(t,dg),kb=t=>wh((s,...a)=>t(s.getApis(),s,...a),t),Yi={init:()=>Ii({readState:G("No State required")})},Ii=t=>t,bm=(t,s)=>{const a=Se(s,d=>Hc(d.name(),[Je("config"),_e("state",Yi)])),i=Bs("component.behaviours",vn(a),t.behaviours).fold(d=>{throw new Error(nf(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},ht);return{list:s,data:ls(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return G(g)})}},_b=t=>t.list,$w=t=>t.data,Mp=(t,s)=>{const a={};return ts(t,(i,d)=>{ts(i,(g,p)=>{const C=bt(a,p).getOr([]);a[p]=C.concat([s(d,g)])})}),a},Lu=t=>({classes:_n(t.classes)?[]:t.classes,attributes:_n(t.attributes)?{}:t.attributes,styles:_n(t.styles)?{}:t.styles}),Ab=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Sh=(t,s,a,i)=>{const d={...s};Qe(a,D=>{d[D.name()]=D.exhibit(t,i)});const g=Mp(d,(D,B)=>({name:D,modification:B})),p=D=>bo(D,(B,F)=>({...F.modification,...B}),{}),C=bo(g.classes,(D,B)=>B.modification.concat(D),[]),x=p(g.attributes),_=p(g.styles);return Lu({classes:C,attributes:x,styles:_})},kd=(t,s,a,i)=>{try{const d=ur(a,(g,p)=>{const C=g[s],x=p[s],_=i.indexOf(C),D=i.indexOf(x);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(i,null,2));return _<D?-1:D<_?1:0});return St.value(d)}catch(d){return St.error([d])}},jv=(t,s)=>({handler:t,purpose:s}),sk=(t,s)=>({cHandler:t,purpose:s}),Fw=(t,s)=>sk(Pt.apply(void 0,[t.handler].concat(s)),t.purpose),Gv=t=>t.cHandler,br=(t,s)=>({name:t,handler:s}),rk=(t,s)=>{const a={};return Qe(t,i=>{a[i.name()]=i.handlers(s)}),a},Iw=(t,s,a)=>{const i={...a,...rk(s,t)};return Mp(i,br)},ak=(t,s,a,i)=>{const d=Iw(t,a,i);return Wa(d,s)},Ob=t=>{const s=og(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},xh=(t,s)=>St.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Se(s,a=>a.name),null,2)]),vm=(t,s,a)=>{const i=s[a];return i?kd("Event: "+a,"name",t,i).map(d=>{const g=Se(d,p=>p.handler);return of(g)}):xh(a,t)},Wa=(t,s)=>{const a=mr(t,(i,d)=>(i.length===1?St.value(i[0].handler):vm(i,s,d)).map(p=>{const C=Ob(p),x=i.length>1?Dn(s[d],_=>os(i,D=>D.name===_)).join(" > "):i[0].name;return no(d,jv(C,x))}));return Bi(a,{})},ym="alloy.base.behaviour",qv=vn([la("dom","dom",Sa(),vn([Je("tag"),_e("styles",{}),_e("classes",[]),_e("attributes",{}),Cs("value"),Cs("innerHtml")])),Je("components"),Je("uid"),_e("events",{}),_e("apis",{}),la("eventOrder","eventOrder",Ro({[qs()]:["disabling",ym,"toggling","typeaheadevents"],[Sd()]:[ym,"focusing","keying"],[kp()]:[ym,"disabling","toggling","representing"],[$i()]:[ym,"representing","streaming","invalidating"],[mm()]:[ym,"representing","item-events","tooltipping"],[ua()]:["focusing",ym,"item-type-events"],[cu()]:["focusing",ym,"item-type-events"],[ml()]:["item-type-events","tooltipping"],[ag()]:["receiving","reflecting","tooltipping"]}),Ri()),Cs("domModification")]),Za=t=>Bs("custom.definition",qv,t),Kv=t=>({...t.dom,uid:t.uid,domChildren:Se(t.components,s=>s.element)}),Db=t=>t.domModification.fold(()=>Lu({}),Lu),MO=t=>t.events,Lw=(t,s)=>{const a=Qr(t,s);return a===void 0||a===""?[]:a.split(" ")},lf=(t,s,a)=>{const d=Lw(t,s).concat([a]);return zn(t,s,d.join(" ")),!0},uf=(t,s,a)=>{const i=Dn(Lw(t,s),d=>d!==a);return i.length>0?zn(t,s,i.join(" ")):ne(t,s),!1},Rb=t=>t.dom.classList!==void 0,Hw=t=>Lw(t,"class"),NO=(t,s)=>lf(t,"class",s),Hu=(t,s)=>uf(t,"class",s),$s=(t,s)=>{Rb(t)?t.dom.classList.add(s):NO(t,s)},Vw=t=>{(Rb(t)?t.dom.classList:Hw(t)).length===0&&ne(t,"class")},da=(t,s)=>{Rb(t)?t.dom.classList.remove(s):Hu(t,s),Vw(t)},tc=(t,s)=>Rb(t)&&t.dom.classList.contains(s),Nl=(t,s)=>{Qe(s,a=>{$s(t,a)})},vi=(t,s)=>{Qe(s,a=>{da(t,a)})},fg=(t,s)=>Io(s,a=>tc(t,a)),Th=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},Cm=t=>Rb(t)?Th(t):Hw(t),hl=t=>t.dom.value,lu=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Eh=(t,s,a)=>Nc(t,s).map(d=>{if(a.exists(p=>!ms(p,d))){const p=a.map(Ms).getOr("span"),C=be.fromTag(p);return Gc(d,C),C}else return d}),Np=(t,s,a)=>{a.fold(()=>ni(t,s),i=>{ms(i,s)||(Gc(i,s),Oi(i))})},Yv=(t,s,a)=>{const i=Se(s,a),d=Ma(t);return Qe(d.slice(i.length),Oi),i},zw=(t,s,a,i)=>{const d=Nc(t,s),g=i(a,d),p=Eh(t,s,d);return Np(t,g.element,p),g},Uw=(t,s,a)=>Yv(t,s,(i,d)=>zw(t,d,i,a)),kh=(t,s)=>Yv(t,s,(a,i)=>{const d=Nc(t,i);return Np(t,a,d),a}),Xv=(t,s)=>{const a=is(t),i=is(s),d=Rt(i,a),g=dr(t,(p,C)=>!io(s,C)||p!==s[C]).t;return{toRemove:d,toSet:g}},ck=(t,s)=>{const{class:a,style:i,...d}=Be(s),{toSet:g,toRemove:p}=Xv(t.attributes,d),C=()=>{Qe(p,Pe=>ne(s,Pe)),es(s,g)},x=ta(s),{toSet:_,toRemove:D}=Xv(t.styles,x),B=()=>{Qe(D,Pe=>xo(s,Pe)),Hr(s,_)},F=Cm(s),V=Rt(F,t.classes),X=Rt(t.classes,F),ue=()=>{Nl(s,X),vi(s,V)},Oe=Pe=>{af(s,Pe)},Ce=()=>{const Pe=t.domChildren;kh(s,Pe)},Ae=()=>{const Pe=s,He=t.value.getOrUndefined();He!==hl(Pe)&&lu(Pe,He??"")};return C(),ue(),B(),t.innerHtml.fold(Ce,Oe),Ae(),s},ik=t=>{const s=be.fromTag(t.tag);es(s,t.attributes),Nl(s,t.classes),Hr(s,t.styles),t.innerHtml.each(i=>af(s,i));const a=t.domChildren;return md(s,a),t.value.each(i=>{lu(s,i)}),s},Ww=(t,s)=>{try{const a=ck(t,s);return A.some(a)}catch{return A.none()}},Zw=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Jv=(t,s)=>{const a=d=>Ms(d)===t.tag&&!Zw(t)&&!Eb(d),i=s.filter(a).bind(d=>Ww(t,d)).getOrThunk(()=>ik(t));return Zv(i,t.uid),i},jw=t=>{const s=bt(t,"behaviours").getOr({});return xe(is(s),a=>{const i=s[a];return Xn(i)?[i.me]:[]})},lk=(t,s)=>bm(t,s),Qv=t=>{const s=jw(t);return lk(t,s)},gg=(t,s,a)=>{const i=Kv(t),d=Db(t),g={"alloy.base.modification":d},p=s.length>0?Sh(a,g,s,i):d;return Ab(i,p)},ey=(t,s,a)=>{const i={"alloy.base.behaviour":MO(t)};return ak(a,t.eventOrder,s,i).getOrDie()},uk=(t,s)=>{const a=()=>Pe,i=S(ok),d=Ts(Za(t)),g=Qv(t),p=_b(g),C=$w(g),x=gg(d,p,C),_=Jv(x,s),D=ey(d,p,C),B=S(d.components),F=He=>{i.set(He)},V=()=>{i.set(ug(a))},X=()=>{const He=Ma(_),kt=xe(He,at=>i.get().getByDom(at).fold(()=>[],$n));B.set(kt)},ue=He=>{const kt=C;return(mt(kt[He.name()])?kt[He.name()]:()=>{throw new Error("Could not find "+He.name()+" in "+JSON.stringify(t,null,2))})()},Oe=He=>mt(C[He.name()]),Ce=()=>d.apis,Ae=He=>C[He]().map(kt=>kt.state.readState()).getOr("not enabled"),Pe={uid:t.uid,getSystem:i.get,config:ue,hasConfigured:Oe,spec:t,readState:Ae,getApis:Ce,connect:F,disconnect:V,element:_,syncComponents:X,components:B.get,events:D};return Pe},dk=(t,s)=>{const a=bt(t,"components").getOr([]);return s.fold(()=>Se(a,Yc),i=>Se(a,(d,g)=>Mb(d,Nc(i,g))))},Gw=(t,s)=>{const{events:a,...i}=Tb(t),d=dk(i,s),g={...i,events:{...yh,...a},components:d};return St.value(uk(g,s))},kr=t=>{const s=be.fromText(t);return df({element:s})},df=t=>{const s=_c("external.component",kc([Je("element"),Cs("uid")]),t),a=S(ug()),i=C=>{a.set(C)},d=()=>{a.set(ug(()=>p))},g=s.uid.getOrThunk(()=>gl("external"));Zv(s.element,g);const p={uid:g,getSystem:a.get,config:A.none,hasConfigured:Ln,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:G("No state"),syncComponents:K,components:G([]),events:{}};return Pw(p)},hg=gl,qw=t=>io(t,"uid"),Mb=(t,s)=>mg(t).getOrThunk(()=>{const a=qw(t)?t:{uid:hg(""),...t};return Gw(a,s).getOrDie()}),Yc=t=>Mb(t,A.none()),Li=Pw;var pg=(t,s,a,i,d)=>t(a,i)?A.some(a):mt(d)&&d(a)?A.none():s(a,i,d);const Nb=(t,s,a)=>{let i=t.dom;const d=mt(a)?a:Ln;for(;i.parentNode;){i=i.parentNode;const g=be.fromDom(i);if(s(g))return A.some(g);if(d(g))break}return A.none()},ty=(t,s,a)=>pg((d,g)=>g(d),Nb,t,s,a),Kw=(t,s)=>{const a=d=>s(be.fromDom(d));return Ue(t.dom.childNodes,a).map(be.fromDom)},Yw=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=be.fromDom(i.childNodes[d]);if(s(g))return A.some(g);const p=a(i.childNodes[d]);if(p.isSome())return p}return A.none()};return a(t.dom)},Xw=(t,s,a)=>ty(t,s,a).isSome(),uu=(t,s,a)=>Nb(t,i=>Rr(i,s),a),wm=(t,s)=>Kw(t,a=>Rr(a,s)),$r=(t,s)=>Wi(s,t),_d=(t,s,a)=>pg((d,g)=>Rr(d,g),uu,t,s,a),Vu="aria-controls",mk=t=>ty(t,a=>{if(!Rn(a))return!1;const i=Qr(a,"id");return i!==void 0&&i.indexOf(Vu)>-1}).bind(a=>{const i=Qr(a,"id"),d=Le(a);return $r(d,`[${Vu}="${i}"]`)}),Jw=()=>{const t=nn(Vu);return{id:t,link:i=>{zn(i,Vu,t)},unlink:i=>{ne(i,Vu)}}},ny=(t,s)=>mk(s).exists(a=>bg(t,a)),bg=(t,s)=>Xw(s,a=>ms(a,t.element),Ln)||ny(t,s),oy="unknown";var _h;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(_h||(_h={}));const vg=S({}),fk=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();po(["mousemove","mouseover","mouseout",kp()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Se(a,g=>po(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Iu(g.target)+")":g.outcome)})}}},Bp=(t,s,a)=>{switch(bt(vg.get(),t).orThunk(()=>{const d=is(vg.get());return Ss(d,g=>t.indexOf(g)>-1?A.some(vg.get()[g]):A.none())}).getOr(_h.NORMAL)){case _h.NORMAL:return a(ry());case _h.LOGGING:{const d=fk(t,s),g=a(d);return d.write(),g}case _h.STOP:return!0}},Pp=["alloy/data/Fields","alloy/debugging/Debugging"],sy=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Ue(s,a=>a.indexOf("alloy")>0&&!os(Pp,i=>a.indexOf(i)>-1)).getOr(oy)}else return oy},Bb={logEventCut:K,logEventStopped:K,logNoParent:K,logEventNoHandlers:K,logEventResponse:K,write:K},$p=(t,s,a)=>Bp(t,s,a),ry=G(Bb),mf=G([Je("menu"),Je("selectedMenu")]),Ah=G([Je("item"),Je("selectedItem")]);G(vn(Ah().concat(mf())));const Qw=G(vn(Ah())),eS=Nu("initSize",[Je("numColumns"),Je("numRows")]),tS=()=>Ki("markers",Qw()),zu=()=>Nu("markers",[Je("backgroundMenu")].concat(mf()).concat(Ah())),Bl=t=>Nu("markers",Se(t,Je)),Fp=(t,s,a)=>(sy(),la(s,s,a,vd(i=>St.value((...d)=>i.apply(void 0,d))))),Ee=t=>Fp("onHandler",t,pd(K)),_r=t=>Fp("onKeyboardHandler",t,pd(A.none)),yg=t=>Fp("onHandler",t,Sa()),ay=t=>Fp("onKeyboardHandler",t,Sa()),ir=(t,s)=>Vs(t,G(s)),du=t=>Vs(t,ht),Ip=G(eS),nc=(t,s,a,i,d,g,p,C=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:C}),Sm=Z.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),cy=(t,s,a,i,d,g,p,C,x)=>t.fold(s,a,i,d,g,p,C,x),gk=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),iy=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Lp=Sm.southeast,Cg=Sm.southwest,ly=Sm.northeast,Pb=Sm.northwest,yi=Sm.south,Hp=Sm.north,uy=Sm.east,Vp=Sm.west,Oh=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},Xi=(t,s,a)=>Math.min(Math.max(t,s),a),hk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},dc=(t,s)=>Tr(["left","right","top","bottom"],a=>bt(s,a).map(i=>hk(t,i))),nS=(t,s,a)=>{const i=(x,_)=>s[x].map(D=>{const B=x==="top"||x==="bottom",F=B?a.top:a.left,X=(x==="left"||x==="top"?Math.max:Math.min)(D,_)+F;return B?Xi(X,t.y,t.bottom):Xi(X,t.x,t.right)}).getOr(_),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),C=i("bottom",t.bottom);return ar(d,g,p-d,C-g)},xm="layout",zp=t=>t.x,oS=(t,s)=>t.x+t.width/2-s.width/2,dy=(t,s)=>t.x+t.width-s.width,my=(t,s)=>t.y-s.height,fy=t=>t.y+t.height,gy=(t,s)=>t.y+t.height/2-s.height/2,sS=t=>t.x+t.width,pk=(t,s)=>t.x-s.width,mc=(t,s,a)=>nc(zp(t),fy(t),a.southeast(),Lp(),"southeast",dc(t,{left:1,top:3}),xm),ja=(t,s,a)=>nc(dy(t,s),fy(t),a.southwest(),Cg(),"southwest",dc(t,{right:0,top:3}),xm),Ci=(t,s,a)=>nc(zp(t),my(t,s),a.northeast(),ly(),"northeast",dc(t,{left:1,bottom:2}),xm),Ji=(t,s,a)=>nc(dy(t,s),my(t,s),a.northwest(),Pb(),"northwest",dc(t,{right:0,bottom:2}),xm),Kr=(t,s,a)=>nc(oS(t,s),my(t,s),a.north(),Hp(),"north",dc(t,{bottom:2}),xm),Oc=(t,s,a)=>nc(oS(t,s),fy(t),a.south(),yi(),"south",dc(t,{top:3}),xm),mu=(t,s,a)=>nc(sS(t),gy(t,s),a.east(),uy(),"east",dc(t,{left:0}),xm),hy=(t,s,a)=>nc(pk(t,s),gy(t,s),a.west(),Vp(),"west",dc(t,{right:1}),xm),rS=()=>[mc,ja,Ci,Ji,Oc,Kr,mu,hy],$b=()=>[ja,mc,Ji,Ci,Oc,Kr,mu,hy],Fb=()=>[Ci,Ji,mc,ja,Kr,Oc],Ib=()=>[Ji,Ci,ja,mc,Kr,Oc],Up=()=>[mc,ja,Ci,Ji,Oc,Kr],Lb=()=>[ja,mc,Ji,Ci,Oc,Kr],py=(t,s)=>s.universal?t:Dn(t,a=>po(s.channels,a));var Hb=Object.freeze({__proto__:null,events:t=>cr([st(ag(),(s,a)=>{const i=t.channels,d=is(i),g=a,p=py(d,g);Qe(p,C=>{const x=i[C],_=x.schema,D=_c("channel["+C+`] data
Receiver: `+Iu(s.element),_,g.data);x.onReceive(s,D)})})])}),by=[Ki("channels",Pr(St.value,kc([yg("onReceive"),_e("schema",Ri())])))];const Vb=(t,s,a)=>Fu(i=>{a(i,t,s)}),vy=(t,s,a)=>Dp((i,d)=>{a(i,t,s)}),aS=(t,s,a,i,d,g)=>{const p=kc(t),C=Hc(s,[Bu("config",t)]);return iS(p,C,s,a,i,d,g)},sn=(t,s,a,i,d,g)=>{const p=t,C=Hc(s,[su("config",t)]);return iS(p,C,s,a,i,d,g)},yy=(t,s,a)=>Bw((d,...g)=>{const p=[d].concat(g);return d.config({name:G(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},C=>{const x=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,C.config,C.state].concat(x))})},a,s),cS=t=>({key:t,value:void 0}),iS=(t,s,a,i,d,g,p)=>{const C=B=>ca(B,a)?B[a]():A.none(),x=ls(d,(B,F)=>yy(a,B,F)),D={...ls(g,(B,F)=>Ch(B,F)),...x,revoke:Pt(cS,a),config:B=>{const F=_c(a+"-config",t,B);return{key:a,value:{config:F,me:D,configAsRaw:Tl(()=>_c(a+"-config",t,B)),initialConfig:B,state:p}}},schema:G(s),exhibit:(B,F)=>La(C(B),bt(i,"exhibit"),(V,X)=>X(F,V.config,V.state)).getOrThunk(()=>Lu({})),name:G(a),handlers:B=>C(B).map(F=>bt(i,"events").getOr(()=>({}))(F.config,F.state)).getOr({})};return D},yt=t=>Ps(t),bk=kc([Je("fields"),Je("name"),_e("active",{}),_e("apis",{}),_e("state",Yi),_e("extra",{})]),fc=t=>{const s=_c("Creating behaviour: "+t.name,bk,t);return aS(s.fields,s.name,s.active,s.apis,s.extra,s.state)},vk=kc([Je("branchKey"),Je("branches"),Je("name"),_e("active",{}),_e("apis",{}),_e("state",Yi),_e("extra",{})]),lS=t=>{const s=_c("Creating behaviour: "+t.name,vk,t);return sn(ia(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},uS=G(void 0),Pl=fc({fields:by,name:"receiving",active:Hb});var Wp=Object.freeze({__proto__:null,exhibit:(t,s)=>Lu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const fu=t=>t.dom.focus(),Cy=t=>t.dom.blur(),Zp=t=>{const s=Le(t).dom;return t.dom===s.activeElement},Ad=(t=qi())=>A.from(t.dom.activeElement).map(be.fromDom),Uu=t=>Ad(Le(t)).filter(s=>t.dom.contains(s.dom)),zb=(t,s)=>{const a=Le(s),i=Ad(a).bind(g=>{const p=C=>ms(g,C);return p(s)?A.some(s):Yw(s,p)}),d=t(s);return i.each(g=>{Ad(a).filter(p=>ms(p,g)).fold(()=>{fu(g)},K)}),d},Fl=(t,s,a,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},yk=t=>({...t,position:A.some(t.position)}),Ub=(t,s)=>{ea(t,yk(s))},Wb=Z.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),ff=(t,s,a,i,d,g)=>{const p=s.rect,C=p.x-a,x=p.y-i,_=p.width,D=p.height,B=d-(C+_),F=g-(x+D),V=A.some(C),X=A.some(x),ue=A.some(B),Oe=A.some(F),Ce=A.none();return cy(s.direction,()=>Fl(t,V,X,Ce,Ce),()=>Fl(t,Ce,X,ue,Ce),()=>Fl(t,V,Ce,Ce,Oe),()=>Fl(t,Ce,Ce,ue,Oe),()=>Fl(t,V,X,Ce,Ce),()=>Fl(t,V,Ce,Ce,Oe),()=>Fl(t,V,X,Ce,Ce),()=>Fl(t,Ce,X,ue,Ce))},dS=(t,s)=>t.fold(()=>{const a=s.rect;return Fl("absolute",A.some(a.x),A.some(a.y),A.none(),A.none())},(a,i,d,g)=>ff("absolute",s,a,i,d,g),(a,i,d,g)=>ff("fixed",s,a,i,d,g)),wy=(t,s)=>{const a=Pt(Gf,s),i=t.fold(a,a,()=>{const p=Fc();return Gf(s).translate(-p.left,-p.top)}),d=hr(s),g=tn(s);return ar(i.left,i.top,d,g)},Ck=(t,s)=>s.fold(()=>t.fold(ge,ge,ar),a=>t.fold(G(a),G(a),()=>{const i=mS(t,a.x,a.y);return ar(i.left,i.top,a.width,a.height)})),mS=(t,s,a)=>{const i=_o(s,a),d=()=>{const g=Fc();return i.translate(-g.left,-g.top)};return t.fold(G(i),G(i),d)},Dh=(t,s,a,i)=>t.fold(s,a,i);Wb.none;const gc=Wb.relative,wk=Wb.fixed,wg=(t,s)=>({anchorBox:t,origin:s}),fS=(t,s)=>wg(t,s),Zb="data-alloy-placement",Sk=(t,s)=>{zn(t,Zb,s)},Sy=t=>P(t,Zb),xk=t=>ne(t,Zb),jp=Z.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),gS=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:C,right:x,bottom:_,width:D,height:B}=t,F=p>=a&&p<=d,V=C>=i&&C<=g,X=F&&V,ue=x<=d&&x>=a,Oe=_<=g&&_>=i,Ce=ue&&Oe,Ae=Math.min(D,p>=a?d-p:x-a),Pe=Math.min(B,C>=i?g-C:_-i);return{originInBounds:X,sizeInBounds:Ce,visibleW:Ae,visibleH:Pe}},hS=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:C,width:x,height:_}=t,D=Math.max(a,d-x),B=Math.max(i,g-_),F=Xi(p,a,D),V=Xi(C,i,B),X=Math.min(F+x,d)-F,ue=Math.min(V+_,g)-V;return ar(F,V,X,ue)},xy=(t,s,a)=>{const i=G(s.bottom-a.y),d=G(a.bottom-s.y),g=gk(t,d,d,i),p=G(s.right-a.x),C=G(a.right-s.x);return{maxWidth:iy(t,C,C,p),maxHeight:g}},Ty=(t,s,a,i)=>{const d=t.bubble,g=d.offset,p=nS(i,t.restriction,g),C=t.x+g.left,x=t.y+g.top,_=ar(C,x,s,a),{originInBounds:D,sizeInBounds:B,visibleW:F,visibleH:V}=gS(_,p),X=D&&B,ue=X?_:hS(_,p),Oe=ue.width>0&&ue.height>0,{maxWidth:Ce,maxHeight:Ae}=xy(t.direction,ue,i),Pe={rect:ue,maxHeight:Ae,maxWidth:Ce,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:x};return X||t.alwaysFit?jp.fit(Pe):jp.nofit(Pe,F,V,Oe)},pS=(t,s,a,i,d,g)=>{const p=i.width,C=i.height,x=(D,B,F,V,X)=>{const ue=D(a,i,d,t,g),Oe=Ty(ue,p,C,g);return Oe.fold(G(Oe),(Ce,Ae,Pe,He)=>(X===He?Pe>V||Ae>F:!X&&He)?Oe:jp.nofit(B,F,V,X))};return An(s,(D,B)=>{const F=Pt(x,B);return D.fold(G(D),F)},jp.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Lp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(ht,ht)},Od=t=>{const s=S(A.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(A.some(C))}}},jb=()=>Od(t=>t.destroy()),Il=()=>Od(t=>t.unbind()),Qs=()=>{const t=Od(K);return{...t,on:a=>t.get().each(a)}},Rh=Zt,ri=(t,s,a)=>sm(t,s,Rh,a),Ey=(t,s,a)=>jf(t,s,Rh,a),bS=nh,vS=["top","bottom","right","left"],Gp="data-alloy-transition-timer",ky=(t,s)=>fg(t,s.classes),yS=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),CS=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return Rs(s,(i,d)=>{const g=t[d].map(a),p=i.map(a);return!ac(g,p)}).isSome()},Tk=t=>{const s=g=>{const C=et(t,g).split(/\s*,\s*/);return Dn(C,Ie)},a=g=>{if(Vt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return wr(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return An(d,(g,p,C)=>{const x=a(i[C])+a(p);return Math.max(g,x)},0)},Ek=(t,s)=>{const a=Il(),i=Il();let d;const g=_=>{var D;const B=(D=_.raw.pseudoElement)!==null&&D!==void 0?D:"";return ms(_.target,t)&&Ne(B)&&po(vS,_.raw.propertyName)},p=_=>{if(So(_)||g(_)){a.clear(),i.clear();const D=_==null?void 0:_.raw.type;(So(D)||D===rg())&&(clearTimeout(d),ne(t,Gp),vi(t,s.classes))}},C=ri(t,xw(),_=>{g(_)&&(C.unbind(),a.set(ri(t,rg(),p)),i.set(ri(t,vb(),p)))}),x=Tk(t);requestAnimationFrame(()=>{d=setTimeout(p,x+17),zn(t,Gp,d)})},kk=(t,s)=>{Nl(t,s.classes),P(t,Gp).each(a=>{clearTimeout(parseInt(a,10)),ne(t,Gp)}),Ek(t,s)},_k=(t,s,a,i,d,g)=>{const p=yS(i,d,g);if(p||ky(t,i)){Kt(t,"position",a.position);const C=wy(s,t),x=dS(s,{...d,rect:C}),_=Tr(vS,D=>x[D]);CS(a,_)&&(ea(t,_),p&&kk(t,i),Y(t))}else vi(t,i.classes)},Mh=t=>({width:hr(t),height:tn(t)}),_y=(t,s,a,i)=>{xo(s,"max-height"),xo(s,"max-width");const d=Mh(s);return pS(s,i.preference,t,d,a,i.bounds)},Ay=(t,s)=>{const a=s.classes;vi(t,a.off),Nl(t,a.on)},Sg=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},Ak=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},Ok=(t,s,a)=>{const i=dS(a.origin,s);a.transition.each(d=>{_k(t,a.origin,i,d,s,a.lastPlacement)}),Ub(t,i)},Dk=(t,s)=>{Sk(t,s.placement)},Oy=(t,s)=>{Lo(t,Math.floor(s))},wS=G((t,s)=>{Oy(t,s),Hr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),xg=G((t,s)=>{Oy(t,s)}),SS=(t,s,a)=>t[s]===void 0?a:t[s],Rk=(t,s,a,i,d,g,p,C)=>{const x=SS(p,"maxHeightFunction",wS()),_=SS(p,"maxWidthFunction",K),D=t.anchorBox,B=t.origin,F={bounds:Ck(B,g),origin:B,preference:i,maxHeightFunction:x,maxWidthFunction:_,lastPlacement:d,transition:C};return Mk(D,s,a,F)},Mk=(t,s,a,i)=>{const d=_y(t,s,a,i);return Ok(s,d,i),Dk(s,d),Ay(s,d),Sg(s,d,i),Ak(s,d,i),{layout:d.layout,placement:d.placement}},Nk=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Nh=(t,s,a,i=1)=>{const d=t*i,g=s*i,p=x=>bt(a,x).getOr([]),C=(x,_,D)=>{const B=Rt(Nk,D);return{offset:_o(x,_),classesOn:xe(D,p),classesOff:xe(B,p)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Gb=()=>Nh(0,0,{}),Tg=ht,qb=(t,s)=>a=>xS(a)==="rtl"?s:t,xS=t=>et(t,"direction")==="rtl"?"rtl":"ltr";var Dd;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Dd||(Dd={}));const Kb="data-alloy-vertical-dir",TS=t=>Xw(t,s=>Rn(s)&&Qr(s,"data-alloy-vertical-dir")===Dd.BottomToTop),Wu=()=>Hc("layouts",[Je("onLtr"),Je("onRtl"),Cs("onBottomLtr"),Cs("onBottomRtl")]),gf=(t,s,a,i,d,g,p)=>{const C=p.map(TS).getOr(!1),x=s.layouts.map(V=>V.onLtr(t)),_=s.layouts.map(V=>V.onRtl(t)),D=C?s.layouts.bind(V=>V.onBottomLtr.map(X=>X(t))).or(x).getOr(d):x.getOr(a),B=C?s.layouts.bind(V=>V.onBottomRtl.map(X=>X(t))).or(_).getOr(g):_.getOr(i);return qb(D,B)(t)},Dy=(t,s,a)=>{const i=s.hotspot,d=wy(a,i.element),g=gf(t.element,s,Up(),Lb(),Fb(),Ib(),A.some(s.hotspot.element));return A.some(Tg({anchorBox:d,bubble:s.bubble.getOr(Gb()),overrides:s.overrides,layouts:g}))};var ES=[Je("hotspot"),Cs("bubble"),_e("overrides",{}),Wu(),ir("placement",Dy)];const Bk=(t,s,a)=>{const i=mS(a,s.x,s.y),d=ar(i.left,i.top,s.width,s.height),g=gf(t.element,s,rS(),$b(),rS(),$b(),A.none());return A.some(Tg({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var Pk=[Je("x"),Je("y"),_e("height",0),_e("width",0),_e("bubble",Gb()),_e("overrides",{}),Wu(),ir("placement",Bk)];const Ry=Z.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),$k=t=>t.fold(ht,(s,a,i)=>s.translate(-a,-i)),Fk=t=>t.fold(ht,ht),kS=t=>An(t,(s,a)=>s.translate(a.left,a.top),_o(0,0)),_S=t=>{const s=Se(t,$k);return kS(s)},Yb=t=>{const s=Se(t,Fk);return kS(s)},Ik=Ry.screen,Lk=Ry.absolute,Hk=(t,s,a)=>{const i=ic(a.root).dom,d=g=>{const p=Ra(g),C=Ra(t.element);return ms(p,C)};return A.from(i.frameElement).map(be.fromDom).filter(d).map(Ns)},AS=(t,s,a)=>{const i=Ra(t.element),d=Fc(i),g=Hk(t,s,a).getOr(d);return Lk(g,d.left,d.top)},My=(t,s,a,i)=>{const d=Ik(_o(t,s));return A.some(kl(d,a,i))},OS=(t,s,a,i,d)=>t.map(g=>{const p=[s,g.point],C=Dh(i,()=>Yb(p),()=>Yb(p),()=>_S(p)),x=qf(C.left,C.top,g.width,g.height),_=a.showAbove?Fb():Up(),D=a.showAbove?Ib():Lb(),B=gf(d,a,_,D,_,D,A.none());return Tg({anchorBox:x,bubble:a.bubble.getOr(Gb()),overrides:a.overrides,layouts:B})}),Vk=(t,s,a)=>{const i=AS(t,a,s);return s.node.filter(Go).bind(d=>{const g=d.dom.getBoundingClientRect(),p=My(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return OS(p,i,s,a,C)})};var DS=[Je("node"),Je("root"),Cs("bubble"),Wu(),_e("overrides",{}),_e("showAbove",!1),ir("placement",Vk)];const qp="\uFEFF",Ny=" ",Bh={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},Xb=Z.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Py=(t,s,a,i)=>t.fold(s,a,i),RS=t=>t.fold(ht,ht,ht),MS=Xb.before,NS=Xb.on,Eg=Xb.after,BS={before:MS,on:NS,after:Eg,cata:Py,getStart:RS},Kp=Z.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),zk=t=>Kp.exact(t.start,t.soffset,t.finish,t.foffset),$y=t=>t.match({domRange:s=>be.fromDom(s.startContainer),relative:(s,a)=>BS.getStart(s),exact:(s,a,i,d)=>s}),PS=Kp.domRange,Uk=Kp.relative,Wk=Kp.exact,Jb=t=>{const s=$y(t);return ic(s)},Yp=Bh.create,Tm={domRange:PS,relative:Uk,exact:Wk,exactFromRange:zk,getWin:Jb,range:Yp},Zk=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},Fy=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},$S=(t,s,a)=>{const i=t.document.createRange();return Zk(i,s),Fy(i,a),i},Xc=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},FS=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),kg=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?A.some(a).map(FS):A.none()},jk=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(FS):A.none()},Xp=Z.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),IS=(t,s,a)=>s(be.fromDom(a.startContainer),a.startOffset,be.fromDom(a.endContainer),a.endOffset),Ph=(t,s)=>s.match({domRange:a=>({ltr:G(a),rtl:A.none}),relative:(a,i)=>({ltr:Tl(()=>$S(t,a,i)),rtl:Tl(()=>A.some($S(t,i,a)))}),exact:(a,i,d,g)=>({ltr:Tl(()=>Xc(t,a,i,d,g)),rtl:Tl(()=>A.some(Xc(t,d,g,a,i)))})}),_g=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Xp.rtl(be.fromDom(d.endContainer),d.endOffset,be.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>IS(t,Xp.ltr,a)):IS(t,Xp.ltr,a)},Jp=(t,s)=>{const a=Ph(t,s);return _g(t,a)},hf=(t,s)=>Jp(t,s).match({ltr:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,p),C},rtl:(i,d,g,p)=>{const C=t.document.createRange();return C.setStart(g.dom,p),C.setEnd(i.dom,d),C}});Xp.ltr,Xp.rtl;const Gk=(t,s,a)=>Dn(al(t,a),s),Ga=(t,s)=>Ql(s,t),pl=(t,s,a,i)=>{const g=Ra(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},Qb=(t,s,a,i)=>{const d=pl(t,s,a,i),g=ms(t,a)&&s===i;return d.collapsed&&!g},LS=t=>A.from(t.getSelection()),HS=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return A.some(Bh.create(be.fromDom(s.startContainer),s.startOffset,be.fromDom(a.endContainer),a.endOffset))}else return A.none()},Iy=t=>{if(t.anchorNode===null||t.focusNode===null)return HS(t);{const s=be.fromDom(t.anchorNode),a=be.fromDom(t.focusNode);return Qb(s,t.anchorOffset,a,t.focusOffset)?A.some(Bh.create(s,t.anchorOffset,a,t.focusOffset)):HS(t)}},Ag=t=>LS(t).filter(s=>s.rangeCount>0).bind(Iy),Qp=(t,s)=>{const a=hf(t,s);return kg(a)},Og=(t,s)=>{const a=hf(t,s);return jk(a)},$h=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:a,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(jo,"text"),e1=t=>$h.get(t),Dg=(t,s)=>({element:t,offset:s}),Ly=(t,s)=>{const a=Ma(t);if(a.length===0)return Dg(t,s);if(s<a.length)return Dg(a[s],0);{const i=a[a.length-1],d=jo(i)?e1(i).length:Ma(i).length;return Dg(i,d)}},Fh=(t,s)=>jo(t)?Dg(t,s):Ly(t,s),hc=(t,s)=>s.getSelection.getOrThunk(()=>()=>Ag(t))().map(i=>{const d=Fh(i.start,i.soffset),g=Fh(i.finish,i.foffset);return Tm.range(d.element,d.offset,g.element,g.offset)}),Hy=(t,s,a)=>{const i=ic(s.root).dom,d=AS(t,a,s),g=hc(i,s).bind(x=>Og(i,Tm.exactFromRange(x)).orThunk(()=>{const D=be.fromText(qp);Gc(x.start,D);const B=Qp(i,Tm.exact(D,0,D,1));return Oi(D),B}).bind(D=>My(D.left,D.top,D.width,D.height))),C=hc(i,s).bind(x=>Rn(x.start)?A.some(x.start):Cc(x.start)).getOr(t.element);return OS(g,d,s,a,C)};var Zu=[Cs("getSelection"),Je("root"),Cs("bubble"),Wu(),_e("overrides",{}),_e("showAbove",!1),ir("placement",Hy)];const Rd="link-layout",pf=t=>t.x+t.width,Rg=(t,s)=>t.x-s.width,e0=(t,s)=>t.y-s.height+t.height,t0=t=>t.y,qk=(t,s,a)=>nc(pf(t),t0(t),a.southeast(),Lp(),"southeast",dc(t,{left:0,top:2}),Rd),n0=(t,s,a)=>nc(Rg(t,s),t0(t),a.southwest(),Cg(),"southwest",dc(t,{right:1,top:2}),Rd),t1=(t,s,a)=>nc(pf(t),e0(t,s),a.northeast(),ly(),"northeast",dc(t,{left:0,bottom:3}),Rd),VS=(t,s,a)=>nc(Rg(t,s),e0(t,s),a.northwest(),Pb(),"northwest",dc(t,{right:1,bottom:3}),Rd),o0=()=>[qk,n0,t1,VS],gu=()=>[n0,qk,VS,t1],Kk=(t,s,a)=>{const i=wy(a,s.item.element),d=gf(t.element,s,o0(),gu(),o0(),gu(),A.none());return A.some(Tg({anchorBox:i,bubble:Gb(),overrides:s.overrides,layouts:d}))};var Yk=[Je("item"),Wu(),_e("overrides",{}),ir("placement",Kk)],Vy=ia("type",{selection:Zu,node:DS,hotspot:ES,submenu:Yk,makeshift:Pk});const zy=[hi("classes",Wr),Ni("mode","all",["all","layout","placement"])],n1=[_e("useFixed",Ln),Cs("getBounds")],zS=[Ki("anchor",Vy),Hc("transition",zy)],US=()=>{const t=document.documentElement;return wk(0,0,t.clientWidth,t.clientHeight)},Ll=t=>{const s=Ns(t.element),a=t.element.dom.getBoundingClientRect();return gc(s.left,s.top,a.width,a.height)},s0=(t,s,a,i,d,g)=>{const p=fS(s.anchorBox,t);return Rk(p,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},WS=(t,s,a,i,d)=>{const g=A.none();Md(t,s,a,i,d,g)},Md=(t,s,a,i,d,g)=>{const p=_c("placement.info",vn(zS),d),C=p.anchor,x=i.element,_=a.get(i.uid);zb(()=>{Kt(x,"position","fixed");const D=gr(x,"visibility");Kt(x,"visibility","hidden");const B=s.useFixed()?US():Ll(t);C.placement(t,C,B).each(F=>{const V=g.orThunk(()=>s.getBounds.map(Uo)),X=s0(B,F,V,i,_,p.transition);a.set(i.uid,X)}),D.fold(()=>{xo(x,"visibility")},F=>{Kt(x,"visibility",F)}),gr(x,"left").isNone()&&gr(x,"top").isNone()&&gr(x,"right").isNone()&&gr(x,"bottom").isNone()&&sr(gr(x,"position"),"fixed")&&xo(x,"position")},x)};var Qi=Object.freeze({__proto__:null,position:WS,positionWithinBounds:Md,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;Qe(["position","left","right","top","bottom"],g=>xo(d,g)),xk(d),a.clear(i.uid)}}),vf=Object.freeze({__proto__:null,init:()=>{let t={};return Ii({readState:()=>t,clear:d=>{Xn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>bt(t,d)})}});const Yr=fc({fields:n1,name:"positioning",active:Wp,apis:Qi,state:vf}),Em=t=>t.getSystem().isConnected(),o1=t=>{fs(t,mm());const s=t.components();Qe(s,o1)},Mg=t=>{const s=t.components();Qe(s,Mg),fs(t,Td())},r0=(t,s)=>{t.getSystem().addToWorld(s),Go(t.element)&&Mg(s)},a0=t=>{o1(t),t.getSystem().removeFromWorld(t)},Uy=(t,s)=>{ni(t.element,s.element)},c0=t=>{Qe(t.components(),s=>Oi(s.element)),fd(t.element),t.syncComponents()},ZS=(t,s,a)=>{const i=t.components();c0(t);const d=a(s),g=Rt(i,d);Qe(g,p=>{o1(p),t.getSystem().removeFromWorld(p)}),Qe(d,p=>{Em(p)?Uy(t,p):(t.getSystem().addToWorld(p),Uy(t,p),Go(t.element)&&Mg(p))}),t.syncComponents()},Xk=(t,s,a)=>{const i=t.components(),d=xe(s,C=>mg(C).toArray());Qe(i,C=>{po(d,C)||a0(C)});const g=a(s),p=Rt(i,g);Qe(p,C=>{Em(C)&&a0(C)}),Qe(g,C=>{Em(C)||r0(t,C)}),t.syncComponents()},Nd=(t,s)=>{s1(t,s,ni)},s1=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Go(t.element)&&Mg(s),t.syncComponents()},Wy=t=>{o1(t),Oi(t.element),t.getSystem().removeFromWorld(t)},Bd=t=>{const s=ya(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Wy(t),s.each(a=>{a.syncComponents()})},Zy=t=>{const s=t.components();Qe(s,Wy),fd(t.element),t.syncComponents()},r1=(t,s)=>{jy(t,s,ni)},yf=(t,s)=>{jy(t,s,dd)},jy=(t,s,a)=>{a(t,s.element);const i=Ma(s.element);Qe(i,d=>{s.getByDom(d).each(Mg)})},jS=t=>{const s=Ma(t.element);Qe(s,a=>{t.getByDom(a).each(o1)}),Oi(t.element)},Gy=(t,s,a,i)=>{a.get().each(p=>{Zy(t)});const d=s.getAttachPoint(t);Nd(d,t);const g=t.getSystem().build(i);return Nd(t,g),a.set(g),g},Cf=(t,s,a,i)=>{const d=Gy(t,s,a,i);return s.onOpen(t,d),d},Jk=(t,s,a,i)=>a.get().map(()=>Gy(t,s,a,i)),Pd=(t,s,a,i,d)=>{qS(t,s),Cf(t,s,a,i),d(),l0(t,s)},vl=(t,s,a)=>{a.get().each(i=>{Zy(t),Bd(t),s.onClose(t,i),a.clear()})},GS=(t,s,a)=>a.isOpen(),i0=(t,s,a,i)=>GS(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),a1=(t,s,a)=>a.get(),qy=(t,s,a,i)=>{gr(t.element,s).fold(()=>{ne(t.element,a)},d=>{zn(t.element,a,d)}),Kt(t.element,s,i)},Qk=(t,s,a)=>{P(t.element,a).fold(()=>xo(t.element,s),i=>Kt(t.element,s,i))},qS=(t,s,a)=>{const i=s.getAttachPoint(t);Kt(t.element,"position",Yr.getMode(i)),qy(t,"visibility",s.cloakVisibilityAttr,"hidden")},Ky=t=>os(["top","left","right","bottom"],s=>gr(t,s).isSome()),l0=(t,s,a)=>{Ky(t.element)||xo(t.element,"position"),Qk(t,"visibility",s.cloakVisibilityAttr)};var e_=Object.freeze({__proto__:null,cloak:qS,decloak:l0,open:Cf,openWhileCloaked:Pd,close:vl,isOpen:GS,isPartOf:i0,getState:a1,setContent:Jk}),u0=Object.freeze({__proto__:null,events:(t,s)=>cr([st(vh(),(a,i)=>{vl(a,t,s)})])}),KS=[Ee("onOpen"),Ee("onClose"),Je("isPartOf"),Je("getAttachPoint"),_e("cloakVisibilityAttr","data-precloak-visibility")],Ih=Object.freeze({__proto__:null,init:()=>{const t=Qs(),s=G("not-implemented");return Ii({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Mo=fc({fields:KS,name:"sandboxing",active:u0,apis:e_,state:Ih}),km=G("dismiss.popups"),Lh=G("reposition.popups"),Yy=G("mouse.released"),n_=kc([_e("isExtraPart",Ln),Hc("fireEventInstead",[_e("event",rf())])]),c1=t=>{const s=_c("Dismissal",n_,t);return{[km()]:{schema:kc([Je("target")]),onReceive:(a,i)=>{Mo.isOpen(a)&&(Mo.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>Mo.close(a),g=>fs(a,g.event)))}}}},Ng=kc([Hc("fireEventInstead",[_e("event",_p())]),dl("doReposition")]),Bg=t=>{const s=_c("Reposition",Ng,t);return{[Lh()]:{onReceive:a=>{Mo.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>fs(a,i.event))}}}},Xy=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},Jy=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var d0=Object.freeze({__proto__:null,onLoad:Xy,onUnload:Jy,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),t2=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Zr((i,d)=>{Xy(i,t,s)}),Fi((i,d)=>{Jy(i,t,s)})]:[vy(t,s,Xy)];return cr(a)}});const m0=()=>{const t=S(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Ii({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},l1=()=>Ii({readState:K}),_m=()=>{const t=S({}),s=S({});return Ii({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>bt(t.get(),p).orThunk(()=>bt(s.get(),p)),update:p=>{const C=t.get(),x=s.get(),_={},D={};Qe(p,B=>{_[B.value]=B,bt(B,"meta").each(F=>{bt(F,"text").each(V=>{D[V]=B})})}),t.set({...C,..._}),s.set({...x,...D})},clear:()=>{t.set({}),s.set({})}})};var $d=Object.freeze({__proto__:null,memory:m0,dataset:_m,manual:l1,init:t=>t.store.manager.state(t)});const wf=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},o_=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},JS=(t,s,a)=>{s.store.initialValue.each(d=>{wf(t,s,a,d)})},n2=(t,s,a)=>{a.clear()};var Hh=[Cs("initialValue"),Je("getFallbackEntry"),Je("getDataKey"),Je("setValue"),ir("manager",{setValue:wf,getValue:o_,onLoad:JS,onUnload:n2,state:_m})];const Vh=(t,s,a)=>s.store.getValue(t),s_=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},r_=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var QS=[Je("getValue"),_e("setValue",K),Cs("initialValue"),ir("manager",{setValue:s_,getValue:Vh,onLoad:r_,onUnload:K,state:Yi.init})];const Sf=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},o2=(t,s,a)=>a.get(),s2=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},f0=(t,s,a)=>{a.clear()};var Pg=[Cs("initialValue"),ir("manager",{setValue:Sf,getValue:o2,onLoad:s2,onUnload:f0,state:m0})],g0=[si("store",{mode:"memory"},ia("mode",{memory:Pg,manual:QS,dataset:Hh})),Ee("onSetValue"),_e("resetOnDom",!1)];const Ft=fc({fields:g0,name:"representing",active:t2,apis:d0,extra:{setValueFrom:(t,s)=>{const a=Ft.getValue(s);Ft.setValue(t,a)}},state:$d}),pc=(t,s)=>w(t,{},Se(s,a=>_v(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Vs("dump",ht)])),h0=t=>t.dump,Sr=(t,s)=>({...yt(s),...t.dump}),pu={field:pc,augment:Sr,get:h0},ex="placeholder",Hi=Z.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),qa=t=>io(t,"uiType"),p0=(t,s,a,i)=>t.exists(d=>d!==a.owner)?Hi.single(!0,G(a)):bt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+is(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),b0=(t,s,a,i)=>qa(a)&&a.uiType===ex?p0(t,s,a,i):Hi.single(!1,G(a)),Am=(t,s,a,i)=>b0(t,s,a,i).fold((g,p)=>{const C=qa(a)?p(s,a.config,a.validated):p(s),x=bt(C,"components").getOr([]),_=xe(x,D=>Am(t,s,D,i));return[{...C,components:_}]},(g,p)=>{if(qa(a)){const C=p(s,a.config,a.validated);return a.validated.preprocess.getOr(ht)(C)}else return p(s)}),tx=(t,s,a,i)=>xe(a,d=>Am(t,s,d,i)),r2=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,C)=>p,(p,C)=>p);return{name:G(t),required:g,used:i,replace:d}},nx=(t,s,a,i)=>{const d=ls(i,(p,C)=>r2(C,p)),g=tx(t,s,a,d);return ts(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},a2=Hi.single,c2=Hi.multiple,i2=G(ex),u1=Z.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),v0=_e("factory",{sketch:ht}),d1=_e("schema",[]),m1=Je("name"),y0=la("pname","pname",hd(t=>"<alloy."+nn(t.name)+">"),Ri()),ox=Vs("schema",()=>[Cs("preprocess")]),Om=_e("defaults",G({})),Fd=_e("overrides",G({})),$g=vn([v0,d1,m1,y0,Om,Fd]),zh=vn([v0,d1,m1,Om,Fd]),l2=vn([v0,d1,m1,y0,Om,Fd]),a_=vn([v0,ox,m1,Je("unit"),y0,Om,Fd]),sx=t=>t.fold(A.some,A.none,A.some,A.some),C0=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},rx=t=>t.fold(ht,ht,ht,ht),w0=(t,s)=>a=>{const i=_c("Converting part type",s,a);return t(i)},oc=w0(u1.required,$g),bu=w0(u1.external,zh),Hl=w0(u1.optional,l2),f1=w0(u1.group,a_),el=G("entirety");var ax=Object.freeze({__proto__:null,required:oc,external:bu,optional:Hl,group:f1,asNamedPart:sx,name:C0,asCommon:rx,original:el});const u2=(t,s,a,i)=>js(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),d2=(t,s,a)=>{const i={},d={};return Qe(a,g=>{g.fold(p=>{i[p.pname]=a2(!0,(C,x,_)=>p.factory.sketch(u2(C,p,x,_)))},p=>{const C=s.parts[p.name];d[p.name]=G(p.factory.sketch(u2(s,p,C[el()]),C))},p=>{i[p.pname]=a2(!1,(C,x,_)=>p.factory.sketch(u2(C,p,x,_)))},p=>{i[p.pname]=c2(!0,(C,x,_)=>{const D=C[p.name];return Se(D,B=>p.factory.sketch(js(p.defaults(C,B,_),B,p.overrides(C,B))))})})}),{internals:G(i),externals:G(d)}},m2=(t,s)=>{const a={};return Qe(s,i=>{sx(i).each(d=>{const g=c_(t,d.pname);a[d.name]=p=>{const C=_c("Part: "+d.name+" in "+t,vn(d.schema),p);return{...g,config:p,validated:C}}})}),a},c_=(t,s)=>({uiType:i2(),owner:t,name:s}),f2=(t,s,a)=>({uiType:i2(),owner:t,name:s,config:a,validated:{}}),i_=t=>xe(t,s=>s.fold(A.none,A.some,A.none,A.none).map(a=>Nu(a.name,a.schema.concat([du(el())]))).toArray()),l_=t=>Se(t,C0),g2=(t,s,a)=>d2(t,s,a),h2=(t,s,a)=>nx(A.some(t),s,s.components,a),er=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Id=(t,s,a)=>er(t,s,a).getOrDie("Could not find part: "+a),p2=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return Qe(a,p=>{i[p]=G(g.getByUid(d[p]))}),i},b2=(t,s)=>{const a=t.getSystem();return ls(s.partUids,(i,d)=>G(a.getByUid(i)))},v2=t=>is(t.partUids),y2=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return Qe(a,p=>{i[p]=G(g.getByUid(d[p]).getOrDie())}),i},C2=(t,s)=>{const a=l_(s);return Ps(Se(a,i=>({key:i,value:t+"-"+i})))},w2=t=>la("partUids","partUids",bd(s=>C2(s.uid,t)),Ri());var S2=Object.freeze({__proto__:null,generate:m2,generateOne:f2,schemas:i_,names:l_,substitutes:g2,components:h2,defaultUids:C2,defaultUidsSchema:w2,getAllParts:b2,getAllPartNames:v2,getPart:er,getPartOrDie:Id,getParts:p2,getPartsOrDie:y2});const u_=(t,s)=>(t.length>0?[Nu("parts",t)]:[]).concat([Je("uid"),_e("dom",{}),_e("components",[]),du("originalSpec"),_e("debug.sketcher",{})]).concat(s),cx=(t,s,a,i,d)=>{const g=u_(i,d);return _c(t+" [SpecSchema]",kc(g.concat(s)),a)},d_=(t,s,a,i)=>{const d=xf(i),g=cx(t,s,d,[],[]);return a(g,d)},x2=(t,s,a,i,d)=>{const g=xf(d),p=i_(a),C=w2(a),x=cx(t,s,g,p,[C]),_=g2(t,x,a),D=h2(t,x,_.internals());return i(x,D,g,_.externals())},m_=t=>io(t,"uid"),xf=t=>m_(t)?t:{...t,uid:gl("uid")},rn=t=>t.uid!==void 0,Dm=kc([Je("name"),Je("factory"),Je("configFields"),_e("apis",{}),_e("extraApis",{})]),f_=kc([Je("name"),Je("factory"),Je("configFields"),Je("partFields"),_e("apis",{}),_e("extraApis",{})]),Ta=t=>{const s=_c("Sketcher for "+t.name,Dm,t),a=g=>d_(s.name,s.configFields,s.factory,g),i=ls(s.apis,kb),d=ls(s.extraApis,(g,p)=>Ch(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},ma=t=>{const s=_c("Sketcher for "+t.name,f_,t),a=p=>x2(s.name,s.configFields,s.partFields,s.factory,p),i=m2(s.name,s.partFields),d=ls(s.apis,kb),g=ls(s.extraApis,(p,C)=>Ch(p,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Tf=t=>jr("input")(t)&&Qr(t,"type")!=="radio"||jr("textarea")(t);var ix=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const g_=[Je("find")],Ho=fc({fields:g_,name:"composing",apis:ix}),lx=["input","button","textarea","select"],x0=(t,s,a)=>{(s.disabled()?E2:k2)(t,s)},Fg=(t,s)=>s.useNative===!0&&po(lx,Ms(t.element)),ux=t=>q(t.element,"disabled"),h_=t=>{zn(t.element,"disabled","disabled")},T2=t=>{ne(t.element,"disabled")},p_=t=>Qr(t.element,"aria-disabled")==="true",FO=t=>{zn(t.element,"aria-disabled","true")},dx=t=>{zn(t.element,"aria-disabled","false")},E2=(t,s,a)=>{s.disableClass.each(d=>{$s(t.element,d)}),(Fg(t,s)?h_:FO)(t),s.onDisabled(t)},k2=(t,s,a)=>{s.disableClass.each(d=>{da(t.element,d)}),(Fg(t,s)?T2:dx)(t),s.onEnabled(t)},mx=(t,s)=>Fg(t,s)?ux(t):p_(t);var T0=Object.freeze({__proto__:null,enable:k2,disable:E2,isDisabled:mx,onLoad:x0,set:(t,s,a,i)=>{(i?E2:k2)(t,s)}}),v_=Object.freeze({__proto__:null,exhibit:(t,s)=>Lu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>cr([Aw(qs(),(a,i)=>mx(a,t)),vy(t,s,x0)])}),LO=[Pa("disabled",Ln),_e("useNative",!0),Cs("disableClass"),Ee("onDisabled"),Ee("onEnabled")];const Un=fc({fields:LO,name:"disabling",active:v_,apis:T0}),Rm=(t,s,a,i)=>{const d=Ga(t.element,"."+s.highlightClass);Qe(d,g=>{os(i,C=>ms(C.element,g))||(da(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),fs(C,Ap())}))})},_2=(t,s,a)=>Rm(t,s,a,[]),y_=(t,s,a,i)=>{A2(t,s,a,i)&&(da(i.element,s.highlightClass),s.onDehighlight(t,i),fs(i,Ap()))},g1=(t,s,a,i)=>{Rm(t,s,a,[i]),A2(t,s,a,i)||($s(i.element,s.highlightClass),s.onHighlight(t,i),fs(i,kw()))},HO=(t,s,a)=>{O2(t,s).each(i=>{g1(t,s,a,i)})},E0=(t,s,a)=>{k0(t,s).each(i=>{g1(t,s,a,i)})},C_=(t,s,a,i)=>{Wh(t,s,a,i).fold(d=>{throw d},d=>{g1(t,s,a,d)})},w_=(t,s,a,i)=>{const d=_0(t,s);Ue(d,i).each(p=>{g1(t,s,a,p)})},A2=(t,s,a,i)=>tc(i.element,s.highlightClass),Uh=(t,s,a)=>$r(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Wh=(t,s,a,i)=>{const d=Ga(t.element,"."+s.itemClass);return A.from(d[i]).fold(()=>St.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},O2=(t,s,a)=>$r(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),k0=(t,s,a)=>{const i=Ga(t.element,"."+s.itemClass);return(i.length>0?A.some(i[i.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},D2=(t,s,a,i)=>{const d=Ga(t.element,"."+s.itemClass);return wt(d,p=>tc(p,s.highlightClass)).bind(p=>{const C=Oh(p,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},R2=(t,s,a)=>D2(t,s,a,-1),S_=(t,s,a)=>D2(t,s,a,1),_0=(t,s,a)=>{const i=Ga(t.element,"."+s.itemClass);return Aa(Se(i,d=>t.getSystem().getByDom(d).toOptional()))};var M2=Object.freeze({__proto__:null,dehighlightAll:_2,dehighlight:y_,highlight:g1,highlightFirst:HO,highlightLast:E0,highlightAt:C_,highlightBy:w_,isHighlighted:A2,getHighlighted:Uh,getFirst:O2,getLast:k0,getPrevious:R2,getNext:S_,getCandidates:_0}),N2=[Je("highlightClass"),Je("itemClass"),Ee("onHighlight"),Ee("onDehighlight")];const gs=fc({fields:N2,name:"highlighting",apis:M2}),fx=[8],Ld=[9],ju=[13],h1=[27],tl=[32],A0=[37],Ig=[38],p1=[39],Mm=[40],B2=(t,s,a)=>{const i=eo(t.slice(0,s)),d=eo(t.slice(s+1));return Ue(i.concat(d),a)},O0=(t,s,a)=>{const i=eo(t.slice(0,s));return Ue(i,a)},Zh=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return Ue(d.concat(i),a)},fF=(t,s,a)=>{const i=t.slice(s+1);return Ue(i,a)},ns=t=>s=>{const a=s.raw;return po(t,a.which)},vu=t=>s=>Io(t,a=>a(s)),Lg=t=>t.raw.shiftKey===!0,gx=t=>t.raw.ctrlKey===!0,b1=Ze(Lg),as=(t,s)=>({matches:t,classification:s}),hx=(t,s)=>Ue(t,i=>i.matches(s)).map(i=>i.classification),px=(t,s,a)=>{s.exists(d=>a.exists(g=>ms(g,d)))||bn(t,Cb(),{prevFocus:s,newFocus:a})},P2=()=>{const t=a=>Uu(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);px(a,d,g)}}},$2=()=>{const t=a=>gs.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(K,p=>{gs.highlight(a,p)});const g=t(a);px(a,d,g)}}};var jh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(jh||(jh={}));const Hg=(t,s,a,i,d)=>{const g=()=>t.concat([_e("focusManager",P2()),si("focusInside","onFocus",vd(_=>po(["onFocus","onEnterOrSpace","onApi"],_)?St.value(_):St.error("Invalid value for focusInside"))),ir("handler",x),ir("state",s),ir("sendFocusIn",d)]),p=(_,D,B,F,V)=>{const X=B(_,D,F,V);return hx(X,D.event).bind(ue=>ue(_,D,F,V))},x={schema:g,processKey:p,toEvents:(_,D)=>{const B=_.focusInside!==jh.OnFocusMode?A.none():d(_).map(X=>st(Sd(),(ue,Oe)=>{X(ue,_,D),Oe.stop()})),F=(X,ue)=>{const Oe=ns(tl.concat(ju))(ue.event);_.focusInside===jh.OnEnterOrSpaceMode&&Oe&&um(X,ue)&&d(_).each(Ce=>{Ce(X,_,D),ue.stop()})},V=[st(Pi(),(X,ue)=>{p(X,ue,a,_,D).fold(()=>{F(X,ue)},Oe=>{ue.stop()})}),st(Sw(),(X,ue)=>{p(X,ue,i,_,D).each(Oe=>{ue.stop()})})];return cr(B.toArray().concat(V))}};return x},bx=t=>{const s=[Cs("onEscape"),Cs("onEnter"),_e("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),_e("firstTabstop",0),_e("useTabstopAt",Zt),Cs("visibilitySelector")].concat([t]),a=(ue,Oe)=>{const Ce=ue.visibilitySelector.bind(Ae=>_d(Oe,Ae)).getOr(Oe);return ze(Ce)>0},i=(ue,Oe)=>{const Ce=Ga(ue.element,Oe.selector),Ae=Dn(Ce,Pe=>a(Oe,Pe));return A.from(Ae[Oe.firstTabstop])},d=(ue,Oe)=>Oe.focusManager.get(ue).bind(Ce=>_d(Ce,Oe.selector)),g=(ue,Oe)=>a(ue,Oe)&&ue.useTabstopAt(Oe),p=(ue,Oe,Ce)=>{i(ue,Oe).each(Ae=>{Oe.focusManager.set(ue,Ae)})},C=(ue,Oe,Ce,Ae,Pe)=>Pe(Oe,Ce,He=>g(Ae,He)).fold(()=>Ae.cyclic?A.some(!0):A.none(),He=>(Ae.focusManager.set(ue,He),A.some(!0))),x=(ue,Oe,Ce,Ae)=>{const Pe=Ga(ue.element,Ce.selector);return d(ue,Ce).bind(He=>wt(Pe,Pt(ms,He)).bind(at=>C(ue,Pe,at,Ce,Ae)))},_=(ue,Oe,Ce)=>{const Ae=Ce.cyclic?B2:O0;return x(ue,Oe,Ce,Ae)},D=(ue,Oe,Ce)=>{const Ae=Ce.cyclic?Zh:fF;return x(ue,Oe,Ce,Ae)},B=(ue,Oe,Ce)=>Ce.onEnter.bind(Ae=>Ae(ue,Oe)),F=(ue,Oe,Ce)=>Ce.onEscape.bind(Ae=>Ae(ue,Oe)),V=G([as(vu([Lg,ns(Ld)]),_),as(ns(Ld),D),as(vu([b1,ns(ju)]),B)]),X=G([as(ns(h1),F)]);return Hg(s,Yi.init,V,X,()=>A.some(p))};var l=bx(Vs("cyclic",Ln)),m=bx(Vs("cyclic",Zt));const h=(t,s,a)=>(cg(t,a,qs()),A.some(!0)),v=(t,s,a)=>Tf(a)&&ns(tl)(s.event)?A.none():h(t,s,a),T=(t,s)=>A.some(!0),O=[_e("execute",v),_e("useSpace",!1),_e("useEnter",!0),_e("useControlEnter",!1),_e("useDown",!1)],$=(t,s,a)=>a.execute(t,s,t.element),U=(t,s,a,i)=>{const d=a.useSpace&&!Tf(t.element)?tl:[],g=a.useEnter?ju:[],p=a.useDown?Mm:[],C=d.concat(g).concat(p);return[as(ns(C),$)].concat(a.useControlEnter?[as(vu([gx,ns(ju)]),$)]:[])},J=(t,s,a,i)=>a.useSpace&&!Tf(t.element)?[as(ns(tl),T)]:[];var le=Hg(O,Yi.init,U,J,()=>A.none());const Te=()=>{const t=Qs();return Ii({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Nt=Object.freeze({__proto__:null,flatgrid:Te,init:t=>t.state(t)});const _t=t=>(s,a,i,d)=>{const g=t(s.element);return en(g,s,a,i,d)},Ye=(t,s)=>{const a=qb(t,s);return _t(a)},Dt=(t,s)=>{const a=qb(s,t);return _t(a)},Ke=t=>(s,a,i,d)=>en(t,s,a,i,d),en=(t,s,a,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),Hn=Ke,lo=Ke,tr=Ke,Dc=t=>t.offsetWidth<=0&&t.offsetHeight<=0,na=t=>!Dc(t.dom),nl=(t,s)=>wt(t,s).map(a=>({index:a,candidates:t})),Ef=(t,s,a)=>{const i=p=>ms(p,s),d=Ga(t,a),g=Dn(d,na);return nl(g,i)},v1=(t,s)=>wt(t,a=>ms(s,a)),F2=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(p=>{const C=p.row*a+p.column;return C>=0&&C<t.length?A.some(t[C]):A.none()})},D0=(t,s,a,i,d)=>F2(t,s,i,(g,p)=>{const x=g===a-1?t.length-g*i:i,_=Oh(p,d,0,x-1);return A.some({row:g,column:_})}),zs=(t,s,a,i,d)=>F2(t,s,i,(g,p)=>{const C=Oh(g,d,0,a-1),_=C===a-1?t.length-C*i:i,D=Xi(p,0,_-1);return A.some({row:C,column:D})}),wi=(t,s,a,i)=>D0(t,s,a,i,1),Si=(t,s,a,i)=>D0(t,s,a,i,-1),yu=(t,s,a,i)=>zs(t,s,a,i,-1),ol=(t,s,a,i)=>zs(t,s,a,i,1),kf=[Je("selector"),_e("execute",v),_r("onEscape"),_e("captureTab",!1),Ip()],xi=(t,s,a)=>{$r(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},vx=(t,s)=>s.focusManager.get(t).bind(a=>_d(a,s.selector)),Gh=(t,s,a,i)=>vx(t,a).bind(d=>a.execute(t,s,d)),Vl=t=>(s,a,i,d)=>Ef(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),Vc=(t,s,a)=>a.captureTab?A.some(!0):A.none(),zl=(t,s,a)=>a.onEscape(t,s),yx=Vl(Si),Cx=Vl(wi),x_=Vl(yu),T_=Vl(ol),I2=G([as(ns(A0),Ye(yx,Cx)),as(ns(p1),Dt(yx,Cx)),as(ns(Ig),Hn(x_)),as(ns(Mm),lo(T_)),as(vu([Lg,ns(Ld)]),Vc),as(vu([b1,ns(Ld)]),Vc),as(ns(tl.concat(ju)),Gh)]),qh=G([as(ns(h1),zl),as(ns(tl),T)]);var Vg=Hg(kf,Te,I2,qh,()=>A.some(xi));const VO=(t,s,a,i,d)=>{const g=C=>Ms(C)==="button"&&Qr(C,"disabled")==="disabled",p=(C,x,_)=>d(C,x,i,0,_.length-1,_[x],D=>g(_[D])?p(C,D,_):A.from(_[D]));return Ef(t,a,s).bind(C=>{const x=C.index,_=C.candidates;return p(x,x,_)})},wx=(t,s,a,i)=>VO(t,s,a,i,(d,g,p,C,x,_,D)=>{const B=Xi(g+p,C,x);return B===d?A.from(_):D(B)}),y1=(t,s,a,i)=>VO(t,s,a,i,(d,g,p,C,x,_,D)=>{const B=Oh(g,p,C,x);return B===d?A.none():D(B)}),E_=[Je("selector"),_e("getInitial",A.none),_e("execute",v),_r("onEscape"),_e("executeOnMove",!1),_e("allowVertical",!0),_e("allowHorizontal",!0),_e("cycles",!0)],gF=(t,s)=>s.focusManager.get(t).bind(a=>_d(a,s.selector)),k_=(t,s,a)=>gF(t,a).bind(i=>a.execute(t,s,i)),hF=(t,s,a)=>{s.getInitial(t).orThunk(()=>$r(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},zO=(t,s,a)=>(a.cycles?y1:wx)(t,a.selector,s,-1),UO=(t,s,a)=>(a.cycles?y1:wx)(t,a.selector,s,1),WO=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?k_(s,a,i):A.some(!0)),ZO=(t,s,a)=>a.onEscape(t,s),__=(t,s,a,i)=>{const d=[...a.allowHorizontal?A0:[]].concat(a.allowVertical?Ig:[]),g=[...a.allowHorizontal?p1:[]].concat(a.allowVertical?Mm:[]);return[as(ns(d),WO(Ye(zO,UO))),as(ns(g),WO(Dt(zO,UO))),as(ns(ju),k_),as(ns(tl),k_)]},pF=G([as(ns(tl),T),as(ns(h1),ZO)]);var bF=Hg(E_,Yi.init,__,pF,()=>A.some(hF));const Sx=(t,s,a)=>A.from(t[s]).bind(i=>A.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),jO=(t,s,a,i)=>{const g=t[s].length,p=Oh(a,i,0,g-1);return Sx(t,s,p)},Kh=(t,s,a,i)=>{const d=Oh(a,i,0,t.length-1),g=t[d].length,p=Xi(s,0,g-1);return Sx(t,d,p)},GO=(t,s,a,i)=>{const g=t[s].length,p=Xi(a+i,0,g-1);return Sx(t,s,p)},qO=(t,s,a,i)=>{const d=Xi(a+i,0,t.length-1),g=t[d].length,p=Xi(s,0,g-1);return Sx(t,d,p)},A_=(t,s,a)=>jO(t,s,a,1),vF=(t,s,a)=>jO(t,s,a,-1),KO=(t,s,a)=>Kh(t,a,s,-1),YO=(t,s,a)=>Kh(t,a,s,1),XO=(t,s,a)=>GO(t,s,a,-1),JO=(t,s,a)=>GO(t,s,a,1),yF=(t,s,a)=>qO(t,a,s,-1),CF=(t,s,a)=>qO(t,a,s,1),wF=[Nu("selectors",[Je("row"),Je("cell")]),_e("cycles",!0),_e("previousSelector",A.none),_e("execute",v)],O_=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return $r(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},SF=(t,s,a)=>Uu(t.element).bind(i=>a.execute(t,s,i)),xF=(t,s)=>Se(t,a=>Ga(a,s.selectors.cell)),xx=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return _d(i,d.selectors.row).bind(p=>{const C=Ga(p,d.selectors.cell);return v1(C,i).bind(x=>{const _=Ga(a,d.selectors.row);return v1(_,p).bind(D=>{const B=xF(_,d);return g(B,D,x).map(F=>F.cell)})})})},QO=xx(vF,XO),D_=xx(A_,JO),TF=xx(KO,yF),EF=xx(YO,CF),kF=G([as(ns(A0),Ye(QO,D_)),as(ns(p1),Dt(QO,D_)),as(ns(Ig),Hn(TF)),as(ns(Mm),lo(EF)),as(ns(tl.concat(ju)),SF)]),eD=G([as(ns(tl),T)]);var _F=Hg(wF,Yi.init,kF,eD,()=>A.some(O_));const AF=[Je("selector"),_e("execute",v),_e("moveOnTab",!1)],R_=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),OF=(t,s,a)=>{$r(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},tD=(t,s,a)=>y1(t,a.selector,s,-1),L2=(t,s,a)=>y1(t,a.selector,s,1),DF=(t,s,a,i)=>a.moveOnTab?tr(tD)(t,s,a,i):A.none(),nD=(t,s,a,i)=>a.moveOnTab?tr(L2)(t,s,a,i):A.none(),yl=G([as(ns(Ig),tr(tD)),as(ns(Mm),tr(L2)),as(vu([Lg,ns(Ld)]),DF),as(vu([b1,ns(Ld)]),nD),as(ns(ju),R_),as(ns(tl),R_)]),RF=G([as(ns(tl),T)]);var oD=Hg(AF,Yi.init,yl,RF,()=>A.some(OF));const MF=[_r("onSpace"),_r("onEnter"),_r("onShiftEnter"),_r("onLeft"),_r("onRight"),_r("onTab"),_r("onShiftTab"),_r("onUp"),_r("onDown"),_r("onEscape"),_e("stopSpaceKeyup",!1),Cs("focusIn")],NF=(t,s,a)=>[as(ns(tl),a.onSpace),as(vu([b1,ns(ju)]),a.onEnter),as(vu([Lg,ns(ju)]),a.onShiftEnter),as(vu([Lg,ns(Ld)]),a.onShiftTab),as(vu([b1,ns(Ld)]),a.onTab),as(ns(Ig),a.onUp),as(ns(Mm),a.onDown),as(ns(A0),a.onLeft),as(ns(p1),a.onRight),as(ns(tl),a.onSpace)],sD=(t,s,a)=>[...a.stopSpaceKeyup?[as(ns(tl),T)]:[],as(ns(h1),a.onEscape)];var BF=Hg(MF,Yi.init,NF,sD,t=>t.focusIn);const rD=l.schema(),aD=m.schema(),PF=bF.schema(),$F=Vg.schema(),FF=_F.schema(),IF=le.schema(),cD=oD.schema(),iD=BF.schema();var Yh=Object.freeze({__proto__:null,acyclic:rD,cyclic:aD,flow:PF,flatgrid:$F,matrix:FF,execution:IF,menu:cD,special:iD});const lD=t=>ca(t,"setGridSize"),yn=lS({branchKey:"mode",branches:Yh,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{lD(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:Nt}),Tx=(t,s)=>{zb(()=>{ZS(t,s,()=>Se(s,t.getSystem().build))},t.element)},uD=(t,s)=>{zb(()=>{Xk(t,s,()=>Uw(t.element,s,t.getSystem().buildOrPatch))},t.element)},LF=(t,s,a,i)=>{a0(s);const d=zw(t.element,a,i,t.getSystem().buildOrPatch);r0(t,d),t.syncComponents()},M_=(t,s,a)=>{const i=t.getSystem().build(a);s1(t,i,s)},HF=(t,s,a,i)=>{Bd(s),M_(t,(d,g)=>za(d,g,a),i)},dD=(t,s,a,i)=>(s.reuseDom?uD:Tx)(t,i),N_=(t,s,a,i)=>{M_(t,ni,i)},B_=(t,s,a,i)=>{M_(t,sh,i)},VF=(t,s,a,i)=>{const d=Nm(t);Ue(d,p=>ms(i.element,p.element)).each(Bd)},Nm=(t,s)=>t.components(),P_=(t,s,a,i,d)=>{const g=Nm(t);return A.from(g[i]).map(p=>(d.fold(()=>Bd(p),C=>{(s.reuseDom?LF:HF)(t,p,i,C)}),p))};var UF=Object.freeze({__proto__:null,append:N_,prepend:B_,remove:VF,replaceAt:P_,replaceBy:(t,s,a,i,d)=>{const g=Nm(t);return wt(g,i).bind(p=>P_(t,s,a,p,d))},set:dD,contents:Nm});const Jn=fc({fields:[Qa("reuseDom",!0)],name:"replacing",apis:UF}),H2=(t,s)=>{const a=cr(s);return fc({fields:[Je("enabled")],name:t,active:{events:G(a)}})},ro=(t,s)=>{const a=H2(t,s);return{key:t,value:{config:{},me:a,configAsRaw:G({}),initialConfig:{},state:Yi}}},$_=(t,s)=>{s.ignore||(fu(t.element),s.onFocus(t))};var Xh=Object.freeze({__proto__:null,focus:$_,blur:(t,s)=>{s.ignore||Cy(t.element)},isFocused:t=>Zp(t.element)}),mD=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Lu(a)},events:t=>cr([st(Sd(),(s,a)=>{$_(s,t),a.stop()})].concat(t.stopMousedown?[st(ua(),(s,a)=>{a.event.prevent()})]:[]))}),zg=[Ee("onFocus"),_e("stopMousedown",!1),_e("ignore",!1)];const Bn=fc({fields:zg,name:"focusing",active:mD,apis:Xh}),fD=t=>({init:()=>{const a=S(t);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(t),readState:()=>a.get()}}}),gD=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},hD=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?$s(t.element,i):da(t.element,i)})},w1=(t,s,a,i)=>{const d=a.get();a.set(i),hD(t,s,a),gD(t,s,a),d!==i&&s.onToggled(t,i)},F_=(t,s,a)=>{w1(t,s,a,!a.get())},ZF=(t,s,a)=>{w1(t,s,a,!0)},jF=(t,s,a)=>{w1(t,s,a,!1)},GF=(t,s,a)=>a.get(),V2=(t,s,a)=>{w1(t,s,a,s.selected)};var I_=Object.freeze({__proto__:null,onLoad:V2,toggle:F_,isOn:GF,on:ZF,off:jF,set:w1}),qF=Object.freeze({__proto__:null,exhibit:()=>Lu({}),events:(t,s)=>{const a=Vb(t,s,F_),i=vy(t,s,V2);return cr(Ge([t.toggleOnExecute?[a]:[],[i]]))}});const bD=(t,s,a)=>{zn(t.element,"aria-pressed",a),s.syncWithExpanded&&L_(t,s,a)},vD=(t,s,a)=>{zn(t.element,"aria-selected",a)},yD=(t,s,a)=>{zn(t.element,"aria-checked",a)},L_=(t,s,a)=>{zn(t.element,"aria-expanded",a)};var KF=[_e("selected",!1),Cs("toggleClass"),_e("toggleOnExecute",!0),Ee("onToggled"),si("aria",{mode:"none"},ia("mode",{pressed:[_e("syncWithExpanded",!1),ir("update",bD)],checked:[ir("update",yD)],expanded:[ir("update",L_)],selected:[ir("update",vD)],none:[ir("update",K)]}))];const vo=fc({fields:KF,name:"toggling",active:qF,apis:I_,state:fD(!1)}),CD=()=>{const t=(s,a)=>{a.stop(),gm(s)};return[st(fl(),t),st(Tp(),t),lg(cu()),lg(ua())]},Ex=t=>{const s=a=>Fu((i,d)=>{a(i),d.stop()});return cr(Ge([t.map(s).toArray(),CD()]))},wD="alloy.item-hover",SD="alloy.item-focus",H_="alloy.item-toggled",xD=t=>{(Uu(t.element).isNone()||Bn.isFocused(t))&&(Bn.isFocused(t)||Bn.focus(t),bn(t,wD,{item:t}))},TD=t=>{bn(t,SD,{item:t})},YF=(t,s)=>{bn(t,H_,{item:t,state:s})},R0=G(wD),XF=G(SD),z2=G(H_),V_=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),ED=t=>({aria:{mode:"checked"},...aa(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{mt(t.onToggled)&&t.onToggled(s,a),YF(s,a)}}),kD=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:V_(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:pu.augment(t.itemBehaviours,[t.toggling.fold(vo.revoke,s=>vo.config(ED(s))),Bn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{TD(s)}}),yn.config({mode:"execution"}),Ft.config({store:{mode:"memory",initialValue:t.data}}),ro("item-type-events",[...CD(),st(ml(),xD),st(xd(),Bn.focus)])]),components:t.components,eventOrder:t.eventOrder}),JF=[Je("data"),Je("components"),Je("dom"),_e("hasSubmenu",!1),Cs("toggling"),pu.field("itemBehaviours",[vo,Bn,yn,Ft]),_e("ignoreFocus",!1),_e("domModification",{}),ir("builder",kD),_e("eventOrder",{})],QF=t=>({dom:t.dom,components:t.components,events:cr([Hv(xd())])}),_D=[Je("dom"),Je("components"),ir("builder",QF)],z_=G("item-widget"),kx=G([oc({name:"widget",overrides:t=>({behaviours:yt([Ft.config({store:{mode:"manual",getValue:s=>t.data,setValue:K}})])})})]),eI=t=>{const s=g2(z_(),t,kx()),a=h2(z_(),t,s.internals()),i=g=>er(g,t,"widget").map(p=>(yn.focusIn(p),p)),d=(g,p)=>Tf(p.event.target)?A.none():(()=>(t.autofocus&&p.setSource(g.element),A.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:cr([Fu((g,p)=>{i(g).each(C=>{p.stop()})}),st(ml(),xD),st(xd(),(g,p)=>{t.autofocus?i(g):Bn.focus(g)})]),behaviours:pu.augment(t.widgetBehaviours,[Ft.config({store:{mode:"memory",initialValue:t.data}}),Bn.config({ignore:t.ignoreFocus,onFocus:g=>{TD(g)}}),yn.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:uS(),onLeft:d,onRight:d,onEscape:(g,p)=>!Bn.isFocused(g)&&!t.autofocus?(Bn.focus(g),A.some(!0)):(t.autofocus&&p.setSource(g.element),A.none())})])}},tI=[Je("uid"),Je("data"),Je("components"),Je("dom"),_e("autofocus",!1),_e("ignoreFocus",!1),pu.field("widgetBehaviours",[Ft,Bn,yn]),_e("domModification",{}),w2(kx()),ir("builder",eI)],AD=ia("type",{widget:tI,item:JF,separator:_D}),_x=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),U_=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),W_=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),nI=G([f1({factory:{sketch:t=>{const s=_c("menu.spec item",AD,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>io(s,"uid")?s:{...s,uid:gl("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),oI=G([Je("value"),Je("items"),Je("dom"),Je("components"),_e("eventOrder",{}),pc("menuBehaviours",[gs,Ft,Ho,yn]),si("movement",{mode:"menu",moveOnTab:!0},ia("mode",{grid:[Ip(),ir("config",_x)],matrix:[ir("config",U_),Je("rowSelector"),_e("previousSelector",A.none)],menu:[_e("moveOnTab",!0),ir("config",W_)]})),tS(),_e("fakeFocus",!1),_e("focusManager",P2()),Ee("onHighlight"),Ee("onDehighlight")]),OD=G("alloy.menu-focus"),sI=(t,s)=>{const a=Ga(t.element,'[role="menuitemradio"][aria-checked="true"]');Qe(a,i=>{ms(i,s.element)||t.getSystem().getByDom(i).each(d=>{vo.off(d)})})},DD=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Sr(t.menuBehaviours,[gs.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ft.config({store:{mode:"memory",initialValue:t.value}}),Ho.config({find:A.some}),yn.config(t.movement.config(t,t.movement))]),events:cr([st(XF(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(C=>{gs.highlight(d,C),g.stop(),bn(d,OD(),{menu:d,item:C})})}),st(R0(),(d,g)=>{const p=g.event.item;gs.highlight(d,p)}),st(z2(),(d,g)=>{const{item:p,state:C}=g.event;C&&Qr(p.element,"role")==="menuitemradio"&&sI(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),Jh=ma({name:"Menu",configFields:oI(),partFields:nI(),factory:DD}),rI=t=>ss(t,(s,a)=>({k:s,v:a})),RD=(t,s,a,i)=>bt(a,i).bind(d=>bt(t,d).bind(g=>{const p=RD(t,s,a,g);return A.some([g].concat(p))})).getOr([]),aI=(t,s)=>{const a={};ts(t,(p,C)=>{Qe(p,x=>{a[x]=C})});const i=s,d=rI(s),g=ls(d,(p,C)=>[C].concat(RD(a,i,d,C)));return ls(a,p=>bt(g,p).getOr([p]))},cI=()=>{const t=S({}),s=S({}),a=S({}),i=Qs(),d=S({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},p=()=>i.get().isNone(),C=(kt,at)=>{s.set({...s.get(),[kt]:{type:"prepared",menu:at}})},x=(kt,at,Bt,cn)=>{i.set(kt),t.set(Bt),s.set(at),d.set(cn);const Ao=aI(cn,Bt);a.set(Ao)},_=kt=>Rs(t.get(),(at,Bt)=>at===kt),D=(kt,at,Bt)=>ue(kt).bind(cn=>_(kt).bind(Ao=>at(Ao).map(Cn=>({triggeredMenu:cn,triggeringItem:Cn,triggeringPath:Bt})))),B=(kt,at)=>{const Bt=Dn(Ce(kt).toArray(),cn=>ue(cn).isSome());return bt(a.get(),kt).bind(cn=>{const Ao=eo(Bt.concat(cn)),Cn=xe(Ao,(Eo,Gn)=>D(Eo,at,Ao.slice(0,Gn+1)).fold(()=>sr(i.get(),Eo)?[]:[A.none()],wo=>[A.some(wo)]));return rs(Cn)})},F=kt=>bt(t.get(),kt).map(at=>{const Bt=bt(a.get(),kt).getOr([]);return[at].concat(Bt)}),V=kt=>bt(a.get(),kt).bind(at=>at.length>1?A.some(at.slice(1)):A.none()),X=kt=>bt(a.get(),kt),ue=kt=>Oe(kt).bind(MD),Oe=kt=>bt(s.get(),kt),Ce=kt=>bt(t.get(),kt);return{setMenuBuilt:C,setContents:x,expand:F,refresh:X,collapse:V,lookupMenu:Oe,lookupItem:Ce,otherMenus:kt=>{const at=d.get();return Rt(is(at),kt)},getPrimary:()=>i.get().bind(ue),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:B}},MD=t=>t.type==="prepared"?A.some(t.menu):A.none(),ND={init:cI,extractPreparedMenu:MD},Z_=nn("tiered-menu-item-highlight"),BD=nn("tiered-menu-item-dehighlight");var sl;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(sl||(sl={}));const iI=(t,s)=>{const a=Qs(),i=(vt,an,jt)=>ls(jt,(Pn,mo)=>{const zo=()=>Jh.sketch({...Pn,value:mo,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Ia,ws)=>{bn(Ia,Z_,{menuComp:Ia,itemComp:ws})},onDehighlight:(Ia,ws)=>{bn(Ia,BD,{menuComp:Ia,itemComp:ws})},focusManager:t.fakeFocus?$2():P2()});return mo===an?{type:"prepared",menu:vt.getSystem().build(zo())}:{type:"notbuilt",nbMenu:zo}}),d=ND.init(),g=vt=>{const an=i(vt,t.data.primary,t.data.menus),jt=x();return d.setContents(t.data.primary,an,t.data.expansions,jt),d.getPrimary()},p=vt=>Ft.getValue(vt).value,C=(vt,an,jt)=>Ss(an,Pn=>{if(!Pn.getSystem().isConnected())return A.none();const mo=gs.getCandidates(Pn);return Ue(mo,zo=>p(zo)===jt)}),x=vt=>ls(t.data.menus,(an,jt)=>xe(an.items,Pn=>Pn.type==="separator"?[]:[Pn.data.value])),_=gs.highlight,D=(vt,an)=>{_(vt,an),gs.getHighlighted(an).orThunk(()=>gs.getFirst(an)).each(jt=>{t.fakeFocus?gs.highlight(an,jt):cg(vt,jt.element,xd())})},B=(vt,an)=>Aa(Se(an,jt=>vt.lookupMenu(jt).bind(Pn=>Pn.type==="prepared"?A.some(Pn.menu):A.none()))),F=(vt,an,jt)=>{const Pn=B(an,an.otherMenus(jt));Qe(Pn,mo=>{vi(mo.element,[t.markers.backgroundMenu]),t.stayInDom||Jn.remove(vt,mo)})},V=vt=>a.get().getOrThunk(()=>{const an={},jt=Ga(vt.element,`.${t.markers.item}`),Pn=Dn(jt,mo=>Qr(mo,"aria-haspopup")==="true");return Qe(Pn,mo=>{vt.getSystem().getByDom(mo).each(zo=>{const Ia=p(zo);an[Ia]=zo})}),a.set(an),an}),X=(vt,an)=>{const jt=V(vt);ts(jt,(Pn,mo)=>{const zo=po(an,mo);zn(Pn.element,"aria-expanded",zo)})},ue=(vt,an,jt)=>A.from(jt[0]).bind(Pn=>an.lookupMenu(Pn).bind(mo=>{if(mo.type==="notbuilt")return A.none();{const zo=mo.menu,Ia=B(an,jt.slice(1));return Qe(Ia,ws=>{$s(ws.element,t.markers.backgroundMenu)}),Go(zo.element)||Jn.append(vt,Li(zo)),vi(zo.element,[t.markers.backgroundMenu]),D(vt,zo),F(vt,an,jt),A.some(zo)}}));let Oe;(function(vt){vt[vt.HighlightSubmenu=0]="HighlightSubmenu",vt[vt.HighlightParent=1]="HighlightParent"})(Oe||(Oe={}));const Ce=(vt,an,jt)=>{if(jt.type==="notbuilt"){const Pn=vt.getSystem().build(jt.nbMenu());return d.setMenuBuilt(an,Pn),Pn}else return jt.menu},Ae=(vt,an,jt=Oe.HighlightSubmenu)=>{if(an.hasConfigured(Un)&&Un.isDisabled(an))return A.some(an);{const Pn=p(an);return d.expand(Pn).bind(mo=>(X(vt,mo),A.from(mo[0]).bind(zo=>d.lookupMenu(zo).bind(Ia=>{const ws=Ce(vt,zo,Ia);return Go(ws.element)||Jn.append(vt,Li(ws)),t.onOpenSubmenu(vt,an,ws,eo(mo)),jt===Oe.HighlightSubmenu?(gs.highlightFirst(ws),ue(vt,d,mo)):(gs.dehighlightAll(ws),A.some(an))}))))}},Pe=(vt,an)=>{const jt=p(an);return d.collapse(jt).bind(Pn=>(X(vt,Pn),ue(vt,d,Pn).map(mo=>(t.onCollapseMenu(vt,an,mo),mo))))},He=(vt,an)=>{const jt=p(an);return d.refresh(jt).bind(Pn=>(X(vt,Pn),ue(vt,d,Pn)))},kt=(vt,an)=>Tf(an.element)?A.none():Ae(vt,an,Oe.HighlightSubmenu),at=(vt,an)=>Tf(an.element)?A.none():Pe(vt,an),Bt=(vt,an)=>Pe(vt,an).orThunk(()=>t.onEscape(vt,an).map(()=>vt)),cn=vt=>(an,jt)=>_d(jt.getSource(),`.${t.markers.item}`).bind(Pn=>an.getSystem().getByDom(Pn).toOptional().bind(mo=>vt(an,mo).map(Zt))),Ao=cr([st(OD(),(vt,an)=>{const jt=an.event.item;d.lookupItem(p(jt)).each(()=>{const Pn=an.event.menu;gs.highlight(vt,Pn);const mo=p(an.event.item);d.refresh(mo).each(zo=>F(vt,d,zo))})}),Fu((vt,an)=>{const jt=an.event.target;vt.getSystem().getByDom(jt).each(Pn=>{p(Pn).indexOf("collapse-item")===0&&Pe(vt,Pn),Ae(vt,Pn,Oe.HighlightSubmenu).fold(()=>{t.onExecute(vt,Pn)},K)})}),Zr((vt,an)=>{g(vt).each(jt=>{Jn.append(vt,Li(jt)),t.onOpenMenu(vt,jt),t.highlightOnOpen===sl.HighlightMenuAndItem?D(vt,jt):t.highlightOnOpen===sl.HighlightJustMenu&&_(vt,jt)})}),st(Z_,(vt,an)=>{t.onHighlightItem(vt,an.event.menuComp,an.event.itemComp)}),st(BD,(vt,an)=>{t.onDehighlightItem(vt,an.event.menuComp,an.event.itemComp)}),...t.navigateOnHover?[st(R0(),(vt,an)=>{const jt=an.event.item;He(vt,jt),Ae(vt,jt,Oe.HighlightParent),t.onHover(vt,jt)})]:[]]),Cn=vt=>gs.getHighlighted(vt).bind(gs.getHighlighted),Eo=vt=>{Cn(vt).each(an=>{Pe(vt,an)})},Gn=vt=>{d.getPrimary().each(an=>{D(vt,an)})},wo=vt=>A.from(vt.components()[0]).filter(an=>Qr(an.element,"role")==="menu"),_s={collapseMenu:Eo,highlightPrimary:Gn,repositionMenus:vt=>{d.getPrimary().bind(jt=>Cn(vt).bind(Pn=>{const mo=p(Pn),zo=Or(d.getMenus()),Ia=Aa(Se(zo,ND.extractPreparedMenu));return d.getTriggeringPath(mo,ws=>C(vt,Ia,ws))}).map(Pn=>({primary:jt,triggeringPath:Pn}))).fold(()=>{wo(vt).each(jt=>{t.onRepositionMenu(vt,jt,[])})},({primary:jt,triggeringPath:Pn})=>{t.onRepositionMenu(vt,jt,Pn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Sr(t.tmenuBehaviours,[yn.config({mode:"special",onRight:cn(kt),onLeft:cn(at),onEscape:cn(Bt),focusIn:(vt,an)=>{d.getPrimary().each(jt=>{cg(vt,jt.element,xd())})}}),gs.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Ho.config({find:vt=>gs.getHighlighted(vt)}),Jn.config({})]),eventOrder:t.eventOrder,apis:_s,events:Ao}},lI=G("collapse-item"),uI=(t,s,a)=>({primary:t,menus:s,expansions:a}),S1=(t,s)=>({primary:t,menus:no(t,s),expansions:{}}),dI=t=>({value:nn(lI()),meta:{text:t}}),x1=Ta({name:"TieredMenu",configFields:[ay("onExecute"),ay("onEscape"),yg("onOpenMenu"),yg("onOpenSubmenu"),Ee("onRepositionMenu"),Ee("onCollapseMenu"),_e("highlightOnOpen",sl.HighlightMenuAndItem),Nu("data",[Je("primary"),Je("menus"),Je("expansions")]),_e("fakeFocus",!1),Ee("onHighlightItem"),Ee("onDehighlightItem"),Ee("onHover"),zu(),Je("dom"),_e("navigateOnHover",!0),_e("stayInDom",!1),pc("tmenuBehaviours",[yn,gs,Ho,Jn]),_e("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:iI,extraApis:{tieredData:uI,singleData:S1,collapseItem:dI}}),T1=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>Up(),onRtl:()=>Lb()}}:{},C=_=>_.length===2,x=_=>C(_)?p:{};return x1.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Mo.close(s),t.onEscape.map(_=>_(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(_,D)=>{Yr.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(_,D,B,F)=>{const V=g().getOrDie();Yr.position(V,B,{anchor:{type:"submenu",item:D,...x(F)}})},onRepositionMenu:(_,D,B)=>{const F=g().getOrDie();Yr.positionWithinBounds(F,D,a,d()),Qe(B,V=>{const X=x(V.triggeringPath);Yr.position(F,V.triggeredMenu,{anchor:{type:"submenu",item:V.triggeringItem,...X}})})}})},mI=(t,s)=>{const a=(F,V)=>t.getRelated(F).exists(ue=>bg(ue,V)),i=(F,V)=>{Mo.setContent(F,V)},d=(F,V,X)=>{const ue=A.none;g(F,V,X,ue)},g=(F,V,X,ue)=>{const Oe=t.lazySink(F).getOrDie();Mo.openWhileCloaked(F,V,()=>Yr.positionWithinBounds(Oe,F,X,ue())),Ft.setValue(F,A.some({mode:"position",config:X,getBounds:ue}))},p=(F,V,X)=>{C(F,V,X,A.none)},C=(F,V,X,ue)=>{const Oe=T1(t,F,V,X,ue);Mo.open(F,Oe),Ft.setValue(F,A.some({mode:"menu",menu:Oe}))},x=F=>{Mo.isOpen(F)&&(Ft.setValue(F,A.none()),Mo.close(F))},_=F=>Mo.getState(F),D=F=>{Mo.isOpen(F)&&Ft.getValue(F).each(V=>{switch(V.mode){case"menu":Mo.getState(F).each(x1.repositionMenus);break;case"position":const X=t.lazySink(F).getOrDie();Yr.positionWithinBounds(X,F,V.config,V.getBounds());break}})},B={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:C,hide:x,getContent:_,reposition:D,isOpen:Mo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Sr(t.inlineBehaviours,[Mo.config({isPartOf:(F,V,X)=>bg(V,X)||a(F,X),getAttachPoint:F=>t.lazySink(F).getOrDie(),onOpen:F=>{t.onShow(F)},onClose:F=>{t.onHide(F)}}),Ft.config({store:{mode:"memory",initialValue:A.none()}}),Pl.config({channels:{...c1({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(F=>({fireEventInstead:{event:F.event}})).getOr({})}),...Bg({...t.fireRepositionEventInstead.map(F=>({fireEventInstead:{event:F.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:B}},$a=Ta({name:"InlineView",configFields:[Je("lazySink"),Ee("onShow"),Ee("onHide"),Ac("onEscape"),pc("inlineBehaviours",[Mo,Ft,Pl]),Hc("fireDismissalEventInstead",[_e("event",rf())]),Hc("fireRepositionEventInstead",[_e("event",_p())]),_e("getRelated",A.none),_e("isExtraPart",Ln),_e("eventOrder",A.none)],factory:mI,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Bm=tinymce.util.Tools.resolve("tinymce.util.Delay");const Jc=Ta({name:"Button",factory:t=>{const s=Ex(t.action),a=t.dom.tag,i=g=>bt(t.dom,"attributes").bind(p=>bt(p,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),p=i("role").map(C=>({role:C})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(i("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:pu.augment(t.buttonBehaviours,[Bn.config({}),yn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[_e("uid",void 0),Je("dom"),_e("components",[]),pu.field("buttonBehaviours",[Bn,yn]),Cs("action"),Cs("role"),_e("eventOrder",{})]}),No=t=>{const s=rn(t)&&ca(t,"uid")?t.uid:gl("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var Cu=tinymce.util.Tools.resolve("tinymce.util.I18n");const PD={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},j_="temporary-placeholder",G_=t=>()=>bt(t,j_).getOr("!not found!"),U2=(t,s)=>{const a=t.toLowerCase();if(Cu.isRtl()){const i=Is(a,"-rtl");return io(s,i)?i:a}else return a},$D=(t,s)=>bt(s,U2(t,s)),FD=(t,s)=>{const a=s();return $D(t,a).getOrThunk(G_(a))},fI=(t,s,a)=>{const i=s();return $D(t,i).or(a).getOrThunk(G_(i))},Ax=t=>Cu.isRtl()?io(PD,t):!1,W2=()=>ro("add-focusable",[Zr(t=>{wm(t.element,"svg").each(s=>zn(s,"focusable","false"))})]),ID=(t,s,a,i)=>{var d,g;const p=Ax(s)?["tox-icon--flip"]:[],C=bt(a,U2(s,a)).or(i).getOrThunk(G_(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:C},behaviours:yt([...(g=t.behaviours)!==null&&g!==void 0?g:[],W2()])}},Gu=(t,s,a,i=A.none())=>ID(s,t,a(),i),LD=(t,s,a)=>{const i=a(),d=Ue(t,g=>io(i,U2(g,i)));return ID(s,d.getOr(j_),i,A.none())},gI={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},q_=Ta({name:"Notification",factory:t=>{const s=No({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:yt([Jn.config({})])}),a=V=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${V}%`}}}),i=V=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${V}%`}}),d=No({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},i(0)],behaviours:yt([Jn.config({})])}),C={updateProgress:(V,X)=>{V.getSystem().isConnected()&&d.getOpt(V).each(ue=>{Jn.set(ue,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(X)]},i(X)])})},updateText:(V,X)=>{if(V.getSystem().isConnected()){const ue=s.get(V);Jn.set(ue,[kr(X)])}}},x=Ge([t.icon.toArray(),t.level.toArray(),t.level.bind(V=>A.from(gI[V])).toArray()]),_=No(Jc.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Gu("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:V=>{t.onAction(V)}})),D=LD(x,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),B={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:yt([Jn.config({})])},F=[D,B];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(V=>["tox-notification","tox-notification--in",`tox-notification--${V}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:yt([Bn.config({}),ro("notification-events",[st(sf(),V=>{_.getOpt(V).each(Bn.focus)})])]),components:F.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[_.asSpec()]:[]),apis:C}},configFields:[Cs("level"),Je("progress"),Cs("icon"),Je("onAction"),Je("text"),Je("iconProvider"),Je("translationProvider"),Qa("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var K_=(t,s,a)=>{const i=s.backstage.shared,d=()=>{const x=k(be.fromDom(t.getContentAreaContainer())),_=ge(),D=Xi(_.x,x.x,x.right),B=Xi(_.y,x.y,x.bottom),F=Math.max(x.right,_.right),V=Math.max(x.bottom,_.bottom);return A.some(ar(D,B,F-D,V-B))};return{open:(x,_)=>{const D=()=>{_(),$a.hide(F)},B=Yc(q_.sketch({text:x.text,level:po(["success","error","warning","warn","info"],x.type)?x.type:void 0,progress:x.progressBar===!0,icon:x.icon,closeButton:x.closeButton,onAction:D,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),F=Yc($a.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(F),Nn(x.timeout)&&x.timeout>0&&Bm.setEditorTimeout(t,()=>{D()},x.timeout);const X={close:D,reposition:()=>{const ue=Li(B),Oe={maxHeightFunction:xg()},Ce=t.notificationManager.getNotifications();if(Ce[0]===X){const Ae={...i.anchors.banner(),overrides:Oe};$a.showWithinBounds(F,ue,{anchor:Ae},d)}else qe(Ce,X).each(Ae=>{const Pe=Ce[Ae-1].getEl(),He={type:"node",root:rr(),node:A.some(be.fromDom(Pe)),overrides:Oe,layouts:{onRtl:()=>[Oc],onLtr:()=>[Oc]}};$a.showWithinBounds(F,ue,{anchor:He},d)})},text:ue=>{q_.updateText(B,ue)},settings:x,getEl:()=>B.element.dom,progressBar:{value:ue=>{q_.updateProgress(B,ue)}}};return X},close:x=>{x.close()},getArgs:x=>x.settings}},Z2=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),j2=tinymce.util.Tools.resolve("tinymce.EditorManager"),Ug=tinymce.util.Tools.resolve("tinymce.Env"),wu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(wu||(wu={}));var M0;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(M0||(M0={}));const vr=t=>s=>s.options.get(t),G2=t=>s=>A.from(t(s)),VD=t=>{const s=Ug.deviceType.isPhone(),a=Ug.deviceType.isTablet()||s,i=t.options.register,d=p=>Vt(p)||p===!1,g=p=>Vt(p)||Nn(p);i("skin",{processor:p=>Vt(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:Z2.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>Vt(p)||ho(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>ho(p)||Vt(p)||Oo(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),pt(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:M0.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||ho(p),default:!Ug.deviceType.isTouch()}),i("sidebar_show",{processor:"string"})},zD=vr("readonly"),q2=vr("height"),Ox=vr("width"),Dx=G2(vr("min_width")),K2=G2(vr("min_height")),Rx=G2(vr("max_width")),Mx=G2(vr("max_height")),UD=G2(vr("style_formats")),WD=vr("style_formats_merge"),ZD=vr("style_formats_autohide"),Y_=vr("content_langs"),jD=vr("removed_menuitems"),N0=vr("toolbar_mode"),Nx=vr("toolbar_groups"),Bx=vr("toolbar_location"),GD=vr("fixed_toolbar_container"),hI=vr("fixed_toolbar_container_target"),Px=vr("toolbar_persist"),qD=vr("toolbar_sticky_offset"),KD=vr("menubar"),$x=vr("toolbar"),YD=vr("file_picker_callback"),XD=vr("file_picker_validator_handler"),X_=vr("font_size_input_default_unit"),Fx=vr("file_picker_types"),JD=vr("typeahead_urls"),Y2=vr("anchor_top"),QD=vr("anchor_bottom"),eR=vr("draggable_modal"),tR=vr("statusbar"),nR=vr("elementpath"),oR=vr("branding"),sR=vr("resize"),J_=vr("paste_as_text"),rR=vr("sidebar_show"),aR=vr("promotion"),X2=t=>t.options.get("skin")===!1,_f=t=>t.options.get("menubar")!==!1,cR=t=>{const s=t.options.get("skin_url");if(X2(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return j2.baseURL+"/skins/ui/"+a}},iR=t=>t.options.get("line_height_formats").split(" "),B0=t=>{const s=$x(t),a=Vt(s),i=Oo(s)&&s.length>0;return!P0(t)&&(i||a||s===!0)},Q_=t=>{const s=pt(9,i=>t.options.get("toolbar"+(i+1))),a=Dn(s,Vt);return hn(a.length>0,a)},P0=t=>Q_(t).fold(()=>{const s=$x(t);return ct(s,Vt)&&s.length>0},Zt),eA=t=>Bx(t)===M0.bottom,tA=t=>{var s;if(!t.inline)return A.none();const a=(s=GD(t))!==null&&s!==void 0?s:"";if(a.length>0)return $r(rr(),a);const i=hI(t);return Xn(i)?A.some(be.fromDom(i)):A.none()},E1=t=>t.inline&&tA(t).isSome(),J2=t=>tA(t).getOrThunk(()=>it(Le(be.fromDom(t.getElement())))),nA=t=>t.inline&&!_f(t)&&!B0(t)&&!P0(t),$0=t=>(t.options.get("toolbar_sticky")||t.inline)&&!E1(t)&&!nA(t),Qh=t=>!E1(t)&&t.options.get("ui_mode")==="split",F0=t=>{const s=t.options.get("menu");return ls(s,a=>({...a,items:a.items}))};var pI=Object.freeze({__proto__:null,get ToolbarMode(){return wu},get ToolbarLocation(){return M0},register:VD,getSkinUrl:cR,isReadOnly:zD,isSkinDisabled:X2,getHeightOption:q2,getWidthOption:Ox,getMinWidthOption:Dx,getMinHeightOption:K2,getMaxWidthOption:Rx,getMaxHeightOption:Mx,getUserStyleFormats:UD,shouldMergeStyleFormats:WD,shouldAutoHideStyleFormats:ZD,getLineHeightFormats:iR,getContentLanguages:Y_,getRemovedMenuItems:jD,isMenubarEnabled:_f,isMultipleToolbars:P0,isToolbarEnabled:B0,isToolbarPersist:Px,getMultipleToolbarsOption:Q_,getUiContainer:J2,useFixedContainer:E1,isSplitUiMode:Qh,getToolbarMode:N0,isDraggableModal:eR,isDistractionFree:nA,isStickyToolbar:$0,getStickyToolbarOffset:qD,getToolbarLocation:Bx,isToolbarLocationBottom:eA,getToolbarGroups:Nx,getMenus:F0,getMenubar:KD,getToolbar:$x,getFilePickerCallback:YD,getFilePickerTypes:Fx,useTypeaheadUrls:JD,getAnchorTop:Y2,getAnchorBottom:QD,getFilePickerValidatorHandler:XD,getFontSizeInputDefaultUnit:X_,useStatusBar:tR,useElementPath:nR,promotionEnabled:aR,useBranding:oR,getResize:sR,getPasteAsText:J_,getSidebarShow:rR});const lR="[data-mce-autocompleter]",Ix=t=>_d(t,lR),oA=t=>$r(t,lR),uR={setup:(t,s)=>{const a=(d,g)=>{bn(d,Pi(),{raw:g})},i=()=>t.getMenu().bind(gs.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(gm),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(gs.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&Ix(be.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var sA;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(sA||(sA={}));var Pm=sA;const Q2="tox-menu-nav__js",Lx="tox-collection__item",rA="tox-swatch",bI={normal:Q2,color:rA},dR="tox-collection__item--enabled",vI="tox-collection__group-heading",mR="tox-collection__item-icon",aA="tox-collection__item-label",yI="tox-collection__item-accessory",fR="tox-collection__item-caret",CI="tox-collection__item-checkmark",eC="tox-collection__item--active",gR="tox-collection__item-container",cA="tox-collection__item-container--column",hR="tox-collection__item-container--row",wI="tox-collection__item-container--align-right",SI="tox-collection__item-container--align-left",pR="tox-collection__item-container--valign-top",xI="tox-collection__item-container--valign-middle",TI="tox-collection__item-container--valign-bottom",bR=t=>bt(bI,t).getOr(Q2),EI=t=>t==="color"?"tox-swatches":"tox-menu",iA=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:EI(t),tieredMenu:"tox-tiered-menu"}),k1=t=>{const s=iA(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:bR(t)}},lA=(t,s,a)=>{const i=iA(a);return{tag:"div",classes:Ge([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},kI=[Jh.parts.items({})],Hx=(t,s,a)=>{const i=iA(a);return{dom:{tag:"div",classes:Ge([[i.tieredMenu]])},markers:k1(a)}},vR=G([Cs("data"),_e("inputAttributes",{}),_e("inputStyles",{}),_e("tag","input"),_e("inputClasses",[]),Ee("onSetValue"),_e("styles",{}),_e("eventOrder",{}),pc("inputBehaviours",[Ft,Bn]),_e("selectOnFocus",!0)]),yR=t=>yt([Bn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=hl(a);a.dom.setSelectionRange(0,i.length)}:K})]),_I=t=>({...yR(t),...Sr(t.inputBehaviours,[Ft.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>hl(s.element),setValue:(s,a)=>{hl(s.element)!==a&&lu(s.element,a)}},onSetValue:t.onSetValue})])}),CR=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),AI=(t,s)=>({uid:t.uid,dom:CR(t),components:[],behaviours:_I(t),eventOrder:t.eventOrder}),_1=Ta({name:"Input",configFields:vR(),factory:AI}),wR=nn("refetch-trigger-event"),SR=nn("redirect-menu-item-interaction"),xR="tox-menu__searcher",Vx=t=>$r(t.element,`.${xR}`).bind(s=>t.getSystem().getByDom(s).toOptional()),tC=Vx,OI=(t,s)=>{Ft.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},zx=t=>{const s=Ft.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},DI=(t,s)=>{P(s.element,"id").each(a=>zn(t.element,"aria-activedescendant",a))},RI=t=>{const s=(d,g)=>(g.cut(),A.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return bn(d,SR,p),A.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Lx]},components:[_1.sketch({inputClasses:[xR,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:yt([ro(i,[st($i(),d=>{fs(d,wR)}),st(Pi(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),yn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,yn.name()]}})]}},Ux="tox-collection--results__js",TR=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:nn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},uA=(t,s)=>a=>{const i=un(a,s);return Se(i,d=>({dom:t,components:d}))},ER=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Jh.parts.items({preprocess:t!=="auto"?uA({tag:"div",classes:["tox-swatches__row"]},t):ht})]}]}),MI=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Jh.parts.items({preprocess:uA({tag:"div",classes:["tox-collection__group"]},t)})]}),Wx=(t,s)=>{const a=[];let i=[];return Qe(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(io(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Se(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},nC=(t,s,a)=>Jh.parts.items({preprocess:i=>{const d=Se(i,a);return t!=="auto"&&t>1?uA({tag:"div",classes:["tox-collection__group"]},t)(d):Wx(d,(g,p)=>s[p].type==="separator")}}),dA=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[nC(t,s,ht)]}),mA=(t,s,a=!0)=>{const i=nn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Ux].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[nC(t,s,TR)]}},Zx=(t,s,a)=>{const i=nn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[RI({i18n:Cu.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Ux],attributes:{id:i}},components:[nC(t,s,TR)]}]}},kR=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Jh.parts.items({preprocess:a=>Wx(a,(i,d)=>t[d].type==="separator")})]}),qu=t=>os(t,s=>"icon"in s&&s.icon!==void 0),$m=t=>(console.error(nf(t)),console.log(t),A.none()),NI=(t,s,a,i,d)=>{const g=kR(a);return{value:t,dom:g.dom,components:g.components,items:a}},fA=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?dA(i,a):d.searchMode.searchMode==="search-with-field"?Zx(i,a,d.searchMode):mA(i,a);if(d.menuType==="color"){const p=ER(i);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const p=dA(i,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=MI(i);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:lA(s,i,d.menuType),components:kI,items:a}},Fa=qr("type"),gA=qr("name"),ep=qr("label"),Wg=qr("text"),_R=qr("title"),jx=qr("icon"),I0=qr("value"),hA=dl("fetch"),BI=dl("getSubmenuItems"),tp=dl("onAction"),pA=dl("onItemAction"),A1=Pa("onSetup",()=>K),AR=Lc("name"),Zg=Lc("text"),Hd=Lc("icon"),Gx=Lc("tooltip"),bA=Lc("label"),PI=Lc("shortcut"),$I=Ac("select"),oC=Qa("active",!1),OR=Qa("borderless",!1),Vd=Qa("enabled",!0),sC=Qa("primary",!1),vA=t=>_e("columns",t),O1=_e("meta",{}),qx=Pa("onAction",K),D1=t=>pi("type",t),yA=t=>la("name","name",hd(()=>nn(`${t}-name`)),Wr),DR=t=>la("value","value",hd(()=>nn(`${t}-value`)),Ri()),RR=vn([Fa,Zg]),FI=t=>Bs("separatormenuitem",RR,t),MR=vn([D1("autocompleteitem"),oC,Vd,O1,I0,Zg,Hd]),NR=t=>Bs("Autocompleter.Separator",RR,t),BR=t=>Bs("Autocompleter.Item",MR,t),L0=[Vd,Gx,Hd,Zg,A1],II=vn([Fa,tp].concat(L0)),PR=t=>Bs("toolbarbutton",II,t),Kx=[oC].concat(L0),CA=vn(Kx.concat([Fa,tp])),Yx=t=>Bs("ToggleButton",CA,t),wA=[Pa("predicate",Ln),Ni("scope","node",["node","editor"]),Ni("position","selection",["node","selection","line"])],$R=L0.concat([D1("contextformbutton"),sC,tp,Vs("original",ht)]),FR=Kx.concat([D1("contextformbutton"),sC,tp,Vs("original",ht)]),LI=L0.concat([D1("contextformbutton")]),SA=Kx.concat([D1("contextformtogglebutton")]),HI=ia("type",{contextformbutton:$R,contextformtogglebutton:FR}),IR=vn([D1("contextform"),Pa("initValue",G("")),bA,hi("commands",HI),su("launch",ia("type",{contextformbutton:LI,contextformtogglebutton:SA}))].concat(wA)),LR=t=>Bs("ContextForm",IR,t),R1=vn([D1("contexttoolbar"),qr("items")].concat(wA)),VI=t=>Bs("ContextToolbar",R1,t),xA=[Fa,qr("src"),Lc("alt"),ph("classes",[],Wr)],Xx=vn(xA),zI=[Fa,Wg,AR,ph("classes",["tox-collection__item-label"],Wr)],HR=vn(zI),TA=mh(()=>Mi("type",{cardimage:Xx,cardtext:HR,cardcontainer:VR})),VR=vn([Fa,pi("direction","horizontal"),pi("align","left"),pi("valign","middle"),hi("items",TA)]),np=[Vd,Zg,PI,DR("menuitem"),O1],zR=vn([Fa,bA,hi("items",TA),A1,qx].concat(np)),UI=t=>Bs("cardmenuitem",zR,t),UR=vn([Fa,oC,Hd].concat(np)),WR=t=>Bs("choicemenuitem",UR,t),EA=[Fa,qr("fancytype"),qx],ZR=[_e("initData",{})].concat(EA),WI=[Ac("select"),w("initData",{},[Qa("allowCustomColors",!0),pi("storageKey","default"),bb("colors",Ri())])].concat(EA),jR=ia("fancytype",{inserttable:ZR,colorswatch:WI}),rC=t=>Bs("fancymenuitem",jR,t),ZI=vn([Fa,A1,qx,Hd].concat(np)),jI=t=>Bs("menuitem",ZI,t),GI=vn([Fa,BI,A1,Hd].concat(np)),GR=t=>Bs("nestedmenuitem",GI,t),qR=vn([Fa,Hd,oC,A1,tp].concat(np)),qI=t=>Bs("togglemenuitem",qR,t),kA=(t,s,a)=>{const i=Ga(t.element,"."+a);if(i.length>0){const d=wt(i,g=>{const p=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(p-C)>s}).getOr(i.length);return A.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return A.none()},KR=(t,s)=>yt([ro(t,s)]),aC={namedEvents:KR,unnamedEvents:t=>KR(nn("unnamed-events"),t)},cC=nn("tooltip.exclusive"),iC=nn("tooltip.show"),H0=nn("tooltip.hide"),_A=(t,s,a)=>{t.getSystem().broadcastOn([cC],{})};var YI=Object.freeze({__proto__:null,hideAllExclusive:_A,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Jn.set(d,i)})}}),YR=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Bd(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){_A(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:cr(t.mode==="normal"?[st(ml(),C=>{fs(d,iC)}),st(sg(),C=>{fs(d,H0)})]:[]),behaviours:yt([Jn.config({})])});s.setTooltip(p),Nd(g,p),t.onShow(d,p),Yr.position(g,p,{anchor:t.anchor(d)})}};return cr(Ge([[st(iC,d=>{s.resetTimer(()=>{i(d)},t.delay)}),st(H0,d=>{s.resetTimer(()=>{a(d)},t.delay)}),st(ag(),(d,g)=>{const p=g;p.universal||po(p.channels,cC)&&a(d)}),Fi(d=>{a(d)})],t.mode==="normal"?[st(sf(),d=>{fs(d,iC)}),st(Dv(),d=>{fs(d,H0)}),st(ml(),d=>{fs(d,iC)}),st(sg(),d=>{fs(d,H0)})]:[st(kw(),(d,g)=>{fs(d,iC)}),st(Ap(),d=>{fs(d,H0)})]]))}}),XR=[Je("lazySink"),Je("tooltipDom"),_e("exclusive",!0),_e("tooltipComponents",[]),_e("delay",300),Ni("mode","normal",["normal","follow-highlight"]),_e("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:G([Oc,Kr,mc,Ci,ja,Ji]),onRtl:G([Oc,Kr,mc,Ci,ja,Ji])}})),Ee("onHide"),Ee("onShow")],QI=Object.freeze({__proto__:null,init:()=>{const t=Qs(),s=Qs(),a=()=>{t.on(clearTimeout)},i=(g,p)=>{a(),t.set(setTimeout(g,p))},d=G("not-implemented");return Ii({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const JR=fc({fields:XR,name:"tooltipping",active:YR,state:QI,apis:YI}),e6=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),QR="silver.readonly",eM=vn([xp("readonly")]),lC=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&Qe(d,g=>{g.broadcastOn([km()],{target:i})}),Qe(d,g=>{g.broadcastOn([QR],{readonly:s})})},tM=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&lC(s,!0)}),t.on("SwitchMode",()=>lC(s,t.mode.isReadOnly())),zD(t)&&t.mode.set("readonly")},bc=()=>Pl.config({channels:{[QR]:{schema:eM,onReceive:(t,s)=>{Un.set(t,s.readonly)}}}}),zd={item:t=>Un.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Un.config({disabled:t}),splitButton:t=>Un.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Un.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},V0=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},op=(t,s)=>Zr(a=>{V0(t,a)(d=>{const g=t.onSetup(d);mt(g)&&s.set(g)})}),M1=(t,s)=>Fi(a=>V0(t,a)(s.get())),t6=(t,s)=>Fu((a,i)=>{V0(t,a)(t.onAction),!t.triggersSubmenu&&s===Pm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&fs(a,vh()),i.stop())}),nM={[qs()]:["disabling","alloy.base.behaviour","toggling","item-events"]},z0=Aa,U0=(t,s,a,i)=>{const d=S(K);return{type:"item",dom:s.dom,components:z0(s.optComponents),data:t.data,eventOrder:nM,hasSubmenu:t.triggersSubmenu,itemBehaviours:yt([ro("item-events",[t6(t,a),op(t,d),M1(t,d)]),zd.item(()=>!t.enabled||i.isDisabled()),bc(),Jn.config({})].concat(t.itemBehaviours))}},N1=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),oM=t=>{const s=Ug.os.isMacOS()||Ug.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=Se(g,C=>{const x=C.toLowerCase().trim();return io(d,x)?d[x]:C});return s?p.join(""):p.join("+")},Jx=(t,s,a=[mR])=>Gu(t,{tag:"div",classes:a},s),sM=t=>({dom:{tag:"div",classes:[aA]},components:[kr(Cu.translate(t))]}),rM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),n6=(t,s)=>({dom:{tag:"div",classes:[aA]},components:[{dom:{tag:t.tag,styles:t.styles},components:[kr(Cu.translate(s))]}]}),o6=t=>({dom:{tag:"div",classes:[yI]},components:[kr(oM(t))]}),aM=t=>Jx("checkmark",t,[CI]),B1=t=>Jx("chevron-right",t,[fR]),AA=t=>Jx("chevron-down",t,[fR]),s6=(t,s)=>{const a=t.direction==="vertical"?cA:hR,i=t.align==="left"?SI:wI;return{dom:{tag:"div",classes:[gR,a,i,(()=>{switch(t.valign){case"top":return pR;case"middle":return xI;case"bottom":return TI}})()]},components:s}},Qx=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),Fm=(t,s,a)=>{const i="custom",d="remove",g=t.ariaLabel,p=t.value,C=t.iconContent.map(_=>fI(_,s.icons,a));return{dom:(()=>{const _=rA,D=C.getOr(""),F={tag:"div",attributes:g.map(V=>({title:s.translate(V)})).getOr({}),classes:[_]};return p===i?{...F,tag:"button",classes:[...F.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...F,classes:[...F.classes,"tox-swatch--remove"],innerHtml:D}:Xn(p)?{...F,attributes:{...F.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:F})(),optComponents:[]}},cM=t=>{const s=t.map(a=>({attributes:{title:Cu.translate(a)}})).getOr({});return{tag:"div",classes:[Q2,Lx],...s}},r6=(t,s,a,i)=>{const d={tag:"div",classes:[mR]},g=F=>Gu(F,d,s.icons,i),p=()=>A.some({dom:d}),C=a?t.iconContent.map(g).orThunk(p):A.none(),x=t.checkMark,_=A.from(t.meta).fold(()=>sM,F=>io(F,"style")?Pt(n6,F.style):sM),D=t.htmlContent.fold(()=>t.textContent.map(_),F=>A.some(rM(F,[aA])));return{dom:cM(t.ariaLabel),optComponents:[C,D,t.shortcutContent.map(o6),x,t.caret]}},uC=(t,s,a,i=A.none())=>t.presets==="color"?Fm(t,s,i):r6(t,s,a,i),eT=(t,s)=>bt(t,"tooltipWorker").map(a=>[JR.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:xg}}),mode:"follow-highlight",onShow:(i,d)=>{a(g=>{JR.setComponents(i,[df({element:be.fromDom(g)})])})}})]).getOr([]),a6=t=>Z2.DOM.encode(t),iM=(t,s)=>{const a=Cu.translate(t),i=a6(a);if(s.length>0){const d=new RegExp(e6(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},lM=(t,s,a,i,d,g,p,C=!0)=>{const x=uC({presets:i,textContent:A.none(),htmlContent:a?t.text.map(_=>iM(_,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},p.providers,C,t.icon);return U0({data:N1(t),enabled:t.enabled,getApi:G({}),onAction:_=>d(t.value,t.meta),onSetup:G(K),triggersSubmenu:!1,itemBehaviours:eT(t.meta,p)},x,g,p.providers)},uM=(t,s)=>Se(t,a=>{switch(a.type){case"cardcontainer":return s6(a,uM(a.items,s));case"cardimage":return Qx(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>po(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return rM(iM(a.text,d),a.classes)}}),c6=(t,s,a,i)=>{const d=p=>({isEnabled:()=>!Un.isDisabled(p),setEnabled:C=>{Un.set(p,!C),Qe(Ga(p.element,"*"),x=>{p.getSystem().getByDom(x).each(_=>{_.hasConfigured(Un)&&Un.set(_,!C)})})}}),g={dom:cM(t.label),optComponents:[A.some({dom:{tag:"div",classes:[gR,hR]},components:uM(t.items,i)})]};return U0({data:N1({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(i.itemBehaviours).getOr([])},g,s,a.providers)},i6=(t,s,a,i,d,g,p,C=!0)=>{const x=D=>({setActive:B=>{vo.set(D,B)},isActive:()=>vo.isOn(D),isEnabled:()=>!Un.isDisabled(D),setEnabled:B=>Un.set(D,!B)}),_=uC({presets:a,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(aM(p.icons)):A.none(),caret:A.none(),value:t.value},p,C);return js(U0({data:N1(t),enabled:t.enabled,getApi:x,onAction:D=>i(t.value),onSetup:D=>(D.setActive(d),K),triggersSubmenu:!1,itemBehaviours:[]},_,g,p),{toggling:{toggleClass:dR,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Cl=m2(z_(),kx()),Im=t=>({value:tT(t)}),dM=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,OA=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,dC=t=>dM.test(t)||OA.test(t),tT=t=>Ha(t,"#").toUpperCase(),l6=t=>dC(t)?A.some({value:tT(t)}):A.none(),u6=t=>({value:t.value.replace(dM,(a,i,d,g)=>i+i+d+d+g+g)}),mC=t=>{const s=u6(t),a=OA.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},W0=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},fC=t=>{const s=W0(t.red)+W0(t.green)+W0(t.blue);return Im(s)},jg=Math.min,mM=Math.max,nT=Math.round,Ul=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,DA=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Vi=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),RA=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},Ks=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=mM(0,jg(g,1)),p=mM(0,jg(p,1)),g===0)return s=a=i=nT(255*p),Vi(s,a,i,1);const C=d/60,x=p*g,_=x*(1-Math.abs(C%2-1)),D=p-x;switch(Math.floor(C)){case 0:s=x,a=_,i=0;break;case 1:s=_,a=x,i=0;break;case 2:s=0,a=x,i=_;break;case 3:s=0,a=_,i=x;break;case 4:s=_,a=0,i=x;break;case 5:s=x,a=0,i=_;break;default:s=a=i=0}return s=nT(255*(s+D)),a=nT(255*(a+D)),i=nT(255*(i+D)),Vi(s,a,i,1)},Lm=t=>{const s=mC(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Vi(a,i,d,1)},gC=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),C=parseFloat(i);return Vi(d,g,p,C)},oT=t=>{if(t==="transparent")return A.some(Vi(0,0,0,0));const s=Ul.exec(t);if(s!==null)return A.some(gC(s[1],s[2],s[3],"1"));const a=DA.exec(t);return a!==null?A.some(gC(a[1],a[2],a[3],a[4])):A.none()},sT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,rT=Vi(255,0,0,1),d6=t=>{t.dispatch("SkinLoaded")},MA=(t,s)=>{t.dispatch("SkinLoadError",s)},m6=t=>{t.dispatch("ResizeEditor")},aT=(t,s)=>{t.dispatch("ResizeContent",s)},fM=(t,s)=>{t.dispatch("ScrollContent",s)},cT=(t,s)=>{t.dispatch("TextColorChange",s)},gM=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},iT=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),f6=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var P1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const hM={},g6=(t,s=10)=>{const a=P1.getItem(t),i=Vt(a)?JSON.parse(a):[],g=(_=>s-_.length<0?_.slice(0,s):_)(i),p=_=>{qe(g,_).each(C),g.unshift(_),g.length>s&&g.pop(),P1.setItem(t,JSON.stringify(g))},C=_=>{g.splice(_,1)};return{add:p,state:()=>g.slice(0)}},pM=t=>bt(hM,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=P1.getItem(s);if(So(a)){const d=P1.getItem("tinymce-custom-colors");P1.setItem(s,Xn(d)?d:"[]")}const i=g6(s,10);return hM[t]=i,i}),h6=t=>Se(pM(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),bM=(t,s)=>{pM(t).add(s)},hC=(t,s,a)=>({hue:t,saturation:s,value:a}),NA=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,C=Math.min(d,Math.min(g,p)),x=Math.max(d,Math.max(g,p));if(C===x)return i=C,hC(0,0,i*100);const _=d===C?g-p:p===C?d-g:p-d;return s=d===C?3:p===C?1:5,s=60*(s-_/(x-C)),a=(x-C)/x,i=x,hC(Math.round(s),Math.round(a*100),Math.round(i*100))},p6=t=>NA(Lm(t)),BA=t=>fC(Ks(t)),b6=t=>l6(t).orThunk(()=>oT(t).map(fC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],C=i[3];return fC(Vi(d,g,p,C))}),lT="forecolor",PA="hilitecolor",$A=5,vM=t=>Math.max($A,Math.ceil(Math.sqrt(t))),yM=(t,s)=>{const a=vM(s),i=Af("color_cols")(t);return $A===a?i:a},v6=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+b6(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},Af=t=>s=>s.options.get(t),uT="#000000",Hm=t=>{const s=t.options.register,a=i=>ct(i,Vt)?{value:v6(i),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:vM(Z0(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:yM(t,Z0(t,lT).length)}),s("color_cols_background",{processor:"number",default:yM(t,Z0(t,PA).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:uT}),s("color_default_background",{processor:"string",default:uT})},y6=(t,s)=>s===lT?Af("color_cols_foreground")(t):s===PA?Af("color_cols_background")(t):Af("color_cols")(t),dT=(t,s)=>{const a=y6(t,s);return a>0?a:$A},FA=Af("custom_colors"),Z0=(t,s)=>s===lT&&t.options.isSet("color_map_foreground")?Af("color_map_foreground")(t):s===PA&&t.options.isSet("color_map_background")?Af("color_map_background")(t):Af("color_map")(t),CM=Af("color_default_foreground"),wM=Af("color_default_background"),SM="rgba(0, 0, 0, 0)",C6=t=>oT(t).exists(s=>s.alpha!==0),w6=t=>au(t,s=>{if(Rn(s)){const a=et(s,"background-color");return hn(C6(a),a)}else return A.none()}).getOr(SM),xM=(t,s)=>{const a=be.fromDom(t.selection.getStart()),i=s==="hilitecolor"?w6(a):et(a,"color");return oT(i).map(d=>"#"+fC(d).value)},S6=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},TM=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},EM=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{S6(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{TM(t,s)})},IA=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},LA=(t,s,a,i)=>{a==="custom"?zA(t)(g=>{g.each(p=>{bM(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},xM(t,s).getOr(uT)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},kM=(t,s,a)=>t.concat(h6(s).concat(IA(a))),_M=(t,s,a)=>i=>{i(kM(t,s,a))},sp=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},AM=(t,s)=>a=>{const i=xM(t,s);return sr(i,a.toUpperCase())},HA=(t,s,a,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:AM(t,a),columns:dT(t,a),fetch:_M(Z0(t,a),a,FA(t)),onAction:g=>{LA(t,a,d.get(),K)},onItemAction:(g,p)=>{LA(t,a,p,C=>{d.set(C),cT(t,{name:s,color:C})})},onSetup:g=>{sp(g,s,d.get());const p=C=>{C.name===s&&sp(g,C.name,C.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},VA=(t,s,a,i,d)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(sp(g,s,d.get()),K),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:AM(t,a),initData:{storageKey:a},onAction:g=>{LA(t,a,g.value,p=>{d.set(p),cT(t,{name:s,color:p})})}}]})},zA=t=>(s,a)=>{let i=!1;const d=C=>{const _=C.getData().colorpicker;i?(s(A.from(_)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(C,x)=>{x.name==="hex-valid"&&(i=x.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:K,onCancel:()=>{s(A.none())}})},UA=t=>{EM(t);const s=CM(t),a=wM(t),i=S(s),d=S(a);HA(t,"forecolor","forecolor","Text color",i),HA(t,"backcolor","hilitecolor","Background color",d),VA(t,"forecolor","forecolor","Text color",i),VA(t,"backcolor","hilitecolor","Background color",d)},pC=(t,s,a,i,d,g,p,C)=>{const x=qu(s),D=WA(s,a,i,d!=="color"?"normal":"color",g,p,C);return fA(t,x,D,i,{menuType:d})},WA=(t,s,a,i,d,g,p)=>Aa(Se(t,C=>C.type==="choiceitem"?WR(C).fold($m,x=>A.some(i6(x,a===1,i,s,g(x.value),d,p,qu(t)))):A.none())),bC=(t,s)=>{const a=k1(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?$r(d.element,"[aria-checked=true]"):A.none()}},x6=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${rA}`:`.${Lx}`}},OM=(t,s)=>{const a=T6(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...pC(nn("menu-value"),a,C=>{t.onAction({value:C})},i,d,Pm.CLOSE_ON_EXECUTE,t.select.getOr(Ln),s.shared.providers),markers:k1(d),movement:bC(i,d)};return{type:"widget",data:{value:nn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Cl.widget(Jh.sketch(p))]}},T6=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>kM(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(IA(a)))},DM=nn("cell-over"),RM=nn("cell-execute"),MM=(t,s,a)=>{const i=p=>bn(p,DM,{row:t,col:s}),d=p=>bn(p,RM,{row:t,col:s}),g=(p,C)=>{C.stop(),d(p)};return Yc({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:yt([ro("insert-table-picker-cell",[st(ml(),Bn.focus),st(qs(),d),st(fl(),g),st(Tp(),g)]),vo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Bn.config({onFocus:i})])})},NM=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(MM(d,p,t));i.push(g)}return i},BM=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)vo.set(t[g][p],g<=s&&p<=a)},E6=t=>xe(t,s=>Se(s,Li)),PM=(t,s)=>kr(`${s}x${t}`),k6={inserttable:t=>{const i=nn("size-label"),d=NM(i,10,10),g=PM(0,0),p=No({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[g],behaviours:yt([Jn.config({})])});return{type:"widget",data:{value:nn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Cl.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:E6(d).concat(p.asSpec()),behaviours:yt([ro("insert-table-picker",[Zr(C=>{Jn.set(p.get(C),[g])}),Op(DM,(C,x,_)=>{const{row:D,col:B}=_.event;BM(d,D,B,10,10),Jn.set(p.get(C),[PM(D+1,B+1)])}),Op(RM,(C,x,_)=>{const{row:D,col:B}=_.event;t.onAction({numRows:D+1,numColumns:B+1}),fs(C,vh())})]),yn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:OM},_6=(t,s)=>bt(k6,t.fancytype).map(a=>a(t,s)),A6=(t,s,a,i=!0,d=!1)=>{const g=d?AA(a.icons):B1(a.icons),p=x=>({isEnabled:()=>!Un.isDisabled(x),setEnabled:_=>Un.set(x,!_),setIconFill:(_,D)=>{$r(x.element,`svg path[id="${_}"], rect[id="${_}"]`).each(B=>{zn(B,"fill",D)})}}),C=uC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},a,i);return U0({data:N1(t),getApi:p,enabled:t.enabled,onAction:K,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},O6=(t,s,a,i=!0)=>{const d=p=>({isEnabled:()=>!Un.isDisabled(p),setEnabled:C=>Un.set(p,!C)}),g=uC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},a,i);return U0({data:N1(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},D6=t=>({type:"separator",dom:{tag:"div",classes:[Lx,vI]},components:t.text.map(kr).toArray()}),R6=(t,s,a,i=!0)=>{const d=p=>({setActive:C=>{vo.set(p,C)},isActive:()=>vo.isOn(p),isEnabled:()=>!Un.isDisabled(p),setEnabled:C=>Un.set(p,!C)}),g=uC({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(aM(a.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return js(U0({data:N1(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:dR,toggleOnExecute:!1,selected:t.active}})},M6=lM,$M=D6,FM=O6,N6=A6,B6=R6,P6=_6,$6=c6;var IM=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),F6=[Ki("others",Pr(St.value,Ri()))],I6=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(is(g.others).length===0)throw new Error("Cannot find any known coupled components");return bt(t,p)},a=(g,p,C)=>s(p,C).getOrThunk(()=>{const _=bt(p.others,C).getOrDie("No information found for coupled component: "+C)(g),D=g.getSystem().build(_);return t[C]=D,D}),i=(g,p,C)=>s(p,C).orThunk(()=>(bt(p.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=G({});return Ii({readState:d,getExisting:i,getOrCreate:a})}});const fa=fc({fields:F6,name:"coupling",apis:IM,state:I6}),jA=t=>{let s=A.none(),a=[];const i=_=>jA(D=>{d(B=>{D(_(B))})}),d=_=>{p()?x(_):a.push(_)},g=_=>{p()||(s=A.some(_),C(a),a=[])},p=()=>s.isSome(),C=_=>{Qe(_,x)},x=_=>{s.each(D=>{setTimeout(()=>{_(D)},0)})};return t(g),{get:d,map:i,isReady:p}},GA={nu:jA,pure:t=>jA(s=>{s(t)})},LM=t=>{setTimeout(()=>{throw t},0)},$1=t=>{const s=x=>{t().then(x,LM)};return{map:x=>$1(()=>t().then(x)),bind:x=>$1(()=>t().then(_=>x(_).toPromise())),anonBind:x=>$1(()=>t().then(()=>x.toPromise())),toLazy:()=>GA.nu(s),toCached:()=>{let x=null;return $1(()=>(x===null&&(x=t()),x))},toPromise:t,get:s}},ai={nu:t=>$1(()=>new Promise(t)),pure:t=>$1(()=>Promise.resolve(t))},HM=G("sink"),VM=G(Hl({name:HM(),overrides:G({dom:{tag:"div"},behaviours:yt([Yr.config({useFixed:Zt})]),events:cr([lg(Pi()),lg(ua()),lg(fl())])})})),zM=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},H6=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},V6=(t,s,a,i,d,g,p)=>{const C=H6(t,s,i),x=vC(i,t);return C.map(_=>_.bind(D=>A.from(x1.sketch({...g.menu(),uid:gl(""),data:D,highlightOnOpen:p,onOpenMenu:(B,F)=>{const V=x().getOrDie();Yr.position(V,F,{anchor:a}),Mo.decloak(d)},onOpenSubmenu:(B,F,V)=>{const X=x().getOrDie();Yr.position(X,V,{anchor:{type:"submenu",item:F}}),Mo.decloak(d)},onRepositionMenu:(B,F,V)=>{const X=x().getOrDie();Yr.position(X,F,{anchor:a}),Qe(V,ue=>{Yr.position(X,ue.triggeredMenu,{anchor:{type:"submenu",item:ue.triggeringItem}})})},onEscape:()=>(Bn.focus(i),Mo.close(d),A.some(!0))}))))},mT=(t,s,a,i,d,g,p)=>{const C=zM(t,a);return V6(t,s,C,a,i,d,p).map(_=>(_.fold(()=>{Mo.isOpen(i)&&Mo.close(i)},D=>{Mo.cloak(i),Mo.open(i,D),g(i)}),i))},z6=(t,s,a,i,d,g,p)=>(Mo.close(i),ai.pure(i)),qA=(t,s,a,i,d,g)=>{const p=fa.getCoupled(a,"sandbox");return(Mo.isOpen(p)?z6:mT)(t,s,a,p,i,d,g)},U6=(t,s,a)=>{const i=Ho.getCurrent(s).getOr(s),d=wa(t.element);a?Kt(i.element,"min-width",d+"px"):As(i.element,d)},vC=(t,s)=>t.getSystem().getByUid(s.uid+"-"+HM()).map(a=>()=>St.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>St.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),fT=t=>{Mo.getState(t).each(s=>{x1.repositionMenus(s)})},yC=(t,s,a)=>{const i=Jw(),d=(C,x)=>{const _=zM(t,s);i.link(s.element),t.matchWidth&&U6(_.hotspot,x,t.useMinWidth),t.onOpen(_,C,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,x)},g=(C,x)=>{i.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(C,x)},p=vC(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:pu.augment(t.sandboxBehaviours,[Ft.config({store:{mode:"memory",initialValue:s}}),Mo.config({onOpen:d,onClose:g,isPartOf:(C,x,_)=>bg(x,_)||bg(s,_),getAttachPoint:()=>p().getOrDie()}),Ho.config({find:C=>Mo.getState(C).bind(x=>Ho.getCurrent(x))}),Pl.config({channels:{...c1({isExtraPart:Ln}),...Bg({doReposition:fT})}})])}},KA=t=>{const s=fa.getCoupled(t,"sandbox");fT(s)},YA=()=>[_e("sandboxClasses",[]),pu.field("sandboxBehaviours",[Ho,Pl,Mo,Ft])],W6=G([Je("dom"),Je("fetch"),Ee("onOpen"),_r("onExecute"),_e("getHotspot",A.some),_e("getAnchorOverrides",G({})),Wu(),pc("dropdownBehaviours",[vo,fa,yn,Bn]),Je("toggleClass"),_e("eventOrder",{}),Cs("lazySink"),_e("matchWidth",!1),_e("useMinWidth",!1),Cs("role")].concat(YA())),XA=G([bu({schema:[zu(),_e("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),VM()]),JA=(t,s,a,i)=>{const d=D=>bt(t.dom,"attributes").bind(B=>bt(B,D)),g=D=>{Mo.getState(D).each(B=>{x1.highlightPrimary(B)})},p=(D,B,F)=>qA(t,ht,D,i,B,F),C=D=>{p(D,g,sl.HighlightMenuAndItem).get(K)},x={expand:D=>{vo.isOn(D)||p(D,K,sl.HighlightNone).get(K)},open:D=>{vo.isOn(D)||p(D,K,sl.HighlightMenuAndItem).get(K)},refetch:D=>fa.getExistingCoupled(D,"sandbox").fold(()=>p(D,K,sl.HighlightMenuAndItem).map(K),F=>mT(t,ht,D,F,i,K,sl.HighlightMenuAndItem).map(K)),isOpen:vo.isOn,close:D=>{vo.isOn(D)&&p(D,K,sl.HighlightMenuAndItem).get(K)},repositionMenus:D=>{vo.isOn(D)&&KA(D)}},_=(D,B)=>(gm(D),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Sr(t.dropdownBehaviours,[vo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),fa.config({others:{sandbox:D=>yC(t,D,{onOpen:()=>vo.on(D),onClose:()=>vo.off(D)})}}),yn.config({mode:"special",onSpace:_,onEnter:_,onDown:(D,B)=>{if(wl.isOpen(D)){const F=fa.getCoupled(D,"sandbox");g(F)}else wl.open(D);return A.some(!0)},onEscape:(D,B)=>wl.isOpen(D)?(wl.close(D),A.some(!0)):A.none()}),Bn.config({})]),events:Ex(A.some(C)),eventOrder:{...t.eventOrder,[qs()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},wl=ma({name:"Dropdown",configFields:W6(),partFields:XA(),factory:JA,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),UM=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},Z6=t=>{const s=Ft.getValue(t),a=Vx(t).map(zx);wl.refetch(s).get(()=>{const i=fa.getCoupled(s,"sandbox");a.each(d=>Vx(i).each(g=>OI(g,d)))})},j6=(t,s)=>{G6(t).each(a=>{_w(t,a.element,s.event.eventType,s.event.interactionEvent)})},G6=t=>Mo.getState(t).bind(gs.getHighlighted).bind(gs.getHighlighted),q6=t=>tc(t.element,Ux)?A.some(t.element):$r(t.element,"."+Ux),WM=(t,s,a)=>{tC(t).each(i=>{DI(i,a),q6(s).each(g=>{P(g,"id").each(p=>zn(i.element,"aria-controls",p))})}),zn(a.element,"aria-selected","true")},K6=(t,s,a)=>{zn(a.element,"aria-selected","false")},Y6=t=>{tC(t).each(s=>Bn.focus(s))},X6=t=>fa.getExistingCoupled(t,"sandbox").bind(Vx).map(zx).map(a=>a.fetchPattern).getOr("");var gT;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(gT||(gT={}));const J6=(t,s,a,i,d)=>{const g=a.shared.providers,p=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(t.type){case"menuitem":return jI(t).fold($m,C=>A.some(FM(p(C),s,g,i)));case"nestedmenuitem":return GR(t).fold($m,C=>A.some(N6(p(C),s,g,i,d)));case"togglemenuitem":return qI(t).fold($m,C=>A.some(B6(p(C),s,g,i)));case"separator":return FI(t).fold($m,C=>A.some($M(C)));case"fancymenuitem":return rC(t).fold($m,C=>P6(C,a));default:return console.error("Unknown item in general menu",t),A.none()}},Q6=(t,s,a,i,d,g,p)=>{const C=i===1,x=!C||qu(t);return Aa(Se(t,_=>{switch(_.type){case"separator":return NR(_).fold($m,D=>A.some($M(D)));case"cardmenuitem":return UI(_).fold($m,D=>A.some($6({...D,onAction:B=>{D.onAction(B),a(D.value,D.meta)}},d,g,{itemBehaviours:eT(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return BR(_).fold($m,D=>A.some(M6(D,s,C,"normal",a,d,g,x)))}}))},ZM=(t,s,a,i,d,g)=>{const p=qu(s),C=Aa(Se(s,D=>{const B=V=>d?!io(V,"text"):p,F=V=>J6(V,a,i,B(V),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?F({...D,enabled:!1}):F(D)})),x=UM(g);return(d?NI:fA)(t,p,C,1,x)},QA=t=>x1.singleData(t.value,t),jM=(t,s,a,i)=>{const d=bC(s,i),g=k1(i);return{data:QA({...t,movement:d,menuBehaviours:aC.unnamedEvents(s!=="auto"?[]:[Zr((p,C)=>{kA(p,4,g.item).each(({numColumns:x,numRows:_})=>{yn.setGridSize(p,_,x)})})])}),menu:{markers:k1(i),fakeFocus:a===gT.ContentFocus}}},e8=(t,s)=>Ix(be.fromDom(s.startContainer)).map(a=>{const i=t.createRng();return i.selectNode(a.dom),i}),Of={register:(t,s)=>{const a=S(!1),i=S(!1),d=Yc($a.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:yt([ro("dismissAutocompleter",[st(rf(),()=>_())])]),lazySink:s.getSink})),g=()=>$a.isOpen(d),p=i.get,C=()=>{g()&&$a.hide(d)},x=()=>$a.getContent(d).bind(X=>Wo(X.components(),0)),_=()=>t.execCommand("mceAutocompleterClose"),D=X=>{const ue=Ss(X,Oe=>A.from(Oe.columns)).getOr(1);return xe(X,Oe=>{const Ce=Oe.items;return Q6(Ce,Oe.matchText,(Ae,Pe)=>{const He=t.selection.getRng();e8(t.dom,He).each(kt=>{const at={hide:()=>_(),reload:Bt=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Bt})}};a.set(!0),Oe.onAction(at,kt,Ae,Pe),a.set(!1)})},ue,Pm.BUBBLE_TO_SANDBOX,s,Oe.highlightOn)})},B=(X,ue)=>{oA(be.fromDom(t.getBody())).each(Oe=>{const Ce=Ss(X,Ae=>A.from(Ae.columns)).getOr(1);$a.showMenuAt(d,{anchor:{type:"node",root:be.fromDom(t.getBody()),node:A.from(Oe)}},jM(fA("autocompleter-value",!0,ue,Ce,{menuType:"normal"}),Ce,gT.ContentFocus,"normal"))}),x().each(gs.highlightFirst)},F=X=>{const ue=D(X);ue.length>0?B(X,ue):C()};t.on("AutocompleterStart",({lookupData:X})=>{i.set(!0),a.set(!1),F(X)}),t.on("AutocompleterUpdate",({lookupData:X})=>F(X)),t.on("AutocompleterEnd",()=>{C(),i.set(!1),a.set(!1)});const V={cancelIfNecessary:_,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:x};uR.setup(V,t)}},t8=["visible","hidden"],n8=t=>{if(cc(t)){const s=et(t,"overflow");return se(s).length>0&&!po(t8,s)}else return!1},e3=t=>{const s=Gk(t,n8);return Fs(s).map(a=>({element:a,others:s.slice(1)}))},ga=(t,s)=>Qh(t)?e3(s):A.none(),hT=t=>{const s=[...Se(t.others,k),ge()];return fe(k(t.element),s)},CC=(t,s,a)=>_d(t,s,a).isSome(),GM=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},qM=5,o8=400,KM=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},s8=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>qM||i>qM},r8=t=>{const s=Qs(),a=S(!1),i=GM(_=>{t.triggerEvent(Mv(),_),a.set(!0)},o8),d=_=>(KM(_).each(D=>{i.cancel();const B={x:D.clientX,y:D.clientY,target:_.target};i.schedule(_),a.set(!1),s.set(B)}),A.none()),g=_=>(i.cancel(),KM(_).each(D=>{s.on(B=>{s8(D,B)&&s.clear()})}),A.none()),p=_=>{i.cancel();const D=B=>ms(B.target,_.target);return s.get().filter(D).map(B=>a.get()?(_.prevent(),!1):t.triggerEvent(Tp(),_))},C=Ps([{key:cu(),value:d},{key:Ko(),value:g},{key:Gs(),value:p}]);return{fireIfReady:(_,D)=>bt(C,D).bind(B=>B(_))}},a8=t=>t.raw.which===fx[0]&&!po(["input","textarea"],Ms(t.target))&&!CC(t.target,'[contenteditable="true"]'),c8=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=r8(a),g=Se(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),V=>ri(t,V,X=>{d.fireIfReady(X,V).each(Oe=>{Oe&&X.kill()}),a.triggerEvent(V,X)&&X.kill()})),p=Qs(),C=ri(t,"paste",V=>{d.fireIfReady(V,"paste").each(ue=>{ue&&V.kill()}),a.triggerEvent("paste",V)&&V.kill(),p.set(setTimeout(()=>{a.triggerEvent(Rv(),V)},0))}),x=ri(t,"keydown",V=>{a.triggerEvent("keydown",V)?V.kill():a.stopBackspace&&a8(V)&&V.prevent()}),_=ri(t,"focusin",V=>{a.triggerEvent("focusin",V)&&V.kill()}),D=Qs(),B=ri(t,"focusout",V=>{a.triggerEvent("focusout",V)&&V.kill(),D.set(setTimeout(()=>{a.triggerEvent(Dv(),V)},0))});return{unbind:()=>{Qe(g,V=>{V.unbind()}),x.unbind(),_.unbind(),B.unbind(),C.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},YM=(t,s)=>{const a=bt(t,"target").getOr(s);return S(a)},i8=(t,s)=>{const a=S(!1),i=S(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},l8=t=>{const s=S(!1);return{stop:()=>{s.set(!0)},cut:K,isStopped:s.get,isCut:Ln,event:t,setSource:he("Cannot set source of a broadcasted event"),getSource:he("Cannot get source of a broadcasted event")}},wC=Z.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),XM=(t,s,a,i,d,g)=>{const p=t(s,i),C=i8(a,d);return p.fold(()=>(g.logEventNoHandlers(s,i),wC.complete()),x=>{const _=x.descHandler;return Gv(_)(C),C.isStopped()?(g.logEventStopped(s,x.element,_.purpose),wC.stopped()):C.isCut()?(g.logEventCut(s,x.element,_.purpose),wC.complete()):ya(x.element).fold(()=>(g.logNoParent(s,x.element,_.purpose),wC.complete()),B=>(g.logEventResponse(s,x.element,_.purpose),wC.resume(B)))})},JM=(t,s,a,i,d,g)=>XM(t,s,a,i,d,g).fold(Zt,p=>JM(t,s,a,p,d,g),Ln),u8=(t,s,a,i,d)=>{const g=YM(a,i);return XM(t,s,a,i,g,d)},d8=(t,s,a)=>{const i=l8(s);return Qe(t,d=>{const g=d.descHandler;Gv(g)(i)}),i.isStopped()},m8=(t,s,a,i)=>QM(t,s,a,a.target,i),QM=(t,s,a,i,d)=>{const g=YM(a,i);return JM(t,s,a,i,g,d)},f8=(t,s)=>({element:t,descHandler:s}),g8=(t,s)=>({id:t,descHandler:s}),h8=()=>{const t={},s=(p,C,x)=>{ts(x,(_,D)=>{const B=t[D]!==void 0?t[D]:{};B[C]=Fw(_,p),t[D]=B})},a=(p,C)=>Ed(C).bind(x=>bt(p,x)).map(x=>f8(C,x));return{registerId:s,unregisterId:p=>{ts(t,(C,x)=>{io(C,p)&&delete C[p]})},filterByType:p=>bt(t,p).map(C=>mr(C,(x,_)=>g8(_,x))).getOr([]),find:(p,C,x)=>bt(t,C).bind(_=>au(x,D=>a(_,D),p))}},p8=()=>{const t=h8(),s={},a=_=>{const D=_.element;return Ed(D).getOrThunk(()=>Nw("uid-",_.element))},i=(_,D)=>{const B=s[D];if(B===_)g(_);else throw new Error('The tagId "'+D+'" is already used by: '+Iu(B.element)+`
Cannot use it for: `+Iu(_.element)+`
The conflicting element is`+(Go(B.element)?" ":" not ")+"already in the DOM")},d=_=>{const D=a(_);ca(s,D)&&i(_,D);const B=[_];t.registerId(B,D,_.events),s[D]=_},g=_=>{Ed(_.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(_,D,B)=>t.find(_,D,B),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>bt(s,_)}},Ud=Ta({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:h0(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[_e("components",[]),pc("containerBehaviours",[]),_e("events",{}),_e("domModification",{}),_e("eventOrder",{})]}),t3=t=>{const s=Ce=>ya(t.element).fold(Zt,Ae=>ms(Ce,Ae)),a=p8(),i=(Ce,Ae)=>a.find(s,Ce,Ae),d=c8(t.element,{triggerEvent:(Ce,Ae)=>$p(Ce,Ae.target,Pe=>m8(i,Ce,Ae,Pe))}),g={debugInfo:G("real"),triggerEvent:(Ce,Ae,Pe)=>{$p(Ce,Ae,He=>QM(i,Ce,Pe,Ae,He))},triggerFocus:(Ce,Ae)=>{Ed(Ce).fold(()=>{fu(Ce)},Pe=>{$p(Sd(),Ce,He=>(u8(i,Sd(),{originator:Ae,kill:K,prevent:K,target:Ce},Ce,He),!1))})},triggerEscape:(Ce,Ae)=>{g.triggerEvent("keydown",Ce.element,Ae.event)},getByUid:Ce=>ue(Ce),getByDom:Ce=>Oe(Ce),build:Yc,buildOrPatch:Mb,addToGui:Ce=>{x(Ce)},removeFromGui:Ce=>{_(Ce)},addToWorld:Ce=>{p(Ce)},removeFromWorld:Ce=>{C(Ce)},broadcast:Ce=>{F(Ce)},broadcastOn:(Ce,Ae)=>{V(Ce,Ae)},broadcastEvent:(Ce,Ae)=>{X(Ce,Ae)},isConnected:Zt},p=Ce=>{Ce.connect(g),jo(Ce.element)||(a.register(Ce),Qe(Ce.components(),p),g.triggerEvent(kp(),Ce.element,{target:Ce.element}))},C=Ce=>{jo(Ce.element)||(Qe(Ce.components(),C),a.unregister(Ce)),Ce.disconnect()},x=Ce=>{Nd(t,Ce)},_=Ce=>{Bd(Ce)},D=()=>{d.unbind(),Oi(t.element)},B=Ce=>{const Ae=a.filter(ag());Qe(Ae,Pe=>{const He=Pe.descHandler;Gv(He)(Ce)})},F=Ce=>{B({universal:!0,data:Ce})},V=(Ce,Ae)=>{B({universal:!1,channels:Ce,data:Ae})},X=(Ce,Ae)=>{const Pe=a.filter(Ce);return d8(Pe,Ae)},ue=Ce=>a.getById(Ce).fold(()=>St.error(new Error('Could not find component with uid: "'+Ce+'" in system.')),St.value),Oe=Ce=>{const Ae=Ed(Ce).getOr("not found");return ue(Ae)};return p(t),{root:t,element:t.element,destroy:D,add:x,remove:_,getByUid:ue,getByDom:Oe,addToWorld:p,removeFromWorld:C,broadcast:F,broadcastOn:V,broadcastEvent:X}},b8=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Se(t.items,s.interpreter)}),v8=G([_e("prefix","form-field"),pc("fieldBehaviours",[Ho,Ft])]),eN=G([Hl({schema:[Je("dom")],name:"label"}),Hl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Je("text")],name:"aria-descriptor"}),oc({factory:{sketch:t=>{const s=qn(t,["factory"]);return t.factory.sketch(s)}},schema:[Je("factory")],name:"field"})]),y8=(t,s,a,i)=>{const d=Sr(t.fieldBehaviours,[Ho.config({find:C=>er(C,t,"field")}),Ft.config({store:{mode:"manual",getValue:C=>Ho.getCurrent(C).bind(Ft.getValue),setValue:(C,x)=>{Ho.getCurrent(C).each(_=>{Ft.setValue(_,x)})}}})]),g=cr([Zr((C,x)=>{const _=p2(C,t,["label","field","aria-descriptor"]);_.field().each(D=>{const B=nn(t.prefix);_.label().each(F=>{zn(F.element,"for",B),zn(D.element,"id",B)}),_["aria-descriptor"]().each(F=>{const V=nn(t.prefix);zn(F.element,"id",V),zn(D.element,"aria-describedby",V)})})})]),p={getField:C=>er(C,t,"field"),getLabel:C=>er(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},Es=ma({name:"FormField",configFields:v8(),partFields:eN(),factory:y8,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var tN=Object.freeze({__proto__:null,exhibit:(t,s)=>Lu({attributes:Ps([{key:s.tabAttr,value:"true"}])})}),C8=[_e("tabAttr","data-alloy-tabstop")];const oa=fc({fields:C8,name:"tabstopping",active:tN});var w8=tinymce.util.Tools.resolve("tinymce.html.Entities");const SC=(t,s,a,i)=>{const d=S8(t,s,a,i);return Es.sketch(d)},nN=(t,s)=>SC(t,s,[],[]),S8=(t,s,a,i)=>({dom:sN(a),components:t.toArray().concat([s]),fieldBehaviours:yt(i)}),oN=()=>sN([]),sN=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Gg=(t,s)=>Es.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[kr(s.translate(t))]}),Wl=nn("form-component-change"),xC=nn("form-close"),F1=nn("form-cancel"),Df=nn("form-action"),TC=nn("form-submit"),n3=nn("form-block"),o3=nn("form-unblock"),rN=nn("form-tabchange"),aN=nn("form-resize"),x8=(t,s,a)=>{const i=t.label.map(B=>Gg(B,s)),d=B=>(F,V)=>{_d(V.event.target,"[data-collection-item-value]").each(X=>{B(F,V,X,Qr(X,"data-collection-item-value"))})},g=(B,F)=>{const V=Se(F,Oe=>{const Ce=Cu.translate(Oe.text),Ae=t.columns===1?`<div class="tox-collection__item-label">${Ce}</div>`:"",Pe=`<div class="tox-collection__item-icon">${Oe.icon}</div>`,He={_:" "," - ":" ","-":" "},kt=Ce.replace(/\_| \- |\-/g,Bt=>He[Bt]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${w8.encodeAllRaw(Oe.value)}" title="${kt}" aria-label="${kt}">${Pe}${Ae}</div>`}),X=t.columns!=="auto"&&t.columns>1?un(V,t.columns):[V],ue=Se(X,Oe=>`<div class="tox-collection__group">${Oe.join("")}</div>`);af(B.element,ue.join(""))},p=d((B,F,V,X)=>{F.stop(),s.isDisabled()||bn(B,Df,{name:t.name,value:X})}),C=[st(ml(),d((B,F,V)=>{fu(V)})),st(fl(),p),st(Tp(),p),st(sf(),d((B,F,V)=>{$r(B.element,"."+eC).each(X=>{da(X,eC)}),$s(V,eC)})),st(Ov(),d(B=>{$r(B.element,"."+eC).each(F=>{da(F,eC)})})),Fu(d((B,F,V,X)=>{bn(B,Df,{name:t.name,value:X})}))],x=(B,F)=>Se(Ga(B.element,".tox-collection__item"),F),_=Es.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ht},behaviours:yt([Un.config({disabled:s.isDisabled,onDisabled:B=>{x(B,F=>{$s(F,"tox-collection__item--state-disabled"),zn(F,"aria-disabled",!0)})},onEnabled:B=>{x(B,F=>{da(F,"tox-collection__item--state-disabled"),ne(F,"aria-disabled")})}}),bc(),Jn.config({}),Ft.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(B,F)=>{g(B,F),t.columns==="auto"&&kA(B,5,"tox-collection__item").each(({numRows:V,numColumns:X})=>{yn.setGridSize(B,V,X)}),fs(B,aN)}}),oa.config({}),yn.config(x6(t.columns,"normal")),ro("collection-events",C)]),eventOrder:{[qs()]:["disabling","alloy.base.behaviour","collection-events"]}});return SC(i,_,["tox-form__group--collection"],[])},T8=["input","textarea"],cN=t=>{const s=Ms(t);return po(T8,s)},s3=(t,s)=>{const a=s.getRoot(t).getOr(t.element);da(a,s.invalidClass),s.notify.each(i=>{cN(t.element)&&zn(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{af(d,i.validHtml)}),i.onValid(t)})},iN=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);$s(d,s.invalidClass),s.notify.each(g=>{cN(t.element)&&zn(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{af(p,i)}),g.onInvalid(t,i)})},lN=(t,s,a)=>s.validator.fold(()=>ai.pure(St.value(!0)),i=>i.validate(t)),r3=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),lN(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(iN(t,s,a,d),St.error(d)),d=>(s3(t,s),St.value(d))):St.error("No longer in system")));var E8=Object.freeze({__proto__:null,markValid:s3,markInvalid:iN,query:lN,run:r3,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return tc(a,s.invalidClass)}}),k8=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>cr([st(a.onEvent,i=>{r3(i,t,s).get(ht)})].concat(a.validateOnLoad?[Zr(i=>{r3(i,t,s).get(K)})]:[]))).getOr({})}),_8=[Je("invalidClass"),_e("getRoot",A.none),Hc("notify",[_e("aria","alert"),_e("getContainer",A.none),_e("validHtml",""),Ee("onValid"),Ee("onInvalid"),Ee("onValidate")]),Hc("validator",[Je("validate"),_e("onEvent","input"),_e("validateOnLoad",!0)])];const Rf=fc({fields:_8,name:"invalidating",active:k8,apis:E8,extra:{validation:t=>s=>{const a=Ft.getValue(s);return ai.pure(t(a))}}});var D8=Object.freeze({__proto__:null,events:()=>cr([Aw(ek(),Zt)]),exhibit:()=>Lu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const EC=fc({fields:[],name:"unselecting",active:D8}),dN=(t,s)=>wl.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:yt([zd.button(s.providers.isDisabled),bc(),EC.config({}),oa.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>ai.nu(i=>t.fetch(i)).map(i=>A.from(QA(js(pC(nn("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,Pm.CLOSE_ON_EXECUTE,Ln,s.providers),{movement:bC(t.columns,t.presets)})))),parts:{menu:Hx(!1,1,t.presets)}}),mN=nn("color-input-change"),fN=nn("color-swatch-change"),gN=nn("color-picker-cancel"),R8=(t,s,a,i)=>{const d=Es.parts.field({factory:_1,inputClasses:["tox-textfield"],data:i,onSetValue:_=>Rf.run(_).get(K),inputBehaviours:yt([Un.config({disabled:s.providers.isDisabled}),bc(),oa.config({}),Rf.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>Cc(_.element),notify:{onValid:_=>{const D=Ft.getValue(_);bn(_,mN,{color:D})}},validator:{validateOnLoad:!1,validate:_=>{const D=Ft.getValue(_);if(D.length===0)return ai.pure(St.value(!0));{const B=be.fromTag("span");Kt(B,"background-color",D);const F=gr(B,"background-color").fold(()=>St.error("blah"),V=>St.value(D));return ai.pure(F)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>Gg(_,s.providers)),p=(_,D)=>{bn(_,fN,{value:D})},C=(_,D)=>{x.getOpt(_).each(B=>{D==="custom"?a.colorPicker(F=>{F.fold(()=>fs(B,gN),V=>{p(B,V),bM(t.storageKey,V)})},"#ffffff"):D==="remove"?p(B,""):p(B,D)})},x=No(dN({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ja,mc,Oc],onLtr:()=>[mc,ja,Oc]},components:[],fetch:_M(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:C},s));return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:yt([ro("form-field-events",[st(mN,(_,D)=>{x.getOpt(_).each(B=>{Kt(B.element,"background-color",D.event.color)}),bn(_,Wl,{name:t.name})}),st(fN,(_,D)=>{Es.getField(_).each(B=>{Ft.setValue(B,D.event.value),Ho.getCurrent(_).each(Bn.focus)})}),st(gN,(_,D)=>{Es.getField(_).each(B=>{Ho.getCurrent(_).each(Bn.focus)})})])])})},M8=Hl({schema:[Je("dom")],name:"label"}),rp=t=>Hl({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:cr([Iv(cu(),(d,g,p)=>i(d,p),[s]),Iv(ua(),(d,g,p)=>i(d,p),[s]),Iv(bi(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),pT=rp("top-left"),N8=rp("top"),bT=rp("top-right"),B8=rp("right"),P8=rp("bottom-right"),$8=rp("bottom"),F8=rp("bottom-left"),RW=rp("left"),vT=oc({name:"thumb",defaults:G({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:cr([hm(cu(),t,"spectrum"),hm(Ko(),t,"spectrum"),hm(Gs(),t,"spectrum"),hm(ua(),t,"spectrum"),hm(bi(),t,"spectrum"),hm(Pu(),t,"spectrum")])})}),j0=oc({schema:[Vs("mouseIsDown",()=>S(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:yt([yn.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),Bn.config({})]),events:cr([st(cu(),i),st(Ko(),i),st(ua(),i),st(bi(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var hN=[M8,RW,B8,N8,$8,pT,bT,F8,P8,vT,j0];const kC=G("slider.change.value"),L8=t=>t.type.indexOf("touch")!==-1,a3=t=>{const s=t.event.raw;if(L8(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?A.some(a.touches[0]).map(i=>_o(i.clientX,i.clientY)):A.none()}else{const a=s;return a.clientX!==void 0?A.some(a).map(i=>_o(i.clientX,i.clientY)):A.none()}},H8="top",V8="right",z8="bottom",U8="left",I1=t=>t.model.minX,L1=t=>t.model.minY,yT=t=>t.model.minX-1,CT=t=>t.model.minY-1,ap=t=>t.model.maxX,Wd=t=>t.model.maxY,Mf=t=>t.model.maxX+1,wT=t=>t.model.maxY+1,c3=(t,s,a)=>s(t)-a(t),ST=t=>c3(t,ap,I1),G0=t=>c3(t,Wd,L1),pN=t=>ST(t)/2,q0=t=>G0(t)/2,Nf=t=>t.stepSize,bN=t=>t.snapToGrid,vN=t=>t.snapStart,yN=t=>t.rounded,xT=(t,s)=>t[s+"-edge"]!==void 0,CN=t=>xT(t,U8),wN=t=>xT(t,V8),_C=t=>xT(t,H8),SN=t=>xT(t,z8),qg=t=>t.model.value.get(),cp=(t,s)=>({x:t,y:s}),Ku=(t,s)=>{bn(t,kC(),{value:s})},W8=(t,s)=>{Ku(t,cp(yT(s),CT(s)))},Z8=(t,s)=>{Ku(t,CT(s))},j8=(t,s)=>{Ku(t,cp(pN(s),CT(s)))},xN=(t,s)=>{Ku(t,cp(Mf(s),CT(s)))},G8=(t,s)=>{Ku(t,Mf(s))},q8=(t,s)=>{Ku(t,cp(Mf(s),q0(s)))},K8=(t,s)=>{Ku(t,cp(Mf(s),wT(s)))},Y8=(t,s)=>{Ku(t,wT(s))},X8=(t,s)=>{Ku(t,cp(pN(s),wT(s)))},TN=(t,s)=>{Ku(t,cp(yT(s),wT(s)))},EN=(t,s)=>{Ku(t,yT(s))},J8=(t,s)=>{Ku(t,cp(yT(s),q0(s)))},i3=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),l3=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),u3=(t,s,a)=>Math.max(s,Math.min(a,t)),K0=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return u3(s+p,s-1,a+1)},g=>{const p=(t-g)%i,C=Math.round(p/i),x=Math.floor((t-g)/i),_=Math.floor((a-g)/i),D=Math.min(_,x+C),B=g+D*i;return Math.max(g,B)}),Q8=(t,s,a)=>Math.min(a,Math.max(t,s))-s,kN=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:p,snapStart:C,rounded:x,hasMinEdge:_,hasMaxEdge:D,minBound:B,maxBound:F,screenRange:V}=t,X=_?s-1:s,ue=D?a+1:a;if(d<B)return X;if(d>F)return ue;{const Oe=Q8(d,B,F),Ce=u3(Oe/V*i+s,X,ue);return p&&Ce>=s&&Ce<=a?K0(Ce,s,a,g,C):x?Math.round(Ce):Ce}},_N=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:C,maxOffset:x,centerMinEdge:_,centerMaxEdge:D}=t;return d<s?g?0:_:d>a?p?C:D:(d-s)/i*x},Y0="top",Su="right",TT="bottom",ET="left",eL="width",tL="height",Bf=t=>t.element.dom.getBoundingClientRect(),Zd=(t,s)=>t[s],AC=t=>{const s=Bf(t);return Zd(s,ET)},d3=t=>{const s=Bf(t);return Zd(s,Su)},kT=t=>{const s=Bf(t);return Zd(s,Y0)},AN=t=>{const s=Bf(t);return Zd(s,TT)},m3=t=>{const s=Bf(t);return Zd(s,eL)},ON=t=>{const s=Bf(t);return Zd(s,tL)},f3=(t,s,a)=>(t+s)/2-a,g3=(t,s)=>{const a=Bf(t),i=Bf(s),d=Zd(a,ET),g=Zd(a,Su),p=Zd(i,ET);return f3(d,g,p)},h3=(t,s)=>{const a=Bf(t),i=Bf(s),d=Zd(a,Y0),g=Zd(a,TT),p=Zd(i,Y0);return f3(d,g,p)},_T=(t,s)=>{bn(t,kC(),{value:s})},p3=(t,s,a)=>{const i={min:I1(s),max:ap(s),range:ST(s),value:a,step:Nf(s),snap:bN(s),snapStart:vN(s),rounded:yN(s),hasMinEdge:CN(s),hasMaxEdge:wN(s),minBound:AC(t),maxBound:d3(t),screenRange:m3(t)};return kN(i)},nL=(t,s,a)=>{const i=p3(t,s,a);return _T(t,i),i},oL=(t,s)=>{const a=I1(s);_T(t,a)},sL=(t,s)=>{const a=ap(s);_T(t,a)},rL=(t,s,a)=>{const d=(t>0?l3:i3)(qg(a),I1(a),ap(a),Nf(a));return _T(s,d),A.some(d)},AT=t=>(s,a)=>rL(t,s,a).map(Zt),aL=t=>a3(t).map(a=>a.left),DN=(t,s,a,i,d)=>{const p=m3(t),C=i.bind(D=>A.some(g3(D,t))).getOr(0),x=d.bind(D=>A.some(g3(D,t))).getOr(p),_={min:I1(s),max:ap(s),range:ST(s),value:a,hasMinEdge:CN(s),hasMaxEdge:wN(s),minBound:AC(t),minOffset:0,maxBound:d3(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:x};return _N(_)},b3=(t,s,a,i,d,g)=>{const p=DN(s,g,a,i,d);return AC(s)-AC(t)+p},cL=(t,s,a,i)=>{const d=qg(a),g=b3(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),p=wa(s.element)/2;Kt(s.element,"left",g-p+"px")},iL=AT(-1),lL=AT(1),uL=A.none,dL=A.none,mL={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(G8),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(EN)};var RN=Object.freeze({__proto__:null,setValueFrom:nL,setToMin:oL,setToMax:sL,findValueOfOffset:p3,getValueFromEvent:aL,findPositionOfValue:b3,setPositionFromValue:cL,onLeft:iL,onRight:lL,onUp:uL,onDown:dL,edgeActions:mL});const OC=(t,s)=>{bn(t,kC(),{value:s})},v3=(t,s,a)=>{const i={min:L1(s),max:Wd(s),range:G0(s),value:a,step:Nf(s),snap:bN(s),snapStart:vN(s),rounded:yN(s),hasMinEdge:_C(s),hasMaxEdge:SN(s),minBound:kT(t),maxBound:AN(t),screenRange:ON(t)};return kN(i)},fL=(t,s,a)=>{const i=v3(t,s,a);return OC(t,i),i},gL=(t,s)=>{const a=L1(s);OC(t,a)},hL=(t,s)=>{const a=Wd(s);OC(t,a)},pL=(t,s,a)=>{const d=(t>0?l3:i3)(qg(a),L1(a),Wd(a),Nf(a));return OC(s,d),A.some(d)},y3=t=>(s,a)=>pL(t,s,a).map(Zt),MN=t=>a3(t).map(a=>a.top),NN=(t,s,a,i,d)=>{const p=ON(t),C=i.bind(D=>A.some(h3(D,t))).getOr(0),x=d.bind(D=>A.some(h3(D,t))).getOr(p),_={min:L1(s),max:Wd(s),range:G0(s),value:a,hasMinEdge:_C(s),hasMaxEdge:SN(s),minBound:kT(t),minOffset:0,maxBound:AN(t),maxOffset:p,centerMinEdge:C,centerMaxEdge:x};return _N(_)},DC=(t,s,a,i,d,g)=>{const p=NN(s,g,a,i,d);return kT(s)-kT(t)+p},bL=(t,s,a,i)=>{const d=qg(a),g=DC(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),p=ze(s.element)/2;Kt(s.element,"top",g-p+"px")},BN=A.none,vL=A.none,yL=y3(-1),CL=y3(1),wL={"top-left":A.none(),top:A.some(Z8),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(Y8),"bottom-left":A.none(),left:A.none()};var C3=Object.freeze({__proto__:null,setValueFrom:fL,setToMin:gL,setToMax:hL,findValueOfOffset:v3,getValueFromEvent:MN,findPositionOfValue:DC,setPositionFromValue:bL,onLeft:BN,onRight:vL,onUp:yL,onDown:CL,edgeActions:wL});const jd=(t,s)=>{bn(t,kC(),{value:s})},OT=(t,s)=>({x:t,y:s}),RC=(t,s,a)=>{const i=p3(t,s,a.left),d=v3(t,s,a.top),g=OT(i,d);return jd(t,g),g},SL=(t,s,a,i)=>{const d=t>0?l3:i3,g=s?qg(i).x:d(qg(i).x,I1(i),ap(i),Nf(i)),p=s?d(qg(i).y,L1(i),Wd(i),Nf(i)):qg(i).y;return jd(a,OT(g,p)),A.some(g)},X0=(t,s)=>(a,i)=>SL(t,s,a,i).map(Zt),xL=(t,s)=>{const a=I1(s),i=L1(s);jd(t,OT(a,i))},TL=(t,s)=>{const a=ap(s),i=Wd(s);jd(t,OT(a,i))},EL=t=>a3(t),PN=(t,s,a,i)=>{const d=qg(a),g=b3(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),p=DC(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),C=wa(s.element)/2,x=ze(s.element)/2;Kt(s.element,"left",g-C+"px"),Kt(s.element,"top",p-x+"px")},kL=X0(-1,!1),w3=X0(1,!1),S3=X0(-1,!0),x3=X0(1,!0),_L={"top-left":A.some(W8),top:A.some(j8),"top-right":A.some(xN),right:A.some(q8),"bottom-right":A.some(K8),bottom:A.some(X8),"bottom-left":A.some(TN),left:A.some(J8)};var xu=Object.freeze({__proto__:null,setValueFrom:RC,setToMin:xL,setToMax:TL,getValueFromEvent:EL,setPositionFromValue:PN,onLeft:kL,onRight:w3,onUp:S3,onDown:x3,edgeActions:_L});const AL=[_e("stepSize",1),_e("onChange",K),_e("onChoose",K),_e("onInit",K),_e("onDragStart",K),_e("onDragEnd",K),_e("snapToGrid",!1),_e("rounded",!0),Cs("snapStart"),Ki("model",ia("mode",{x:[_e("minX",0),_e("maxX",100),Vs("value",t=>S(t.mode.minX)),Je("getInitialValue"),ir("manager",RN)],y:[_e("minY",0),_e("maxY",100),Vs("value",t=>S(t.mode.minY)),Je("getInitialValue"),ir("manager",C3)],xy:[_e("minX",0),_e("maxX",100),_e("minY",0),_e("maxY",100),Vs("value",t=>S({x:t.mode.minX,y:t.mode.minY})),Je("getInitialValue"),ir("manager",xu)]})),pc("sliderBehaviours",[yn,Ft]),Vs("mouseIsDown",()=>S(!1))],Yu=ma({name:"Slider",configFields:AL,partFields:hN,factory:(t,s,a,i)=>{const d=He=>Id(He,t,"thumb"),g=He=>Id(He,t,"spectrum"),p=He=>er(He,t,"left-edge"),C=He=>er(He,t,"right-edge"),x=He=>er(He,t,"top-edge"),_=He=>er(He,t,"bottom-edge"),D=t.model,B=D.manager,F=(He,kt)=>{B.setPositionFromValue(He,kt,t,{getLeftEdge:p,getRightEdge:C,getTopEdge:x,getBottomEdge:_,getSpectrum:g})},V=(He,kt)=>{D.value.set(kt);const at=d(He);F(He,at)},X=(He,kt)=>{V(He,kt);const at=d(He);return t.onChange(He,at,kt),A.some(!0)},ue=He=>{B.setToMin(He,t)},Oe=He=>{B.setToMax(He,t)},Ce=He=>{const kt=()=>{er(He,t,"thumb").each(Bt=>{const cn=D.value.get();t.onChoose(He,Bt,cn)})},at=t.mouseIsDown.get();t.mouseIsDown.set(!1),at&&kt()},Ae=(He,kt)=>{kt.stop(),t.mouseIsDown.set(!0),t.onDragStart(He,d(He))},Pe=(He,kt)=>{kt.stop(),t.onDragEnd(He,d(He)),Ce(He)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Sr(t.sliderBehaviours,[yn.config({mode:"special",focusIn:He=>er(He,t,"spectrum").map(yn.focusIn).map(Zt)}),Ft.config({store:{mode:"manual",getValue:He=>D.value.get(),setValue:V}}),Pl.config({channels:{[Yy()]:{onReceive:Ce}}})]),events:cr([st(kC(),(He,kt)=>{X(He,kt.event.value)}),Zr((He,kt)=>{const at=D.getInitialValue();D.value.set(at);const Bt=d(He);F(He,Bt);const cn=g(He);t.onInit(He,Bt,cn,D.value.get())}),st(cu(),Ae),st(Gs(),Pe),st(ua(),Ae),st(Pu(),Pe)]),apis:{resetToMin:ue,resetToMax:Oe,setValue:V,refresh:F},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),DT=nn("rgb-hex-update"),$N=nn("slider-update"),FN=nn("palette-update"),OL=(t,s)=>{const a=Yu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Yu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Yu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:G(0)},components:[a,i],sliderBehaviours:yt([Bn.config({})]),onChange:(d,g,p)=>{bn(d,$N,{value:p})}})},IN="form",DL=[pc("formBehaviours",[Ft])],LN=t=>"<alloy.field."+t+">",RL=t=>{const s=(()=>{const g=[];return{field:(C,x)=>(g.push(C),f2(IN,LN(C),x)),record:G(g)}})(),a=t(s),i=s.record(),d=Se(i,g=>oc({name:g,pname:LN(g)}));return x2(IN,DL,d,ML,a)},HN=(t,s)=>t.fold(()=>St.error(s),St.value),ML=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Sr(t.formBehaviours,[Ft.config({store:{mode:"manual",getValue:a=>{const i=b2(a,t);return ls(i,(d,g)=>d().bind(p=>{const C=Ho.getCurrent(p);return HN(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Iu(p.element)))}).map(Ft.getValue))},setValue:(a,i)=>{ts(i,(d,g)=>{er(a,t,g).each(p=>{Ho.getCurrent(p).each(C=>{Ft.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>er(a,t,i).bind(Ho.getCurrent)}}),J0={getField:kb((t,s,a)=>t.getField(s,a)),sketch:RL},VN=nn("valid-input"),T3=nn("invalid-input"),RT=nn("validating-input"),E3="colorcustom.rgb.",k3=(t,s,a,i)=>{const d=(F,V)=>Rf.config({invalidClass:s("invalid"),notify:{onValidate:X=>{bn(X,RT,{type:F})},onValid:X=>{bn(X,VN,{type:F,value:Ft.getValue(X)})},onInvalid:X=>{bn(X,T3,{type:F,value:Ft.getValue(X)})}},validator:{validate:X=>{const ue=Ft.getValue(X),Oe=V(ue)?St.value(!0):St.error(t("aria.input.invalid"));return ai.pure(Oe)},validateOnLoad:!1}}),g=(F,V,X,ue,Oe)=>{const Ce=t(E3+"range"),Ae=Es.parts.label({dom:{tag:"label",attributes:{"aria-label":ue}},components:[kr(X)]}),Pe=Es.parts.field({data:Oe,factory:_1,inputAttributes:{type:"text",...V==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:yt([d(V,F),oa.config({})]),onSetValue:Bt=>{Rf.isInvalid(Bt)&&Rf.run(Bt).get(K)}}),He=[Ae,Pe],kt=V!=="hex"?[Es.parts["aria-descriptor"]({text:Ce})]:[],at=He.concat(kt);return{dom:{tag:"div",attributes:{role:"presentation"}},components:at}},p=(F,V)=>{const X=fC(V);return J0.getField(F,"hex").each(ue=>{Bn.isFocused(ue)||Ft.setValue(F,{hex:X.value})}),X},C=(F,V)=>{const X=V.red,ue=V.green,Oe=V.blue;Ft.setValue(F,{red:X,green:ue,blue:Oe})},x=No({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(F,V)=>{x.getOpt(F).each(X=>{Kt(X.element,"background-color","#"+V.value)})};return Ta({factory:()=>{const F={red:S(A.some(255)),green:S(A.some(255)),blue:S(A.some(255)),hex:S(A.some("ffffff"))},V=(Gn,wo)=>{const Fn=Lm(wo);C(Gn,Fn),Ce(Fn)},X=Gn=>F[Gn].get(),ue=(Gn,wo)=>{F[Gn].set(wo)},Oe=()=>X("red").bind(Gn=>X("green").bind(wo=>X("blue").map(Fn=>Vi(Gn,wo,Fn,1)))),Ce=Gn=>{const wo=Gn.red,Fn=Gn.green,_s=Gn.blue;ue("red",A.some(wo)),ue("green",A.some(Fn)),ue("blue",A.some(_s))},Ae=(Gn,wo)=>{const Fn=wo.event;Fn.type!=="hex"?ue(Fn.type,A.none()):i(Gn)},Pe=(Gn,wo)=>{a(Gn);const Fn=Im(wo);ue("hex",A.some(Fn.value));const _s=Lm(Fn);C(Gn,_s),Ce(_s),bn(Gn,DT,{hex:Fn}),_(Gn,Fn)},He=(Gn,wo,Fn)=>{const _s=parseInt(Fn,10);ue(wo,A.some(_s)),Oe().each(vt=>{const an=p(Gn,vt);bn(Gn,DT,{hex:an}),_(Gn,an)})},kt=Gn=>Gn.type==="hex",at=(Gn,wo)=>{const Fn=wo.event;kt(Fn)?Pe(Gn,Fn.value):He(Gn,Fn.type,Fn.value)},Bt=Gn=>({label:t(E3+Gn+".label"),description:t(E3+Gn+".description")}),cn=Bt("red"),Ao=Bt("green"),Cn=Bt("blue"),Eo=Bt("hex");return js(J0.sketch(Gn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Gn.field("red",Es.sketch(g(RA,"red",cn.label,cn.description,255))),Gn.field("green",Es.sketch(g(RA,"green",Ao.label,Ao.description,255))),Gn.field("blue",Es.sketch(g(RA,"blue",Cn.label,Cn.description,255))),Gn.field("hex",Es.sketch(g(dC,"hex",Eo.label,Eo.description,"ffffff"))),x.asSpec()],formBehaviours:yt([Rf.config({invalidClass:s("form-invalid")}),ro("rgb-form-events",[st(VN,at),st(T3,Ae),st(RT,Ae)])])})),{apis:{updateHex:(Gn,wo)=>{Ft.setValue(Gn,{hex:wo.value}),V(Gn,wo),_(Gn,wo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(F,V,X)=>{F.updateHex(V,X)}},extraApis:{}})},Q0=(t,s)=>{const a=Yu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Yu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,D)=>{const{width:B,height:F}=_,V=_.getContext("2d");if(V===null)return;V.fillStyle=D,V.fillRect(0,0,B,F);const X=V.createLinearGradient(0,0,B,0);X.addColorStop(0,"rgba(255,255,255,1)"),X.addColorStop(1,"rgba(255,255,255,0)"),V.fillStyle=X,V.fillRect(0,0,B,F);const ue=V.createLinearGradient(0,0,0,F);ue.addColorStop(0,"rgba(0,0,0,0)"),ue.addColorStop(1,"rgba(0,0,0,1)"),V.fillStyle=ue,V.fillRect(0,0,B,F)},g=(_,D)=>{const B=_.components()[0].element.dom,F=hC(D,100,100),V=Ks(F);d(B,sT(V))},p=(_,D)=>{const B=NA(Lm(D));Yu.setValue(_,{x:B.saturation,y:100-B.value})};return Ta({factory:_=>{const D=G({x:0,y:0}),B=(X,ue,Oe)=>{bn(X,FN,{value:Oe})},F=(X,ue,Oe,Ce)=>{d(Oe.element.dom,sT(rT))},V=yt([Ho.config({find:A.some}),Bn.config({})]);return Yu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,i],onChange:B,onInit:F,sliderBehaviours:V})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,D,B)=>{g(D,B)},setThumb:(_,D,B)=>{p(D,B)}},extraApis:{}})},zN=(t,s)=>{const a=d=>{const g=k3(t,s,d.onValidHex,d.onInvalidHex),p=Q0(t,s),C=at=>(100-at)/100*360,x=at=>100-at/360*100,_={paletteRgba:S(rT),paletteHue:S(0)},D=No(OL(t,s)),B=No(p.sketch({})),F=No(g.sketch({})),V=(at,Bt,cn)=>{B.getOpt(at).each(Ao=>{p.setHue(Ao,cn)})},X=(at,Bt)=>{F.getOpt(at).each(cn=>{g.updateHex(cn,Bt)})},ue=(at,Bt,cn)=>{D.getOpt(at).each(Ao=>{Yu.setValue(Ao,x(cn))})},Oe=(at,Bt)=>{B.getOpt(at).each(cn=>{p.setThumb(cn,Bt)})},Ce=(at,Bt)=>{const cn=Lm(at);_.paletteRgba.set(cn),_.paletteHue.set(Bt)},Ae=(at,Bt,cn,Ao)=>{Ce(Bt,cn),Qe(Ao,Cn=>{Cn(at,Bt,cn)})},Pe=()=>{const at=[X];return(Bt,cn)=>{const Ao=cn.event.value,Cn=_.paletteHue.get(),Eo=hC(Cn,Ao.x,100-Ao.y),Gn=BA(Eo);Ae(Bt,Gn,Cn,at)}},He=()=>{const at=[V,X];return(Bt,cn)=>{const Ao=C(cn.event.value),Cn=_.paletteRgba.get(),Eo=NA(Cn),Gn=hC(Ao,Eo.saturation,Eo.value),wo=BA(Gn);Ae(Bt,wo,Ao,at)}},kt=()=>{const at=[V,ue,Oe];return(Bt,cn)=>{const Ao=cn.event.hex,Cn=p6(Ao);Ae(Bt,Ao,Cn.hue,at)}};return{uid:d.uid,dom:d.dom,components:[B.asSpec(),D.asSpec(),F.asSpec()],behaviours:yt([ro("colour-picker-events",[st(DT,kt()),st(FN,Pe()),st($N,He())]),Ho.config({find:at=>F.getOpt(at)}),yn.config({mode:"acyclic"})])}};return Ta({name:"ColourPicker",configFields:[Je("dom"),_e("onValidHex",K),_e("onInvalidHex",K)],factory:a})},Gd={self:()=>Ho.config({find:A.some}),memento:t=>Ho.config({find:t.getOpt}),childAt:t=>Ho.config({find:s=>Nc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},MT=vn([_e("preprocess",ht),_e("postprocess",ht)]),PL=(t,s)=>{const a=_c("RepresentingConfigs.memento processors",MT,s);return Ft.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Ft.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),p=t.get(i);Ft.setValue(p,g)}}})},UN=(t,s,a)=>Ft.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),NT=(t,s,a)=>UN(t,i=>s(i.element),(i,d)=>a(i.element,d)),ha={memento:PL,withElement:NT,withComp:UN,domValue:t=>NT(t,hl,lu),domHtml:t=>NT(t,Vv,af),memory:t=>Ft.config({store:{mode:"memory",initialValue:t}})},ZN={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},IL=t=>s=>t.translate(ZN[s]),LL=(t,s,a)=>{const i=x=>"tox-"+x,d=zN(IL(s),i),g=x=>{bn(x,Df,{name:"hex-valid",value:!0})},p=x=>{bn(x,Df,{name:"hex-valid",value:!1})},C=No(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:yt([ha.withComp(a,x=>{const _=C.get(x);return Ho.getCurrent(_).bind(F=>Ft.getValue(F).hex).map(F=>"#"+Ha(F,"#")).getOr("")},(x,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,B=A.from(D.exec(_)).bind(X=>Wo(X,1)),F=C.get(x);Ho.getCurrent(F).fold(()=>{console.log("Can not find form")},X=>{Ft.setValue(X,{hex:B.getOr("")}),J0.getField(X,"hex").each(ue=>{fs(ue,$i())})})}),Gd.self()])}};var jN=tinymce.util.Tools.resolve("tinymce.Resource");const HL=t=>io(t,"init"),VL=t=>{const s=Qs(),a=No({dom:{tag:t.tag}}),i=Qs();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:yt([ro("custom-editor-events",[Zr(d=>{a.getOpt(d).each(g=>{(HL(t)?t.init(g.element.dom):jN.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{i.on(C=>{p.setValue(C)}),i.clear(),s.set(p)})})})]),ha.withComp(A.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),p=>p.setValue(g))}),Gd.self()]),components:[a.asSpec()]}};var H1=tinymce.util.Tools.resolve("tinymce.util.Tools");const GN=(t,s)=>{const a=H1.explode(s.getOption("images_file_types")),i=d=>os(a,g=>wr(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Dn(Ir(t),i)},Pf=(t,s,a)=>{const i=(F,V)=>{V.stop()},d=F=>(V,X)=>{Qe(F,ue=>{ue(V,X)})},g=(F,V)=>{var X;if(!Un.isDisabled(F)){const ue=V.event.raw;C(F,(X=ue.dataTransfer)===null||X===void 0?void 0:X.files)}},p=(F,V)=>{const X=V.event.raw.target;C(F,X.files)},C=(F,V)=>{V&&(Ft.setValue(F,GN(V,s)),bn(F,Wl,{name:t.name}))},x=No({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:yt([ro("input-file-events",[lg(fl()),lg(Tp())])])}),_=F=>({uid:F.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:yt([ha.memory(a.getOr([])),Gd.self(),Un.config({}),vo.config({toggleClass:"dragenter",toggleOnExecute:!1}),ro("dropzone-events",[st("dragenter",d([i,vo.toggle])),st("dragleave",d([i,vo.toggle])),st("dragover",i),st("drop",d([i,g])),st($u(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[kr(s.translate("Drop an image here"))]},Jc.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[kr(s.translate("Browse for an image")),x.asSpec()],action:V=>{x.get(V).element.dom.click()},buttonBehaviours:yt([oa.config({}),zd.button(s.isDisabled),bc()])})]}]}),D=t.label.map(F=>Gg(F,s)),B=Es.parts.field({factory:{sketch:_}});return SC(D,B,["tox-form__group--stretched"],[])},_3=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Se(t.items,s.interpreter)}),BT=nn("alloy-fake-before-tabstop"),ev=nn("alloy-fake-after-tabstop"),PT=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:yt([Bn.config({ignore:!0}),oa.config({})])}),qN=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[PT([BT]),t,PT([ev])],behaviours:yt([Gd.childAt(1)])}),KN=(t,s)=>{bn(t,Pi(),{raw:{which:9,shiftKey:s}})},zL=(t,s)=>{const a=s.element;tc(a,BT)?KN(t,!0):tc(a,ev)&&KN(t,!1)},MC=t=>CC(t,["."+BT,"."+ev].join(","),Ln),UL=t=>{const s=S(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,i)=>{s.get()!==i&&zn(a.element,"srcdoc",i),s.set(i)}}},WL=(t,s,a)=>{const i=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(B=>({title:B})).getOr({}),...a.map(B=>({srcdoc:B})).getOr({}),...i?{sandbox:"allow-scripts allow-same-origin"}:{}},C=UL(a),x=t.label.map(B=>Gg(B,s)),_=B=>qN({uid:B.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:yt([oa.config({}),Bn.config({}),ha.withComp(a,C.getValue,C.setValue)])}),D=Es.parts.field({factory:{sketch:_}});return SC(x,D,["tox-form__group--stretched"],[])},ZL=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[ri(t,"load",i),ri(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>Qe(d,p=>p.unbind());t.dom.complete&&i()}),YN=(t,s,a,i,d)=>{const g=a*d,p=i*d,C=Math.max(0,t/2-g/2),x=Math.max(0,s/2-p/2);return{left:C.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},jL=(t,s,a)=>{const i=wa(t),d=ze(t);return Math.min(i/s,d/a,1)},$f=(t,s)=>{const a=S(s.getOr({url:""})),i=No({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=No({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(x,_)=>{const D={url:_.url};_.zoom.each(F=>D.zoom=F),_.cachedWidth.each(F=>D.cachedWidth=F),_.cachedHeight.each(F=>D.cachedHeight=F),a.set(D);const B=()=>{const{cachedWidth:F,cachedHeight:V,zoom:X}=D;if(!_n(F)&&!_n(V)){if(_n(X)){const Oe=jL(x.element,F,V);D.zoom=Oe}const ue=YN(wa(x.element),ze(x.element),F,V,D.zoom);d.getOpt(x).each(Oe=>{Hr(Oe.element,ue)})}};i.getOpt(x).each(F=>{const V=F.element;_.url!==Qr(V,"src")&&(zn(V,"src",_.url),da(x.element,"tox-imagepreview__loaded")),B(),ZL(V).then(X=>{x.getSystem().isConnected()&&($s(x.element,"tox-imagepreview__loaded"),D.cachedWidth=X.dom.naturalWidth,D.cachedHeight=X.dom.naturalHeight,B())})})},p={};t.height.each(x=>p.height=x);const C=s.map(x=>({url:x.url,zoom:A.from(x.zoom),cachedWidth:A.from(x.cachedWidth),cachedHeight:A.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:yt([Gd.self(),ha.withComp(C,()=>a.get(),g)])}},$T=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[kr(s.providers.translate(t.label))]},i=Se(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...i],behaviours:yt([Gd.self(),Jn.config({}),ha.domHtml(A.none()),yn.config({mode:"acyclic"})])}},XN=nn("toolbar.button.execute"),GL=t=>Fu((s,a)=>{V0(t,s)(i=>{bn(s,XN,{buttonApi:i}),t.onAction(i)})}),ip=nn("common-button-display-events"),A3={[qs()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Td()]:["toolbar-button-events",ip],[ua()]:["focusing","alloy.base.behaviour",ip]},NC=t=>Kt(t.element,"width",et(t.element,"width")),BC=(t,s,a)=>Gu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),V1=(t,s)=>BC(t,s,[]),qd=(t,s)=>BC(t,s,[Jn.config({})]),O3=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[kr(a.translate(t))],behaviours:yt([Jn.config({})])}),Tu=nn("update-menu-text"),z1=nn("update-menu-icon"),D3=(t,s,a)=>{const i=S(K),d=t.text.map(F=>No(O3(F,s,a.providers))),g=t.icon.map(F=>No(qd(F,a.providers.icons))),p=(F,V)=>{const X=Ft.getValue(F);return Bn.focus(X),bn(X,"keydown",{raw:V.event.raw}),wl.close(X),A.some(!0)},C=t.role.fold(()=>({}),F=>({role:F})),x=t.tooltip.fold(()=>({}),F=>{const V=a.providers.translate(F);return{title:V,"aria-label":V}}),_=Gu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),D=nn("common-button-display-events");return No(wl.sketch({...t.uid?{uid:t.uid}:{},...C,dom:{tag:"button",classes:[s,`${s}--select`].concat(Se(t.classes,F=>`${s}--${F}`)),attributes:{...x}},components:z0([g.map(F=>F.asSpec()),d.map(F=>F.asSpec()),A.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(F,V,X)=>{t.searchable&&Y6(X)},dropdownBehaviours:yt([...t.dropdownBehaviours,zd.button(()=>t.disabled||a.providers.isDisabled()),bc(),EC.config({}),Jn.config({}),ro("dropdown-events",[op(t,i),M1(t,i)]),ro(D,[Zr((F,V)=>NC(F))]),ro("menubutton-update-display-text",[st(Tu,(F,V)=>{d.bind(X=>X.getOpt(F)).each(X=>{Jn.set(X,[kr(a.providers.translate(V.event.text))])})}),st(z1,(F,V)=>{g.bind(X=>X.getOpt(F)).each(X=>{Jn.set(X,[qd(V.event.icon,a.providers.icons)])})})])]),eventOrder:js(A3,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Td()]:["toolbar-button-events","dropdown-events",D]}),sandboxBehaviours:yt([yn.config({mode:"special",onLeft:p,onRight:p}),ro("dropdown-sandbox-events",[st(wR,(F,V)=>{Z6(F),V.stop()}),st(SR,(F,V)=>{j6(F,V),V.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Hx(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:WM,onCollapseMenu:(F,V,X)=>{gs.getHighlighted(X).each(ue=>{WM(F,X,ue)})},onDehighlightItem:K6}},fetch:F=>ai.nu(Pt(t.fetch,F))})).asSpec()},qL=t=>Vt(t),JN=t=>t.type==="separator",KL=t=>io(t,"getSubmenuItems"),YL={type:"separator"},XL=(t,s)=>{const a=An(t,(i,d)=>qL(d)?d===""?i:d==="|"?i.length>0&&!JN(i[i.length-1])?i.concat([YL]):i:io(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&JN(a[a.length-1])&&a.pop(),a},QN=(t,s)=>{const a=t.getSubmenuItems(),i=tB(a,s),d=js(i.menus,{[t.value]:i.items}),g=js(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},eB=t=>{const s=bt(t,"value").getOrThunk(()=>nn("generated-menu-item"));return js({value:s},t)},tB=(t,s)=>{const a=XL(Vt(t)?t.split(" "):t,s);return bo(a,(i,d)=>{if(KL(d)){const g=eB(d),p=QN(g,s);return{menus:js(i.menus,p.menus),items:[p.item,...i.items],expansions:js(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},nB=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),JL=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),U1=(t,s,a,i)=>{const d=nn("primary-menu"),g=tB(t,a.shared.providers.menuItems());if(g.items.length===0)return A.none();const p=nB(i),C=ZM(d,g.items,s,a,i.isHorizontalMenu,p),x=JL(i),_=ls(g.menus,(B,F)=>ZM(F,B,s,a,!1,x)),D=js(_,no(d,C));return A.from(x1.tieredData(d,D,g.expansions))},W1=t=>!io(t,"items"),oB="data-value",R3=(t,s,a,i)=>Se(a,d=>W1(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{Ft.setValue(t,d.value),bn(t,Wl,{name:s}),Bn.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>R3(t,s,d.items,i)}),M3=(t,s)=>Ss(t,a=>W1(a)?hn(a.value===s,a):M3(a.items,s)),QL=(t,s,a)=>{const i=s.shared.providers,d=a.bind(x=>M3(t.items,x)).orThunk(()=>Fs(t.items).filter(W1)),g=t.label.map(x=>Gg(x,i)),p=Es.parts.field({dom:{},factory:{sketch:x=>D3({uid:x.uid,text:d.map(_=>_.text),icon:A.none(),tooltip:t.label,role:A.none(),fetch:(_,D)=>{const B=R3(_,t.name,t.items,Ft.getValue(_));D(U1(B,Pm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:G(K),getApi:G({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[oa.config({}),ha.withComp(d.map(_=>_.value),_=>Qr(_.element,oB),(_,D)=>{M3(t.items,D).each(B=>{zn(_.element,oB,B.value),bn(_,Tu,{text:B.text})})})]},"tox-listbox",s.shared)}}),C={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ge([g.toArray(),[C]]),fieldBehaviours:yt([Un.config({disabled:G(!t.enabled),onDisabled:x=>{Es.getField(x).each(Un.disable)},onEnabled:x=>{Es.getField(x).each(Un.enable)}})])})},e7=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Se(t.items,s.shared.interpreter)}),t7=(t,s)=>{const a=Se(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>no("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Sr(t.selectBehaviours,[Bn.config({}),Ft.config({store:{mode:"manual",getValue:d=>hl(d.element),setValue:(d,g)=>{Ue(t.options,C=>C.value===g).isSome()&&lu(d.element,g)},...i}})])}},sB=Ta({name:"HtmlSelect",configFields:[Je("options"),pc("selectBehaviours",[Bn,Ft]),_e("selectClasses",[]),_e("selectAttributes",{}),Cs("data")],factory:t7}),n7=(t,s,a)=>{const i=Se(t.items,x=>({text:s.translate(x.text),value:x.value})),d=t.label.map(x=>Gg(x,s)),g=Es.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:t.size},options:i,factory:sB,selectBehaviours:yt([Un.config({disabled:()=>!t.enabled||s.isDisabled()}),oa.config({}),ro("selectbox-change",[st($u(),(x,_)=>{bn(x,Wl,{name:t.name})})])])}),p=t.size>1?A.none():A.some(Gu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Ge([[g],p.toArray()])};return Es.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Ge([d.toArray(),[C]]),fieldBehaviours:yt([Un.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{Es.getField(x).each(Un.disable)},onEnabled:x=>{Es.getField(x).each(Un.enable)}}),bc()])})},rB=G([_e("field1Name","field1"),_e("field2Name","field2"),yg("onLockedChange"),Bl(["lockClass"]),_e("locked",!1),pu.field("coupledFieldBehaviours",[Ho,Ft])]),N3=(t,s,a)=>er(t,s,a).bind(Ho.getCurrent),Ff=(t,s)=>oc({factory:Es,name:t,overrides:a=>({fieldBehaviours:yt([ro("coupled-input-behaviour",[st($i(),i=>{N3(i,a,s).each(d=>{er(i,a,"lock").each(g=>{vo.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),B3=G([Ff("field1","field2"),Ff("field2","field1"),oc({factory:Jc,schema:[Je("dom")],name:"lock",overrides:t=>({buttonBehaviours:yt([vo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),aB=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:pu.augment(t.coupledFieldBehaviours,[Ho.config({find:A.some}),Ft.config({store:{mode:"manual",getValue:d=>{const g=y2(d,t,["field1","field2"]);return{[t.field1Name]:Ft.getValue(g.field1()),[t.field2Name]:Ft.getValue(g.field2())}},setValue:(d,g)=>{const p=y2(d,t,["field1","field2"]);ca(g,t.field1Name)&&Ft.setValue(p.field1(),g[t.field1Name]),ca(g,t.field2Name)&&Ft.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>er(d,t,"field1"),getField2:d=>er(d,t,"field2"),getLock:d=>er(d,t,"lock")}}),Zl=ma({name:"FormCoupledInputs",configFields:rB(),partFields:B3(),factory:aB,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),P3=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},FT=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return St.value({value:i,unit:d})}else return St.error(t)},PC=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>io(a,d);return t.unit===s?A.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?A.some(t.value):A.some(t.value/a[t.unit]*a[s]):A.none()},IT=t=>A.none(),cB=(t,s)=>a=>PC(a,s).map(i=>({value:i*t,unit:s})),o7=(t,s)=>{const a=FT(t).toOptional(),i=FT(s).toOptional();return La(a,i,(d,g)=>PC(d,g.unit).map(p=>g.value/p).map(p=>cB(p,g.unit)).getOr(IT)).getOr(IT)},s7=(t,s)=>{let a=IT;const i=nn("ratio-event"),d=B=>Gu(B,{tag:"span",classes:["tox-icon","tox-lock-icon__"+B]},s.icons),g=Zl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:yt([Un.config({disabled:()=>!t.enabled||s.isDisabled()}),bc(),oa.config({})])}),p=B=>({dom:{tag:"div",classes:["tox-form__group"]},components:B}),C=B=>Es.parts.field({factory:_1,inputClasses:["tox-textfield"],inputBehaviours:yt([Un.config({disabled:()=>!t.enabled||s.isDisabled()}),bc(),oa.config({}),ro("size-input-events",[st(sf(),(F,V)=>{bn(F,i,{isField1:B})}),st($u(),(F,V)=>{bn(F,Wl,{name:t.name})})])]),selectOnFocus:!1}),x=B=>({dom:{tag:"label",classes:["tox-label"]},components:[kr(s.translate(B))]}),_=Zl.parts.field1(p([Es.parts.label(x("Width")),C(!0)])),D=Zl.parts.field2(p([Es.parts.label(x("Height")),C(!1)]));return Zl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[_,D,p([x(Ny),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(B,F,V)=>{FT(Ft.getValue(B)).each(X=>{a(X).each(ue=>{Ft.setValue(F,P3(ue))})})},coupledFieldBehaviours:yt([Un.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:B=>{Zl.getField1(B).bind(Es.getField).each(Un.disable),Zl.getField2(B).bind(Es.getField).each(Un.disable),Zl.getLock(B).each(Un.disable)},onEnabled:B=>{Zl.getField1(B).bind(Es.getField).each(Un.enable),Zl.getField2(B).bind(Es.getField).each(Un.enable),Zl.getLock(B).each(Un.enable)}}),bc(),ro("size-input-events2",[st(i,(B,F)=>{const V=F.event.isField1,X=V?Zl.getField1(B):Zl.getField2(B),ue=V?Zl.getField2(B):Zl.getField1(B),Oe=X.map(Ft.getValue).getOr(""),Ce=ue.map(Ft.getValue).getOr("");a=o7(Oe,Ce)})])])})},r7=(t,s,a)=>{const i=Yu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[kr(s.translate(t.label))]}),d=Yu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Yu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Yu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:G(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:yt([Gd.self(),Bn.config({})]),onChoose:(p,C,x)=>{bn(p,Wl,{name:t.name,value:x})}})},a7=(t,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Se(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Se(C,d)}),p=C=>({dom:{tag:"tbody"},components:Se(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:yt([oa.config({}),Bn.config({})])}},iB=(t,s)=>{const a=t.label.map(V=>Gg(V,s)),i=[Un.config({disabled:()=>t.disabled||s.isDisabled()}),bc(),yn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(fs(V,TC),A.some(!0))}),ro("textfield-change",[st($i(),(V,X)=>{bn(V,Wl,{name:t.name})}),st(Rv(),(V,X)=>{bn(V,Wl,{name:t.name})})]),oa.config({})],d=t.validation.map(V=>Rf.config({getRoot:X=>Cc(X.element),invalidClass:"tox-invalid",validator:{validate:X=>{const ue=Ft.getValue(X),Oe=V.validator(ue);return ai.pure(Oe===!0?St.value(ue):St.error(Oe))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(G({}),V=>({placeholder:s.translate(V)})),p=t.inputMode.fold(G({}),V=>({inputmode:V})),C={...g,...p},x=Es.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:yt(Ge([i,d])),selectOnFocus:!1,factory:_1}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,B=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),F=[Un.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:V=>{Es.getField(V).each(Un.disable)},onEnabled:V=>{Es.getField(V).each(Un.enable)}}),bc()];return SC(a,_,B,F)},lB=(t,s,a)=>iB({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:a},s),uB=(t,s,a)=>iB({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:a},s),$C=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Kg=t=>t.dimension.property,Z1=(t,s)=>t.dimension.getDimension(s),j1=(t,s)=>{const a=$C(t,s);vi(a,[s.shrinkingClass,s.growingClass])},$3=(t,s)=>{da(t.element,s.openClass),$s(t.element,s.closedClass),Kt(t.element,Kg(s),"0px"),Y(t.element)},F3=(t,s)=>{da(t.element,s.closedClass),$s(t.element,s.openClass),xo(t.element,Kg(s))},I3=(t,s,a,i)=>{a.setCollapsed(),Kt(t.element,Kg(s),Z1(s,t.element)),j1(t,s),$3(t,s),s.onStartShrink(t),s.onShrunk(t)},dB=(t,s,a,i)=>{const d=i.getOrThunk(()=>Z1(s,t.element));a.setCollapsed(),Kt(t.element,Kg(s),d),Y(t.element);const g=$C(t,s);da(g,s.growingClass),$s(g,s.shrinkingClass),$3(t,s),s.onStartShrink(t)},mB=(t,s,a)=>{const i=Z1(s,t.element);(i==="0px"?I3:dB)(t,s,a,A.some(i))},fB=(t,s,a)=>{const i=$C(t,s),d=tc(i,s.shrinkingClass),g=Z1(s,t.element);F3(t,s);const p=Z1(s,t.element);(d?()=>{Kt(t.element,Kg(s),g),Y(t.element)}:()=>{$3(t,s)})(),da(i,s.shrinkingClass),$s(i,s.growingClass),F3(t,s),Kt(t.element,Kg(s),p),a.setExpanded(),s.onStartGrow(t)},L3=(t,s,a)=>{if(a.isExpanded()){xo(t.element,Kg(s));const i=Z1(s,t.element);Kt(t.element,Kg(s),i)}},c7=(t,s,a)=>{a.isExpanded()||fB(t,s,a)},gB=(t,s,a)=>{a.isExpanded()&&mB(t,s,a)},i7=(t,s,a)=>{a.isExpanded()&&I3(t,s,a)},l7=(t,s,a)=>a.isExpanded(),hB=(t,s,a)=>a.isCollapsed(),H3=(t,s,a)=>{const i=$C(t,s);return tc(i,s.growingClass)===!0},pB=(t,s,a)=>{const i=$C(t,s);return tc(i,s.shrinkingClass)===!0};var bB=Object.freeze({__proto__:null,refresh:L3,grow:c7,shrink:gB,immediateShrink:i7,hasGrown:l7,hasShrunk:hB,isGrowing:H3,isShrinking:pB,isTransitioning:(t,s,a)=>H3(t,s)||pB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?mB:fB)(t,s,a)},disableTransitions:j1,immediateGrow:(t,s,a)=>{a.isExpanded()||(F3(t,s),Kt(t.element,Kg(s),Z1(s,t.element)),j1(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),d7=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return Lu(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:no(s.dimension.property,"0px")})},events:(t,s)=>cr([iu(rg(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(j1(a,t),s.isExpanded()&&xo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),m7=[Je("closedClass"),Je("openClass"),Je("shrinkingClass"),Je("growingClass"),Cs("getAnimationRoot"),Ee("onShrunk"),Ee("onStartShrink"),Ee("onGrown"),Ee("onStartGrow"),_e("expanded",!1),Ki("dimension",ia("property",{width:[ir("property","width"),ir("getDimension",t=>wa(t)+"px")],height:[ir("property","height"),ir("getDimension",t=>ze(t)+"px")]}))],f7=Object.freeze({__proto__:null,init:t=>{const s=S(t.expanded),a=()=>"expanded: "+s.get();return Ii({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Pt(s.set,!1),setExpanded:Pt(s.set,!0),readState:a})}});const jl=fc({fields:m7,name:"sliding",active:d7,apis:bB,state:f7}),vB=t=>({isEnabled:()=>!Un.isDisabled(t),setEnabled:s=>Un.set(t,!s),setActive:s=>{const a=t.element;s?($s(a,"tox-tbtn--enabled"),zn(a,"aria-pressed",!0)):(da(a,"tox-tbtn--enabled"),ne(a,"aria-pressed"))},isActive:()=>tc(t.element,"tox-tbtn--enabled"),setText:s=>{bn(t,Tu,{text:s})},setIcon:s=>bn(t,z1,{icon:s})}),FC=(t,s,a,i,d=!0)=>D3({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(g,p)=>{const C={pattern:t.search.isSome()?X6(g):""};t.fetch(x=>{p(U1(x,Pm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},C,vB(g))},onSetup:t.onSetup,getApi:vB,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[oa.config({})]:[]]},s,a.shared),g7=(t,s,a)=>{const i=g=>p=>{const C=!p.isActive();p.setActive(C),g.storage.set(C),a.shared.getSink().each(x=>{s().getOpt(x).each(_=>{fu(_.element),bn(_,Df,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(Se(t,p=>{const C=p.text.fold(()=>({}),x=>({text:x}));return{type:p.type,active:!1,...C,onAction:i(p),onSetup:d(p)}}))}},yB=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[kr(t)]}),LT=nn("leaf-label-event-id"),V3=({leaf:t,onLeafAction:s,visible:a,treeId:i,backstage:d})=>{const g=t.menu.map(C=>FC(C,"tox-mbtn",d,A.none(),a)),p=[yB(t.title)];return g.each(C=>p.push(C)),Jc.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:C=>{s(t.id),C.getSystem().broadcastOn([`update-active-item-${i}`],{value:t.id})},eventOrder:{[Pi()]:[LT,"keying"]},buttonBehaviours:yt([...a?[oa.config({})]:[],vo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Pl.config({channels:{[`update-active-item-${i}`]:{onReceive:(C,x)=>{(x.value===t.id?vo.on:vo.off)(C)}}}}),ro(LT,[st(Pi(),(C,x)=>{const _=x.event.raw.code==="ArrowLeft",D=x.event.raw.code==="ArrowRight";_?(uu(C.element,".tox-tree--directory").each(B=>{C.getSystem().getByDom(B).each(F=>{wm(B,".tox-tree--directory__label").each(V=>{F.getSystem().getByDom(V).each(Bn.focus)})})}),x.stop()):D&&x.stop()})])])})},h7=(t,s,a)=>Gu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),p7=(t,s)=>h7(t,s,[]),tv=nn("directory-label-event-id"),z3=({directory:t,visible:s,noChildren:a,backstage:i})=>{const d=t.menu.map(C=>FC(C,"tox-mbtn",i,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[p7("chevron-right",i.shared.providers.icons)]},yB(t.title)];d.each(C=>{g.push(C)});const p=C=>{uu(C.element,".tox-tree--directory").each(x=>{C.getSystem().getByDom(x).each(_=>vo.toggle(_))})};return Jc.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Pi()]:[tv,"keying"]},buttonBehaviours:yt([...s?[oa.config({})]:[],ro(tv,[st(Pi(),(C,x)=>{const _=x.event.raw.code==="ArrowRight",D=x.event.raw.code==="ArrowLeft";_&&a&&x.stop(),(_||D)&&uu(C.element,".tox-tree--directory").each(B=>{C.getSystem().getByDom(B).each(F=>{!vo.isOn(F)&&_||vo.isOn(F)&&D?(p(C),x.stop()):D&&!vo.isOn(F)&&(uu(F.element,".tox-tree--directory").each(V=>{wm(V,".tox-tree--directory__label").each(X=>{F.getSystem().getByDom(X).each(Bn.focus)})}),x.stop())})})})])])})},b7=({children:t,onLeafAction:s,visible:a,treeId:i,backstage:d})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(g=>g.type==="leaf"?V3({leaf:g,onLeafAction:s,visible:a,treeId:i,backstage:d}):U3({directory:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d})),behaviours:yt([jl.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking"}),Jn.config({})])}),U3=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d})=>{const{children:g}=t,p=C=>g.map(x=>x.type==="leaf"?V3({leaf:x,onLeafAction:s,visible:C,treeId:i,backstage:d}):U3({directory:x,onLeafAction:s,labelTabstopping:C,treeId:i,backstage:d}));return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[z3({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),b7({children:g,onLeafAction:s,visible:!1,treeId:i,backstage:d})],behaviours:yt([vo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(C,x)=>{const _=C.components()[1],D=p(x);x?jl.grow(_):jl.shrink(_),Jn.set(_,D)}})])}},W3=(t,s)=>{const a=t.onLeafAction.getOr(K),i=nn("tree-id"),d=t.items.map(g=>g.type==="leaf"?V3({leaf:g,onLeafAction:a,visible:!0,treeId:i,backstage:s}):U3({directory:g,onLeafAction:a,labelTabstopping:!0,treeId:i,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:d,behaviours:yt([yn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1})])}};var Z3=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return cr([st(t.event,i),Fi(()=>s.cancel())].concat(t.cancelEvent.map(d=>[st(d,()=>s.cancel())]).getOr([])))}});const CB=(t,s)=>{let a=null;return{cancel:()=>{Yo(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Yo(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},j3=(t,s)=>{let a=null;const i=()=>{Yo(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},wB=t=>{const s=S(null);return Ii({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var SB=Object.freeze({__proto__:null,throttle:wB,init:t=>t.stream.streams.state(t)});const y7=(t,s)=>{const a=t.stream,i=j3(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var xB=[Ki("stream",ia("mode",{throttle:[Je("delay"),_e("stopEvent",!0),ir("streams",{setup:y7,state:wB})]})),_e("event","input"),Cs("cancelEvent"),yg("onStream")];const HT=fc({fields:xB,name:"streaming",active:Z3,state:SB}),VT=(t,s,a)=>{const i=Ft.getValue(a);Ft.setValue(s,i),q3(s)},G3=(t,s)=>{const a=t.element,i=hl(a),d=a.dom;Qr(a,"type")!=="number"&&s(d,i)},q3=t=>{G3(t,(s,a)=>s.setSelectionRange(a.length,a.length))},TB=(t,s)=>{G3(t,(a,i)=>a.setSelectionRange(s,i.length))},C7=(t,s,a)=>{if(t.selectsOver){const i=Ft.getValue(s),d=t.getDisplayText(i),g=Ft.getValue(a);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{VT(t,s,a),TB(s,d.length)}):A.none()}else return A.none()},K3=G("alloy.typeahead.itemexecute"),w7=(t,s,a,i)=>{const d=(B,F,V)=>{t.previewing.set(!1);const X=fa.getCoupled(B,"sandbox");if(Mo.isOpen(X))Ho.getCurrent(X).each(ue=>{gs.getHighlighted(ue).fold(()=>{V(ue)},()=>{$v(X,ue.element,"keydown",F)})});else{const ue=Oe=>{Ho.getCurrent(Oe).each(V)};mT(t,p(B),B,X,i,ue,sl.HighlightMenuAndItem).get(K)}},g=yR(t),p=B=>F=>F.map(V=>{const X=Or(V.menus),ue=xe(X,Ce=>Dn(Ce.items,Ae=>Ae.type==="item"));return Ft.getState(B).update(Se(ue,Ce=>Ce.data)),V}),C=B=>Ho.getCurrent(B),x="typeaheadevents",_=[Bn.config({}),Ft.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>hl(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,F)=>{lu(B.element,t.model.getDisplayText(F))},...t.initialData.map(B=>no("initialValue",B)).getOr({})}}),HT.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,F)=>{const V=fa.getCoupled(B,"sandbox");if(Bn.isFocused(B)&&hl(B.element).length>=t.minChars){const ue=C(V).bind(Ce=>gs.getHighlighted(Ce).map(Ft.getValue));t.previewing.set(!0);const Oe=Ce=>{C(V).each(Ae=>{ue.fold(()=>{t.model.selectsOver&&gs.highlightFirst(Ae)},Pe=>{gs.highlightBy(Ae,He=>Ft.getValue(He).value===Pe.value),gs.getHighlighted(Ae).orThunk(()=>(gs.highlightFirst(Ae),A.none()))})})};mT(t,p(B),B,V,i,Oe,sl.HighlightJustMenu).get(K)}},cancelEvent:Ep()}),yn.config({mode:"special",onDown:(B,F)=>(d(B,F,gs.highlightFirst),A.some(!0)),onEscape:B=>{const F=fa.getCoupled(B,"sandbox");return Mo.isOpen(F)?(Mo.close(F),A.some(!0)):A.none()},onUp:(B,F)=>(d(B,F,gs.highlightLast),A.some(!0)),onEnter:B=>{const F=fa.getCoupled(B,"sandbox"),V=Mo.isOpen(F);if(V&&!t.previewing.get())return C(F).bind(X=>gs.getHighlighted(X)).map(X=>(bn(B,K3(),{item:X}),!0));{const X=Ft.getValue(B);return fs(B,Ep()),t.onExecute(F,B,X),V&&Mo.close(F),A.some(!0)}}}),vo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),fa.config({others:{sandbox:B=>yC(t,B,{onOpen:()=>vo.on(B),onClose:()=>vo.off(B)})}}),ro(x,[Zr(B=>{t.lazyTypeaheadComp.set(A.some(B))}),Fi(B=>{t.lazyTypeaheadComp.set(A.none())}),Fu(B=>{const F=K;qA(t,p(B),B,i,F,sl.HighlightMenuAndItem).get(K)}),st(K3(),(B,F)=>{const V=fa.getCoupled(B,"sandbox");VT(t.model,B,F.event.item),fs(B,Ep()),t.onItemExecute(B,V,F.event.item,Ft.getValue(B)),Mo.close(V),q3(B)})].concat(t.dismissOnBlur?[st(Dv(),B=>{const F=fa.getCoupled(B,"sandbox");Uu(F.element).isNone()&&Mo.close(F)})]:[]))],D={[mm()]:[Ft.name(),HT.name(),x],...t.eventOrder};return{uid:t.uid,dom:CR(js(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...Sr(t.typeaheadBehaviours,_)},eventOrder:D}},EB=G([Cs("lazySink"),Je("fetch"),_e("minChars",5),_e("responseTime",1e3),Ee("onOpen"),_e("getHotspot",A.some),_e("getAnchorOverrides",G({})),_e("layouts",A.none()),_e("eventOrder",{}),w("model",{},[_e("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),_e("selectsOver",!0),_e("populateFromBrowse",!0)]),Ee("onSetValue"),_r("onExecute"),Ee("onItemExecute"),_e("inputClasses",[]),_e("inputAttributes",{}),_e("inputStyles",{}),_e("matchWidth",!0),_e("useMinWidth",!1),_e("dismissOnBlur",!0),Bl(["openClass"]),Cs("initialData"),pc("typeaheadBehaviours",[Bn,Ft,HT,yn,vo,fa]),Vs("lazyTypeaheadComp",()=>S(A.none)),Vs("previewing",()=>S(!0))].concat(vR()).concat(YA())),S7=G([bu({schema:[zu()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{C7(t.model,d,i).fold(()=>{t.model.selectsOver?(gs.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&VT(t.model,d,i)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(bn(i,K3(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&VT(t.model,i,a)})}})})]),kB=ma({name:"Typeahead",configFields:EB(),partFields:S7(),factory:w7}),Kd=t=>({...t,toCached:()=>Kd(t.toCached()),bindFuture:x=>Kd(t.bind(_=>_.fold(D=>ai.pure(St.error(D)),D=>x(D)))),bindResult:x=>Kd(t.map(_=>_.bind(x))),mapResult:x=>Kd(t.map(_=>_.map(x))),mapError:x=>Kd(t.map(_=>_.mapError(x))),foldResult:(x,_)=>t.map(D=>D.fold(x,_)),withTimeout:(x,_)=>Kd(ai.nu(D=>{let B=!1;const F=setTimeout(()=>{B=!0,D(St.error(_()))},x);t.get(V=>{B||(clearTimeout(F),D(V))})}))}),_B=t=>Kd(ai.nu(t)),zT=t=>Kd(ai.pure(St.value(t))),T7={nu:_B,wrap:Kd,pure:zT,value:zT,error:t=>Kd(ai.pure(St.error(t))),fromResult:t=>Kd(ai.pure(t)),fromFuture:t=>Kd(t.map(St.value)),fromPromise:t=>_B(s=>{t.then(a=>{s(St.value(a))},a=>{s(St.error(a))})})},IC=(t,s,a=[],i,d,g)=>{const p=s.fold(()=>({}),_=>({action:_})),C={buttonBehaviours:yt([zd.button(()=>!t.enabled||g.isDisabled()),bc(),oa.config({}),ro("button press",[Ow("click"),Ow("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},x=js(C,{dom:i});return js(x,{components:d})},E7=(t,s,a,i=[])=>{const d=t.tooltip.map(x=>({"aria-label":a.translate(x),title:a.translate(x)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(x=>V1(x,a.icons)),C=z0([p]);return IC(t,s,i,g,C,a)},UT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},AB=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(F=>V1(F,a.icons)),C=[p.getOrThunk(()=>kr(g))],x=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...UT(x),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return IC(t,s,i,B,C,a)},OB=(t,s,a,i=[],d=[])=>{const g=AB(t,A.some(s),a,i,d);return Jc.sketch(g)},DB=(t,s)=>a=>{s==="custom"?bn(a,Df,{name:t,value:{}}):s==="submit"?fs(a,TC):s==="cancel"?fs(a,F1):console.error("Unknown button type: ",s)},k7=(t,s)=>s==="menu",RB=(t,s)=>s==="custom"||s==="cancel"||s==="submit",_7=(t,s)=>s==="togglebutton",A7=(t,s)=>{var a,i,d;const g=A.from(t.icon).map(Ae=>qd(Ae,s.icons)).map(No),p=Ae=>{bn(Ae,Df,{name:t.name,value:{setIcon:Pe=>{g.map(He=>He.getOpt(Ae).each(kt=>{Jn.set(kt,[qd(Pe,s.icons)])}))}}})},C={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:A.from(t.tooltip),icon:A.from(t.name),enabled:(i=t.enabled)!==null&&i!==void 0?i:!1,borderless:!1},x=C.tooltip.map(Ae=>({"aria-label":s.translate(Ae),title:s.translate(Ae)})).getOr({}),_=UT((d=t.buttonType)!==null&&d!==void 0?d:"secondary"),D=!!t.icon&&!!t.text,B={tag:"button",classes:[..._.concat(["tox-button--icon"]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:x},F=[],V=s.translate(t.text),X=kr(V),Oe=[...z0([g.map(Ae=>Ae.asSpec())]),...D?[X]:[]],Ce=IC(C,A.some(p),F,B,Oe,s);return Jc.sketch(Ce)},LC=(t,s,a)=>{if(k7(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(t.enabled),K),fetch:g7(d.items,i,a)},p=No(FC(g,"tox-tbtn",a,A.none()));return p.asSpec()}else if(RB(t,s)){const i=DB(t.name,s),d={...t,borderless:!1};return OB(d,i,a.shared.providers,[])}else if(_7(t,s)){const i={...t,tooltip:t.tooltip,text:t.text.getOrUndefined(),buttonType:t.buttonType.getOrUndefined()};return A7(i,a.shared.providers)}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},O7=(t,s)=>{const a=DB(t.name,"custom");return nN(A.none(),Es.parts.field({factory:Jc,...AB(t,A.some(a),s,[ha.memory(""),Gd.self()])}))},D7={type:"separator"},R7=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:K}),WT=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:K}),M7=t=>Se(t,R7),N7=(t,s)=>Dn(s,a=>a.type===t),Y3=(t,s)=>M7(N7(t,s)),MB=t=>Y3("header",t.targets),NB=t=>Y3("anchor",t.targets),ZT=t=>A.from(t.anchorTop).map(s=>WT("<top>",s)).toArray(),B7=t=>A.from(t.anchorBottom).map(s=>WT("<bottom>",s)).toArray(),P7=t=>Se(t,s=>WT(s,s)),$7=t=>An(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(D7,a),[]),X3=(t,s)=>{const a=t.toLowerCase();return Dn(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return Ws(g.toLowerCase(),a)||Ws(p.toLowerCase(),a)})},BB=(t,s,a)=>{const i=Ft.getValue(s),d=i.meta.text!==void 0?i.meta.text:i.value;return a.getLinkInformation().fold(()=>[],p=>{const C=X3(d,P7(a.getHistory(t)));return t==="file"?$7([C,X3(d,MB(p)),X3(d,Ge([ZT(p),NB(p),B7(p)]))]):C})},J3=nn("aria-invalid"),F7=(t,s,a,i)=>{const d=s.shared.providers,g=Ae=>{const Pe=Ft.getValue(Ae);a.addToHistory(Pe.value,t.filetype)},p={...i.map(Ae=>({initialData:Ae})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":J3,type:"url"},minChars:0,responseTime:0,fetch:Ae=>{const Pe=BB(t.filetype,Ae,a),He=U1(Pe,Pm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return ai.pure(He)},getHotspot:Ae=>X.getOpt(Ae),onSetValue:(Ae,Pe)=>{Ae.hasConfigured(Rf)&&Rf.run(Ae).get(K)},typeaheadBehaviours:yt([...a.getValidationHandler().map(Ae=>Rf.config({getRoot:Pe=>Cc(Pe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Pe,He)=>{D.getOpt(Pe).each(kt=>{zn(kt.element,"title",d.translate(He))})}},validator:{validate:Pe=>{const He=Ft.getValue(Pe);return T7.nu(kt=>{Ae({type:t.filetype,url:He.value},at=>{if(at.status==="invalid"){const Bt=St.error(at.message);kt(Bt)}else{const Bt=St.value(at.message);kt(Bt)}})})},validateOnLoad:!1}})).toArray(),Un.config({disabled:()=>!t.enabled||d.isDisabled()}),oa.config({}),ro("urlinput-events",[st($i(),Ae=>{const Pe=hl(Ae.element),He=Pe.trim();He!==Pe&&lu(Ae.element,He),t.filetype==="file"&&bn(Ae,Wl,{name:t.name})}),st($u(),Ae=>{bn(Ae,Wl,{name:t.name}),g(Ae)}),st(Rv(),Ae=>{bn(Ae,Wl,{name:t.name}),g(Ae)})])]),eventOrder:{[$i()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Ae=>Ae.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Hx(!1,1,"normal")},onExecute:(Ae,Pe,He)=>{bn(Pe,TC,{})},onItemExecute:(Ae,Pe,He,kt)=>{g(Ae),bn(Ae,Wl,{name:t.name})}},C=Es.parts.field({...p,factory:kB}),x=t.label.map(Ae=>Gg(Ae,d)),D=No(((Ae,Pe,He=Ae,kt=Ae)=>Gu(He,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Ae],attributes:{title:d.translate(kt),"aria-live":"polite",...Pe.fold(()=>({}),at=>({id:at}))}},d.icons))("invalid",A.some(J3),"warning")),B=No({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),F=a.getUrlPicker(t.filetype),V=nn("browser.url.event"),X=No({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,B.asSpec()],behaviours:yt([Un.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ue=No(OB({name:t.name,icon:A.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},Ae=>fs(Ae,V),d,[],["tox-browse-url"])),Oe=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Ge([[X.asSpec()],F.map(()=>ue.asSpec()).toArray()])}),Ce=Ae=>{Ho.getCurrent(Ae).each(Pe=>{const He=Ft.getValue(Pe),kt={fieldname:t.name,...He};F.each(at=>{at(kt).get(Bt=>{Ft.setValue(Pe,Bt),bn(Ae,Wl,{name:t.name})})})})};return Es.sketch({dom:oN(),components:x.toArray().concat([Oe()]),fieldBehaviours:yt([Un.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:Ae=>{Es.getField(Ae).each(Un.disable),ue.getOpt(Ae).each(Un.disable)},onEnabled:Ae=>{Es.getField(Ae).each(Un.enable),ue.getOpt(Ae).each(Un.enable)}}),bc(),ro("url-input-events",[st(V,Ce)])])})},I7=(t,s)=>Ud.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Jc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:FD(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{bn(a,Df,{name:"alert-banner",value:t.url})},buttonBehaviours:yt([W2()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),PB=(t,s)=>{t.dom.checked=s},L7=t=>t.dom.checked,H7=(t,s,a)=>{const i=x=>(x.element.dom.click(),A.some(!0)),d=Es.parts.field({factory:{sketch:ht},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:yt([Gd.self(),Un.config({disabled:()=>!t.enabled||s.isDisabled()}),oa.config({}),Bn.config({}),ha.withElement(a,L7,PB),yn.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),ro("checkbox-events",[st($u(),(x,_)=>{bn(x,Wl,{name:t.name})})])])}),g=Es.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[kr(s.translate(t.label))],behaviours:yt([EC.config({})])}),p=x=>Gu(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),C=No({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Es.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:yt([Un.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:x=>{Es.getField(x).each(Un.disable)},onEnabled:x=>{Es.getField(x).each(Un.enable)}}),bc()])})},go=t=>t.presets==="presentation"?Ud.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Ud.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:yt([oa.config({}),Bn.config({})])}),Ea=t=>(s,a,i,d)=>bt(a,"name").fold(()=>t(a,d,A.none()),g=>s.field(g,t(a,d,bt(i,g)))),$B=t=>(s,a,i,d)=>{const g=js(a,{source:"dynamic"});return Ea(t)(s,g,i,d)},FB={bar:Ea((t,s)=>b8(t,s.shared)),collection:Ea((t,s,a)=>x8(t,s.shared.providers,a)),alertbanner:Ea((t,s)=>I7(t,s.shared.providers)),input:Ea((t,s,a)=>lB(t,s.shared.providers,a)),textarea:Ea((t,s,a)=>uB(t,s.shared.providers,a)),label:Ea((t,s)=>$T(t,s.shared)),iframe:$B((t,s,a)=>WL(t,s.shared.providers,a)),button:Ea((t,s)=>O7(t,s.shared.providers)),checkbox:Ea((t,s,a)=>H7(t,s.shared.providers,a)),colorinput:Ea((t,s,a)=>R8(t,s.shared,s.colorinput,a)),colorpicker:Ea((t,s,a)=>LL(t,s.shared.providers,a)),dropzone:Ea((t,s,a)=>Pf(t,s.shared.providers,a)),grid:Ea((t,s)=>_3(t,s.shared)),listbox:Ea((t,s,a)=>QL(t,s,a)),selectbox:Ea((t,s,a)=>n7(t,s.shared.providers,a)),sizeinput:Ea((t,s)=>s7(t,s.shared.providers)),slider:Ea((t,s,a)=>r7(t,s.shared.providers,a)),urlinput:Ea((t,s,a)=>F7(t,s,s.urlinput,a)),customeditor:Ea(VL),htmlpanel:Ea(go),imagepreview:Ea((t,s,a)=>$f(t,a)),table:Ea((t,s)=>a7(t,s.shared.providers)),tree:Ea((t,s)=>W3(t,s)),panel:Ea((t,s)=>e7(t,s))},IB={field:(t,s)=>s,record:G([])},Q3=(t,s,a,i)=>{const d=js(i,{shared:{interpreter:g=>jT(t,g,a,d)}});return jT(t,s,a,d)},jT=(t,s,a,i)=>bt(FB,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),V7=(t,s,a)=>jT(IB,t,s,a),Yd="layout-inset",e4=t=>t.x,t4=(t,s)=>t.x+t.width/2-s.width/2,n4=(t,s)=>t.x+t.width-s.width,o4=t=>t.y,s4=(t,s)=>t.y+t.height-s.height,r4=(t,s)=>t.y+t.height/2-s.height/2,nv=(t,s,a)=>nc(n4(t,s),s4(t,s),a.insetSouthwest(),Pb(),"southwest",dc(t,{right:0,bottom:3}),Yd),HC=(t,s,a)=>nc(e4(t),s4(t,s),a.insetSoutheast(),ly(),"southeast",dc(t,{left:1,bottom:3}),Yd),VC=(t,s,a)=>nc(n4(t,s),o4(t),a.insetNorthwest(),Cg(),"northwest",dc(t,{right:0,top:2}),Yd),zC=(t,s,a)=>nc(e4(t),o4(t),a.insetNortheast(),Lp(),"northeast",dc(t,{left:1,top:2}),Yd),If=(t,s,a)=>nc(t4(t,s),o4(t),a.insetNorth(),yi(),"north",dc(t,{top:2}),Yd),UC=(t,s,a)=>nc(t4(t,s),s4(t,s),a.insetSouth(),Hp(),"south",dc(t,{bottom:3}),Yd),LB=(t,s,a)=>nc(n4(t,s),r4(t,s),a.insetEast(),Vp(),"east",dc(t,{right:0}),Yd),a4=(t,s,a)=>nc(e4(t),r4(t,s),a.insetWest(),uy(),"west",dc(t,{left:1}),Yd),z7=t=>{switch(t){case"north":return If;case"northeast":return zC;case"northwest":return VC;case"south":return UC;case"southeast":return HC;case"southwest":return nv;case"east":return LB;case"west":return a4}},HB=(t,s,a,i,d)=>Sy(i).map(z7).getOr(If)(t,s,a,i,d),U7=t=>{switch(t){case"north":return UC;case"northeast":return HC;case"northwest":return nv;case"south":return If;case"southeast":return zC;case"southwest":return VC;case"east":return a4;case"west":return LB}},W7=(t,s,a,i,d)=>Sy(i).map(U7).getOr(If)(t,s,a,i,d),VB={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},Z7=(t,s,a)=>{const d={maxHeightFunction:xg()},g=()=>({type:"node",root:it(Le(t())),node:A.from(t()),bubble:Nh(12,12,VB),layouts:{onRtl:()=>[zC],onLtr:()=>[VC]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:Nh(-12,12,VB),layouts:{onRtl:()=>[mc,ja,Oc],onLtr:()=>[ja,mc,Oc]},overrides:d});return()=>a()?g():p()},j7=(t,s,a)=>{const i=()=>({type:"node",root:it(Le(t())),node:A.from(t()),layouts:{onRtl:()=>[If],onLtr:()=>[If]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Oc],onLtr:()=>[Oc]}});return()=>a()?i():d()},G7=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return A.some(Tm.range(be.fromDom(a.startContainer),a.startOffset,be.fromDom(a.endContainer),a.endOffset))}}),q7=t=>s=>({type:"node",root:t(),node:s}),K7=(t,s,a)=>{const i=E1(t),d=()=>be.fromDom(t.getBody()),g=()=>be.fromDom(t.getContentAreaContainer()),p=()=>i||!a();return{inlineDialog:Z7(g,s,p),banner:j7(g,s,p),cursor:G7(t,d),node:q7(d)}},Y7=t=>(s,a)=>{zA(t)(s,a)},zB=t=>()=>FA(t),X7=t=>s=>Z0(t,s),J7=t=>s=>dT(t,s),Q7=t=>({colorPicker:Y7(t),hasCustomColors:zB(t),getColors:X7(t),getColorCols:J7(t)}),eH=t=>()=>eR(t),tH=t=>({isDraggableModal:eH(t)}),nH=t=>{const s=S(eA(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},c4=t=>ca(t,"items"),UB=t=>ca(t,"format"),i4=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],oH=t=>io(t,"items"),WB=t=>io(t,"block"),ZB=t=>io(t,"inline"),jB=t=>io(t,"selector"),GB=t=>An(t,(s,a)=>{if(oH(a)){const i=GB(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(ZB(a)||WB(a)||jB(a)){const d=`custom-${Vt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),qB=(t,s)=>{const a=GB(s),i=d=>{Qe(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},l4=t=>UD(t).map(s=>{const a=qB(t,s);return WD(t)?i4.concat(a):a}).getOr(i4),sH=t=>{const s=is(t);return s.length===1&&po(s,"title")},u4=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),KB=(t,s,a,i)=>{const d=x=>u4(x,a,i),g=x=>{const _=C(x.items);return{...x,type:"submenu",getStyleItems:G(_)}},p=x=>{const _=Vt(x.name)?x.name:nn(x.title),D=`custom-${_}`,B={...x,type:"formatter",format:D,isSelected:a(D),getStylePreview:i(D)};return t.formatter.register(_,B),B},C=x=>Se(x,_=>c4(_)?g(_):UB(_)?d(_):sH(_)?{..._,type:"separator"}:p(_));return C(s)},rH=t=>{const s=C=>()=>t.formatter.match(C),a=C=>()=>{const x=t.formatter.get(C);return x!==void 0?A.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):A.none()},i=S([]),d=S([]),g=S(!1);return t.on("PreInit",C=>{const x=l4(t),_=KB(t,x,s,a);i.set(_)}),t.on("addStyleModifications",C=>{const x=KB(t,C.items,s,a);d.set(x),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),x=d.get();return C.concat(x)}}},Vm=t=>Xn(t)&&t.nodeType===1,GT=H1.trim,WC=t=>s=>!!(Vm(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),aH=WC("true"),d4=WC("false"),YB=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),m4=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return aH(s)}return!1},XB=(t,s)=>Se(Ga(be.fromDom(s),t),a=>a.dom),qT=t=>t.innerText||t.textContent,cH=t=>t.id?t.id:nn("h"),JB=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,QB=t=>JB(t)&&eP(t),KT=t=>t&&/^(H[1-6])$/.test(t.nodeName),eP=t=>m4(t)&&!d4(t),iH=t=>KT(t)&&eP(t),tP=t=>KT(t)?parseInt(t.nodeName.substr(1),10):0,lH=t=>{var s;const a=cH(t),i=()=>{t.id=a};return YB("header",(s=qT(t))!==null&&s!==void 0?s:"","#"+a,tP(t),i)},uH=t=>{const s=t.id||t.name,a=qT(t);return YB("anchor",a||"#"+s,"#"+s,0,K)},nP=t=>Se(Dn(t,iH),lH),oP=t=>Se(Dn(t,QB),uH),dH=t=>XB("h1,h2,h3,h4,h5,h6,a:not([href])",t),mH=t=>GT(t.title).length>0,fH={find:t=>{const s=dH(t);return Dn(nP(s).concat(oP(s)),mH)}},ZC="tinymce-url-history",Xd=5,YT=t=>Vt(t)&&/^https?/.test(t),gH=t=>Oo(t)&&t.length<=Xd&&Io(t,YT),sP=t=>Wt(t)&&Rs(t,s=>!gH(s)).isNone(),rP=()=>{const t=P1.getItem(ZC);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+ZC+" was not valid JSON",a),{};throw a}return sP(s)?s:(console.log("Local storage "+ZC+" was not valid format",s),{})},hH=t=>{if(!sP(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));P1.setItem(ZC,JSON.stringify(t))},pH=t=>{const s=rP();return bt(s,t).getOr([])},aP=(t,s)=>{if(!YT(t))return;const a=rP(),i=bt(a,s).getOr([]),d=Dn(i,g=>g!==t);a[s]=[t].concat(d).slice(0,Xd),hH(a)},f4=t=>!!t,WW=t=>ls(H1.makeMap(t,/[, ]/),f4),cP=t=>A.from(YD(t)),ci=t=>{const s=A.from(Fx(t)).filter(f4).map(WW);return cP(t).fold(Ln,a=>s.fold(Zt,i=>is(i).length>0?i:!1))},g4=(t,s)=>{const a=ci(t);return ho(a)?a?cP(t):A.none():a[s]?cP(t):A.none()},bH=(t,s)=>g4(t,s).map(a=>i=>ai.nu(d=>{const g=(C,x)=>{if(!Vt(C))throw new Error("Expected value to be string");if(x!==void 0&&!Wt(x))throw new Error("Expected meta to be a object");d({value:C,meta:x})},p={filetype:s,fieldname:i.fieldname,...A.from(i.meta).getOr({})};a.call(t,g,i.value,p)})),jC=t=>A.from(t).filter(Vt).getOrUndefined(),vH=t=>JD(t)?A.some({targets:fH.find(t.getBody()),anchorTop:jC(Y2(t)),anchorBottom:jC(QD(t))}):A.none(),yH=t=>A.from(XD(t)),CH=t=>({getHistory:pH,addToHistory:aP,getLinkInformation:()=>vH(t),getValidationHandler:()=>yH(t),getUrlPicker:s=>bH(t,s)}),wH=(t,s,a)=>{const i=S(!1),d=nH(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Cu.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=CH(s),C=rH(s),x=Q7(s),_=tH(s),D=()=>i.get(),B=ue=>i.set(ue),F={shared:{providers:g,anchors:K7(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:C,colorinput:x,dialog:_,isContextMenuOpen:D,setContextMenuState:B},V={...F,shared:{...F.shared,interpreter:ue=>V7(ue,{},V),getSink:t.popup}},X={...F,shared:{...F.shared,interpreter:ue=>V7(ue,{},X),getSink:t.dialog}};return{popup:V,dialog:X}},SH=(t,s,a)=>{const i=(at,Bt)=>{Qe([s,...a],cn=>{cn.broadcastEvent(at,Bt)})},d=(at,Bt)=>{Qe([s,...a],cn=>{cn.broadcastOn([at],Bt)})},g=at=>d(km(),{target:at.target}),p=qi(),C=ri(p,"touchstart",g),x=ri(p,"touchmove",at=>i(tk(),at)),_=ri(p,"touchend",at=>i(Nv(),at)),D=ri(p,"mousedown",g),B=ri(p,"mouseup",at=>{at.raw.button===0&&d(Yy(),{target:at.target})}),F=at=>d(km(),{target:be.fromDom(at.target)}),V=at=>{at.button===0&&d(Yy(),{target:be.fromDom(at.target)})},X=()=>{Qe(t.editorManager.get(),at=>{t!==at&&at.dispatch("DismissPopups",{relatedTarget:t})})},ue=at=>i(Bv(),bS(at)),Oe=at=>{d(Lh(),{}),i(dm(),bS(at))},Ce=Le(be.fromDom(t.getElement())),Ae=Ey(Ce,"scroll",at=>{requestAnimationFrame(()=>{const Bt=t.getContainer();if(Bt!=null){const Ao=ga(t,s.element).map(Cn=>[Cn.element,...Cn.others]).getOr([]);os(Ao,Cn=>ms(Cn,at.target))&&(t.dispatch("ElementScroll",{target:at.target.dom}),i(Tw(),at))}})}),Pe=()=>d(Lh(),{}),He=at=>{at.state&&d(km(),{target:be.fromDom(t.getContainer())})},kt=at=>{d(km(),{target:be.fromDom(at.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",F),t.on("tap",F),t.on("mouseup",V),t.on("mousedown",X),t.on("ScrollWindow",ue),t.on("ResizeWindow",Oe),t.on("ResizeEditor",Pe),t.on("AfterProgressState",He),t.on("DismissPopups",kt)}),t.on("remove",()=>{t.off("click",F),t.off("tap",F),t.off("mouseup",V),t.off("mousedown",X),t.off("ScrollWindow",ue),t.off("ResizeWindow",Oe),t.off("ResizeEditor",Pe),t.off("AfterProgressState",He),t.off("DismissPopups",kt),D.unbind(),C.unbind(),x.unbind(),_.unbind(),B.unbind(),Ae.unbind()}),t.on("detach",()=>{Qe([s,...a],jS),Qe([s,...a],at=>at.destroy())})},Rc=S2,Lf=ax,xH=G([_e("shell",!1),Je("makeItem"),_e("setupItem",K),pu.field("listBehaviours",[Jn])]),XT=Hl({name:"items",overrides:()=>({behaviours:yt([Jn.config({})])})}),EH=G([XT]),iP=G("CustomList"),kH=(t,s,a,i)=>{const d=(C,x)=>{p(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const D=Jn.contents(_),B=x.length,F=B-D.length,V=F>0?pt(F,()=>t.makeItem()):[],X=D.slice(B);Qe(X,Oe=>Jn.remove(_,Oe)),Qe(V,Oe=>Jn.append(_,Oe));const ue=Jn.contents(_);Qe(ue,(Oe,Ce)=>{t.setupItem(C,Oe,x[Ce],Ce)})})},g=t.shell?{behaviours:[Jn.config({})],components:[]}:{behaviours:[],components:s},p=C=>t.shell?A.some(C):er(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:Sr(t.listBehaviours,g.behaviours),apis:{setItems:d}}},h4=ma({name:iP(),configFields:xH(),partFields:EH(),factory:kH,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),ov=G([Je("dom"),_e("shell",!0),pc("toolbarBehaviours",[Jn])]),lP=G([Hl({name:"groups",overrides:()=>({behaviours:yt([Jn.config({})])})})]),jW=(t,s,a,i)=>{const d=(C,x)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{Jn.set(_,x)})},g=C=>t.shell?A.some(C):er(C,t,"groups"),p=t.shell?{behaviours:[Jn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:Sr(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},Hf=ma({name:"Toolbar",configFields:ov(),partFields:lP(),factory:jW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),_H=K,AH=Ln,uP=G([]);var dP=Object.freeze({__proto__:null,setup:_H,isDocked:AH,getBehaviours:uP});const GC=t=>(sr(gr(t,"position"),"fixed")?A.none():li(t)).orThunk(()=>{const i=be.fromTag("span");return ya(t).bind(d=>{ni(d,i);const g=li(i);return Oi(i),g})}),mP=t=>GC(t).map(Ns).getOrThunk(()=>_o(0,0)),OH=(t,s)=>{const a=t.element;$s(a,s.transitionClass),da(a,s.fadeOutClass),$s(a,s.fadeInClass),s.onShow(t)},fP=(t,s)=>{const a=t.element;$s(a,s.transitionClass),da(a,s.fadeInClass),$s(a,s.fadeOutClass),s.onHide(t)},DH=(t,s)=>t.y<s.bottom&&t.bottom>s.y,gP=(t,s)=>t.y>=s.y,hP=(t,s)=>t.bottom<=s.bottom,p4=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),qC=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),JT=t=>t.box.x-t.win.x,RH=(t,s,a)=>{const i=s.win,d=s.box,g=JT(s);return Ss(t,p=>{switch(p){case"bottom":return hP(d,a.bounds)?A.none():A.some(qC(i,g,a));case"top":return gP(d,a.bounds)?A.none():A.some(p4(i,g,a));default:return A.none()}}).getOr({location:"no-dock"})},MH=(t,s,a)=>Io(t,i=>{switch(i){case"bottom":return hP(s,a.bounds);case"top":return gP(s,a.bounds)}}),NH=(t,s)=>{const a=s.optScrollEnv.fold(G(t.bounds.y),i=>i.scrollElmTop+(t.bounds.y-i.currentScrollTop));return _o(t.bounds.x,a)},BH=(t,s)=>{const a=s.optScrollEnv.fold(G(t.y),i=>t.y+i.currentScrollTop-i.scrollElmTop);return _o(t.x,a)},QT=(t,s,a)=>a.getInitialPos().map(i=>{const d=NH(i,s);return{box:ar(d.left,d.top,wa(t),ze(t)),location:i.location}}),pP=(t,s,a,i,d)=>{const g=BH(s,a),p=ar(g.left,g.top,s.width,s.height);i.setInitialPos({style:ta(t),position:et(t,"position")||"static",bounds:p,location:d.location})},eE=(t,s,a,i,d)=>{i.getInitialPos().fold(()=>pP(t,s,a,i,d),()=>K)},bP=(t,s,a)=>a.getInitialPos().bind(i=>{var d;switch(a.clearInitialPos(),i.position){case"static":return A.some({morph:"static"});case"absolute":const g=GC(t).getOr(rr()),p=k(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:Fl("absolute",bt(i.style,"left").map(x=>s.x-p.x),bt(i.style,"top").map(x=>s.y-p.y+C),bt(i.style,"right").map(x=>p.right-s.right),bt(i.style,"bottom").map(x=>p.bottom-s.bottom))});default:return A.none()}}),tE=(t,s,a)=>QT(t,s,a).filter(({box:i})=>MH(a.getModes(),i,s)).bind(({box:i})=>bP(t,i,a)),b4=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:Fl("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:Fl("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},v4=(t,s,a)=>{const i=k(t),d=ge(),g=RH(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(pP(t,i,s,a,g),b4(g)):A.none()},KC=(t,s,a)=>tE(t,s,a).orThunk(()=>s.optScrollEnv.bind(i=>QT(t,s,a)).bind(({box:i,location:d})=>{const g=ge(),p=JT({win:g,box:i}),C=d==="top"?p4(g,p,s):qC(g,p,s);return b4(C)})),vP=(t,s,a)=>{const i=t.element;return sr(gr(i,"position"),"fixed")?KC(i,s,a):v4(i,s,a)},PH=(t,s,a)=>{const i=t.element;return QT(i,s,a).bind(({box:d})=>bP(i,d,a))},yP=(t,s,a,i)=>{const d=k(t),g=ge(),p=JT({win:g,box:d}),C=i(g,p,s);return C.location==="bottom"||C.location==="top"?(eE(t,d,s,a,C),b4(C)):A.none()},y4=(t,s,a)=>{a.setDocked(!1),Qe(["left","right","top","bottom","position"],i=>xo(t.element,i)),s.onUndocked(t)},nE=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Ub(t.element,i),(d?s.onDocked:s.onUndocked)(t)},CP=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const C=DH(p,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Nl(t.element,[g.fadeOutClass]),g.onHide(t)):(C?OH:fP)(t,g))})})},oE=(t,s,a,i,d)=>{CP(t,s,a,i,!0),nE(t,s,a,d.positionCss)},sE=(t,s,a,i,d)=>{switch(d.morph){case"static":return y4(t,s,a);case"absolute":return nE(t,s,a,d.positionCss);case"fixed":return oE(t,s,a,i,d)}},$H=(t,s,a)=>{const i=s.lazyViewport(t);CP(t,s,a,i),vP(t,i,a).each(d=>{sE(t,s,a,i,d)})},FH=(t,s,a)=>{const i=t.element;a.setDocked(!1);const d=s.lazyViewport(t);PH(t,d,a).each(g=>{switch(g.morph){case"static":{y4(t,s,a);break}case"absolute":{nE(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{vi(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),Yg(t,s,a)},Yg=(t,s,a)=>{t.getSystem().isConnected()&&$H(t,s,a)},C4=(t,s,a)=>{a.isDocked()&&FH(t,s,a)},wP=t=>(s,a,i)=>{const d=a.lazyViewport(s);yP(s.element,d,i,t).each(p=>{oE(s,a,i,d,p)})},SP=wP(p4),w4=wP(qC);var IH=Object.freeze({__proto__:null,refresh:Yg,reset:C4,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i),forceDockToTop:SP,forceDockToBottom:w4}),LH=Object.freeze({__proto__:null,events:(t,s)=>cr([iu(rg(),(a,i)=>{t.contextual.each(d=>{tc(a.element,d.transitionClass)&&(vi(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),st(Bv(),(a,i)=>{Yg(a,t,s)}),st(Tw(),(a,i)=>{Yg(a,t,s)}),st(dm(),(a,i)=>{C4(a,t,s)})])}),HH=[Hc("contextual",[qr("fadeInClass"),qr("fadeOutClass"),qr("transitionClass"),dl("lazyContext"),Ee("onShow"),Ee("onShown"),Ee("onHide"),Ee("onHidden")]),Pa("lazyViewport",()=>({bounds:ge(),optScrollEnv:A.none()})),ph("modes",["top","bottom"],Wr),Ee("onDocked"),Ee("onUndocked")],VH=Object.freeze({__proto__:null,init:t=>{const s=S(!1),a=S(!0),i=Qs(),d=S(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Ii({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const sc=fc({fields:HH,name:"docking",active:LH,apis:IH,state:VH}),S4=G(nn("toolbar-height-change")),Vf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},x4="tox-tinymce--toolbar-sticky-on",EP="tox-tinymce--toolbar-sticky-off",YC=(t,s)=>{const a=Ra(s),d=ic(s).dom.innerHeight,g=Fc(a),p=be.fromDom(t.elm),C=M(p),x=ze(p),_=C.y,D=_+x,B=Ns(s),F=ze(s),V=B.top,X=V+F,ue=Math.abs(V-g.top)<2,Oe=Math.abs(X-(g.top+d))<2;if(ue&&_<X)Ym(g.left,_-F,a);else if(Oe&&D>V){const Ce=_-d+x+F;Ym(g.left,Ce,a)}},T4=(t,s)=>po(sc.getModes(t),s),E4=t=>{const s=i=>tn(i)+(parseInt(et(i,"margin-top"),10)||0)+(parseInt(et(i,"margin-bottom"),10)||0),a=t.element;Cc(a).each(i=>{const d="padding-"+sc.getModes(t)[0];if(sc.isDocked(t)){const g=wa(i);Kt(a,"width",g+"px"),Kt(i,d,s(a)+"px")}else xo(a,"width"),xo(i,d)})},rE=(t,s)=>{s?(da(t,Vf.fadeOutClass),Nl(t,[Vf.transitionClass,Vf.fadeInClass])):(da(t,Vf.fadeInClass),Nl(t,[Vf.fadeOutClass,Vf.transitionClass]))},k4=(t,s)=>{const a=be.fromDom(t.getContainer());s?($s(a,x4),da(a,EP)):($s(a,EP),da(a,x4))},zH=(t,s)=>{const a=Ra(s);Ad(a).filter(i=>!ms(s,i)).filter(i=>ms(i,be.fromDom(a.dom.body))||va(t,i)).each(()=>fu(s))},UH=(t,s)=>Uu(t).orThunk(()=>s().toOptional().bind(a=>Uu(a.element))),WH=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(sc.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(E4)}),t.on("SkinLoaded",()=>{a().each(i=>{sc.isDocked(i)?sc.reset(i):sc.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(sc.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{sc.refresh(d);const g=d.element;na(g)&&YC(i,g)})}),t.on("PostRender",()=>{k4(t,!1)})},ZH=t=>t().map(sc.isDocked).getOr(!1),jH=()=>[Pl.config({channels:{[S4()]:{onReceive:E4}}})],kP=(t,s)=>{const a=Qs(),i=s.getSink,d=C=>{i().each(x=>C(x.element))},g=C=>{t.inline||E4(C),k4(t,sc.isDocked(C)),C.getSystem().broadcastOn([Lh()],{}),i().each(x=>x.getSystem().broadcastOn([Lh()],{}))},p=t.inline?[]:jH();return[Bn.config({}),sc.config({contextual:{lazyContext:C=>{const x=tn(C.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(_).map(D=>{const B=k(be.fromDom(D));return ga(t,C.element).fold(()=>{const V=B.height-x,X=B.y+(T4(C,"top")?0:x);return ar(B.x,X,B.width,V)},V=>{const X=z(B,hT(V));return ar(X.x,X.y,X.width,X.height-x)})})},onShow:()=>{d(C=>rE(C,!0))},onShown:C=>{d(x=>vi(x,[Vf.transitionClass,Vf.fadeInClass])),a.get().each(x=>{zH(C.element,x),a.clear()})},onHide:C=>{UH(C.element,i).fold(a.clear,a.set),d(x=>rE(x,!1))},onHidden:()=>{d(C=>vi(C,[Vf.transitionClass]))},...Vf},lazyViewport:C=>ga(t,C.element).fold(()=>{const _=ge(),D=qD(t),B=_.y+(T4(C,"top")?D:0),F=_.height-(T4(C,"bottom")?D:0);return{bounds:ar(_.x,B,_.width,F),optScrollEnv:A.none()}},_=>({bounds:hT(_),optScrollEnv:A.some({currentScrollTop:_.element.dom.scrollTop,scrollElmTop:Ns(_.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var GH=Object.freeze({__proto__:null,setup:WH,isDocked:ZH,getBehaviours:kP});const qH=t=>{const s=t.editor,a=t.sticky?kP:uP;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:yt(a(s,t.sharedBackstage))}},KH=vn([Fa,Ki("items",Jf([fh([gA,hi("items",Wr)]),Wr]))].concat(L0)),_P=t=>Bs("GroupToolbarButton",KH,t),_4=[Lc("text"),Lc("tooltip"),Lc("icon"),si("search",!1,Jf([ef,vn([Lc("placeholder")])],t=>ho(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),dl("fetch"),Pa("onSetup",()=>K)],aE=vn([Fa,..._4]),AP=t=>Bs("menubutton",aE,t),YH=vn([Fa,Gx,Hd,Zg,$I,hA,A1,Ni("presets","normal",["normal","color","listpreview"]),vA(1),tp,pA]),XH=t=>Bs("SplitButton",YH,t);var G1=Ta({factory:(t,s)=>{const a=(d,g)=>{const p=Se(g,C=>{const x={type:"menubutton",text:C.text,fetch:D=>{D(C.getItems())}},_=AP(x).mapError(D=>nf(D)).getOrDie();return FC(_,"tox-mbtn",s.backstage,A.some("menuitem"))});Jn.set(d,p)},i={focus:yn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:yt([Jn.config({}),ro("menubar-events",[Zr(d=>{t.onSetup(d)}),st(ml(),(d,g)=>{$r(d.element,".tox-mbtn--active").each(p=>{_d(g.event.target,".tox-mbtn").each(C=>{ms(p,C)||d.getSystem().getByDom(p).each(x=>{d.getSystem().getByDom(C).each(_=>{wl.expand(_),wl.close(x),Bn.focus(_)})})})})}),st(Cb(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{wl.isOpen(p)&&(wl.expand(C),wl.close(p))})})})]),yn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),oa.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Je("dom"),Je("uid"),Je("onEscape"),Je("backstage"),_e("onSetup",K)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const cE="⚡️Upgrade",A4="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",JH=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:A4,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:cE}}]}),OP="container",QH=[pc("slotBehaviours",[])],DP=t=>"<alloy.field."+t+">",RP=t=>{const s=(()=>{const g=[];return{slot:(C,x)=>(g.push(C),f2(OP,DP(C),x)),record:G(g)}})(),a=t(s),i=s.record(),d=Se(i,g=>oc({name:g,pname:DP(g)}));return x2(OP,QH,d,MP,a)},MP=(t,s)=>{const a=ue=>v2(t),i=(ue,Oe)=>er(ue,t,Oe),d=(ue,Oe)=>(Ce,Ae)=>er(Ce,t,Ae).map(Pe=>ue(Pe,Ae)).getOr(Oe),g=ue=>(Oe,Ce)=>{Qe(Ce,Ae=>ue(Oe,Ae))},p=(ue,Oe)=>Qr(ue.element,"aria-hidden")!=="true",C=(ue,Oe)=>{if(!p(ue)){const Ce=ue.element;xo(Ce,"display"),ne(Ce,"aria-hidden"),bn(ue,fm(),{name:Oe,visible:!0})}},x=(ue,Oe)=>{if(p(ue)){const Ce=ue.element;Kt(Ce,"display","none"),zn(Ce,"aria-hidden","true"),bn(ue,fm(),{name:Oe,visible:!1})}},_=d(p,!1),D=d(x),B=g(D),F=ue=>B(ue,a()),V=d(C),X={getSlotNames:a,getSlot:i,isShowing:_,hideSlot:D,hideAllSlots:F,showSlot:V};return{uid:t.uid,dom:t.dom,components:s,behaviours:h0(t.slotBehaviours),apis:X}},Ti={...ls({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>kb(t)),sketch:RP},iE=vn([Hd,Gx,Pa("onShow",K),Pa("onHide",K),A1]),lE=t=>Bs("sidebar",iE,t),e9=t=>{const{sidebars:s}=t.ui.registry.getAll();Qe(is(s),a=>{const i=s[a],d=()=>sr(A.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},t9=t=>({element:()=>t.element.dom}),n9=(t,s)=>{const a=Se(is(s),i=>{const d=s[i],g=Ts(lE(d));return{name:i,getApi:t9,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Se(a,i=>{const d=S(K);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:aC.unnamedEvents([op(i,d),M1(i,d),st(fm(),(g,p)=>{const C=p.event;Ue(a,_=>_.name===C.name).each(_=>{(C.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},o9=t=>Ti.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:n9(s,t),slotBehaviours:aC.unnamedEvents([Zr(a=>Ti.hideAllSlots(a))])})),O4=(t,s,a)=>{Ho.getCurrent(t).each(d=>{Jn.set(d,[o9(s)]);const g=a==null?void 0:a.toLowerCase();Vt(g)&&io(s,g)&&Ho.getCurrent(d).each(p=>{Ti.showSlot(p,g),jl.immediateGrow(d),xo(d.element,"width"),sv(t.element,"region")})})},sv=(t,s)=>{zn(t,"role",s)},D4=(t,s)=>{Ho.getCurrent(t).each(i=>{Ho.getCurrent(i).each(g=>{jl.hasGrown(i)?Ti.isShowing(g,s)?(jl.shrink(i),sv(t.element,"presentation")):(Ti.hideAllSlots(g),Ti.showSlot(g,s),sv(t.element,"region")):(Ti.hideAllSlots(g),Ti.showSlot(g,s),jl.grow(i),sv(t.element,"region"))})})},s9=t=>Ho.getCurrent(t).bind(a=>jl.isGrowing(a)||jl.hasGrown(a)?Ho.getCurrent(a).bind(g=>Ue(Ti.getSlotNames(g),p=>Ti.isShowing(g,p))):A.none()),XC=nn("FixSizeEvent"),R4=nn("AutoSizeEvent"),r9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:yt([oa.config({}),Bn.config({}),jl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Ho.getCurrent(s).each(Ti.hideAllSlots),fs(s,R4)},onGrown:s=>{fs(s,R4)},onStartGrow:s=>{bn(s,XC,{width:gr(s.element,"width").getOr("")})},onStartShrink:s=>{bn(s,XC,{width:wa(s.element)+"px"})}}),Jn.config({}),Ho.config({find:s=>{const a=Jn.contents(s);return Fs(a)}})])}],behaviours:yt([Gd.childAt(0),ro("sidebar-sliding-events",[st(XC,(s,a)=>{Kt(s.element,"width",a.event.width)}),st(R4,(s,a)=>{xo(s.element,"width")})])])});var a9=Object.freeze({__proto__:null,block:(t,s,a,i)=>{zn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=yt([yn.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Bn.config({})]),p=i(d,g),C=d.getSystem().build(p);Jn.append(d,Li(C)),C.hasConfigured(yn)&&s.focus&&yn.focusIn(C),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Jn.remove(d,C))},unblock:(t,s,a)=>{ne(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),c9=[Pa("getRoot",A.none),Qa("focus",!0),Ee("onBlock"),Ee("onUnblock")],eZ=Object.freeze({__proto__:null,init:()=>{const t=jb(),s=a=>{t.set({destroy:a})};return Ii({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const lp=fc({fields:c9,name:"blocking",apis:a9,state:eZ}),NP=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return An(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},i9=t=>Array.prototype.slice.call(t.dom.classList,0),Xg=t=>{const s=be.fromHtml(t),a=Ma(s),i=NP(s),d=i9(s),g=a.length===0?{}:{innerHtml:Vv(s)};return{tag:Ms(s),classes:d,attributes:i,...g}},l9=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Xg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),BP=t=>Ho.getCurrent(t).each(s=>fu(s.element)),u9=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;A.from(t.iframeElement).map(be.fromDom).each(d=>{s?(P(d,a).each(g=>zn(d,i,g)),zn(d,a,-1)):(ne(d,a),P(d,i).each(g=>{zn(d,a,g),ne(d,i)}))})},d9=(t,s,a,i)=>{const d=s.element;if(u9(t,a),a)lp.block(s,l9(i)),xo(d,"display"),ne(d,"aria-hidden"),t.hasFocus()&&BP(s);else{const g=Ho.getCurrent(s).exists(p=>Zp(p.element));lp.unblock(s),Kt(d,"display","none"),zn(d,"aria-hidden","true"),g&&t.focus()}},m9=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:yt([Jn.config({}),lp.config({focus:!1}),Ho.config({find:s=>Fs(s.components())})]),components:[]}),PP=t=>t.type==="focusin",f9=t=>PP(t)?(t.composed?Fs(t.composedPath()):A.from(t.target)).map(be.fromDom).filter(Rn).exists(a=>tc(a,"mce-pastebin")):!1,g9=(t,s,a)=>{const i=S(!1),d=Qs(),g=C=>{i.get()&&!f9(C)&&(C.preventDefault(),BP(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const p=C=>{C!==i.get()&&(i.set(C),d9(t,s(),C,a.providers),gM(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Nn(C.time)){const x=Bm.setEditorTimeout(t,()=>p(C.state),C.time);d.set(x)}else p(C.state),d.clear()})},h9=(t,s)=>An(t,(d,g)=>s(g,d.len).fold(G(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,$P=(t,s,a)=>({within:t,extra:s,withinWidth:a}),p9=(t,s,a)=>{const i=h9(t,(C,x)=>{const _=a(C);return A.some({element:C,start:x,finish:x+_,width:_})}),d=Dn(i,C=>C.finish<=s),g=bo(d,(C,x)=>C+x.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},JC=t=>Se(t,s=>s.element),FP=(t,s,a)=>{const i=JC(t.concat(s));return $P(i,[],a)},b9=(t,s,a,i)=>{const d=JC(t).concat([a]);return $P(d,JC(s),i)},v9=(t,s,a)=>$P(JC(t),[],a),Xu=(t,s,a)=>{const i=p9(s,t,a);return i.extra.length===0?A.some(i):A.none()},y9=(t,s,a,i)=>{const d=Xu(t,s,a).getOrThunk(()=>p9(s,t-a(i),a)),g=d.within,p=d.extra,C=d.withinWidth;return p.length===1&&p[0].width<=a(i)?FP(g,p,C):p.length>=1?b9(g,p,i,C):v9(g,p,C)},M4=(t,s)=>{const a=Se(s,i=>Li(i));Hf.setGroups(t,a)},IP=t=>Ss(t,s=>Uu(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),LP=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Id(t,s,"primary"),g=fa.getCoupled(t,"overflowGroup");Kt(d.element,"visibility","hidden");const p=i.concat([g]),C=IP(p);a([]),M4(d,p);const x=wa(d.element),_=y9(x,s.builtGroups.get(),D=>wa(D.element),g);_.extra.length===0?(Jn.remove(d,g),a([])):(M4(d,_.within),a(_.extra)),xo(d.element,"visibility"),Y(d.element),C.each(Bn.focus)},rv=G([pc("splitToolbarBehaviours",[fa]),Vs("builtGroups",()=>S([]))]),C9=G([Bl(["overflowToggledClass"]),Ac("getOverflowBounds"),Je("lazySink"),Vs("overflowGroups",()=>S([])),Ee("onOpened"),Ee("onClosed")].concat(rv())),dE=G([oc({factory:Hf,schema:ov(),name:"primary"}),bu({schema:ov(),name:"overflow"}),bu({name:"overflow-button"}),bu({name:"overflow-group"})]),N4=G((t,s)=>{ki(t,Math.floor(s))}),mE=G([Bl(["toggledClass"]),Je("lazySink"),dl("fetch"),Ac("getBounds"),Hc("fireDismissalEventInstead",[_e("event",rf())]),Wu(),Ee("onToggled")]),w9=G([bu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:yt([vo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),bu({factory:Hf,schema:ov(),name:"toolbar",overrides:t=>({toolbarBehaviours:yt([yn.config({mode:"cyclic",onEscape:s=>(er(s,t,"button").each(Bn.focus),A.none())})])})})]),Gl=Qs(),S9=(t,s)=>{Gl.set(!0),av(t,s),Gl.clear()},av=(t,s)=>{const a=fa.getCoupled(t,"toolbarSandbox");Mo.isOpen(a)?Mo.close(a):Mo.open(a,s.toolbar())},fE=(t,s,a,i)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();Yr.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:N4()}}},d)},HP=(t,s,a,i,d)=>{Hf.setGroups(s,d),fE(t,s,a,i),vo.on(t)},x9=(t,s,a)=>{const i=Jw(),d=(p,C)=>{const x=Gl.get().getOr(!1);a.fetch().get(_=>{HP(t,C,a,s.layouts,_),i.link(t.element),x||yn.focusIn(C)})},g=()=>{vo.off(t),Gl.get().getOr(!1)||Bn.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:yt([yn.config({mode:"special",onEscape:p=>(Mo.close(p),A.some(!0))}),Mo.config({onOpen:d,onClose:g,isPartOf:(p,C,x)=>bg(C,x)||bg(t,x),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Pl.config({channels:{...c1({isExtraPart:Ln,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...Bg({doReposition:()=>{Mo.getState(fa.getCoupled(t,"toolbarSandbox")).each(p=>{fE(t,p,a,s.layouts)})}})}})])}},up=ma({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...Jc.sketch({...i.button(),action:d=>{av(d,i)},buttonBehaviours:pu.augment({dump:i.button().buttonBehaviours},[fa.config({others:{toolbarSandbox:d=>x9(d,a,t)}})])}),apis:{setGroups:(d,g)=>{Mo.getState(fa.getCoupled(d,"toolbarSandbox")).each(p=>{HP(d,p,t,a.layouts,g)})},reposition:d=>{Mo.getState(fa.getCoupled(d,"toolbarSandbox")).each(g=>{fE(d,g,t,a.layouts)})},toggle:d=>{av(d,i)},toggleWithoutFocusing:d=>{S9(d,i)},getToolbar:d=>Mo.getState(fa.getCoupled(d,"toolbarSandbox")),isOpen:d=>Mo.isOpen(fa.getCoupled(d,"toolbarSandbox"))}}),configFields:mE(),partFields:w9(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),T9=G([Je("items"),Bl(["itemSelector"]),pc("tgroupBehaviours",[yn])]),E9=G([f1({name:"items",unit:"item"})]),k9=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Sr(t.tgroupBehaviours,[yn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),QC=ma({name:"ToolbarGroup",configFields:T9(),partFields:E9(),factory:k9}),B4=t=>Se(t,s=>Li(s)),P4=(t,s,a)=>{LP(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{up.setGroups(d,B4(i))})})},_9=(t,s,a,i)=>{const d=No(up.sketch({fetch:()=>ai.nu(g=>{g(B4(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ja,mc],onRtl:()=>[mc,ja],onBottomLtr:()=>[Ji,Ci],onBottomRtl:()=>[Ci,Ji]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Sr(t.splitToolbarBehaviours,[fa.config({others:{overflowGroup:()=>QC.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(Se(p,g.getSystem().build)),P4(g,d,t)},refresh:g=>P4(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{up.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(up.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(up.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{up.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(up.getToolbar)},domModification:{attributes:{role:"group"}}}},$4=ma({name:"SplitFloatingToolbar",configFields:C9(),partFields:dE(),factory:_9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),A9=G([Bl(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Ee("onOpened"),Ee("onClosed")].concat(rv())),O9=G([oc({factory:Hf,schema:ov(),name:"primary"}),oc({factory:Hf,schema:ov(),name:"overflow",overrides:t=>({toolbarBehaviours:yt([jl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{er(s,t,"overflow-button").each(a=>{vo.off(a),Bn.focus(a)}),t.onClosed(s)},onGrown:s=>{yn.focusIn(s),t.onOpened(s)},onStartGrow:s=>{er(s,t,"overflow-button").each(vo.on)}}),yn.config({mode:"acyclic",onEscape:s=>(er(s,t,"overflow-button").each(Bn.focus),A.some(!0))})])})}),bu({name:"overflow-button",overrides:t=>({buttonBehaviours:yt([vo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),bu({name:"overflow-group"})]),D9=(t,s)=>er(t,s,"overflow").map(jl.hasGrown).getOr(!1),VP=(t,s)=>{er(t,s,"overflow-button").bind(()=>er(t,s,"overflow")).each(a=>{F4(t,s),jl.toggleGrow(a)})},F4=(t,s)=>{er(t,s,"overflow").each(a=>{LP(t,s,i=>{const d=Se(i,g=>Li(g));Hf.setGroups(a,d)}),er(t,s,"overflow-button").each(i=>{jl.hasGrown(a)&&vo.on(i)}),jl.refresh(a)})},R9=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(p,C)=>{const x=Se(C,p.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Sr(t.splitToolbarBehaviours,[fa.config({others:{overflowGroup:p=>QC.sketch({...i["overflow-group"](),items:[Jc.sketch({...i["overflow-button"](),action:C=>{fs(p,d)}})]})}}),ro("toolbar-toggle-events",[st(d,p=>{VP(p,t)})])]),apis:{setGroups:(p,C)=>{g(p,C),F4(p,t)},refresh:p=>F4(p,t),toggle:p=>VP(p,t),isOpen:p=>D9(p,t)},domModification:{attributes:{role:"group"}}}},I4=ma({name:"SplitSlidingToolbar",configFields:A9(),partFields:O9(),factory:R9,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),zP=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[QC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:yt([oa.config({}),Bn.config({})])}},gE=t=>QC.sketch(zP(t)),UP=(t,s)=>{const a=Zr(i=>{const d=Se(t.initGroups,gE);Hf.setGroups(i,d)});return yt([zd.toolbarButton(t.providers.isDisabled),bc(),yn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),ro("toolbar-events",[a])])},WP=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":zP({title:A.none(),items:[]}),"overflow-button":E7({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("More..."),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers)},splitToolbarBehaviours:UP(t,s)}},M9=t=>{const s=WP(t),a=4,i=$4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return $4.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=M(d),p=Zi(d),C=M(p),x=Math.max(p.dom.scrollHeight,C.height);return ar(g.x+a,C.y,g.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},N9=t=>{const s=I4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=I4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=WP(t);return I4.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([S4()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([S4()],{type:"closed"}),t.onToggled(d,!1)}})},ew=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Hf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===wu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Hf.parts.groups({})],toolbarBehaviours:UP(t,s)})},tw=[Zg,Hd,Lc("tooltip"),Ni("buttonType","secondary",["primary","secondary"]),Qa("borderless",!1),dl("onAction")],L4=[...tw,Wg,Ol("type",["button"])],B9=[...tw,Qa("active",!1),Ol("type",["togglebutton"])],ZP={button:L4,togglebutton:B9},jP=[Ol("type",["group"]),ph("buttons",[],ia("type",ZP))],P9=ia("type",{...ZP,group:jP}),$9=vn([ph("buttons",[],P9),dl("onShow"),dl("onHide")]),F9=t=>Bs("view",$9,t),GP=(t,s)=>{var a,i;const d=t.type==="togglebutton",g=t.icon.map(Pe=>qd(Pe,s.icons)).map(No),C=(()=>Pe=>{const He=Bt=>{g.map(cn=>cn.getOpt(Pe).each(Ao=>{Jn.set(Ao,[qd(Bt,s.icons)])}))},kt=Bt=>{const cn=Pe.element;Bt?($s(cn,"tox-button--enabled"),zn(cn,"aria-pressed",!0)):(da(cn,"tox-button--enabled"),ne(cn,"aria-pressed"))},at=()=>tc(Pe.element,"tox-button--enabled");if(d)return t.onAction({setIcon:He,setActive:kt,isActive:at});if(t.type==="button")return t.onAction({setIcon:He})})(),x={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},_=UT((i=t.buttonType)!==null&&i!==void 0?i:"secondary"),D=d?t.text.map(s.translate):A.some(s.translate(t.text)),B=D.map(kr),F=x.tooltip.or(D).map(Pe=>({"aria-label":s.translate(Pe),title:s.translate(Pe)})).getOr({}),V=g.map(Pe=>Pe.asSpec()),X=z0([V,B]),ue=t.icon.isSome()&&B.isSome(),Oe={tag:"button",classes:_.concat(...t.icon.isSome()&&!ue?["tox-button--icon"]:[]).concat(...ue?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:F},Ce=[],Ae=IC(x,A.some(C),Ce,Oe,X,s);return Jc.sketch(Ae)},qP=(t,s)=>GP(t,s),I9=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Se(t.buttons,a=>qP(a,s))}),hE=Tc().deviceType,L9=hE.isPhone(),H9=hE.isTablet(),KP=t=>{let s=!1;const a=Se(t.buttons,i=>i.type==="group"?(s=!0,I9(i,t.providers)):qP(i,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...L9||H9?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:yt([Bn.config({}),yn.config({mode:"flow",selector:"button, .tox-button",focusInside:jh.OnEnterOrSpaceMode})]),components:s?a:[Ud.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Ud.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},V9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),YP=(t,s,a,i)=>{const d={getPane:g=>Rc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var cv=ma({name:"silver.View",configFields:[Je("viewConfig")],partFields:[Hl({factory:{sketch:KP},schema:[Je("buttons"),Je("providers")],name:"header"}),Hl({factory:{sketch:V9},schema:[],name:"pane"})],factory:YP,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const XP=(t,s,a)=>mr(s,(i,d)=>{const g=Ts(F9(i));return t.slot(d,cv.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[cv.parts.header({buttons:g.buttons,providers:a})]:[],cv.parts.pane({})]}))}),z9=(t,s)=>Ti.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:XP(a,t,s),slotBehaviours:aC.unnamedEvents([Zr(i=>Ti.hideAllSlots(i))])})),JP=t=>Ue(Ti.getSlotNames(t),s=>Ti.isShowing(t,s)),U9=t=>{const s=t.element;Kt(s,"display","none"),zn(s,"aria-hidden","true")},QP=t=>{const s=t.element;xo(s,"display"),ne(s,"aria-hidden")},W9=t=>({getContainer:G(t)}),e$=(t,s,a)=>{Ti.getSlot(t,s).each(i=>{cv.getPane(i).each(d=>{a(i)(W9(d.element.dom))})})},Z9=(t,s)=>e$(t,s,cv.getOnShow),H4=(t,s)=>e$(t,s,cv.getOnHide);var pE=Ta({factory:(t,s)=>{const g={setViews:(p,C)=>{Jn.set(p,[z9(C,s.backstage.shared.providers)])},whichView:p=>Ho.getCurrent(p).bind(JP),toggleView:(p,C,x,_)=>Ho.getCurrent(p).exists(D=>{const B=JP(D),F=B.exists(X=>_===X),V=Ti.getSlot(D,_).isSome();return V&&(Ti.hideAllSlots(D),F?(U9(p),C()):(x(),QP(p),Ti.showSlot(D,_),Z9(D,_)),B.each(X=>H4(D,X))),V})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:yt([Jn.config({}),Ho.config({find:p=>{const C=Jn.contents(p);return Fs(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Je("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const j9=(t,s,a)=>{let i=!1;const d={getSocket:g=>Rc.getPart(g,t,"socket"),setSidebar:(g,p,C)=>{Rc.getPart(g,t,"sidebar").each(x=>O4(x,p,C))},toggleSidebar:(g,p)=>{Rc.getPart(g,t,"sidebar").each(C=>D4(C,p))},whichSidebar:g=>Rc.getPart(g,t,"sidebar").bind(s9).getOrNull(),getHeader:g=>Rc.getPart(g,t,"header"),getToolbar:g=>Rc.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{Rc.getPart(g,t,"toolbar").each(C=>{const x=Se(p,gE);C.getApis().setGroups(C,x)})},setToolbars:(g,p)=>{Rc.getPart(g,t,"multiple-toolbar").each(C=>{const x=Se(p,_=>Se(_,gE));h4.setItems(C,x)})},refreshToolbar:g=>{Rc.getPart(g,t,"toolbar").each(C=>C.getApis().refresh(C))},toggleToolbarDrawer:g=>{Rc.getPart(g,t,"toolbar").each(p=>{Jo(p.getApis().toggle,C=>C(p))})},toggleToolbarDrawerWithoutFocusing:g=>{Rc.getPart(g,t,"toolbar").each(p=>{Jo(p.getApis().toggleWithoutFocusing,C=>C(p))})},isToolbarDrawerToggled:g=>Rc.getPart(g,t,"toolbar").bind(p=>A.from(p.getApis().isOpen).map(C=>C(p))).getOr(!1),getThrobber:g=>Rc.getPart(g,t,"throbber"),focusToolbar:g=>{Rc.getPart(g,t,"toolbar").orThunk(()=>Rc.getPart(g,t,"multiple-toolbar")).each(C=>{yn.focusIn(C)})},setMenubar:(g,p)=>{Rc.getPart(g,t,"menubar").each(C=>{G1.setMenus(C,p)})},focusMenubar:g=>{Rc.getPart(g,t,"menubar").each(p=>{G1.focus(p)})},setViews:(g,p)=>{Rc.getPart(g,t,"viewWrapper").each(C=>{pE.setViews(C,p)})},toggleView:(g,p)=>Rc.getPart(g,t,"viewWrapper").exists(C=>pE.toggleView(C,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>Rc.getPart(g,t,"viewWrapper").bind(pE.whichView).getOrNull(),hideMainView:g=>{i=d.isToolbarDrawerToggled(g),i&&d.toggleToolbarDrawer(g),Rc.getPart(g,t,"editorContainer").each(p=>{const C=p.element;Kt(C,"display","none"),zn(C,"aria-hidden","true")})},showMainView:g=>{i&&d.toggleToolbarDrawer(g),Rc.getPart(g,t,"editorContainer").each(p=>{const C=p.element;xo(C,"display"),ne(C,"aria-hidden")}),d.refreshToolbar(g)}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},G9=Lf.optional({factory:G1,name:"menubar",schema:[Je("backstage")]}),q9=t=>t.type===wu.sliding?N9:t.type===wu.floating?M9:ew,K9=Lf.optional({factory:{sketch:t=>h4.sketch({uid:t.uid,dom:t.dom,listBehaviours:yt([yn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>ew({type:t.type,uid:nn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,a,i,d)=>{Hf.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Je("dom"),Je("onEscape")]}),Y9=Lf.optional({factory:{sketch:t=>{const s=q9(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Je("dom"),Je("onEscape"),Je("getSink")]}),X9=Lf.optional({factory:{sketch:qH},name:"header",schema:[Je("dom")]}),J9=Lf.optional({factory:{sketch:JH},name:"promotion",schema:[Je("dom")]}),n$=Lf.optional({name:"socket",schema:[Je("dom")]}),bE=Lf.optional({factory:{sketch:r9},name:"sidebar",schema:[Je("dom")]}),V4=Lf.optional({factory:{sketch:m9},name:"throbber",schema:[Je("dom")]}),o$=Lf.optional({factory:pE,name:"viewWrapper",schema:[Je("backstage")]}),dp=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),s$=Lf.optional({factory:{sketch:dp},name:"editorContainer",schema:[]});var yr=ma({name:"OuterContainer",factory:j9,configFields:[Je("dom"),Je("behaviours")],partFields:[X9,G9,Y9,K9,n$,bE,J9,V4,o$,s$],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const Q9="file edit view insert format tools table help",r$={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},eV=(t,s,a)=>{const i=jD(a).split(/[ ,]/);return{text:t.title,getItems:()=>xe(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:os(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},z4=t=>t.split(" "),a$=(t,s)=>{const a={...r$,...s.menus},i=is(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?z4(Q9):z4(s.menubar===!1?"":s.menubar),g=Dn(d,C=>{const x=io(r$,C);return i?x||bt(s.menus,C).exists(_=>io(_,"items")):x}),p=Se(g,C=>{const x=a[C];return eV({title:x.title,items:z4(x.items)},s,t)});return Dn(p,C=>{const x=_=>Vt(_)||_.type!=="separator";return C.getItems().length>0&&os(C.getItems(),x)})},c$=t=>{const s=()=>{t._skinLoaded=!0,d6(t)};return()=>{t.initialized?s():t.on("init",s)}},i$=(t,s)=>()=>MA(t,{message:s}),l$=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),tV=(t,s)=>{const a=s+"/skin.min.css";return l$(t,a,t.ui.styleSheetLoader)},U4=(t,s)=>{if(pn(be.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return l$(t,i,Z2.DOM.styleSheetLoader)}else return Promise.resolve()},u$=(t,s)=>{const a=cR(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!X2(s)&&Vt(a)?Promise.all([tV(s,a),U4(s,a)]).then(c$(s),i$(s,"Skin could not be loaded")):Promise.resolve(c$(s)())},nV=Pt(u$,!1),oV=Pt(u$,!0),vE=(t,s)=>a=>{const i=Il(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},nw=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},d$=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Eu=(t,s)=>()=>t.execCommand(s),m$=(t,s,a)=>{const i=(C,x,_,D)=>{const B=s.shared.providers.translate(C.title);if(C.type==="separator")return A.some({type:"separator",text:B});if(C.type==="submenu"){const F=xe(C.getStyleItems(),V=>d(V,x,D));return x===0&&F.length<=0?A.none():A.some({type:"nestedmenuitem",text:B,enabled:F.length>0,getSubmenuItems:()=>xe(C.getStyleItems(),V=>d(V,x,D))})}else return A.some({type:"togglemenuitem",text:B,icon:C.icon,active:C.isSelected(D),enabled:!_,onAction:a.onAction(C),...C.getStylePreview().fold(()=>({}),F=>({meta:{style:F}}))})},d=(C,x,_)=>{const D=C.type==="formatter"&&a.isInvalid(C);return x===0?D?[]:i(C,x,!1,_).toArray():i(C,x,D,_).toArray()},g=C=>{const x=a.getCurrentValue(),_=a.shouldHide?0:1;return xe(C,D=>d(D,_,x))};return{validateItems:g,getFetch:(C,x)=>(_,D)=>{const B=x(),F=g(B),V=U1(F,Pm.CLOSE_ON_EXECUTE,C,{isHorizontalMenu:!1,search:A.none()});D(V)}}},q1=(t,s,a)=>{const i=a.dataset,d=i.type==="basic"?()=>Se(i.data,g=>u4(g,a.isSelectedFor,a.getPreviewFor)):i.getData;return{items:m$(t,s,a),getStyleItems:d}},ow=(t,s,a)=>{const{items:i,getStyleItems:d}=q1(t,s,a),g=C=>({getComponent:G(C)}),p=nw(t,"NodeChange",C=>{const x=C.getComponent();a.updateText(x)});return D3({text:a.icon.isSome()?A.none():a.text,icon:a.icon,tooltip:A.from(a.tooltip),role:A.none(),fetch:i.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},f$=t=>Se(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),sV=t=>({type:"basic",data:t});var iv;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(iv||(iv={}));const rV=(t,s)=>s===iv.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),yE=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:f$(rV(i,a))}},W4=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],Z4=t=>{const s=()=>Ue(W4,C=>t.formatter.match(C.format)),a=C=>()=>t.formatter.match(C),i=C=>A.none,d=C=>{const _=s().fold(G("left"),D=>D.title.toLowerCase());bn(C,z1,{icon:`align-${_}`})},g=sV(W4),p=C=>()=>Ue(W4,x=>x.format===C.format).each(x=>t.execCommand(x.command));return{tooltip:"Align",text:A.none(),icon:A.some("align-left"),isSelectedFor:a,getCurrentValue:A.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},aV=(t,s)=>ow(t,s,Z4(t)),cV=(t,s)=>{const a=q1(t,s,Z4(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},g$=(t,s)=>{const a=s(),i=Se(a,d=>d.format);return A.from(t.formatter.closest(i)).bind(d=>Ue(a,g=>g.format===d)).orThunk(()=>hn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},h$=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),i=p=>()=>{const C=t.formatter.get(p);return C?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):A.none()},d=p=>{const x=g$(t,()=>g.data).fold(G(s),_=>_.title);bn(p,Tu,{text:x})},g=yE(t,"block_formats",iv.SemiColon);return{tooltip:"Blocks",text:A.some(s),icon:A.none(),isSelectedFor:a,getCurrentValue:A.none,getPreviewFor:i,onAction:d$(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},iV=(t,s)=>ow(t,s,h$(t)),lV=(t,s)=>{const a=q1(t,s,h$(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},p$=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],b$=t=>{const s=t.split(/\s*,\s*/);return Se(s,a=>a.replace(/^['"]+|['"]+$/g,""))},uV=t=>{const s=()=>{const a=b$(t.toLowerCase());return Io(p$,i=>a.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},v$=t=>{const s="System Font",a=()=>{const _=X=>X?b$(X)[0]:"",D=t.queryCommandValue("FontName"),B=x.data,F=D?D.toLowerCase():"";return{matchOpt:Ue(B,X=>{const ue=X.format;return ue.toLowerCase()===F||_(ue).toLowerCase()===_(F).toLowerCase()}).orThunk(()=>hn(uV(F),{title:s,format:F})),font:D}},i=_=>D=>D.exists(B=>B.format===_),d=()=>{const{matchOpt:_}=a();return _},g=_=>()=>A.some({tag:"div",styles:_.indexOf("dings")===-1?{"font-family":_}:{}}),p=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,_.format)})},C=_=>{const{matchOpt:D,font:B}=a(),F=D.fold(G(B),V=>V.title);bn(_,Tu,{text:F})},x=yE(t,"font_family_formats",iv.SemiColon);return{tooltip:"Fonts",text:A.some(s),icon:A.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:C,dataset:x,shouldHide:!1,isInvalid:Ln}},dV=(t,s)=>ow(t,s,v$(t)),mV=(t,s)=>{const a=q1(t,s,v$(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},y$={tab:G(9),escape:G(27),enter:G(13),backspace:G(8),delete:G(46),left:G(37),up:G(38),right:G(39),down:G(40),space:G(32),home:G(36),end:G(35),pageUp:G(33),pageDown:G(34)},fV={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},C$=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),gV=(t,s)=>os(s,a=>os(fV[a],i=>t===i)),w$=(t,s)=>A.from(C$.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return gV(g,s)?A.some({value:d,unit:g}):A.none()}),S$=(t,s)=>w$(t,s).map(({value:a,unit:i})=>a+i),hV=(t,s,a)=>{let i=A.none();const d=Pe=>Pe.map(He=>Ft.getValue(He)).getOr(""),g=nw(t,"NodeChange",Pe=>{const He=Pe.getComponent();i=A.some(He),a.updateInputValue(He)}),p=Pe=>({getComponent:G(Pe)}),C=S(K),x=nn("custom-number-input-events"),_=Pe=>Pe>=0,D=(Pe,He,kt)=>{const at=d(i),Bt=w$(at,["unsupportedLength","empty"]),cn=Bt.map(vt=>vt.value).getOr(0),Ao=X_(t),Cn=Bt.map(vt=>vt.unit).filter(vt=>vt!=="").getOr(Ao),Eo=Pe(cn,a.getConfigFromUnit(Cn).step),Gn=`${_(Eo)?Eo:cn}${Cn}`,wo=`${cn}${Cn}`.length-`${Gn}`.length,Fn=i.map(vt=>vt.element.dom.selectionStart-wo),_s=i.map(vt=>vt.element.dom.selectionEnd-wo);a.onAction(Gn,kt),i.each(vt=>{Ft.setValue(vt,Gn),He&&(Fn.each(an=>vt.element.dom.selectionStart=an),_s.each(an=>vt.element.dom.selectionEnd=an))})},B=(Pe,He)=>D((kt,at)=>kt-at,Pe,He),F=(Pe,He)=>D((kt,at)=>kt+at,Pe,He),V=Pe=>Cc(Pe.element).fold(A.none,He=>(fu(He),A.some(!0))),X=Pe=>Zp(Pe.element)?(ji(Pe.element).each(He=>fu(He)),A.some(!0)):A.none(),ue=(Pe,He,kt,at)=>{const Bt=s.shared.providers.translate(kt),cn=nn("altExecuting"),Ao=()=>Pe(!0);return Jc.sketch({dom:{tag:"button",attributes:{title:Bt,"aria-label":Bt},classes:at.concat(He)},components:[V1(He,s.shared.providers.icons)],buttonBehaviours:yt([ro(cn,[st(Pi(),(Cn,Eo)=>{(Eo.event.raw.keyCode===y$.space()||Eo.event.raw.keyCode===y$.enter())&&Pe(!1)}),st(fl(),Ao),st(Gs(),Ao)])]),eventOrder:{[Pi()]:[cn,"keying"],[fl()]:[cn,"alloy.base.behaviour"],[Gs()]:[cn,"alloy.base.behaviour"]}})},Oe=No(ue(Pe=>B(!1,Pe),"minus","Decrease font size",["highlight-on-focus"])),Ce=No(ue(Pe=>F(!1,Pe),"plus","Increase font size",["highlight-on-focus"])),Ae=No({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[_1.sketch({inputBehaviours:yt([ro(x,[op({onSetup:g,getApi:p},C),M1({getApi:p},C)]),ro("input-update-display-text",[st(Tu,(Pe,He)=>{Ft.setValue(Pe,He.event.text)}),st(Ov(),Pe=>{a.onAction(Ft.getValue(Pe))}),st($u(),Pe=>{a.onAction(Ft.getValue(Pe))})]),yn.config({mode:"special",onEnter:Pe=>(D(ht,!0,!0),A.some(!0)),onEscape:V,onUp:Pe=>(F(!0,!1),A.some(!0)),onDown:Pe=>(B(!0,!1),A.some(!0)),onLeft:(Pe,He)=>(He.cut(),A.none()),onRight:(Pe,He)=>(He.cut(),A.none())})])})],behaviours:yt([Bn.config({}),yn.config({mode:"special",onEnter:X,onSpace:X,onEscape:V}),ro("input-wrapper-events",[st(ml(),Pe=>{Qe([Oe,Ce],He=>{const kt=be.fromDom(He.get(Pe).element.dom);Zp(kt)&&Cy(kt)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[Oe.asSpec(),Ae.asSpec(),Ce.asSpec()],behaviours:yt([Bn.config({}),yn.config({mode:"flow",focusInside:jh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Pe=>Zp(Pe.element)?A.none():(fu(Pe.element),A.some(!0))})])}},x$={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},T$={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},pV=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},bV=(t,s)=>/[0-9.]+px$/.test(t)?pV(parseInt(t,10)*72/96,s||0)+"pt":bt(T$,t).getOr(t),vV=t=>bt(x$,t).getOr(""),K1=t=>{const s=()=>{let x=A.none();const _=C.data,D=t.queryCommandValue("FontSize");if(D)for(let B=3;x.isNone()&&B>=0;B--){const F=bV(D,B),V=vV(F);x=Ue(_,X=>X.format===D||X.format===F||X.format===V)}return{matchOpt:x,size:D}},a=x=>_=>_.exists(D=>D.format===x),i=()=>{const{matchOpt:x}=s();return x},d=G(A.none),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,x.format)})},p=x=>{const{matchOpt:_,size:D}=s(),B=_.fold(G(D),F=>F.title);bn(x,Tu,{text:B})},C=yE(t,"font_size_formats",iv.Space);return{tooltip:"Font sizes",text:A.some("12pt"),icon:A.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:C,shouldHide:!1,isInvalid:Ln}},yV=(t,s)=>ow(t,s,K1(t)),CV=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},wV=t=>({updateInputValue:a=>bn(a,Tu,{text:t.queryCommandValue("FontSize")}),getConfigFromUnit:CV,onAction:(a,i)=>t.execCommand("FontSize",!1,a,{skip_focus:!i})}),SV=(t,s)=>hV(t,s,wV(t)),xV=(t,s)=>{const a=q1(t,s,K1(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},E$=(t,s)=>{const a="Paragraph",i=p=>()=>t.formatter.match(p),d=p=>()=>{const C=t.formatter.get(p);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):A.none()},g=p=>{const C=B=>c4(B)?xe(B.items,C):UB(B)?[{title:B.title,format:B.format}]:[],x=xe(l4(t),C),D=g$(t,G(x)).fold(G(a),B=>B.title);bn(p,Tu,{text:D})};return{tooltip:"Formats",text:A.some(a),icon:A.none(),isSelectedFor:i,getCurrentValue:A.none,getPreviewFor:d,onAction:d$(t),updateText:g,shouldHide:ZD(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},TV=(t,s)=>{const a={type:"advanced",...s.styles};return ow(t,s,E$(t,a))},EV=(t,s)=>{const a={type:"advanced",...s.styles},i=q1(t,s,E$(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},j4=G([Je("toggleClass"),Je("fetch"),yg("onExecute"),_e("getHotspot",A.some),_e("getAnchorOverrides",G({})),Wu(),yg("onItemExecute"),Cs("lazySink"),Je("dom"),Ee("onOpen"),pc("splitDropdownBehaviours",[fa,yn,Bn]),_e("matchWidth",!1),_e("useMinWidth",!1),_e("eventOrder",{}),Cs("role")].concat(YA())),kV=oc({factory:Jc,schema:[Je("dom")],name:"arrow",defaults:()=>({buttonBehaviours:yt([Bn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(gm)},buttonBehaviours:yt([vo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),_V=oc({factory:Jc,schema:[Je("dom")],name:"button",defaults:()=>({buttonBehaviours:yt([Bn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),k$=G([kV,_V,Hl({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Je("text")],name:"aria-descriptor"}),bu({schema:[zu()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),VM()]),_$=(t,s,a,i)=>{const d=D=>{Ho.getCurrent(D).each(B=>{gs.highlightFirst(B),yn.focusIn(B)})},g=D=>{qA(t,ht,D,i,d,sl.HighlightMenuAndItem).get(K)},p=D=>(g(D),A.some(!0)),C=D=>{const B=Id(D,t,"button");return gm(B),A.some(!0)},x={...cr([Zr((D,B)=>{er(D,t,"aria-descriptor").each(V=>{const X=nn("aria");zn(V.element,"id",X),zn(D.element,"aria-describedby",X)})})]),...Ex(A.some(g))},_={repositionMenus:D=>{vo.isOn(D)&&KA(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:{...t.eventOrder,[qs()]:["disabling","toggling","alloy.base.behaviour"]},events:x,behaviours:Sr(t.splitDropdownBehaviours,[fa.config({others:{sandbox:D=>{const B=Id(D,t,"arrow");return yC(t,D,{onOpen:()=>{vo.on(B),vo.on(D)},onClose:()=>{vo.off(B),vo.off(D)}})}}}),yn.config({mode:"special",onSpace:C,onEnter:C,onDown:p}),Bn.config({}),vo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},CE=ma({name:"SplitDropdown",configFields:j4(),partFields:k$(),factory:_$,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),A$=t=>({isEnabled:()=>!Un.isDisabled(t),setEnabled:s=>Un.set(t,!s),setText:s=>bn(t,Tu,{text:s}),setIcon:s=>bn(t,z1,{icon:s})}),AV=t=>({setActive:s=>{vo.set(t,s)},isActive:()=>vo.isOn(t),isEnabled:()=>!Un.isDisabled(t),setEnabled:s=>Un.set(t,!s),setText:s=>bn(t,Tu,{text:s}),setIcon:s=>bn(t,z1,{icon:s})}),O$=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),D$=nn("focus-button"),G4=(t,s,a,i,d)=>{const g=s.map(C=>No(O3(C,"tox-tbtn",d))),p=t.map(C=>No(qd(C,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:O$(a,d)},components:z0([p.map(C=>C.asSpec()),g.map(C=>C.asSpec())]),eventOrder:{[ua()]:["focusing","alloy.base.behaviour",ip],[Td()]:[ip,"toolbar-group-button-events"]},buttonBehaviours:yt([zd.toolbarButton(d.isDisabled),bc(),ro(ip,[Zr((C,x)=>NC(C)),st(Tu,(C,x)=>{g.bind(_=>_.getOpt(C)).each(_=>{Jn.set(_,[kr(d.translate(x.event.text))])})}),st(z1,(C,x)=>{p.bind(_=>_.getOpt(C)).each(_=>{Jn.set(_,[qd(x.event.icon,d.icons)])})}),st(ua(),(C,x)=>{x.event.prevent(),fs(C,D$)})])].concat(i.getOr([])))}},OV=(t,s,a,i)=>{const d=s.shared,g=S(K),p={toolbarButtonBehaviours:[],getApi:A$,onSetup:t.onSetup},C=[ro("toolbar-group-button-events",[op(p,g),M1(p,g)])];return up.sketch({lazySink:d.getSink,fetch:()=>ai.nu(x=>{x(Se(a(t.items),gE))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:G4(t.icon,t.text,t.tooltip,A.some(C),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},R$=(t,s,a)=>{var i;const d=S(K),g=G4(t.icon,t.text,t.tooltip,A.none(),a);return Jc.sketch({dom:g.dom,components:g.components,eventOrder:A3,buttonBehaviours:{...yt([ro("toolbar-button-events",[GL({onAction:t.onAction,getApi:s.getApi}),op(s,d),M1(s,d)]),zd.toolbarButton(()=>!t.enabled||a.isDisabled()),bc()].concat(s.toolbarButtonBehaviours)),[ip]:(i=g.buttonBehaviours)===null||i===void 0?void 0:i[ip]}})},M$=(t,s)=>N$(t,s,[]),N$=(t,s,a)=>R$(t,{toolbarButtonBehaviours:a.length>0?[ro("toolbarButtonWith",a)]:[],getApi:A$,onSetup:t.onSetup},s),q4=(t,s)=>B$(t,s,[]),B$=(t,s,a)=>R$(t,{toolbarButtonBehaviours:[Jn.config({}),vo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[ro("toolbarToggleButtonWith",a)]:[]),getApi:AV,onSetup:t.onSetup},s),DV=(t,s,a)=>i=>ai.nu(d=>s.fetch(d)).map(d=>A.from(QA(js(pC(nn("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,Pm.CLOSE_ON_EXECUTE,s.select.getOr(Ln),a),{movement:bC(s.columns,s.presets),menuBehaviours:aC.unnamedEvents(s.columns!=="auto"?[]:[Zr((g,p)=>{kA(g,4,bR(s.presets)).each(({numRows:C,numColumns:x})=>{yn.setGridSize(g,C,x)})})])})))),RV=(t,s)=>{const a=g=>({isEnabled:()=>!Un.isDisabled(g),setEnabled:p=>Un.set(g,!p),setIconFill:(p,C)=>{$r(g.element,`svg path[id="${p}"], rect[id="${p}"]`).each(x=>{zn(x,"fill",C)})},setActive:p=>{zn(g.element,"aria-pressed",p),$r(g.element,"span").each(C=>{g.getSystem().getByDom(C).each(x=>vo.set(x,p))})},isActive:()=>$r(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists(vo.isOn)),setText:p=>$r(g.element,"span").each(C=>g.getSystem().getByDom(C).each(x=>bn(x,Tu,{text:p}))),setIcon:p=>$r(g.element,"span").each(C=>g.getSystem().getByDom(C).each(x=>bn(x,z1,{icon:p})))}),i=S(K),d={getApi:a,onSetup:t.onSetup};return CE.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...O$(t.tooltip,s.providers)}},onExecute:g=>{const p=a(g);p.isEnabled()&&t.onAction(p)},onItemExecute:(g,p,C)=>{},splitDropdownBehaviours:yt([zd.splitButton(s.providers.isDisabled),bc(),ro("split-dropdown-events",[Zr((g,p)=>NC(g)),st(D$,Bn.focus),op(d,i),M1(d,i)]),EC.config({})]),eventOrder:{[Td()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:DV(a,t,s.providers),parts:{menu:Hx(!1,t.columns,t.presets)},components:[CE.parts.button(G4(t.icon,t.text,A.none(),A.some([vo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),CE.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:FD("chevron-down",s.providers.icons)},buttonBehaviours:yt([zd.splitButton(s.providers.isDisabled),bc(),W2()])}),CE.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},P$=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],mp=(t,s)=>(a,i,d)=>{const g=t(a).mapError(p=>nf(p)).getOrDie();return s(g,i,d)},MV={button:mp(PR,(t,s)=>M$(t,s.shared.providers)),togglebutton:mp(Yx,(t,s)=>q4(t,s.shared.providers)),menubutton:mp(AP,(t,s)=>FC(t,"tox-tbtn",s,A.none())),splitbutton:mp(XH,(t,s)=>RV(t,s.shared)),grouptoolbarbutton:mp(_P,(t,s,a)=>{const i=a.ui.registry.getAll().buttons,d=p=>SE(a,{buttons:i,toolbar:p,allowToolbarGroups:!1},s,A.none()),g={[Kb]:s.shared.header.isPositionedAtTop()?Dd.TopToBottom:Dd.BottomToTop};switch(N0(a)){case wu.floating:return OV(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},wE=(t,s,a)=>bt(MV,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),i=>A.some(i(t,s,a))),sw={styles:TV,fontsize:yV,fontsizeinput:SV,fontfamily:dV,blocks:iV,align:aV},$$=t=>{const s=Se(P$,a=>{const i=Dn(a.items,d=>io(t,d)||io(sw,d));return{name:a.name,items:i}});return Dn(s,a=>a.items.length>0)},NV=t=>{const s=t.split("|");return Se(s,a=>({items:a.trim().split(" ")}))},BV=t=>ct(t,s=>io(s,"name")&&io(s,"items")),PV=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?$$(a):Vt(s)?NV(s):BV(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},$V=(t,s,a,i,d,g)=>bt(s,a.toLowerCase()).orThunk(()=>g.bind(p=>Ss(p,C=>bt(s,C+a.toLowerCase())))).fold(()=>bt(sw,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):wE(p,d,t)),SE=(t,s,a,i)=>{const d=PV(s),g=Se(d,p=>{const C=xe(p.items,x=>x.trim().length===0?[]:$V(t,s.buttons,x,s.allowToolbarGroups,a,i).toArray());return{title:A.from(t.translate(p.name)),items:C}});return Dn(g,p=>p.items.length>0)},F$=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(ct(g,Vt)){const C=g.map(x=>{const _={toolbar:x,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return SE(t,_,i,A.none())});yr.setToolbars(d,C)}else yr.setToolbar(d,SE(t,a,i,A.none()))},rw=Tc(),I$=rw.os.isiOS()&&rw.os.version.major<=12,L$=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=S(_o(d.innerWidth,d.innerHeight)),C=S(_o(g.offsetWidth,g.offsetHeight)),x=()=>{const F=p.get();(F.left!==d.innerWidth||F.top!==d.innerHeight)&&(p.set(_o(d.innerWidth,d.innerHeight)),aT(t))},_=()=>{const F=t.getDoc().documentElement,V=C.get();(V.left!==F.offsetWidth||V.top!==F.offsetHeight)&&(C.set(_o(F.offsetWidth,F.offsetHeight)),aT(t))},D=F=>{fM(t,F)};i.bind(d,"resize",x),i.bind(d,"scroll",D);const B=Ey(be.fromDom(t.getBody()),"load",_);t.on("hide",()=>{Qe(a,F=>{Kt(F.element,"display","none")})}),t.on("show",()=>{Qe(a,F=>{xo(F.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{B.unbind(),i.unbind(d,"resize",x),i.unbind(d,"scroll",D),d=null})},H$=(t,s,a)=>{Qh(t)&&yf(a.mainUi.mothership.element,a.popupUi.mothership),r1(s,a.dialogUi.mothership)};var IV=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=s,C=S(0),x=g.outerContainer;await nV(t);const _=be.fromDom(d.targetNode),D=it(Le(_));yf(_,g.mothership),H$(t,D,s),t.on("PostRender",()=>{yr.setSidebar(x,a.sidebar,rR(t)),F$(t,s,a,i),C.set(t.getWin().innerWidth),yr.setMenubar(x,a$(t,a)),yr.setViews(x,a.views),L$(t,s)});const B=yr.getSocket(x).getOrDie("Could not find expected socket element");if(I$){Hr(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ue=CB(()=>{t.dispatch("ScrollContent")},20),Oe=ri(B.element,"scroll",ue.throttle);t.on("remove",Oe.unbind)}tM(t,s),t.addCommand("ToggleSidebar",(ue,Oe)=>{yr.toggleSidebar(x,Oe),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ue;return(ue=yr.whichSidebar(x))!==null&&ue!==void 0?ue:""}),t.addCommand("ToggleView",(ue,Oe)=>{if(yr.toggleView(x,Oe)){const Ce=x.element;g.mothership.broadcastOn([km()],{target:Ce}),Qe(p,Ae=>{Ae.broadcastOn([km()],{target:Ce})}),Yo(yr.whichView(x))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var ue;return(ue=yr.whichView(x))!==null&&ue!==void 0?ue:""});const F=N0(t),V=()=>{yr.refreshToolbar(s.mainUi.outerContainer)};(F===wu.sliding||F===wu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ue=t.getWin().innerWidth;ue!==C.get()&&(V(),C.set(ue))});const X={setEnabled:ue=>{lC(s,!ue)},isEnabled:()=>!Un.isDisabled(x)};return{iframeContainer:B.element.dom,editorContainer:x.element.dom,api:X}}});const xE=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),K4=t=>Nn(t)?t+"px":t,TE=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},LV=t=>{const s=q2(t),a=K2(t),i=Mx(t);return xE(s).map(d=>TE(d,a,i))},HV=t=>LV(t).getOr(q2(t)),V$=t=>{const s=Ox(t),a=Dx(t),i=Rx(t);return xE(s).map(d=>TE(d,a,i))},VV=t=>V$(t).getOr(Ox(t)),{ToolbarLocation:Y4,ToolbarMode:z$}=pI,U$=40,zV=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=a,C=Z2.DOM,x=E1(t),_=$0(t),D=Rx(t).or(V$(t)),B=i.shared.header,F=B.isPositionedAtTop,V=N0(t),X=V===z$.sliding||V===z$.floating,ue=S(!1),Oe=()=>ue.get()&&!t.removed,Ce=Fn=>X?Fn.fold(G(0),_s=>_s.components().length>1?ze(_s.components()[1].element):0):0,Ae=Fn=>{switch(Bx(t)){case Y4.auto:const _s=yr.getToolbar(g.outerContainer),vt=Ce(_s),an=ze(Fn.element)-vt,jt=k(s);if(jt.y>an)return"top";{const mo=Zi(s),zo=Math.max(mo.dom.scrollHeight,ze(mo));return jt.bottom<zo-an||ge().bottom<jt.bottom-an?"bottom":"top"}case Y4.bottom:return"bottom";case Y4.top:default:return"top"}},Pe=Fn=>{d.on(_s=>{sc.setModes(_s,[Fn]),B.setDockingMode(Fn);const vt=F()?Dd.TopToBottom:Dd.BottomToTop;zn(_s.element,Kb,vt)})},He=()=>{d.on(Fn=>{const _s=D.getOrThunk(()=>{const vt=xE(et(rr(),"margin-left")).getOr(0);return wa(rr())-Ns(s).left+vt});Kt(Fn.element,"max-width",_s+"px")})},kt=Fn=>{d.on(_s=>{const vt=yr.getToolbar(g.outerContainer),an=Ce(vt),jt=k(s),{top:Pn,left:mo}=at(t,g.outerContainer.element).fold(()=>({top:F()?Math.max(jt.y-ze(_s.element)+an,0):jt.bottom,left:jt.x}),ws=>{var Ui;const ra=k(ws),od=(Ui=ws.dom.scrollTop)!==null&&Ui!==void 0?Ui:0,em=ms(ws,rr()),th=em?Math.max(jt.y-ze(_s.element)+an,0):jt.y-ra.y+od-ze(_s.element)+an;return{top:F()?th:jt.bottom,left:em?jt.x:jt.x-ra.x}}),zo={position:"absolute",left:Math.round(mo)+"px",top:Math.round(Pn)+"px"},Ia=Fn.map(ws=>{const Ui=Fc(),ra=150,od=window.innerWidth-(mo-Ui.left);return{width:Math.max(Math.min(ws,od),ra)+"px"}}).getOr({});Hr(g.outerContainer.element,{...zo,...Ia})})},at=(Fn,_s)=>Qh(Fn)?GC(_s):A.none(),Bt=()=>{Qe(p,Fn=>{Fn.broadcastOn([Lh()],{})})},cn=()=>{if(x)return A.none();if(Ns(g.outerContainer.element).left+hr(g.outerContainer.element)>=window.innerWidth-U$||gr(g.outerContainer.element,"width").isSome()){Kt(g.outerContainer.element,"position","absolute"),Kt(g.outerContainer.element,"left","0px"),xo(g.outerContainer.element,"width");const _s=hr(g.outerContainer.element);return A.some(_s)}else return A.none()},Ao=Fn=>{if(!Oe())return;x||He();const _s=x?A.none():cn();X&&yr.refreshToolbar(g.outerContainer),x||kt(_s),_&&d.on(Fn),Bt()},Cn=()=>x||!_||!Oe()?!1:d.get().exists(Fn=>{const _s=B.getDockingMode(),vt=Ae(Fn);return vt!==_s?(Pe(vt),!0):!1});return{isVisible:Oe,isPositionedAtTop:F,show:()=>{ue.set(!0),Kt(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),Qe(p,Fn=>{xo(Fn.element,"display")}),Cn(),Qh(t)?Ao(Fn=>sc.isDocked(Fn)?sc.reset(Fn):sc.refresh(Fn)):Ao(sc.refresh)},hide:()=>{ue.set(!1),Kt(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),Qe(p,Fn=>{Kt(Fn.element,"display","none")})},update:Ao,updateMode:()=>{Cn()&&Ao(sc.reset)},repositionPopups:Bt}},X4=(t,s)=>{const a=k(t);return{pos:s?a.y:a.bottom,bounds:a}},UV=(t,s,a,i)=>{const d=S(X4(s,a.isPositionedAtTop())),g=_=>{const{pos:D,bounds:B}=X4(s,a.isPositionedAtTop()),{pos:F,bounds:V}=d.get(),X=B.height!==V.height||B.width!==V.width;d.set({pos:D,bounds:B}),X&&aT(t,_),a.isVisible()&&(F!==D?a.update(sc.reset):X&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(sc.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let p=0;const C=j3(()=>a.update(sc.refresh),33);t.on("ScrollWindow",()=>{const _=Fc().left;_!==p&&(p=_,C.throttle()),a.updateMode()}),Qh(t)&&t.on("ElementScroll",_=>{a.update(sc.refresh)});const x=Il();x.set(Ey(be.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{x.clear()})};var WV=Object.freeze({__proto__:null,render:async(t,s,a,i,d)=>{const{mainUi:g}=s,p=Qs(),C=be.fromDom(d.targetNode),x=zV(t,C,s,i,p),_=Px(t);await oV(t);const D=()=>{if(p.isSet()){x.show();return}p.set(yr.getHeader(g.outerContainer).getOrDie());const F=J2(t);Qh(t)?(yf(C,g.mothership),yf(C,s.popupUi.mothership)):r1(F,g.mothership),r1(F,s.dialogUi.mothership),F$(t,s,a,i),yr.setMenubar(g.outerContainer,a$(t,a)),x.show(),UV(t,C,x,_),t.nodeChanged()};t.on("show",D),t.on("hide",x.hide),_||(t.on("focus",D),t.on("blur",x.hide)),t.on("init",()=>{(t.hasFocus()||_)&&D()}),tM(t,s);const B={show:D,hide:x.hide,setEnabled:F=>{lC(s,!F)},isEnabled:()=>!Un.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const ZV=()=>{const t=Qs(),s=Qs(),a=Qs();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),p=s.get().map(C=>C.mothership);return g.fold(()=>p.toArray(),C=>p.fold(()=>[C],x=>ms(C.element,x.element)?[C]:[C,x]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(C=>p(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},jV="contexttoolbar-show",lv="contexttoolbar-hide",W$=t=>({hide:()=>fs(t,vh()),getValue:()=>Ft.getValue(t)}),Z$=(t,s)=>st(XN,(a,i)=>{const d=t.get(a),g=W$(d);s.onAction(g,i.event.buttonApi)}),GV=(t,s,a)=>{const{primary:i,...d}=s.original,g=Ts(PR({...d,type:"button",onAction:K}));return N$(g,a,[Z$(t,s)])},j$=(t,s,a)=>{const{primary:i,...d}=s.original,g=Ts(Yx({...d,type:"togglebutton",onAction:K}));return B$(g,a,[Z$(t,s)])},J4=t=>t.type==="contextformtogglebutton",G$=(t,s,a)=>J4(s)?j$(t,s,a):GV(t,s,a),q$=(t,s,a)=>{const i=Se(s,p=>No(G$(t,p,a)));return{asSpecs:()=>Se(i,p=>p.asSpec()),findPrimary:p=>Ss(s,(C,x)=>C.primary?A.from(i[x]).bind(_=>_.getOpt(p)).filter(Ze(Un.isDisabled)):A.none())}},K$=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=No(_1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:yt([yn.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(gm(p),!0)),onLeft:(g,p)=>(p.cut(),A.none()),onRight:(g,p)=>(p.cut(),A.none())})])})),d=q$(i,t.commands,s);return[{title:A.none(),items:[i.asSpec()]},{title:A.none(),items:d.asSpecs()}]},EE={renderContextForm:(t,s,a)=>ew({type:t,uid:nn("context-toolbar"),initGroups:K$(s,a),onEscape:A.none,cyclicKeying:!0,providers:a}),buildInitGroups:K$},kE=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,Y$=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Gi(be.fromDom(t.startContainer),t.startOffset).element;return(jo(a)?ya(a):A.some(a)).filter(Rn).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},_E=t=>{const s=t.selection.getRng(),a=Y$(s);if(t.inline){const i=Fc();return ar(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=M(be.fromDom(t.getBody()));return ar(i.x+a.left,i.y+a.top,a.width,a.height)}},qV=(t,s)=>s.filter(a=>Go(a)&&cc(a)).map(M).getOrThunk(()=>_E(t)),X$=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},KV=(t,s,a,i,d,g)=>{const p=be.fromDom(t.getContainer()),C=$r(p,".tox-editor-header").getOr(p),x=k(C),_=x.y>=s.bottom,D=i&&!_;if(t.inline&&D)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const B=d==="line"?k(p):s;return D?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(B.bottom-g,a.bottom)}:{y:Math.max(B.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},J$=(t,s,a,i=0)=>{const d=Qm(window),g=k(be.fromDom(t.getContentAreaContainer())),p=_f(t)||B0(t)||P0(t),{x:C,width:x}=X$(g,d,i);if(t.inline&&!p)return ar(C,d.y,x,d.height);{const _=s.header.isPositionedAtTop(),{y:D,bottom:B}=KV(t,g,d,_,a,i);return ar(C,D,x,B-D)}},AE=12,Q$={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},e5={maxHeightFunction:xg(),maxWidthFunction:N4()},t5=(t,s)=>{const a=t.selection.getRng(),i=Gi(be.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&ms(i.element,s)},OE=(t,s,a)=>{const i=gr(t,"position");Kt(t,"position",s);const d=a(t);return i.each(g=>Kt(t,"position",g)),d},Q4=t=>t==="node",n5=(t,s,a,i,d)=>{const g=_E(t),p=i.lastElement().exists(C=>ms(a,C));if(t5(t,a))return p?HB:If;if(p)return OE(s,i.getMode(),()=>kE(g,k(s),-20)&&!i.isReposition()?W7:HB);{const C=i.getMode()==="fixed"?d.y+Fc().top:d.y,x=ze(s)+AE;return C+x<=g.y?If:UC}},eO=(t,s,a,i)=>{const d=x=>(_,D,B,F,V)=>{const X=n5(t,F,x,a,V),ue={..._,y:V.y,height:V.height};return{...X(ue,D,B,F,V),alwaysFit:!0}},g=x=>Q4(i)?[d(x)]:[];return s?{onLtr:x=>[Oc,mc,ja,Ci,Ji,Kr].concat(g(x)),onRtl:x=>[Oc,ja,mc,Ji,Ci,Kr].concat(g(x))}:{onLtr:x=>[Kr,Oc,Ci,mc,Ji,ja].concat(g(x)),onRtl:x=>[Kr,Oc,Ji,ja,Ci,mc].concat(g(x))}},YV=(t,s,a,i)=>s==="line"?{bubble:Nh(AE,0,Q$),layouts:{onLtr:()=>[mu],onRtl:()=>[hy]},overrides:e5}:{bubble:Nh(0,AE,Q$,1/AE),layouts:eO(t,a,i,s),overrides:e5},DE=(t,s)=>{const a=Dn(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=ps(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},XV=t=>{if(t.length<=1)return t;{const s=g=>os(t,p=>p.position===g),a=g=>Dn(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),p=Se(a("selection"),C=>({...C,position:"node"}));return g.concat(p)}else return a(i?"selection":"node");else return a("line")}},JV=t=>{if(t.length<=1)return t;{const s=i=>Ue(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Dn(t,d=>d.position===i))}},RE=(t,s,a)=>{const i=DE(t,s);if(i.contextForms.length>0)return A.some({elem:t,toolbars:[i.contextForms[0]]});{const d=DE(t,a);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=XV(i.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},o5=(t,s,a)=>t(s)?A.none():Rl(s,i=>{if(Rn(i)){const{contextToolbars:d,contextForms:g}=DE(i,a.inNodeScope),p=g.length>0?g:JV(d);return p.length>0?A.some({elem:i,toolbars:p}):A.none()}else return A.none()},t),QV=(t,s)=>{const a=be.fromDom(s.getBody()),i=p=>ms(p,a),d=p=>!i(p)&&!va(a,p),g=be.fromDom(s.selection.getNode());return d(g)?A.none():RE(g,t.inNodeScope,t.inEditorScope).orThunk(()=>o5(i,g,t))},ez=(t,s)=>{const a={},i=[],d=[],g={},p={},C=(D,B)=>{const F=Ts(LR(B));a[D]=F,F.launch.map(V=>{g["form:"+D]={...B.launch,type:V.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(F)}}}),F.scope==="editor"?d.push(F):i.push(F),p[D]=F},x=(D,B)=>{VI(B).each(F=>{B.scope==="editor"?d.push(F):i.push(F),p[D]=F})},_=is(t);return Qe(_,D=>{const B=t[D];B.type==="contextform"?C(D,B):B.type==="contexttoolbar"&&x(D,B)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},s5=nn("forward-slide"),r5=nn("backward-slide"),tO=nn("change-slide-event"),ME="tox-pop--resizing",a5=t=>{const s=S([]);return $a.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),$a.getContent(a).each(i=>{xo(i.element,"visibility")}),da(a.element,ME),xo(a.element,"width")},inlineBehaviours:yt([ro("context-toolbar-events",[iu(rg(),(a,i)=>{i.event.raw.propertyName==="width"&&(da(a.element,ME),xo(a.element,"width"))}),st(tO,(a,i)=>{const d=a.element;xo(d,"width");const g=wa(d);$a.setContent(a,i.event.contents),$s(d,ME);const p=wa(d);Kt(d,"width",g+"px"),$a.getContent(a).each(C=>{i.event.focus.bind(x=>(fu(x),Uu(d))).orThunk(()=>(yn.focusIn(C),Ad(Le(d))))}),setTimeout(()=>{Kt(a.element,"width",p+"px")},0)}),st(s5,(a,i)=>{$a.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Ad(Le(a.element))}]))}),bn(a,tO,{contents:i.event.forwardContents,focus:A.none()})}),st(r5,(a,i)=>{ba(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),bn(a,tO,{contents:Li(d.bar),focus:d.focus})})})]),yn.config({mode:"special",onEscape:a=>ba(s.get()).fold(()=>t.onEscape(),i=>(fs(a,r5),A.some(!0)))})]),lazySink:()=>St.value(t.sink)})},nO="tox-pop--transition",tz=(t,s,a,i)=>{const d=i.backstage,g=d.shared,p=Tc().deviceType.isTouch,C=Qs(),x=Qs(),_=Qs(),D=Yc(a5({sink:a,onEscape:()=>(t.focus(),A.some(!0))})),B=()=>{const Cn=_.get().getOr("node"),Eo=Q4(Cn)?1:0;return J$(t,g,Cn,Eo)},F=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),V=Cn=>sr(La(Cn,C.get(),ms),!0),X=()=>{if(F()){const Cn=B(),Eo=sr(_.get(),"node")?qV(t,C.get()):_E(t);return Cn.height<=0||!kE(Eo,Cn,.01)}else return!0},ue=()=>{C.clear(),x.clear(),_.clear(),$a.hide(D)},Oe=()=>{if($a.isOpen(D)){const Cn=D.element;xo(Cn,"display"),X()?Kt(Cn,"display","none"):(x.set(0),$a.reposition(D))}},Ce=Cn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Cn],behaviours:yt([yn.config({mode:"acyclic"}),ro("pop-dialog-wrap-events",[Zr(Eo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>yn.focusIn(Eo))}),Fi(Eo=>{t.shortcuts.remove("ctrl+F9")})])])}),Ae=Tl(()=>ez(s,Cn=>{const Eo=kt([Cn]);bn(D,s5,{forwardContents:Ce(Eo)})})),Pe=(Cn,Eo)=>SE(t,{buttons:Cn,toolbar:Eo.items,allowToolbarGroups:!1},i.backstage,A.some(["form:"])),He=(Cn,Eo)=>EE.buildInitGroups(Cn,Eo),kt=Cn=>{const{buttons:Eo}=t.ui.registry.getAll(),Gn=Ae(),wo={...Eo,...Gn.formNavigators},Fn=N0(t)===wu.scrolling?wu.scrolling:wu.default,_s=Ge(Se(Cn,vt=>vt.type==="contexttoolbar"?Pe(wo,vt):He(vt,g.providers)));return ew({type:Fn,uid:nn("context-toolbar"),initGroups:_s,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},at=(Cn,Eo)=>{const Gn=Cn==="node"?g.anchors.node(Eo):g.anchors.cursor(),wo=YV(t,Cn,p(),{lastElement:C.get,isReposition:()=>sr(x.get(),0),getMode:()=>Yr.getMode(a)});return js(Gn,wo)},Bt=(Cn,Eo)=>{if(Ao.cancel(),!F())return;const Gn=kt(Cn),wo=Cn[0].position,Fn=at(wo,Eo);_.set(wo),x.set(1);const _s=D.element;xo(_s,"display"),V(Eo)||(da(_s,nO),Yr.reset(a,D)),$a.showWithinBounds(D,Ce(Gn),{anchor:Fn,transition:{classes:[nO],mode:"placement"}},()=>A.some(B())),Eo.fold(C.clear,C.set),X()&&Kt(_s,"display","none")};let cn=!1;const Ao=j3(()=>{if(!(!t.hasFocus()||t.removed||cn))if(tc(D.element,nO))Ao.throttle();else{const Cn=Ae();QV(Cn,t).fold(ue,Eo=>{Bt(Eo.toolbars,A.some(Eo.elem))})}},17);t.on("init",()=>{t.on("remove",ue),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Oe),t.on("click keyup focus SetContent",Ao.throttle),t.on(lv,ue),t.on(jV,Cn=>{const Eo=Ae();bt(Eo.lookupTable,Cn.toolbarKey).each(Gn=>{Bt([Gn],hn(Cn.target!==t,Cn.target)),$a.getContent(D).each(yn.focusIn)})}),t.on("focusout",Cn=>{Bm.setEditorTimeout(t,()=>{Uu(a.element).isNone()&&Uu(D.element).isNone()&&ue()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ue()}),t.on("AfterProgressState",Cn=>{Cn.state?ue():t.hasFocus()&&Ao.throttle()}),t.on("dragstart",()=>{cn=!0}),t.on("dragend drop",()=>{cn=!1}),t.on("NodeChange",Cn=>{Uu(D.element).fold(Ao.throttle,K)})})},c5=t=>{Qe([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Eu(t,a.cmd),onSetup:vE(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Eu(t,"JustifyNone")})},i5=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Qs();return Se(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:C=>{const x=D=>{D&&(g.on(B=>B.setActive(!1)),g.set(C)),C.setActive(D)};x(sr(d,s.hash(p)));const _=s.watcher(t,p,x);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},nz={name:"lineheight",text:"Line height",icon:"line-height",getOptions:iR,hash:t=>S$(t,["fixed","relative","empty"]).getOr(t),display:ht,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>A.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},oz=t=>A.from(Y_(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:G(a),hash:i=>_n(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=be.fromDom(i.selection.getNode());return au(d,g=>A.some(g).filter(Rn).bind(p=>P(p,"lang").map(x=>{const _=P(p,"data-mce-lang").getOrUndefined();return{code:x,customCode:_,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=Il();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),d.clear}})),sz=t=>{i5(t,nz),oz(t).each(s=>i5(t,s))},rz=(t,s)=>{cV(t,s),mV(t,s),EV(t,s),lV(t,s),xV(t,s)},oO=t=>nw(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),az=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:oO(t),onAction:Eu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Eu(t,"indent")})},cz=t=>{az(t)},NE=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),()=>t.off("PastePlainTextToggle",i)},l5=t=>{const s=S(J_(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:NE(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:NE(t,s)})},BE=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},iz=t=>{H1.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:vE(t,s.name),onAction:BE(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:vE(t,a),onAction:BE(t,a)})}},lz=t=>{H1.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Eu(t,s.action)})})},uz=t=>{H1.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Eu(t,s.action),onSetup:vE(t,s.name)})})},dz=t=>{iz(t),lz(t),uz(t)},mz=t=>{H1.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Eu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:BE(t,"code")})},u5=t=>{dz(t),mz(t)},PE=(t,s)=>nw(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),d5=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:PE(t,"hasUndo"),onAction:Eu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:PE(t,"hasRedo"),onAction:Eu(t,"redo")})},fz=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:PE(t,"hasUndo"),onAction:Eu(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:PE(t,"hasRedo"),onAction:Eu(t,"redo")})},gz=t=>{d5(t),fz(t)},sO=t=>nw(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),m5=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:sO(t),onAction:Eu(t,"mceToggleVisualAid")})},hz=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Eu(t,"mceToggleVisualAid")})},pz=t=>{hz(t),m5(t)},rO=(t,s)=>{c5(t),u5(t),rz(t,s),gz(t),UA(t),pz(t),cz(t),sz(t),l5(t)},bz=t=>Vt(t)?t.split(/[ ,]/):t,f5=t=>s=>s.options.get(t),vz=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Vt(a)||ct(a,Vt)?{value:bz(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},g5=f5("contextmenu_never_use_native"),yz=f5("contextmenu_avoid_overlap"),h5=t=>p5(t).length===0,p5=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Dn(a,i=>io(s,i))},cw=(t,s)=>({type:"makeshift",x:t,y:s}),Cz=(t,s,a)=>cw(t.x+s,t.y+a),b5=t=>t.type==="longpress"||t.type.indexOf("touch")===0,wz=t=>{if(b5(t)){const s=t.touches[0];return cw(s.pageX,s.pageY)}else return cw(t.pageX,t.pageY)},Sz=t=>{if(b5(t)){const s=t.touches[0];return cw(s.clientX,s.clientY)}else return cw(t.clientX,t.clientY)},xz=(t,s)=>{const a=Z2.DOM.getPos(t);return Cz(s,a.x,a.y)},Tz=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?wz(s):xz(t.getContentAreaContainer(),Sz(s)):aO(t),aO=t=>({type:"selection",root:be.fromDom(t.selection.getNode())}),Ez=t=>({type:"node",node:A.some(be.fromDom(t.selection.getNode())),root:be.fromDom(t.getBody())}),cO=(t,s,a)=>{switch(a){case"node":return Ez(t);case"point":return Tz(t,s);case"selection":return aO(t)}},kz=(t,s,a,i,d,g)=>{const p=a(),C=cO(t,s,g);U1(p,Pm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:A.none()}).map(x=>{s.preventDefault(),$a.showMenuAt(d,{anchor:C},{menu:{markers:k1("normal")},data:x})})},_z={onLtr:()=>[Oc,mc,ja,Ci,Ji,Kr,If,UC,zC,HC,VC,nv],onRtl:()=>[Oc,ja,mc,Ji,Ci,Kr,If,UC,VC,nv,zC,HC]},Az=12,Y1={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},v5=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return Qp(t.getWin(),Tm.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},Oz=t=>{const s=t.selection.getRng(),a=()=>{Bm.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},Dz=(t,s,a)=>{const i=cO(t,s,a);return{bubble:Nh(0,a==="point"?Az:0,Y1),layouts:_z,overrides:{maxWidthFunction:N4(),maxHeightFunction:xg()},...i}},Rz=(t,s,a,i,d,g,p)=>{const C=Dz(t,s,g);U1(a,Pm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:A.none()}).map(x=>{s.preventDefault();const _=p?sl.HighlightMenuAndItem:sl.HighlightNone;$a.showMenuWithinBounds(d,{anchor:C},{menu:{markers:k1("normal"),highlightOnOpen:_},data:x,type:"horizontal"},()=>A.some(J$(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(lv)})},Mz=(t,s,a,i,d,g)=>{const p=Tc(),C=p.os.isiOS(),x=p.os.isMacOS(),_=p.os.isAndroid(),D=p.deviceType.isTouch(),B=()=>!(_||C||x&&D),F=()=>{const V=a();Rz(t,s,V,i,d,g,B())};if((x||C)&&g!=="node"){const V=()=>{Oz(t),F()};v5(t,s)?V():(t.once("selectionchange",V),t.once("touchend",()=>t.off("selectionchange",V)))}else F()},iO=t=>Vt(t)?t==="|":t.type==="separator",lO={type:"separator"},y5=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Vt(t))return t;switch(t.type){case"separator":return lO;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return Vt(i)?i:Se(i,y5)}};default:const a=t;return{type:"menuitem",...s(a),onAction:ot(a.onAction)}}},C5=(t,s)=>{if(s.length===0)return t;const i=ba(t).filter(d=>!iO(d)).fold(()=>[],d=>[lO]);return t.concat(i).concat(s).concat([lO])},Nz=(t,s,a)=>{const i=An(s,(d,g)=>bt(t,g.toLowerCase()).map(p=>{const C=p.update(a);if(Vt(C))return C5(d,C.split(" "));if(C.length>0){const x=Se(C,y5);return C5(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&iO(i[i.length-1])&&i.pop(),i},Bz=(t,s)=>s.ctrlKey&&!g5(t),Pz=t=>t.type==="longpress"||io(t,"touches"),w5=(t,s)=>!Pz(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),S5=(t,s)=>w5(t,s)?t.selection.getStart(!0):s.target,x5=(t,s)=>{const a=yz(t),i=w5(t,s)?"selection":"point";if(Ie(a)){const d=S5(t,s);return CC(be.fromDom(d),a)?"node":i}else return i},T5=(t,s,a)=>{const d=Tc().deviceType.isTouch,g=Yc($a.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:yt([ro("dismissContextMenu",[st(rf(),(x,_)=>{Mo.close(x),t.focus()})])])})),p=()=>$a.hide(g),C=x=>{if(g5(t)&&x.preventDefault(),Bz(t,x)||h5(t))return;const _=x5(t,x),D=()=>{const F=S5(t,x),V=t.ui.registry.getAll(),X=p5(t);return Nz(V.contextMenus,X,F)};(d()?Mz:kz)(t,x,D,a,g,_)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(x,p),t.on("longpress contextmenu",C)})},uO=Z.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),fp=t=>s=>s.translate(-t.left,-t.top),$E=t=>s=>s.translate(t.left,t.top),Jg=t=>(s,a)=>An(t,(i,d)=>d(i),_o(s,a)),uv=(t,s,a)=>t.fold(Jg([$E(a),fp(s)]),Jg([fp(s)]),Jg([])),dv=(t,s,a)=>t.fold(Jg([$E(a)]),Jg([]),Jg([$E(s)])),E5=(t,s,a)=>t.fold(Jg([]),Jg([fp(a)]),Jg([$E(s),fp(a)])),$z=(t,s,a,i,d,g)=>{const p=dv(t,d,g),C=dv(s,d,g);return Math.abs(p.left-C.left)<=a&&Math.abs(p.top-C.top)<=i},Fz=(t,s,a,i,d,g)=>{const p=dv(t,d,g),C=dv(s,d,g),x=Math.abs(p.left-C.left),_=Math.abs(p.top-C.top);return _o(x,_)},k5=(t,s,a)=>{const i=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-a.left+"px"),top:A.some(g-a.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...i}},Iz=(t,s,a)=>t.fold((i,d)=>FE(i+s,d+a),(i,d)=>gp(i+s,d+a),(i,d)=>X1(i+s,d+a)),dO=(t,s,a,i)=>{const d=(g,p)=>(C,x)=>{const _=g(s,a,i);return p(C.getOr(_.left),x.getOr(_.top))};return t.fold(d(E5,FE),d(dv,gp),d(uv,X1))},FE=uO.offset,gp=uO.absolute,X1=uO.fixed,_5=(t,s)=>{const a=Qr(t,s);return _n(a)?NaN:parseInt(a,10)},Lz=(t,s)=>{const a=t.element,i=_5(a,s.leftAttr),d=_5(a,s.topAttr);return isNaN(i)||isNaN(d)?A.none():A.some(_o(i,d))},Hz=(t,s,a)=>{const i=t.element;zn(i,s.leftAttr,a.left+"px"),zn(i,s.topAttr,a.top+"px")},Vz=(t,s)=>{const a=t.element;ne(a,s.leftAttr),ne(a,s.topAttr)},zz=(t,s,a,i)=>Lz(t,s).fold(()=>a,d=>X1(d.left+i.left,d.top+i.top)),Uz=(t,s,a,i,d,g)=>{const p=zz(t,s,a,i),C=s.mustSnap?Zz(t,s,p,d,g):jz(t,s,p,d,g),x=uv(p,d,g);return Hz(t,s,x),C.fold(()=>({coord:X1(x.left,x.top),extra:A.none()}),_=>({coord:_.output,extra:_.extra}))},Wz=(t,s)=>{Vz(t,s)},iw=(t,s,a,i)=>Ss(t,d=>{const g=d.sensor;return $z(s,g,d.range.left,d.range.top,a,i)?A.some({output:dO(d.output,s,a,i),extra:d.extra}):A.none()}),Zz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return iw(g,a,i,d).orThunk(()=>An(g,(x,_)=>{const D=_.sensor,B=Fz(a,D,_.range.left,_.range.top,i,d);return x.deltas.fold(()=>({deltas:A.some(B),snap:A.some(_)}),F=>{const V=(B.left+B.top)/2,X=(F.left+F.top)/2;return V<=X?{deltas:A.some(B),snap:A.some(_)}:x})},{deltas:A.none(),snap:A.none()}).snap.map(x=>({output:dO(x.output,a,i,d),extra:x.extra})))},jz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return iw(g,a,i,d)},Gz=(t,s,a)=>({coord:dO(t.output,t.output,s,a),extra:t.extra});var qz=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ra(t.element),p=Fc(g),C=mP(d),x=Gz(i,p,C),_=k5(x.coord,p,C);ea(d,_)}}});const mO="data-initial-z-index",A5=t=>{ya(t.element).filter(Rn).each(s=>{P(s,mO).fold(()=>xo(s,"z-index"),a=>Kt(s,"z-index",a)),ne(s,mO)})},Kz=t=>{ya(t.element).filter(Rn).each(s=>{gr(s,"z-index").each(a=>{zn(s,mO,a)}),Kt(s,"z-index",et(t.element,"z-index"))})},O5=(t,s)=>{t.getSystem().addToGui(s),Kz(s)},Yz=t=>{A5(t),t.getSystem().removeFromGui(t)},D5=(t,s,a)=>t.getSystem().build(Ud.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var Xz=Hc("snaps",[Je("getSnapPoints"),Ee("onSensor"),Je("leftAttr"),Je("topAttr"),_e("lazyViewport",ge),_e("mustSnap",!1)]);const lw=[_e("useFixed",Ln),Je("blockerClass"),_e("getTarget",ht),_e("onDrag",K),_e("repositionTarget",!0),_e("onDrop",K),Pa("getBounds",ge),Xz],R5=t=>Dr(gr(t,"left"),gr(t,"top"),gr(t,"position"),(s,a,i)=>(i==="fixed"?X1:FE)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Ns(t);return gp(s.left,s.top)}),Jz=(t,s,a,i,d)=>{const g=d.bounds,p=dv(s,a,i),C=Xi(p.left,g.x,g.x+g.width-d.width),x=Xi(p.top,g.y,g.y+g.height-d.height),_=gp(C,x);return s.fold(()=>{const D=E5(_,a,i);return FE(D.left,D.top)},G(_),()=>{const D=uv(_,a,i);return X1(D.left,D.top)})},Qz=(t,s,a,i,d,g,p)=>{const C=s.fold(()=>{const x=Iz(a,g.left,g.top),_=uv(x,i,d);return X1(_.left,_.top)},x=>{const _=Uz(t,x,a,g,i,d);return _.extra.each(D=>{x.onSensor(t,D)}),_.coord});return Jz(t,C,i,d,p)},eU=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Ra(t.element),p=Fc(g),C=mP(d),x=R5(d),_=Qz(t,s.snaps,x,p,C,i,a),D=k5(_,p,C);ea(d,D)}s.onDrag(t,d,i)},M5=(t,s)=>({bounds:t.getBounds(),height:tn(s.element),width:hr(s.element)}),fO=(t,s,a,i,d)=>{const g=a.update(i,d),p=a.getStartData().getOrThunk(()=>M5(s,t));g.each(C=>{eU(t,s,p,C)})},N5=(t,s,a,i)=>{s.each(Yz),a.snaps.each(g=>{Wz(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},gO=t=>(s,a)=>{const i=d=>{a.setStartData(M5(s,d))};return cr([st(Bv(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},tU=t=>cr([st(ua(),t.forceDrop),st(Pu(),t.drop),st(bi(),(s,a)=>{t.move(a.event)}),st(sg(),t.delayDrop)]);var nU=Object.freeze({__proto__:null,getData:t=>A.from(_o(t.x,t.y)),getDelta:(t,s)=>_o(s.left-t.left,s.top-t.top)});const B5=(t,s,a)=>[st(ua(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>N5(i,A.some(_),t,s),C=GM(p,200),x={drop:p,delayDrop:C.schedule,forceDrop:p,move:B=>{C.cancel(),fO(i,t,s,nU,B)}},_=D5(i,t.blockerClass,tU(x));(()=>{a(i),O5(i,_)})()})],oU=[...lw,ir("dragger",{handlers:gO(B5)})],sU=t=>cr([st(cu(),t.forceDrop),st(Gs(),t.drop),st(qc(),t.drop),st(Ko(),(s,a)=>{t.move(a.event)})]),rU=t=>{const s=t[0];return A.some(_o(s.clientX,s.clientY))};var P5=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?rU(a):A.none()},getDelta:(t,s)=>_o(s.left-t.left,s.top-t.top)});const $5=(t,s,a)=>{const i=Qs(),d=g=>{N5(g,i.get(),t,s),i.clear()};return[st(cu(),(g,p)=>{p.stop();const C=()=>d(g),x={drop:C,delayDrop:K,forceDrop:C,move:B=>{fO(g,t,s,P5,B)}},_=D5(g,t.blockerClass,sU(x));i.set(_),(()=>{a(g),O5(g,_)})()}),st(Ko(),(g,p)=>{p.stop(),fO(g,t,s,P5,p.event)}),st(Gs(),(g,p)=>{p.stop(),d(g)}),st(qc(),d)]},aU=[...lw,ir("dragger",{handlers:gO($5)})],cU=(t,s,a)=>[...B5(t,s,a),...$5(t,s,a)],F5=[...lw,ir("dragger",{handlers:gO(cU)})];var hO=Object.freeze({__proto__:null,mouse:oU,touch:aU,mouseOrTouch:F5}),lU=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const a=()=>{t=A.none(),s=A.none()},i=(x,_)=>{const D=t.map(B=>x.getDelta(B,_));return t=A.some(_),D},d=(x,_)=>x.getData(_).bind(D=>i(x,D)),g=x=>{s=A.some(x)},p=()=>s,C=G({});return Ii({readState:C,reset:a,update:d,getStartData:p,setStartData:g})}});const J1=lS({branchKey:"mode",branches:hO,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:lU,apis:qz}),bO=40,IE=bO/2,I5=(t,s,a,i,d,g)=>t.fold(()=>J1.snap({sensor:gp(a-IE,i-IE),range:_o(d,g),output:gp(A.some(a),A.some(i)),extra:{td:s}}),p=>{const C=a-IE,x=i-IE,_=bO,D=bO,B=p.element.dom.getBoundingClientRect();return J1.snap({sensor:gp(C,x),range:_o(_,D),output:gp(A.some(a-B.width/2),A.some(i-B.height/2)),extra:{td:s}})}),hp=(t,s,a)=>{const i=(d,g)=>d.exists(p=>ms(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},vO=t=>No(Jc.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:yt([J1.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),EC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),uU=(t,s)=>{const a=S([]),i=S([]),d=S(!1),g=Qs(),p=Qs(),C=Bt=>{const cn=M(Bt);return I5(V.getOpt(s),Bt,cn.x,cn.y,cn.width,cn.height)},x=()=>Se(a.get(),Bt=>C(Bt)),_=Bt=>{const cn=M(Bt);return I5(X.getOpt(s),Bt,cn.right,cn.bottom,cn.width,cn.height)},D=()=>Se(i.get(),Bt=>_(Bt)),B=hp(x,g,Bt=>{p.get().each(cn=>{t.dispatch("TableSelectorChange",{start:Bt,finish:cn})})}),F=hp(D,p,Bt=>{g.get().each(cn=>{t.dispatch("TableSelectorChange",{start:cn,finish:Bt})})}),V=vO(B),X=vO(F),ue=Yc(V.asSpec()),Oe=Yc(X.asSpec()),Ce=(Bt,cn,Ao,Cn)=>{const Eo=cn.dom.getBoundingClientRect();xo(Bt.element,"display");const Gn=ic(be.fromDom(t.getBody())).dom.innerHeight,wo=Ao(Eo),Fn=Cn(Eo,Gn);(wo||Fn)&&Kt(Bt.element,"display","none")},Ae=(Bt,cn,Ao,Cn)=>{const Eo=Ao(cn);J1.snapTo(Bt,Eo),Ce(Bt,cn,Fn=>Fn[Cn]<0,(Fn,_s)=>Fn[Cn]>_s)},Pe=Bt=>Ae(ue,Bt,C,"top"),He=()=>g.get().each(Pe),kt=Bt=>Ae(Oe,Bt,_,"bottom"),at=()=>p.get().each(kt);Tc().deviceType.isTouch()&&(t.on("TableSelectionChange",Bt=>{d.get()||(Nd(s,ue),Nd(s,Oe),d.set(!0)),g.set(Bt.start),p.set(Bt.finish),Bt.otherCells.each(cn=>{a.set(cn.upOrLeftCells),i.set(cn.downOrRightCells),Pe(Bt.start),kt(Bt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{He(),at()}),t.on("TableSelectionClear",()=>{d.get()&&(Bd(ue),Bd(Oe),d.set(!1)),g.clear(),p.clear()}))};var dU=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const mU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",fU=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(_,D,B)=>Jc.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B,"aria-level":B+1}},components:[kr(_)],action:F=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:yt([zd.button(a.isDisabled),bc()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[kr(` ${d} `)]}),C=_=>An(_,(D,B,F)=>{const V=g(B.name,B.element,F);return F===0?D.concat([V]):D.concat([p(),V])},[]),x=_=>{const D=[];let B=_.length;for(;B-- >0;){const F=_[B];if(F.nodeType===1&&!mU(F)){const V=iT(t,F);if(V.isDefaultPrevented()||D.push({name:V.name,element:F}),V.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:yt([yn.config({mode:"flow",selector:"div[role=button]"}),Un.config({disabled:a.isDisabled}),bc(),oa.config({}),Jn.config({}),ro("elementPathEvents",[Zr((_,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>yn.focusIn(_)),t.on("NodeChange",B=>{const F=x(B.parents),V=F.length>0?C(F):[];Jn.set(_,V)})})])]),components:[]}};var Q1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(Q1||(Q1={}));const gU=(t,s,a,i,d)=>{const g={height:TE(i+s.top,K2(t),Mx(t))};return a===Q1.Both&&(g.width=TE(d+s.left,Dx(t),Rx(t))),g},L5=(t,s,a)=>{const i=be.fromDom(t.getContainer()),d=gU(t,s,a,ze(i),wa(i));ts(d,(g,p)=>{Nn(g)&&Kt(i,p,K4(g))}),m6(t)},hU=t=>{const s=sR(t);return s===!1?Q1.None:s==="both"?Q1.Both:Q1.Vertical},fv=(t,s,a,i)=>{const g=_o(a*20,i*20);return L5(t,g,s),A.some(!0)},uw=(t,s)=>{const a=hU(t);return a===Q1.None?A.none():A.some(Gu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[J1.config({mode:"mouse",repositionTarget:!1,onDrag:(i,d,g)=>L5(t,g,a),blockerClass:"tox-blocker"}),yn.config({mode:"special",onLeft:()=>fv(t,a,-1,0),onRight:()=>fv(t,a,1,0),onUp:()=>fv(t,a,0,-1),onDown:()=>fv(t,a,0,1)}),oa.config({}),Bn.config({})]},s.icons))},yO=(t,s)=>{const a=(i,d,g)=>Jn.set(i,[kr(s.translate(["{0} "+g,d[g]]))]);return Jc.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:yt([zd.button(s.isDisabled),bc(),oa.config({}),Jn.config({}),Ft.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ro("wordcount-events",[Fu(i=>{const d=Ft.getValue(i),g=d.mode==="words"?"characters":"words";Ft.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Zr(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Ft.getValue(i);Ft.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[qs()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},LE=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Cu.translate(["Powered by {0}","Tiny"])},innerHtml:dU.trim()},behaviours:yt([Bn.config({})])}]}),i=()=>{const g=[];return nR(t)&&g.push(fU(t,{},s)),t.hasPlugin("wordcount")&&g.push(yO(t,s)),oR(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=i(),p=uw(t,s);return g.concat(p.toArray())})()}},pp=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),HE=(t,s)=>{const a=t.inline,i=a?WV:IV,d=$0(t)?GH:dP,g=ZV(),p=Qs(),C=Qs(),x=Qs(),F=Tc().deviceType.isTouch()?["tox-platform-touch"]:[],V=eA(t),X=N0(t),ue=No({dom:{tag:"div",classes:["tox-anchorbar"]}}),Oe=()=>g.mainUi.get().map(jt=>jt.outerContainer).bind(yr.getHeader),Ce=()=>St.fromOption(g.dialogUi.get().map(jt=>jt.sink),"UI has not been rendered"),Ae=()=>St.fromOption(g.popupUi.get().map(jt=>jt.sink),"(popup) UI has not been rendered"),Pe=g.lazyGetInOuterOrDie("anchor bar",ue.getOpt),He=g.lazyGetInOuterOrDie("toolbar",yr.getToolbar),kt=g.lazyGetInOuterOrDie("throbber",yr.getThrobber),at=wH({popup:Ae,dialog:Ce},t,Pe),Bt=()=>{const jt={attributes:{[Kb]:V?Dd.BottomToTop:Dd.TopToBottom}},Pn=yr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:at.popup,onEscape:()=>{t.focus()}}),mo=yr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:at.popup.shared.getSink,providers:at.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:qE=>{f6(t,qE)},type:X,lazyToolbar:He,lazyHeader:()=>Oe().getOrDie("Could not find header element"),...jt}),zo=yr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:at.popup.shared.providers,onEscape:()=>{t.focus()},type:X}),Ia=P0(t),ws=B0(t),Ui=_f(t),ra=aR(t),od=cn(),em=Ia||ws||Ui,th=()=>Ia?[zo]:ws?[mo]:[],bw=ra?[od,Pn]:[Pn];return yr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(em?[]:["tox-editor-header--empty"]),...jt},components:Ge([Ui?bw:[],th(),E1(t)?[]:[ue.asSpec()]]),sticky:$0(t),editor:t,sharedBackstage:at.popup.shared})},cn=()=>yr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ao=()=>{const jt=yr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Pn=yr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[jt,Pn]}},Cn=()=>{const jt=J2(t),Pn=ms(rr(),jt)&&et(jt,"display")==="grid",mo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(F),attributes:{...Cu.isRtl()?{dir:"rtl"}:{}}},behaviours:yt([Yr.config({useFixed:()=>d.isDocked(Oe)})])},zo={dom:{styles:{width:document.body.clientWidth+"px"}},events:cr([st(dm(),Ui=>{Kt(Ui.element,"width",document.body.clientWidth+"px")})])},Ia=Yc(js(mo,Pn?zo:{})),ws=t3(Ia);return C.set(ws),{sink:Ia,mothership:ws}},Eo=()=>{const jt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(F),attributes:{...Cu.isRtl()?{dir:"rtl"}:{}}},behaviours:yt([Yr.config({useFixed:()=>d.isDocked(Oe),getBounds:()=>s.getPopupSinkBounds()})])},Pn=Yc(jt),mo=t3(Pn);return x.set(mo),{sink:Pn,mothership:mo}},Gn=()=>{const jt=Bt(),Pn=Ao(),mo=yr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:at.popup}),zo=yr.parts.viewWrapper({backstage:at.popup}),Ia=tR(t)&&!a?A.some(LE(t,at.popup.shared.providers)):A.none(),ws=Ge([V?[]:[jt],a?[]:[Pn],V?[jt]:[]]),Ui=yr.parts.editorContainer({components:Ge([ws,a?[]:Ia.toArray()])}),ra=nA(t),od={role:"application",...Cu.isRtl()?{dir:"rtl"}:{},...ra?{"aria-hidden":"true"}:{}},em=Yc(yr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(V?["tox-tinymce--toolbar-bottom"]:[]).concat(F),styles:{visibility:"hidden",...ra?{opacity:"0",border:"0"}:{}},attributes:od},components:[Ui,...a?[]:[zo],mo],behaviours:yt([bc(),Un.config({disableClass:"tox-tinymce--disabled"}),yn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),th=t3(em);return p.set(th),{mothership:th,outerContainer:em}},wo=jt=>{const Pn=K4(HV(t)),mo=K4(VV(t));return t.inline||(sd("div","width",mo)&&Kt(jt.element,"width",mo),sd("div","height",Pn)?Kt(jt.element,"height",Pn):Kt(jt.element,"height","400px")),Pn},Fn=jt=>{t.addShortcut("alt+F9","focus menubar",()=>{yr.focusMenubar(jt)}),t.addShortcut("alt+F10","focus toolbar",()=>{yr.focusToolbar(jt)}),t.addCommand("ToggleToolbarDrawer",(Pn,mo)=>{mo!=null&&mo.skipFocus?yr.toggleToolbarDrawerWithoutFocusing(jt):yr.toggleToolbarDrawer(jt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>yr.isToolbarDrawerToggled(jt))},_s=jt=>{const{mainUi:Pn,popupUi:mo,uiMotherships:zo}=jt;ls(Nx(t),(rb,OO)=>{t.ui.registry.addGroupToolbarButton(OO,rb)});const{buttons:Ia,menuItems:ws,contextToolbars:Ui,sidebars:ra,views:od}=t.ui.registry.getAll(),em=Q_(t),th={menuItems:ws,menus:F0(t),menubar:KD(t),toolbar:em.getOrThunk(()=>$x(t)),allowToolbarGroups:X===wu.floating,buttons:Ia,sidebar:ra,views:od};Fn(Pn.outerContainer),SH(t,Pn.mothership,zo),d.setup(t,at.popup.shared,Oe),rO(t,at.popup),T5(t,at.popup.shared.getSink,at.popup),e9(t),g9(t,kt,at.popup.shared),tz(t,Ui,mo.sink,{backstage:at.popup}),uU(t,mo.sink);const bw=t.getElement(),qE=wo(Pn.outerContainer),vv={targetNode:bw,height:qE};return i.render(t,jt,th,at.popup,vv)},vt=jt=>(x.set(jt.mothership),jt),an=()=>{const jt=Gn(),Pn=Cn(),mo=Qh(t)?Eo():vt(Pn);g.dialogUi.set(Pn),g.popupUi.set(mo),g.mainUi.set(jt);const zo={popupUi:mo,dialogUi:Pn,mainUi:jt,uiMotherships:g.getUiMotherships()};return _s(zo)};return{popups:{backstage:at.popup,getMothership:()=>pp("popups",x)},dialogs:{backstage:at.dialog,getMothership:()=>pp("dialogs",C)},renderUI:an}},pU=(t,s)=>{const a=A.from(Qr(t,"id")).fold(()=>{const i=nn("dialog-describe");return zn(s,"id",i),i},ht);zn(t,"aria-describedby",a)},H5=(t,s)=>{const a=P(t,"id").fold(()=>{const i=nn("dialog-label");return zn(s,"id",i),i},ht);zn(t,"aria-labelledby",a)},V5=G([Je("lazySink"),Cs("dragBlockClass"),Pa("getBounds",ge),_e("useTabstopAt",Zt),_e("firstTabstop",0),_e("eventOrder",{}),pc("modalBehaviours",[yn]),_r("onExecute"),ay("onEscape")]),VE={sketch:ht},bU=G([Hl({name:"draghandle",overrides:(t,s)=>({behaviours:yt([J1.config({mode:"mouse",getTarget:a=>uu(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),oc({schema:[Je("dom")],name:"title"}),oc({factory:VE,schema:[Je("dom")],name:"close"}),oc({factory:VE,schema:[Je("dom")],name:"body"}),Hl({factory:VE,schema:[Je("dom")],name:"footer"}),bu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[_e("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),_e("components",[])],name:"blocker"})]),vU=(t,s,a,i)=>{const d=Qs(),g=V=>{d.set(V);const X=t.lazySink(V).getOrDie(),ue=i.blocker(),Oe=X.getSystem().build({...ue,components:ue.components.concat([Li(V)]),behaviours:yt([Bn.config({}),ro("dialog-blocker-events",[iu(sf(),()=>{yn.focusIn(V)})])])});Nd(X,Oe),yn.focusIn(V)},p=V=>{d.clear(),ya(V.element).each(X=>{V.getSystem().getByDom(X).each(ue=>{Bd(ue)})})},C=V=>Id(V,t,"body"),x=V=>Id(V,t,"footer"),_=(V,X)=>{lp.block(V,X)},D=V=>{lp.unblock(V)},B=nn("modal-events"),F={...t.eventOrder,[Td()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:C,getFooter:x,setIdle:D,setBusy:_},eventOrder:F,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Sr(t.modalBehaviours,[Jn.config({}),yn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),lp.config({getRoot:d.get}),ro(B,[Zr(V=>{H5(V.element,Id(V,t,"title").element),pU(V.element,Id(V,t,"body").element)})])])}},vc=ma({name:"ModalDialog",configFields:V5(),partFields:bU(),factory:vU,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),z5=vn([Fa,gA].concat(np)),U5=ef,dw=[yA("button"),Hd,Ni("align","end",["start","end"]),sC,Vd,Dl("buttonType",["primary","secondary"])],W5=[...dw,Wg],CO=[Ol("type",["submit","cancel","custom"]),...W5],yU=[Ol("type",["menu"]),Zg,Gx,Hd,hi("items",z5),...dw],Z5=[...dw,Ol("type",["togglebutton"]),qr("tooltip"),jx,Zg,Qa("active",!1)],CU=ia("type",{submit:CO,cancel:CO,custom:CO,menu:yU,togglebutton:Z5}),wU=[Fa,Wg,Ol("level",["info","warn","error","success"]),jx,_e("url","")],SU=vn(wU),wO=t=>[Fa,t],SO=[Fa,Wg,Vd,yA("button"),Hd,OR,Dl("buttonType",["primary","secondary","toolbar"]),sC],xU=vn(SO),eb=[Fa,gA],zm=eb.concat([bA]),TU=eb.concat([ep,Vd]),j5=vn(TU),EU=ef,kU=zm.concat([vA("auto")]),tb=vn(kU),G5=fh([I0,Wg,jx]),_U=zm.concat([pi("storageKey","default")]),zE=vn(_U),gv=Wr,q5=vn(zm),UE=Wr,Sl=eb.concat([pi("tag","textarea"),qr("scriptId"),qr("scriptUrl"),Av("settings",void 0)]),WE=eb.concat([pi("tag","textarea"),dl("init")]),K5=vd(t=>Bs("customeditor.old",kc(WE),t).orThunk(()=>Bs("customeditor.new",kc(Sl),t))),Y5=Wr,AU=vn(zm),bp=tf(),uZ=t=>[Fa,hh("columns"),t],OU=[Fa,qr("html"),Ni("presets","presentation",["presentation","document"])],X5=vn(OU),hv=zm.concat([Qa("sandboxed",!0),Qa("transparent",!0)]),ZE=vn(hv),J5=Wr,DU=vn(eb.concat([Lc("height")])),RU=vn([qr("url"),ng("zoom"),ng("cachedWidth"),ng("cachedHeight")]),MU=zm.concat([Lc("inputMode"),Lc("placeholder"),Qa("maximized",!1),Vd]),NU=vn(MU),pv=Wr,dZ=t=>[Fa,ep,t],BU=[Wg,I0],PU=[Wg,hi("items",yd("items",()=>$U))],$U=Jf([vn(BU),vn(PU)]),FU=zm.concat([hi("items",$U),Vd]),IU=vn(FU),mw=Wr,LU=zm.concat([pb("items",[Wg,I0]),ru("size",1),Vd]),HU=vn(LU),Q5=Wr,VU=zm.concat([Qa("constrain",!0),Vd]),mZ=vn(VU),e=vn([qr("width"),qr("height")]),n=eb.concat([ep,ru("min",0),ru("max",0)]),o=vn(n),r=gh,c=[Fa,hi("header",Wr),hi("cells",Ut(Wr))],u=vn(c),f=zm.concat([Lc("placeholder"),Qa("maximized",!1),Vd]),b=vn(f),y=Wr,E=[Ol("type",["directory","leaf"]),_R,qr("id"),su("menu",aE)],R=vn(E),L=E.concat([hi("children",yd("children",()=>Mi("type",{directory:Q,leaf:R})))]),Q=vn(L),te=Mi("type",{directory:Q,leaf:R}),j=[Fa,hi("items",te),Ac("onLeafAction")],ee=vn(j),ye=zm.concat([Ni("filetype","file",["image","media","file"]),Vd]),pe=vn(ye),we=vn([I0,O1]),De=t=>la("items","items",Sa(),Ut(vd(s=>Bs(`Checking item of ${t}`,Xe,s).fold(a=>St.error(nf(a)),a=>St.value(a))))),Xe=mh(()=>Mi("type",{alertbanner:SU,bar:vn(wO(De("bar"))),button:xU,checkbox:j5,colorinput:zE,colorpicker:q5,dropzone:AU,grid:vn(uZ(De("grid"))),iframe:ZE,input:NU,listbox:IU,selectbox:HU,sizeinput:mZ,slider:o,textarea:b,urlinput:pe,customeditor:K5,htmlpanel:X5,imagepreview:DU,collection:tb,label:vn(dZ(De("label"))),table:u,tree:ee,panel:xt})),Ot=[Fa,_e("classes",[]),hi("items",Xe)],xt=vn(Ot),Fe=[yA("tab"),_R,hi("items",Xe)],$e=[Fa,pb("tabs",Fe)],Gt=vn($e),gn=W5,On=CU,fo=vn([qr("title"),Ki("body",Mi("type",{panel:xt,tabpanel:Gt})),pi("size","normal"),hi("buttons",On),_e("initialData",{}),Pa("onAction",K),Pa("onChange",K),Pa("onSubmit",K),Pa("onClose",K),Pa("onCancel",K),Pa("onTabChange",K)]),Vo=t=>Bs("dialog",fo,t),Os=vn([Ol("type",["cancel","custom"]),...gn]),nr=vn([qr("title"),qr("url"),ng("height"),ng("width"),bb("buttons",Os),Pa("onAction",K),Pa("onCancel",K),Pa("onClose",K),Pa("onMessage",K)]),pa=t=>Bs("dialog",nr,t),zc=t=>Wt(t)?[t].concat(xe(Or(t),zc)):Oo(t)?xe(t,zc):[],yc=t=>Vt(t.type)&&Vt(t.name),Ct={checkbox:EU,colorinput:gv,colorpicker:UE,dropzone:bp,input:pv,iframe:J5,imagepreview:RU,selectbox:Q5,sizeinput:e,slider:r,listbox:mw,size:e,textarea:y,urlinput:we,customeditor:Y5,collection:G5,togglemenuitem:U5},dn=t=>A.from(Ct[t.type]),cs=t=>Dn(zc(t),yc),$t=t=>{const s=cs(t),a=xe(s,i=>dn(i).fold(()=>[],d=>[Ki(i.name,d)]));return vn(a)},Tn=t=>{var s;const a=Ts(Vo(t)),i=$t(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},kn={open:(t,s)=>{const a=Tn(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Ts(pa(s));return t(a)},redial:t=>Tn(t)};var Bo=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?uD:Tx)(i,p)})};return cr([st(ag(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;po(g.channels,p)&&a(i,g.data)}}),Zr((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),Mc=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Ar=[Je("channel"),Cs("renderComponents"),Cs("updateState"),Cs("initialData"),Qa("reuseDom",!0)],hs=Object.freeze({__proto__:null,init:()=>{const t=S(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Us=fc({fields:Ar,name:"reflecting",active:Bo,apis:Mc,state:hs}),or=t=>{const s=[],a={};return ts(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?St.error(s):St.value(a)},sa=(t,s,a)=>{const i=No(J0.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Se(t.items,g=>Q3(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:yt([yn.config({mode:"acyclic",useTabstopAt:Ze(MC)}),Gd.memento(i),ha.memento(i,{postprocess:d=>or(d).fold(g=>(console.error(g),{}),ht)})])}},ka=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Ex(t.action),behaviours:Sr(t.tabButtonBehaviours,[Bn.config({}),yn.config({mode:"execution",useSpace:!0,useEnter:!0}),Ft.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Fr=Ta({name:"TabButton",configFields:[_e("uid",void 0),Je("value"),la("dom","dom",bd(()=>({attributes:{role:"tab",id:nn("aria"),"aria-selected":"false"}})),Ri()),Cs("action"),_e("domModification",{}),pc("tabButtonBehaviours",[Bn,yn,Ft]),Je("view")],factory:ka}),Ka=G([Je("tabs"),Je("dom"),_e("clickToDismiss",!1),pc("tabbarBehaviours",[gs,yn]),Bl(["tabClass","selectedClass"])]),Ju=f1({factory:Fr,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{gs.dehighlight(i,d),bn(i,Pv(),{tabbar:i,button:d})},a=(i,d)=>{gs.highlight(i,d),bn(i,Ew(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=gs.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?K:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),ii=G([Ju]),Um=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Sr(t.tabbarBehaviours,[gs.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{zn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{zn(g.element,"aria-selected","false")}}),yn.config({mode:"flow",getInitial:d=>gs.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),ql=ma({name:"Tabbar",configFields:Ka(),partFields:ii(),factory:Um}),nb=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Sr(t.tabviewBehaviours,[Jn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),ob=Ta({name:"Tabview",configFields:[pc("tabviewBehaviours",[Jn])],factory:nb}),Wm=G([_e("selectFirst",!0),Ee("onChangeTab"),Ee("onDismissTab"),_e("tabs",[]),pc("tabSectionBehaviours",[])]),Jd=oc({factory:ql,schema:[Je("dom"),Nu("markers",[Je("tabClass"),Je("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),rc=oc({factory:ob,name:"tabview"}),Qu=G([Jd,rc]),Zm=(t,s,a,i)=>{const d=p=>{const C=Ft.getValue(p);er(p,t,"tabview").each(x=>{Ue(t.tabs,D=>D.value===C).each(D=>{const B=D.view();P(p.element,"id").each(F=>{zn(x.element,"aria-labelledby",F)}),Jn.set(x,B),t.onChangeTab(x,p,B)})})},g=(p,C)=>{er(p,t,"tabbar").each(x=>{C(x).each(gm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:h0(t.tabSectionBehaviours),events:cr(Ge([t.selectFirst?[Zr((p,C)=>{g(p,gs.getFirst)})]:[],[st(Ew(),(p,C)=>{const x=C.event.button;d(x)}),st(Pv(),(p,C)=>{const x=C.event.button;t.onDismissTab(p,x)})]])),apis:{getViewItems:p=>er(p,t,"tabview").map(C=>Jn.contents(C)).getOr([]),showTab:(p,C)=>{g(p,_=>{const D=gs.getCandidates(_);return Ue(D,F=>Ft.getValue(F)===C).filter(F=>!gs.isHighlighted(_,F))})}}}},zi=ma({name:"TabSection",configFields:Wm(),partFields:Qu(),factory:Zm,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),ed=(t,s,a)=>Se(t,(i,d)=>{Jn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Jn.set(a,[]),g.height}),zf=t=>Fs(ur(t,(s,a)=>s>a?-1:s<a?1:0)),Ei=(t,s,a)=>{const i=Zi(t).dom,d=uu(t,".tox-dialog-wrap").getOr(t),g=et(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const C=ze(s),_=s.dom.offsetLeft>=a.dom.offsetLeft+wa(a)?Math.max(ze(a),C):C,D=parseInt(et(t,"margin-top"),10)||0,B=parseInt(et(t,"margin-bottom"),10)||0,V=ze(t)+D+B-_;return p-V},Qg=(t,s)=>{Fs(t).each(a=>zi.showTab(s,a.value))},jm=(t,s)=>{Kt(t,"height",s+"px"),Kt(t,"flex-basis",s+"px")},Kl=(t,s,a)=>{uu(t,'[role="dialog"]').each(i=>{$r(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Kt(s,"height","0"),Kt(s,"flex-basis","0"),Math.min(g,Ei(i,s,d)))).each(g=>{jm(s,g)})})})},Uf=t=>$r(t,'[role="tabpanel"]'),fw=t=>{const s=Qs();return{extraEvents:[Zr(d=>{const g=d.element;Uf(g).each(p=>{Kt(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(C=>{const x=ed(t,p,C);zf(x).fold(s.clear,s.set)}),Kl(g,p,s),xo(p,"visibility"),Qg(t,d),requestAnimationFrame(()=>{Kl(g,p,s)})})}),st(dm(),d=>{const g=d.element;Uf(g).each(p=>{Kl(g,p,s)})}),st(aN,(d,g)=>{const p=d.element;Uf(p).each(C=>{const x=Ad(Le(C));Kt(C,"visibility","hidden");const _=gr(C,"height").map(F=>parseInt(F,10));xo(C,"height"),xo(C,"flex-basis");const D=C.dom.getBoundingClientRect().height;_.forall(F=>D>F)?(s.set(D),Kl(p,C,s)):_.each(F=>{jm(C,F)}),xo(C,"visibility"),x.each(fu)})})],selectFirst:!1}},jE="send-data-to-section",gw="send-data-to-view",TO=(t,s,a)=>{const i=S({}),d=_=>{const D=Ft.getValue(_),B=or(D).getOr({}),F=i.get(),V=js(F,B);i.set(V)},g=_=>{const D=i.get();Ft.setValue(_,D)},p=S(null),C=Se(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[kr(a.shared.providers.translate(_.title))],view:()=>[J0.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Se(_.items,B=>Q3(D,B,s,a)),formBehaviours:yt([yn.config({mode:"acyclic",useTabstopAt:Ze(MC)}),ro("TabView.form.events",[Zr(g),Fi(d)]),Pl.config({channels:Ps([{key:jE,value:{onReceive:d}},{key:gw,value:{onReceive:g}}])})])}))]})),x=fw(C);return zi.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,B)=>{const F=Ft.getValue(D);bn(_,rN,{name:F,oldName:p.get()}),p.set(F)},tabs:C,components:[zi.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[ql.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:yt([oa.config({})])}),zi.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:yt([ro("tabpanel",x.extraEvents),yn.config({mode:"acyclic"}),Ho.config({find:_=>Fs(zi.getViewItems(_))}),ha.withComp(A.none(),_=>(_.getSystem().broadcastOn([jE],{}),i.get()),(_,D)=>{i.set(D),_.getSystem().broadcastOn([gw],{})})])})},hw=nn("update-dialog"),EO=nn("update-title"),Qd=nn("update-body"),sb=nn("update-footer"),Re=nn("body-send-message"),Me=(t,s,a,i,d)=>{const g=x=>{const _=x.body;switch(_.type){case"tabpanel":return[TO(_,x.initialData,i)];default:return[sa(_,x.initialData,i)]}},p=(x,_)=>A.some({isTabPanel:()=>_.body.type==="tabpanel"}),C={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?C:{}}},components:[],behaviours:yt([Gd.childAt(0),Us.config({channel:`${Qd}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},Tt=(t,s,a,i,d)=>Me(t,s,A.some(a),i,d),gt=(t,s,a)=>{const i=Me(t,s,A.none(),a,!1);return vc.parts.body(i)},wn=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[qN({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:yt([oa.config({}),Bn.config({})])})]}],behaviours:yt([yn.config({mode:"acyclic",useTabstopAt:Ze(MC)})])};return vc.parts.body(s)};function $o(t){return $o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$o(t)}function lr(t,s){return lr=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},lr(t,s)}function xr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wf(t,s,a){return xr()?Wf=Reflect.construct:Wf=function(d,g,p){var C=[null];C.push.apply(C,g);var x=Function.bind.apply(d,C),_=new x;return p&&lr(_,p.prototype),_},Wf.apply(null,arguments)}function Yl(t){return eF(t)||tF(t)||zU(t)||Ve()}function eF(t){if(Array.isArray(t))return yo(t)}function tF(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zU(t,s){if(t){if(typeof t=="string")return yo(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return yo(t,s)}}function yo(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=t[a];return i}function Ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln=Object.hasOwnProperty,Kn=Object.setPrototypeOf,_a=Object.isFrozen,ku=Object.getPrototypeOf,xl=Object.getOwnPropertyDescriptor,Xr=Object.freeze,td=Object.seal,rl=Object.create,kO=typeof Reflect<"u"&&Reflect,GE=kO.apply,_O=kO.construct;GE||(GE=function(s,a,i){return s.apply(a,i)}),Xr||(Xr=function(s){return s}),td||(td=function(s){return s}),_O||(_O=function(s,a){return Wf(s,Yl(a))});var fZ=eh(Array.prototype.forEach),uj=eh(Array.prototype.pop),AO=eh(Array.prototype.push),nF=eh(String.prototype.toLowerCase),dj=eh(String.prototype.match),bv=eh(String.prototype.replace),mj=eh(String.prototype.indexOf),fj=eh(String.prototype.trim),nd=eh(RegExp.prototype.test),UU=gj(TypeError);function eh(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return GE(t,s,i)}}function gj(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return _O(t,a)}}function Cr(t,s){Kn&&Kn(t,null);for(var a=s.length;a--;){var i=s[a];if(typeof i=="string"){var d=nF(i);d!==i&&(_a(s)||(s[a]=d),i=d)}t[i]=!0}return t}function pw(t){var s=rl(null),a;for(a in t)GE(ln,t,[a])&&(s[a]=t[a]);return s}function oF(t,s){for(;t!==null;){var a=xl(t,s);if(a){if(a.get)return eh(a.get);if(typeof a.value=="function")return eh(a.value)}t=ku(t)}function i(d){return console.warn("fallback value for",d),null}return i}var gZ=Xr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),WU=Xr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ZU=Xr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),hj=Xr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jU=Xr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),pj=Xr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hZ=Xr(["#text"]),pZ=Xr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),GU=Xr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bZ=Xr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sF=Xr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bj=td(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vj=td(/<%[\w\W]*|[\w\W]*%>/gm),yj=td(/^data-[\-\w.\u00B7-\uFFFF]/),Cj=td(/^aria-[\-\w]+$/),wj=td(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Sj=td(/^(?:\w+script|data):/i),xj=td(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Tj=td(/^html$/i),Ej=function(){return typeof window>"u"?null:window},kj=function(s,a){if($o(s)!=="object"||typeof s.createPolicy!="function")return null;var i=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(i=a.currentScript.getAttribute(d));var g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML:function(C){return C}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function vZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ej(),s=function(We){return vZ(We)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,i=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,C=t.Element,x=t.NodeFilter,_=t.NamedNodeMap,D=_===void 0?t.NamedNodeMap||t.MozNamedAttrMap:_,B=t.HTMLFormElement,F=t.DOMParser,V=t.trustedTypes,X=C.prototype,ue=oF(X,"cloneNode"),Oe=oF(X,"nextSibling"),Ce=oF(X,"childNodes"),Ae=oF(X,"parentNode");if(typeof g=="function"){var Pe=i.createElement("template");Pe.content&&Pe.content.ownerDocument&&(i=Pe.content.ownerDocument)}var He=kj(V,a),kt=He?He.createHTML(""):"",at=i,Bt=at.implementation,cn=at.createNodeIterator,Ao=at.createDocumentFragment,Cn=at.getElementsByTagName,Eo=a.importNode,Gn={};try{Gn=pw(i).documentMode?i.documentMode:{}}catch{}var wo={};s.isSupported=typeof Ae=="function"&&Bt&&typeof Bt.createHTMLDocument<"u"&&Gn!==9;var Fn=bj,_s=vj,vt=yj,an=Cj,jt=Sj,Pn=xj,mo=wj,zo=null,Ia=Cr({},[].concat(Yl(gZ),Yl(WU),Yl(ZU),Yl(jU),Yl(hZ))),ws=null,Ui=Cr({},[].concat(Yl(pZ),Yl(GU),Yl(bZ),Yl(sF))),ra=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),od=null,em=null,th=!0,bw=!0,qE=!1,vv=!1,rb=!1,OO=!1,JU=!1,KE=!1,rF=!1,aF=!1,LZ=!0,QU=!0,DO=!1,YE={},XE=null,HZ=Cr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),VZ=null,zZ=Cr({},["audio","video","img","source","image","track"]),eW=null,UZ=Cr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tW="http://www.w3.org/1998/Math/MathML",nW="http://www.w3.org/2000/svg",yv="http://www.w3.org/1999/xhtml",cF=yv,oW=!1,JE,Qj=["application/xhtml+xml","text/html"],eG="text/html",vw,QE=null,tG=i.createElement("form"),WZ=function(We){return We instanceof RegExp||We instanceof Function},sW=function(We){QE&&QE===We||((!We||$o(We)!=="object")&&(We={}),We=pw(We),zo="ALLOWED_TAGS"in We?Cr({},We.ALLOWED_TAGS):Ia,ws="ALLOWED_ATTR"in We?Cr({},We.ALLOWED_ATTR):Ui,eW="ADD_URI_SAFE_ATTR"in We?Cr(pw(UZ),We.ADD_URI_SAFE_ATTR):UZ,VZ="ADD_DATA_URI_TAGS"in We?Cr(pw(zZ),We.ADD_DATA_URI_TAGS):zZ,XE="FORBID_CONTENTS"in We?Cr({},We.FORBID_CONTENTS):HZ,od="FORBID_TAGS"in We?Cr({},We.FORBID_TAGS):{},em="FORBID_ATTR"in We?Cr({},We.FORBID_ATTR):{},YE="USE_PROFILES"in We?We.USE_PROFILES:!1,th=We.ALLOW_ARIA_ATTR!==!1,bw=We.ALLOW_DATA_ATTR!==!1,qE=We.ALLOW_UNKNOWN_PROTOCOLS||!1,vv=We.SAFE_FOR_TEMPLATES||!1,rb=We.WHOLE_DOCUMENT||!1,KE=We.RETURN_DOM||!1,rF=We.RETURN_DOM_FRAGMENT||!1,aF=We.RETURN_TRUSTED_TYPE||!1,JU=We.FORCE_BODY||!1,LZ=We.SANITIZE_DOM!==!1,QU=We.KEEP_CONTENT!==!1,DO=We.IN_PLACE||!1,mo=We.ALLOWED_URI_REGEXP||mo,cF=We.NAMESPACE||yv,We.CUSTOM_ELEMENT_HANDLING&&WZ(We.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ra.tagNameCheck=We.CUSTOM_ELEMENT_HANDLING.tagNameCheck),We.CUSTOM_ELEMENT_HANDLING&&WZ(We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ra.attributeNameCheck=We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),We.CUSTOM_ELEMENT_HANDLING&&typeof We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ra.allowCustomizedBuiltInElements=We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),JE=Qj.indexOf(We.PARSER_MEDIA_TYPE)===-1?JE=eG:JE=We.PARSER_MEDIA_TYPE,vw=JE==="application/xhtml+xml"?function(mn){return mn}:nF,vv&&(bw=!1),rF&&(KE=!0),YE&&(zo=Cr({},Yl(hZ)),ws=[],YE.html===!0&&(Cr(zo,gZ),Cr(ws,pZ)),YE.svg===!0&&(Cr(zo,WU),Cr(ws,GU),Cr(ws,sF)),YE.svgFilters===!0&&(Cr(zo,ZU),Cr(ws,GU),Cr(ws,sF)),YE.mathMl===!0&&(Cr(zo,jU),Cr(ws,bZ),Cr(ws,sF))),We.ADD_TAGS&&(zo===Ia&&(zo=pw(zo)),Cr(zo,We.ADD_TAGS)),We.ADD_ATTR&&(ws===Ui&&(ws=pw(ws)),Cr(ws,We.ADD_ATTR)),We.ADD_URI_SAFE_ATTR&&Cr(eW,We.ADD_URI_SAFE_ATTR),We.FORBID_CONTENTS&&(XE===HZ&&(XE=pw(XE)),Cr(XE,We.FORBID_CONTENTS)),QU&&(zo["#text"]=!0),rb&&Cr(zo,["html","head","body"]),zo.table&&(Cr(zo,["tbody"]),delete od.tbody),Xr&&Xr(We),QE=We)},ZZ=Cr({},["mi","mo","mn","ms","mtext"]),jZ=Cr({},["foreignobject","desc","title","annotation-xml"]),nG=Cr({},["title","style","font","a","script"]),iF=Cr({},WU);Cr(iF,ZU),Cr(iF,hj);var rW=Cr({},jU);Cr(rW,pj);var oG=function(We){var mn=Ae(We);(!mn||!mn.tagName)&&(mn={namespaceURI:yv,tagName:"template"});var co=nF(We.tagName),Ya=nF(mn.tagName);return We.namespaceURI===nW?mn.namespaceURI===yv?co==="svg":mn.namespaceURI===tW?co==="svg"&&(Ya==="annotation-xml"||ZZ[Ya]):!!iF[co]:We.namespaceURI===tW?mn.namespaceURI===yv?co==="math":mn.namespaceURI===nW?co==="math"&&jZ[Ya]:!!rW[co]:We.namespaceURI===yv?mn.namespaceURI===nW&&!jZ[Ya]||mn.namespaceURI===tW&&!ZZ[Ya]?!1:!rW[co]&&(nG[co]||!iF[co]):!1},ab=function(We){AO(s.removed,{element:We});try{We.parentNode.removeChild(We)}catch{try{We.outerHTML=kt}catch{We.remove()}}},lF=function(We,mn){try{AO(s.removed,{attribute:mn.getAttributeNode(We),from:mn})}catch{AO(s.removed,{attribute:null,from:mn})}if(mn.removeAttribute(We),We==="is"&&!ws[We])if(KE||rF)try{ab(mn)}catch{}else try{mn.setAttribute(We,"")}catch{}},GZ=function(We){var mn,co;if(JU)We="<remove></remove>"+We;else{var Ya=dj(We,/^[\r\n\t ]+/);co=Ya&&Ya[0]}JE==="application/xhtml+xml"&&(We='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+We+"</body></html>");var tm=He?He.createHTML(We):We;if(cF===yv)try{mn=new F().parseFromString(tm,JE)}catch{}if(!mn||!mn.documentElement){mn=Bt.createDocument(cF,"template",null);try{mn.documentElement.innerHTML=oW?"":tm}catch{}}var _u=mn.body||mn.documentElement;return We&&co&&_u.insertBefore(i.createTextNode(co),_u.childNodes[0]||null),cF===yv?Cn.call(mn,rb?"html":"body")[0]:rb?mn.documentElement:_u},qZ=function(We){return cn.call(We.ownerDocument||We,We,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},sG=function(We){return We instanceof B&&(typeof We.nodeName!="string"||typeof We.textContent!="string"||typeof We.removeChild!="function"||!(We.attributes instanceof D)||typeof We.removeAttribute!="function"||typeof We.setAttribute!="function"||typeof We.namespaceURI!="string"||typeof We.insertBefore!="function")},RO=function(We){return $o(p)==="object"?We instanceof p:We&&$o(We)==="object"&&typeof We.nodeType=="number"&&typeof We.nodeName=="string"},cb=function(We,mn,co){wo[We]&&fZ(wo[We],function(Ya){Ya.call(s,mn,co,QE)})},KZ=function(We){var mn;if(cb("beforeSanitizeElements",We,null),sG(We)||nd(/[\u0080-\uFFFF]/,We.nodeName))return ab(We),!0;var co=vw(We.nodeName);if(cb("uponSanitizeElement",We,{tagName:co,allowedTags:zo}),We.hasChildNodes()&&!RO(We.firstElementChild)&&(!RO(We.content)||!RO(We.content.firstElementChild))&&nd(/<[/\w]/g,We.innerHTML)&&nd(/<[/\w]/g,We.textContent)||co==="select"&&nd(/<template/i,We.innerHTML))return ab(We),!0;if(!zo[co]||od[co]){if(!od[co]&&XZ(co)&&(ra.tagNameCheck instanceof RegExp&&nd(ra.tagNameCheck,co)||ra.tagNameCheck instanceof Function&&ra.tagNameCheck(co)))return!1;if(QU&&!XE[co]){var Ya=Ae(We)||We.parentNode,tm=Ce(We)||We.childNodes;if(tm&&Ya)for(var _u=tm.length,Xl=_u-1;Xl>=0;--Xl)Ya.insertBefore(ue(tm[Xl],!0),Oe(We))}return ab(We),!0}return We instanceof C&&!oG(We)||(co==="noscript"||co==="noembed")&&nd(/<\/no(script|embed)/i,We.innerHTML)?(ab(We),!0):(vv&&We.nodeType===3&&(mn=We.textContent,mn=bv(mn,Fn," "),mn=bv(mn,_s," "),We.textContent!==mn&&(AO(s.removed,{element:We.cloneNode()}),We.textContent=mn)),cb("afterSanitizeElements",We,null),!1)},YZ=function(We,mn,co){if(LZ&&(mn==="id"||mn==="name")&&(co in i||co in tG))return!1;if(!(bw&&!em[mn]&&nd(vt,mn))){if(!(th&&nd(an,mn))){if(!ws[mn]||em[mn]){if(!(XZ(We)&&(ra.tagNameCheck instanceof RegExp&&nd(ra.tagNameCheck,We)||ra.tagNameCheck instanceof Function&&ra.tagNameCheck(We))&&(ra.attributeNameCheck instanceof RegExp&&nd(ra.attributeNameCheck,mn)||ra.attributeNameCheck instanceof Function&&ra.attributeNameCheck(mn))||mn==="is"&&ra.allowCustomizedBuiltInElements&&(ra.tagNameCheck instanceof RegExp&&nd(ra.tagNameCheck,co)||ra.tagNameCheck instanceof Function&&ra.tagNameCheck(co))))return!1}else if(!eW[mn]){if(!nd(mo,bv(co,Pn,""))){if(!((mn==="src"||mn==="xlink:href"||mn==="href")&&We!=="script"&&mj(co,"data:")===0&&VZ[We])){if(!(qE&&!nd(jt,bv(co,Pn,"")))){if(co)return!1}}}}}}return!0},XZ=function(We){return We.indexOf("-")>0},JZ=function(We){var mn,co,Ya,tm;cb("beforeSanitizeAttributes",We,null);var _u=We.attributes;if(_u){var Xl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ws};for(tm=_u.length;tm--;){mn=_u[tm];var uF=mn,Jl=uF.name,QZ=uF.namespaceURI;co=Jl==="value"?mn.value:fj(mn.value),Ya=vw(Jl);var aG=co;if(Xl.attrName=Ya,Xl.attrValue=co,Xl.keepAttr=!0,Xl.forceKeepAttr=void 0,cb("uponSanitizeAttribute",We,Xl),co=Xl.attrValue,!Xl.forceKeepAttr){if(!Xl.keepAttr){lF(Jl,We);continue}if(nd(/\/>/i,co)){lF(Jl,We);continue}vv&&(co=bv(co,Fn," "),co=bv(co,_s," "));var cG=vw(We.nodeName);if(!YZ(cG,Ya,co)){lF(Jl,We);continue}if(co!==aG)try{QZ?We.setAttributeNS(QZ,Jl,co):We.setAttribute(Jl,co)}catch{lF(Jl,We)}}}cb("afterSanitizeAttributes",We,null)}},rG=function Fo(We){var mn,co=qZ(We);for(cb("beforeSanitizeShadowDOM",We,null);mn=co.nextNode();)cb("uponSanitizeShadowNode",mn,null),!KZ(mn)&&(mn.content instanceof d&&Fo(mn.content),JZ(mn));cb("afterSanitizeShadowDOM",We,null)};return s.sanitize=function(Fo,We){var mn,co,Ya,tm,_u;if(oW=!Fo,oW&&(Fo="<!-->"),typeof Fo!="string"&&!RO(Fo)){if(typeof Fo.toString!="function")throw UU("toString is not a function");if(Fo=Fo.toString(),typeof Fo!="string")throw UU("dirty is not a string, aborting")}if(!s.isSupported){if($o(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Fo=="string")return t.toStaticHTML(Fo);if(RO(Fo))return t.toStaticHTML(Fo.outerHTML)}return Fo}if(OO||sW(We),s.removed=[],typeof Fo=="string"&&(DO=!1),DO){if(Fo.nodeName){var Xl=vw(Fo.nodeName);if(!zo[Xl]||od[Xl])throw UU("root node is forbidden and cannot be sanitized in-place")}}else if(Fo instanceof p)mn=GZ("<!---->"),co=mn.ownerDocument.importNode(Fo,!0),co.nodeType===1&&co.nodeName==="BODY"||co.nodeName==="HTML"?mn=co:mn.appendChild(co);else{if(!KE&&!vv&&!rb&&Fo.indexOf("<")===-1)return He&&aF?He.createHTML(Fo):Fo;if(mn=GZ(Fo),!mn)return KE?null:aF?kt:""}mn&&JU&&ab(mn.firstChild);for(var uF=qZ(DO?Fo:mn);Ya=uF.nextNode();)Ya.nodeType===3&&Ya===tm||KZ(Ya)||(Ya.content instanceof d&&rG(Ya.content),JZ(Ya),tm=Ya);if(tm=null,DO)return Fo;if(KE){if(rF)for(_u=Ao.call(mn.ownerDocument);mn.firstChild;)_u.appendChild(mn.firstChild);else _u=mn;return ws.shadowroot&&(_u=Eo.call(a,_u,!0)),_u}var Jl=rb?mn.outerHTML:mn.innerHTML;return rb&&zo["!doctype"]&&mn.ownerDocument&&mn.ownerDocument.doctype&&mn.ownerDocument.doctype.name&&nd(Tj,mn.ownerDocument.doctype.name)&&(Jl="<!DOCTYPE "+mn.ownerDocument.doctype.name+`>
`+Jl),vv&&(Jl=bv(Jl,Fn," "),Jl=bv(Jl,_s," ")),He&&aF?He.createHTML(Jl):Jl},s.setConfig=function(Fo){sW(Fo),OO=!0},s.clearConfig=function(){QE=null,OO=!1},s.isValidAttribute=function(Fo,We,mn){QE||sW({});var co=vw(Fo),Ya=vw(We);return YZ(co,Ya,mn)},s.addHook=function(Fo,We){typeof We=="function"&&(wo[Fo]=wo[Fo]||[],AO(wo[Fo],We))},s.removeHook=function(Fo){if(wo[Fo])return uj(wo[Fo])},s.removeHooks=function(Fo){wo[Fo]&&(wo[Fo]=[])},s.removeAllHooks=function(){wo={}},s}var _j=vZ();const Aj=t=>_j().sanitize(t),Oj=Ug.deviceType.isTouch(),yZ=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),CZ=(t,s)=>vc.parts.close(Jc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:yt([oa.config({})])})),wZ=()=>vc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),SZ=(t,s)=>vc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Xg(`<p>${Aj(s.translate(t))}</p>`)}]}]}),xZ=t=>vc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),TZ=(t,s)=>[Ud.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Ud.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],qU=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return vc.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!MC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Xg(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Oj?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:yt([Bn.config({}),ro("dialog-events",t.dialogEvents.concat([iu(sf(),(g,p)=>{yn.focusIn(g)})])),ro("scroll-lock",[Zr(()=>{$s(rr(),d)}),Fi(()=>{da(rr(),d)})]),...t.extraBehaviours]),eventOrder:{[qs()]:["dialog-events"],[Td()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[mm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},EZ=t=>Jc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:yt([oa.config({})]),components:[Gu("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{fs(s,F1)}}),kZ=(t,s,a,i)=>{const d=g=>[kr(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:yt([Us.config({channel:`${EO}-${s}`,initialData:t,renderComponents:d})])}},_Z=()=>({dom:Xg('<div class="tox-dialog__draghandle"></div>')}),Dj=(t,s,a,i)=>Ud.sketch({dom:Xg('<div class="tox-dialog__header"></div>'),components:[kZ(t,s,A.some(a),i),_Z(),EZ(i)],containerBehaviours:yt([J1.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>_d(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Rj=(t,s,a)=>{const i=vc.parts.title(kZ(t,s,A.none(),a)),d=vc.parts.draghandle(_Z()),g=vc.parts.close(EZ(a)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return Ud.sketch({dom:Xg('<div class="tox-dialog__header"></div>'),components:p})},AZ=(t,s,a)=>Rj({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),OZ=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:Xg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),DZ=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{vc.setBusy(t(),(d,g)=>OZ(i.message,g,s))},onUnblock:()=>{vc.setIdle(t())}}),RZ=(t,s,a,i)=>{const d=(g,p)=>A.some(p);return Yc(qU({...t,firstTabstop:1,lazySink:i.shared.getSink,extraBehaviours:[Us.config({channel:`${hw}-${t.id}`,updateState:d,initialData:s}),ha.memory({}),...t.extraBehaviours],onEscape:g=>{fs(g,F1)},dialogEvents:a,eventOrder:{[ag()]:[Us.name(),Pl.name()],[Td()]:["scroll-lock",Us.name(),"messages","dialog-events","alloy.base.behaviour"],[mm()]:["alloy.base.behaviour","dialog-events","messages",Us.name(),"scroll-lock"]}}))},KU=(t,s={})=>{const a=i=>{const d=Se(i.items,g=>{const p=bt(s,g.name).getOr(S(!1));return{...g,storage:p}});return{...i,items:d}};return Se(t,i=>i.type==="menu"?a(i):i)},MZ=t=>An(t,(s,a)=>a.type==="menu"?An(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),NZ=(t,s)=>[Op(sf(),zL),t(xC,(a,i,d,g)=>{Ad(Le(g.element)).fold(K,Cy),s.onClose(),i.onClose()}),t(F1,(a,i,d,g)=>{i.onCancel(a),fs(g,xC)}),st(o3,(a,i)=>s.onUnblock()),st(n3,(a,i)=>s.onBlock(i.event))],YU={initUrlDialog:(t,s)=>{const a=(d,g)=>st(d,(p,C)=>{i(p,(x,_)=>{g(t(),x,C.event,p)})}),i=(d,g)=>{Us.getState(d).get().each(p=>{g(p,d)})};return[...NZ(a,s),a(Df,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const i=(g,p)=>st(g,(C,x)=>{d(C,(_,D)=>{p(t(),_,x.event,C)})}),d=(g,p)=>{Us.getState(g).get().each(C=>{p(C.internalDialog,g)})};return[...NZ(i,s),i(TC,(g,p)=>p.onSubmit(g)),i(Wl,(g,p,C)=>{p.onChange(g,{name:C.name})}),i(Df,(g,p,C,x)=>{const _=()=>yn.focusIn(x),D=V=>q(V,"disabled")||P(V,"aria-disabled").exists(X=>X==="true"),B=Le(x.element),F=Ad(B);p.onAction(g,{name:C.name,value:C.value}),Ad(B).fold(_,V=>{D(V)||F.exists(X=>va(V,X)&&D(X))?_():a().toOptional().filter(X=>!va(X.element,V)).each(_)})}),i(rN,(g,p,C)=>{p.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),Fi(g=>{const p=t();Ft.setValue(g,p.getData())})]}},Mj=(t,s)=>LC(t,t.type,s),Nj=(t,s,a)=>Ue(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),Bj=(t,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=ps(a,C=>C.align==="start"),d=(C,x)=>Ud.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Se(x,_=>_.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},BZ=(t,s,a)=>{const i=(d,g)=>{const p=Se(g.buttons,x=>{const _=No(Mj(x,a));return{name:x.name,align:x.align,memento:_}}),C=x=>Nj(d,p,x);return A.some({lookupByName:C,footerButtons:p})};return{dom:Xg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:yt([Us.config({channel:`${sb}-${s}`,initialData:t,updateState:i,renderComponents:Bj})])}},Pj=(t,s,a)=>BZ(t,s,a),PZ=(t,s,a)=>vc.parts.footer(BZ(t,s,a)),$Z=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Ho.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return J0.getField(i,s).orThunk(()=>{const d=t.getFooter();return Us.getState(d).get().bind(p=>p.lookupByName(s))})}else return A.none()},$j=(t,s)=>{const a=t.getRoot();return Us.getState(a).get().map(i=>Ts(Bs("data",i.dataValidator,s))).getOr(s)},FZ=(t,s,a)=>{const i=X=>{const ue=t.getRoot();ue.getSystem().isConnected()&&X(ue)},V={getData:()=>{const X=t.getRoot(),ue=X.getSystem().isConnected()?t.getFormWrapper():X,Oe=Ft.getValue(ue),Ce=ls(a,Ae=>Ae.get());return{...Oe,...Ce}},setData:X=>{i(ue=>{const Oe=V.getData(),Ce=js(Oe,X),Ae=$j(t,Ce),Pe=t.getFormWrapper();Ft.setValue(Pe,Ae),ts(a,(He,kt)=>{io(Ce,kt)&&He.set(Ce[kt])})})},setEnabled:(X,ue)=>{$Z(t,X).each(ue?Un.enable:Un.disable)},focus:X=>{$Z(t,X).each(Bn.focus)},block:X=>{if(!Vt(X))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(ue=>{bn(ue,n3,{message:X})})},unblock:()=>{i(X=>{fs(X,o3)})},showTab:X=>{i(ue=>{const Oe=t.getBody();Us.getState(Oe).get().exists(Ae=>Ae.isTabPanel())&&Ho.getCurrent(Oe).each(Ae=>{zi.showTab(Ae,X)})})},redial:X=>{i(ue=>{const Oe=t.getId(),Ce=s(X),Ae=KU(Ce.internalDialog.buttons,a);ue.getSystem().broadcastOn([`${hw}-${Oe}`],Ce),ue.getSystem().broadcastOn([`${EO}-${Oe}`],Ce.internalDialog),ue.getSystem().broadcastOn([`${Qd}-${Oe}`],Ce.internalDialog),ue.getSystem().broadcastOn([`${sb}-${Oe}`],{...Ce.internalDialog,buttons:Ae}),V.setData(Ce.initialData)})},close:()=>{i(X=>{fs(X,xC)})},toggleFullscreen:t.toggleFullscreen};return V},Fj=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},Ij=(t,s,a)=>{const i=nn("dialog"),d=t.internalDialog,g=AZ(d.title,i,a),p=gt({body:d.body,initialData:d.initialData},i,a),C=KU(d.buttons),x=MZ(C),_=PZ({buttons:C},i,a),D=YU.initDialog(()=>ue,DZ(()=>V,a.shared.providers,s),a.shared.getSink),B=Fj(d.size),F={id:i,header:g,body:p,footer:A.some(_),extraClasses:B,extraBehaviours:[],extraStyles:{}},V=RZ(F,t,D,a),X=(()=>{const Oe=()=>{const Ae=vc.getBody(V);return Ho.getCurrent(Ae).getOr(Ae)},Ce=()=>{const Ae="tox-dialog--fullscreen",Pe=be.fromDom(V.element.dom);tc(Pe,Ae)?(da(Pe,Ae),Nl(Pe,B)):(vi(Pe,B),$s(Pe,Ae))};return{getId:G(i),getRoot:G(V),getBody:()=>vc.getBody(V),getFooter:()=>vc.getFooter(V),getFormWrapper:Oe,toggleFullscreen:Ce}})(),ue=FZ(X,s.redial,x);return{dialog:V,instanceApi:ue}},Lj=(t,s,a,i)=>{const d=nn("dialog"),g=nn("dialog-label"),p=nn("dialog-content"),C=t.internalDialog,x=(Pe,He)=>A.some(He),_=No(Dj({title:C.title,draggable:!0},d,g,a.shared.providers)),D=No(Tt({body:C.body,initialData:C.initialData},d,p,a,i)),B=KU(C.buttons),F=MZ(B),V=No(Pj({buttons:B},d,a)),X=YU.initDialog(()=>Ae,{onBlock:Pe=>{lp.block(Oe,(He,kt)=>OZ(Pe.message,kt,a.shared.providers))},onUnblock:()=>{lp.unblock(Oe)},onClose:()=>s.closeWindow()},a.shared.getSink),ue="tox-dialog-inline",Oe=Yc({dom:{tag:"div",classes:["tox-dialog",ue],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:p}},eventOrder:{[ag()]:[Us.name(),Pl.name()],[qs()]:["execute-on-form"],[Td()]:["reflecting","execute-on-form"]},behaviours:yt([yn.config({mode:"cyclic",onEscape:Pe=>(fs(Pe,xC),A.some(!0)),useTabstopAt:Pe=>!MC(Pe)&&(Ms(Pe)!=="button"||Qr(Pe,"disabled")!=="disabled"),firstTabstop:1}),Us.config({channel:`${hw}-${d}`,updateState:x,initialData:t}),Bn.config({}),ro("execute-on-form",X.concat([iu(sf(),(Pe,He)=>{yn.focusIn(Pe)})])),lp.config({getRoot:()=>A.some(Oe)}),Jn.config({}),ha.memory({})]),components:[_.asSpec(),D.asSpec(),V.asSpec()]}),Ce=()=>{const Pe="tox-dialog--fullscreen",He=be.fromDom(Oe.element.dom);fg(He,[Pe])?(vi(He,[Pe]),Nl(He,[ue])):(vi(He,[ue]),Nl(He,[Pe]))},Ae=FZ({getId:G(d),getRoot:G(Oe),getFooter:()=>V.get(Oe),getBody:()=>D.get(Oe),getFormWrapper:()=>{const Pe=D.get(Oe);return Ho.getCurrent(Pe).getOr(Pe)},toggleFullscreen:Ce},s.redial,F);return{dialog:Oe,instanceApi:Ae}};var XU=tinymce.util.Tools.resolve("tinymce.util.URI");const Hj=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!Vt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{bn(C,n3,{message:p})})},unblock:()=>{s(p=>{fs(p,o3)})},close:()=>{s(p=>{fs(p,xC)})},sendMessage:p=>{s(C=>{C.getSystem().broadcastOn([Re],p)})}}},Vj=["insertContent","setContent","execCommand","close","block","unblock"],IZ=t=>Wt(t)&&Vj.indexOf(t.mceAction)!==-1,zj=t=>!IZ(t)&&Wt(t)&&io(t,"mceAction"),Uj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=ho(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},Wj=(t,s,a,i)=>{const d=nn("dialog"),g=AZ(t.title,d,i),p=wn(t),C=t.buttons.bind(Ae=>Ae.length===0?A.none():A.some(PZ({buttons:Ae},d,i))),x=YU.initUrlDialog(()=>Ce,DZ(()=>Oe,i.shared.providers,s)),_={...t.height.fold(()=>({}),Ae=>({height:Ae+"px","max-height":Ae+"px"})),...t.width.fold(()=>({}),Ae=>({width:Ae+"px","max-width":Ae+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new XU(t.url,{base_uri:new XU(window.location.href)}),F=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,V=Il(),X=[ro("messages",[Zr(()=>{const Ae=ri(be.fromDom(window),"message",Pe=>{if(B.isSameOrigin(new XU(Pe.raw.origin))){const He=Pe.raw.data;IZ(He)?Uj(a,Ce,He):zj(He)&&t.onMessage(Ce,He)}});V.set(Ae)}),Fi(V.clear)]),Pl.config({channels:{[Re]:{onReceive:(Ae,Pe)=>{$r(Ae.element,"iframe").each(He=>{const kt=He.dom.contentWindow;Xn(kt)&&kt.postMessage(Pe,F)})}}}})],Oe=RZ({id:d,header:g,body:p,footer:C,extraClasses:D,extraBehaviours:X,extraStyles:_},t,x,i),Ce=Hj(Oe);return{dialog:Oe,instanceApi:Ce}},Zj=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{vc.hide(_),d()},p=No(LC({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),C=wZ(),x=CZ(g,s.providers),_=Yc(qU({lazySink:()=>s.getSink(),header:yZ(C,x),body:SZ(i,s.providers),footer:A.some(xZ(TZ([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[st(F1,g)],eventOrder:{}}));vc.show(_);const D=p.get(_);Bn.focus(D)}}},jj=t=>{const s=t.shared;return{open:(i,d)=>{const g=F=>{vc.hide(D),d(F)},p=No(LC({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),C=LC({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),x=wZ(),_=CZ(()=>g(!1),s.providers),D=Yc(qU({lazySink:()=>s.getSink(),header:yZ(x,_),body:SZ(i,s.providers),footer:A.some(xZ(TZ([],[C,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[st(F1,()=>g(!1)),st(TC,()=>g(!0))],eventOrder:{}}));vc.show(D);const B=p.get(D);Bn.focus(B)}}},Gj=(t,s)=>Ts(Bs("data",s,t)),qj=t=>CC(t,".tox-alert-dialog")||CC(t,".tox-confirm-dialog"),Kj=(t,s,a)=>s&&a?[]:[sc.config({contextual:{lazyContext:()=>A.some(k(be.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:i=>ga(t,i.element).map(g=>({bounds:hT(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Ns(g.element).top})})).getOrThunk(()=>({bounds:ge(),optScrollEnv:A.none()}))})],Yj=t=>{const s=t.editor,a=$0(s),i=Zj(t.backstages.dialog),d=jj(t.backstages.dialog),g=(V,X,ue)=>X!==void 0&&X.inline==="toolbar"?_(V,t.backstages.popup.shared.anchors.inlineDialog(),ue,X.ariaAttrs):X!==void 0&&X.inline==="cursor"?_(V,t.backstages.popup.shared.anchors.cursor(),ue,X.ariaAttrs):x(V,ue),p=(V,X)=>C(V,X),C=(V,X)=>{const ue=Oe=>{const Ce=Wj(Oe,{closeWindow:()=>{vc.hide(Ce.dialog),X(Ce.instanceApi)}},s,t.backstages.dialog);return vc.show(Ce.dialog),Ce.instanceApi};return kn.openUrl(ue,V)},x=(V,X)=>{const ue=(Oe,Ce,Ae)=>{const Pe=Ce,kt=Ij({dataValidator:Ae,initialData:Pe,internalDialog:Oe},{redial:kn.redial,closeWindow:()=>{vc.hide(kt.dialog),X(kt.instanceApi)}},t.backstages.dialog);return vc.show(kt.dialog),kt.instanceApi.setData(Pe),kt.instanceApi};return kn.open(ue,V)},_=(V,X,ue,Oe=!1)=>{const Ce=(Ae,Pe,He)=>{const kt=Gj(Pe,He),at=Qs(),Bt=t.backstages.popup.shared.header.isPositionedAtTop(),cn={dataValidator:He,initialData:kt,internalDialog:Ae},Ao=()=>at.on(wo=>{$a.reposition(wo),sc.refresh(wo)}),Cn=Lj(cn,{redial:kn.redial,closeWindow:()=>{at.on($a.hide),s.off("ResizeEditor",Ao),at.clear(),ue(Cn.instanceApi)}},t.backstages.popup,Oe),Eo=Yc($a.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...Bt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:yt([ro("window-manager-inline-events",[st(rf(),(wo,Fn)=>{fs(Cn.dialog,F1)})]),...Kj(s,a,Bt)]),isExtraPart:(wo,Fn)=>qj(Fn)}));at.set(Eo);const Gn=()=>{const wo=s.inline?rr():be.fromDom(s.getContainer()),Fn=k(wo);return A.some(Fn)};return $a.showWithinBounds(Eo,Li(Cn.dialog),{anchor:X},Gn),(!a||!Bt)&&(sc.refresh(Eo),s.on("ResizeEditor",Ao)),Cn.instanceApi.setData(kt),yn.focusIn(Cn.dialog),Cn.instanceApi};return kn.open(Ce,V)};return{open:g,openUrl:p,alert:(V,X)=>{i.open(V,X)},close:V=>{V.close()},confirm:(V,X)=>{d.open(V,X)}}},Xj=t=>{VD(t),Hm(t),vz(t)};var Jj=()=>{Et.add("silver",t=>{Xj(t);let s=()=>ge();const{dialogs:a,popups:i,renderUI:d}=HE(t,{getPopupSinkBounds:()=>s()}),g=async()=>{const x=await d();return ga(t,i.getMothership().element).each(D=>{s=()=>hT(D)}),x};Of.register(t,i.backstage.shared);const p=Yj({editor:t,backstages:{popup:i.backstage,dialog:a.backstage}}),C=()=>K_(t,{backstage:i.backstage},i.getMothership());return{renderUI:g,getWindowManagerImpl:G(p),getNotificationManagerImpl:C}})};Jj()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var Ht=tinymce.util.Tools.resolve("tinymce.ModelManager");const Qn=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},In=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Qn(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Mn=l=>m=>In(m)===l,Yn=l=>m=>typeof m===l,Wn=l=>m=>l===m,oo=Mn("string"),Vt=Mn("object"),Wt=Mn("array"),Lt=Wn(null),Oo=Yn("boolean"),Yo=Wn(void 0),ho=l=>l==null,_n=l=>!ho(l),So=Yn("function"),Xn=Yn("number"),mt=()=>{},Nn=(l,m)=>(...h)=>l(m.apply(null,h)),ct=(l,m)=>h=>l(m(h)),K=l=>()=>l,ot=l=>l,zt=(l,m)=>l===m;function ut(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const G=l=>m=>!l(m),ht=l=>()=>{throw new Error(l)},Vn=l=>l(),Pt=K(!1),Ze=K(!0);class he{constructor(m,h){this.tag=m,this.value=h}static some(m){return new he(!0,m)}static none(){return he.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?he.some(m(this.value)):he.none()}bind(m){return this.tag?m(this.value):he.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:he.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return _n(m)?he.some(m):he.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}he.singletonNone=new he(!1);const Uo=Array.prototype.slice,Ln=Array.prototype.indexOf,Zt=Array.prototype.push,A=(l,m)=>Ln.call(l,m),Co=(l,m)=>A(l,m)>-1,rt=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const T=l[h];if(m(T,h))return!0}return!1},ko=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},on=(l,m)=>{const h=l.length,v=new Array(h);for(let T=0;T<h;T++){const O=l[T];v[T]=m(O,T)}return v},qe=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const T=l[h];m(T,h)}},po=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},os=(l,m)=>{const h=[],v=[];for(let T=0,O=l.length;T<O;T++){const $=l[T];(m($,T)?h:v).push($)}return{pass:h,fail:v}},pt=(l,m)=>{const h=[];for(let v=0,T=l.length;v<T;v++){const O=l[v];m(O,v)&&h.push(O)}return h},un=(l,m,h)=>(po(l,(v,T)=>{h=m(h,v,T)}),h),Se=(l,m,h)=>(qe(l,(v,T)=>{h=m(h,v,T)}),h),Qe=(l,m,h)=>{for(let v=0,T=l.length;v<T;v++){const O=l[v];if(m(O,v))return he.some(O);if(h(O,v))break}return he.none()},H=(l,m)=>Qe(l,m,Pt),ps=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const T=l[h];if(m(T,h))return he.some(h)}return he.none()},Dn=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!Wt(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);Zt.apply(m,l[h])}return m},bo=(l,m)=>Dn(on(l,m)),An=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const T=l[h];if(m(T,h)!==!0)return!1}return!0},Ys=l=>{const m=Uo.call(l,0);return m.reverse(),m},Ue=(l,m)=>{const h={};for(let v=0,T=l.length;v<T;v++){const O=l[v];h[String(O)]=m(O,v)}return h},wt=(l,m)=>{const h=Uo.call(l,0);return h.sort(m),h},Ge=(l,m)=>m>=0&&m<l.length?he.some(l[m]):he.none(),xe=l=>Ge(l,0),Io=l=>Ge(l,l.length-1),eo=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return he.none()},Rt=Object.keys,Tr=Object.hasOwnProperty,$n=(l,m)=>{const h=Rt(l);for(let v=0,T=h.length;v<T;v++){const O=h[v],$=l[O];m($,O)}},ur=(l,m)=>Wo(l,(h,v)=>({k:v,v:m(h,v)})),Wo=(l,m)=>{const h={};return $n(l,(v,T)=>{const O=m(v,T);h[O.k]=O.v}),h},Fs=l=>(m,h)=>{l[h]=m},ba=(l,m,h,v)=>{$n(l,(T,O)=>{(m(T,O)?h:v)(T,O)})},Ir=(l,m)=>{const h={};return ba(l,m,Fs(h),mt),h},Ss=(l,m)=>{const h=[];return $n(l,(v,T)=>{h.push(m(v,T))}),h},is=l=>Ss(l,ot),Uc=(l,m)=>ts(l,m)?he.from(l[m]):he.none(),ts=(l,m)=>Tr.call(l,m),ls=(l,m)=>ts(l,m)&&l[m]!==void 0&&l[m]!==null,ss=l=>{for(const m in l)if(Tr.call(l,m))return!1;return!0},Xo=typeof window<"u"?window:Function("return this;")(),Ds=(l,m)=>{let h=m??Xo;for(let v=0;v<l.length&&h!==void 0&&h!==null;++v)h=h[l[v]];return h},dr=(l,m)=>{const h=l.split(".");return Ds(h,m)},aa=(l,m)=>dr(l,m),mr=(l,m)=>{const h=aa(l,m);if(h==null)throw new Error(l+" not available on this browser");return h},Rs=Object.getPrototypeOf,Or=l=>mr("HTMLElement",l),bt=l=>{const m=dr("ownerDocument.defaultView",l);return Vt(l)&&(Or(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Rs(l).constructor.name))},io=8,ca=9,sr=11,ac=1,Aa=3,rs=l=>l.dom.nodeName.toLowerCase(),La=l=>l.dom.nodeType,Dr=l=>m=>La(m)===l,Jo=l=>La(l)===io||rs(l)==="#comment",hn=l=>Er(l)&&bt(l.dom),Er=Dr(ac),Jr=Dr(Aa),Oa=Dr(ca),Ha=Dr(sr),Is=l=>m=>Er(m)&&rs(m)===l,Ws=(l,m,h)=>{if(oo(h)||Oo(h)||Xn(h))l.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",l),new Error("Attribute value was not simple")},bs=(l,m,h)=>{Ws(l.dom,m,h)},wr=(l,m)=>{const h=l.dom;$n(m,(v,T)=>{Ws(h,T,v)})},de=(l,m)=>{$n(m,(h,v)=>{h.fold(()=>{Ne(l,v)},T=>{Ws(l.dom,v,T)})})},se=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},Ie=(l,m)=>he.from(se(l,m)),Ne=(l,m)=>{l.dom.removeAttribute(m)},Yt=l=>Se(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),fn=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,l),new Error(T)}return jn(v.childNodes[0])},so=(l,m)=>{const v=(m||document).createElement(l);return jn(v)},Qo=(l,m)=>{const v=(m||document).createTextNode(l);return jn(v)},jn=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},be={fromHtml:fn,fromTag:so,fromText:Qo,fromDom:jn,fromPoint:(l,m,h)=>he.from(l.dom.elementFromPoint(m,h)).map(jn)},Zo=(l,m)=>{const h=l.dom;if(h.nodeType!==ac)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},re=l=>l.nodeType!==ac&&l.nodeType!==ca&&l.nodeType!==sr||l.childElementCount===0,ce=(l,m)=>{const h=m===void 0?document:m.dom;return re(h)?[]:on(h.querySelectorAll(l),be.fromDom)},tt=(l,m)=>{const h=m===void 0?document:m.dom;return re(h)?he.none():he.from(h.querySelector(l)).map(be.fromDom)},nt=(l,m)=>l.dom===m.dom,At=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},Xt=Zo,qt=l=>be.fromDom(l.dom.ownerDocument),Qt=l=>Oa(l)?l:qt(l),Sn=l=>be.fromDom(Qt(l).dom.documentElement),xn=l=>be.fromDom(Qt(l).dom.defaultView),us=l=>he.from(l.dom.parentNode).map(be.fromDom),Ms=l=>he.from(l.dom.parentElement).map(be.fromDom),Da=(l,m)=>{const h=So(m)?m:Pt;let v=l.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const O=v.parentNode,$=be.fromDom(O);if(T.push($),h($)===!0)break;v=O}return T},Va=l=>he.from(l.dom.previousSibling).map(be.fromDom),cc=l=>he.from(l.dom.nextSibling).map(be.fromDom),Rn=l=>on(l.dom.childNodes,be.fromDom),jo=(l,m)=>{const h=l.dom.childNodes;return he.from(h[m]).map(be.fromDom)},ds=l=>jo(l,0),Lr=(l,m)=>{us(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},jr=(l,m)=>{cc(l).fold(()=>{us(l).each(T=>{Ls(T,m)})},v=>{Lr(v,m)})},Rr=(l,m)=>{ds(l).fold(()=>{Ls(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},Ls=(l,m)=>{l.dom.appendChild(m.dom)},Ql=(l,m,h)=>{jo(l,h).fold(()=>{Ls(l,m)},v=>{Lr(v,m)})},Wi=(l,m)=>{Lr(l,m),Ls(m,l)},ms=(l,m)=>{qe(m,(h,v)=>{const T=v===0?l:m[v-1];jr(T,h)})},va=(l,m)=>{qe(m,h=>{Ls(l,h)})},Ra=l=>{l.dom.textContent="",qe(Rn(l),m=>{fr(m)})},fr=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Zi=l=>{const m=Rn(l);m.length>0&&ms(l,m),fr(l)},ic=(l,m)=>be.fromDom(l.dom.cloneNode(m)),ya=l=>ic(l,!1),Cc=l=>ic(l,!0),al=(l,m)=>{const h=be.fromTag(m),v=Yt(l);return wr(h,v),h},li=(l,m)=>{const h=al(l,m),v=Rn(Cc(l));return va(h,v),h},cl=(l,m)=>{const h=al(l,m);jr(l,h);const v=Rn(l);return va(h,v),fr(l),h},Ma=["tfoot","thead","tbody","colgroup"],Nc=l=>Co(Ma,l),ji=(l,m)=>({rows:l,columns:m}),Wc=(l,m)=>({row:l,column:m}),Gi=(l,m,h)=>({element:l,rowspan:m,colspan:h}),W=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),me=(l,m,h,v,T,O)=>({element:l,rowspan:m,colspan:h,row:v,column:T,isLocked:O}),ve=(l,m,h)=>({element:l,cells:m,section:h}),Le=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),it=(l,m,h)=>({element:l,isNew:m,isLocked:h}),pn=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),vs=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),Mr=(l,m,h)=>({element:l,colspan:m,column:h}),Do=(l,m)=>({element:l,columns:m}),Nr=l=>Ha(l)&&_n(l.dom.host),Go=So(Element.prototype.attachShadow)&&So(Node.prototype.getRootNode),rr=K(Go),Bc=Go?l=>be.fromDom(l.dom.getRootNode()):Qt,wc=l=>{const m=Bc(l);return Nr(m)?he.some(m):he.none()},zn=l=>be.fromDom(l.dom.host),es=l=>{if(rr()&&_n(l.target)){const m=be.fromDom(l.target);if(Er(m)&&Qr(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return xe(h)}}return he.from(l.target)},Qr=l=>_n(l.dom.shadowRoot),P=l=>{const m=Jr(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return wc(be.fromDom(m)).fold(()=>h.body.contains(m),ct(P,zn))},q=()=>ne(be.fromDom(document)),ne=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return be.fromDom(m)},Be=(l,m,h)=>pt(Da(l,h),m),Mt=(l,m)=>pt(Rn(l),m),to=(l,m)=>{let h=[];return qe(Rn(l),v=>{m(v)&&(h=h.concat([v])),h=h.concat(to(v,m))}),h},Kt=(l,m,h)=>Be(l,v=>Zo(v,m),h),Hr=(l,m)=>Mt(l,h=>Zo(h,m)),ea=(l,m)=>ce(m,l);var et=(l,m,h,v,T)=>l(h,v)?he.some(h):So(T)&&T(h)?he.none():m(h,v,T);const Vr=(l,m,h)=>{let v=l.dom;const T=So(h)?h:Pt;for(;v.parentNode;){v=v.parentNode;const O=be.fromDom(v);if(m(O))return he.some(O);if(T(O))break}return he.none()},gr=(l,m,h)=>et((T,O)=>O(T),Vr,l,m,h),ta=(l,m)=>{const h=T=>m(be.fromDom(T));return H(l.dom.childNodes,h).map(be.fromDom)},sd=(l,m)=>{const h=v=>{for(let T=0;T<v.childNodes.length;T++){const O=be.fromDom(v.childNodes[T]);if(m(O))return he.some(O);const $=h(v.childNodes[T]);if($.isSome())return $}return he.none()};return h(l.dom)},xo=(l,m,h)=>Vr(l,v=>Zo(v,m),h),Y=(l,m)=>ta(l,h=>Zo(h,m)),oe=(l,m)=>tt(m,l),ke=(l,m,h)=>et((T,O)=>Zo(T,O),xo,l,m,h),ze=(l,m,h=zt)=>l.exists(v=>h(v,m)),tn=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},Lo=(l,m)=>l!=null?m(l):he.none(),Xs=(l,m)=>l?he.some(m):he.none(),_o=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,Zs=(l,m,h=0,v)=>{const T=l.indexOf(m,h);return T!==-1?Yo(v)?!0:T+m.length<=v:!1},Ca=(l,m)=>_o(l,m,0),Ns=(l,m)=>_o(l,m,l.length-m.length),Zc=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),As=l=>l.length>0,wa=l=>{const m=parseFloat(l);return isNaN(m)?he.none():he.some(m)},hr=l=>l.style!==void 0&&So(l.style.getPropertyValue),ki=(l,m,h)=>{if(!oo(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",l),new Error("CSS value must be a string: "+h);hr(l)&&l.style.setProperty(m,h)},Tl=(l,m)=>{hr(l)&&l.style.removeProperty(m)},Hs=(l,m,h)=>{const v=l.dom;ki(v,m,h)},xc=(l,m)=>{const h=l.dom;$n(m,(v,T)=>{ki(h,T,v)})},_i=(l,m)=>{const h=l.dom,T=window.getComputedStyle(h).getPropertyValue(m);return T===""&&!P(l)?rd(h,m):T},rd=(l,m)=>hr(l)?l.style.getPropertyValue(m):"",il=(l,m)=>{const h=l.dom,v=rd(h,m);return he.from(v).filter(T=>T.length>0)},Qc=(l,m)=>{const h=l.dom;Tl(h,m),ze(Ie(l,"style").map(Zc),"")&&Ne(l,"style")},Gr=(l,m)=>{const h=l.dom,v=m.dom;hr(h)&&hr(v)&&(v.style.cssText=h.style.cssText)},lc=(l,m,h=0)=>Ie(l,m).map(v=>parseInt(v,10)).getOr(h),Pc=(l,m)=>lc(l,m,1),ei=l=>Is("col")(l)?lc(l,"span",1)>1:Pc(l,"colspan")>1,Xa=l=>Pc(l,"rowspan")>1,Br=(l,m)=>parseInt(_i(l,m),10),jc=K(10),nm=K(10),eu=(l,m)=>tu(l,m,Ze),tu=(l,m,h)=>bo(Rn(l),v=>Zo(v,m)?h(v)?[v]:[]:tu(v,m,h)),Gm=(l,m,h=Pt)=>{if(h(m))return he.none();if(Co(l,rs(m)))return he.some(m);const v=T=>Zo(T,"table")||h(T);return xo(m,l.join(","),v)},ui=(l,m)=>Gm(["td","th"],l,m),nu=l=>eu(l,"th,td"),ad=l=>Zo(l,"colgroup")?Hr(l,"col"):bo(Au(l),m=>Hr(m,"col")),zr=(l,m)=>ke(l,"table",m),om=l=>eu(l,"tr"),Au=l=>zr(l).fold(K([]),m=>Hr(m,"colgroup")),Ou=(l,m)=>on(l,h=>{if(rs(h)==="colgroup"){const v=on(ad(h),T=>{const O=lc(T,"span",1);return Gi(T,1,O)});return ve(h,v,"colgroup")}else{const v=on(nu(h),T=>{const O=lc(T,"rowspan",1),$=lc(T,"colspan",1);return Gi(T,O,$)});return ve(h,v,m(h))}}),cd=l=>us(l).map(m=>{const h=rs(m);return Nc(h)?h:"tbody"}).getOr("tbody"),id=l=>{const m=om(l),v=[...Au(l),...m];return Ou(v,cd)},ld=(l,m)=>Ou(l,()=>m),Du=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},qm=(l,m,h,v)=>{const T=l.isiOS()&&/ipad/i.test(h)===!0,O=l.isiOS()&&!T,$=l.isiOS()||l.isAndroid(),U=$||v("(pointer:coarse)"),J=T||!O&&$&&v("(min-device-width:768px)"),le=O||$&&!J,Te=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,lt=!le&&!J&&!Te;return{isiPad:K(T),isiPhone:K(O),isTablet:K(J),isPhone:K(le),isTouch:K(U),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:K(Te),isDesktop:K(lt)}},Km=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},ou=(l,m)=>{const h=Km(l,m);if(!h)return{major:0,minor:0};const v=T=>Number(m.replace(h,"$"+T));return ud(v(1),v(2))},vp=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?ae():ou(l,h)},ae=()=>ud(0,0),ud=(l,m)=>({major:l,minor:m}),$c={nu:ud,detect:vp,unknown:ae},Zf=(l,m)=>eo(m.brands,h=>{const v=h.brand.toLowerCase();return H(l,T=>{var O;return v===((O=T.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(T=>({current:T.name,version:$c.nu(parseInt(h.version,10),0)}))}),yp=(l,m)=>{const h=String(m).toLowerCase();return H(l,v=>v.search(h))},Cp=(l,m)=>yp(l,m).map(h=>{const v=$c.detect(h.versionRegexes,m);return{current:h.name,version:v}}),ys=(l,m)=>yp(l,m).map(h=>{const v=$c.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Ai=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Tc=l=>m=>Zs(m,l),ti=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Zs(l,"edge/")&&Zs(l,"chrome")&&Zs(l,"safari")&&Zs(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ai],search:l=>Zs(l,"chrome")&&!Zs(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Zs(l,"msie")||Zs(l,"trident")},{name:"Opera",versionRegexes:[Ai,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Tc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Tc("firefox")},{name:"Safari",versionRegexes:[Ai,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Zs(l,"safari")||Zs(l,"mobile/"))&&Zs(l,"applewebkit")}],nh=[{name:"Windows",search:Tc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Zs(l,"iphone")||Zs(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Tc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Tc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Tc("linux"),versionRegexes:[]},{name:"Solaris",search:Tc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Tc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Tc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],El={browsers:K(ti),oses:K(nh)},di="Edge",sm="Chromium",jf="IE",oh="Opera",Gc="Firefox",dd="Safari",sh=()=>ni({current:void 0,version:$c.unknown()}),ni=l=>{const m=l.current,h=l.version,v=T=>()=>m===T;return{current:m,version:h,isEdge:v(di),isChromium:v(sm),isIE:v(jf),isOpera:v(oh),isFirefox:v(Gc),isSafari:v(dd)}},za={unknown:sh,nu:ni,edge:K(di),chromium:K(sm),ie:K(jf),opera:K(oh),firefox:K(Gc),safari:K(dd)},md="Windows",fd="iOS",Oi="Android",Fc="Linux",Ym="macOS",Xm="Solaris",Jm="FreeBSD",Qm="ChromeOS",qi=()=>rm({current:void 0,version:$c.unknown()}),rm=l=>{const m=l.current,h=l.version,v=T=>()=>m===T;return{current:m,version:h,isWindows:v(md),isiOS:v(fd),isAndroid:v(Oi),isMacOS:v(Ym),isLinux:v(Fc),isSolaris:v(Xm),isFreeBSD:v(Jm),isChromeOS:v(Qm)}},rh={unknown:qi,nu:rm,windows:K(md),ios:K(fd),android:K(Oi),linux:K(Fc),macos:K(Ym),solaris:K(Xm),freebsd:K(Jm),chromeos:K(Qm)},ah={detect:(l,m,h)=>{const v=El.browsers(),T=El.oses(),O=m.bind(J=>Zf(v,J)).orThunk(()=>Cp(v,l)).fold(za.unknown,za.nu),$=ys(T,l).fold(rh.unknown,rh.nu),U=qm($,O,l,h);return{browser:O,os:$,deviceType:U}}},am=l=>window.matchMedia(l).matches;let Gf=Du(()=>ah.detect(navigator.userAgent,he.from(navigator.userAgentData),am));const kl=()=>Gf(),qf=(l,m)=>{const h=(U,J)=>{if(!Xn(J)&&!J.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+J);const le=U.dom;hr(le)&&(le.style[l]=J+"px")},v=U=>{const J=m(U);if(J<=0||J===null){const le=_i(U,l);return parseFloat(le)||0}return J},T=v,O=(U,J)=>Se(J,(le,Te)=>{const lt=_i(U,Te),Nt=lt===void 0?0:parseInt(lt,10);return isNaN(Nt)?le:le+Nt},0);return{set:h,get:v,getOuter:T,aggregate:O,max:(U,J,le)=>{const Te=O(U,le);return J>Te?J-Te:0}}},ar=(l,m)=>wa(l).getOr(m),k=(l,m,h)=>ar(_i(l,m),h),M=(l,m,h,v)=>{const T=k(l,`padding-${h}`,0),O=k(l,`padding-${v}`,0),$=k(l,`border-${h}-width`,0),U=k(l,`border-${v}-width`,0);return m-T-O-$-U},z=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:M(l,v,"left","right")},fe=l=>k(l,"height",l.dom.offsetHeight),ge=l=>k(l,"width",l.dom.offsetWidth),Et=l=>z(l,"content-box"),En=qf("width",l=>l.dom.offsetWidth),Zn=l=>En.get(l),To=l=>En.getOuter(l),St=Et,ks=ge,Na=(l,m,h)=>{const v=l.cells,T=v.slice(0,m),O=v.slice(m),$=T.concat(h).concat(O);return Kf(l,$)},mi=(l,m,h)=>Na(l,m,[h]),cm=(l,m,h)=>{const v=l.cells;v[m]=h},Kf=(l,m)=>pn(l.element,m,l.section,l.isNew),ll=(l,m)=>{const h=l.cells,v=on(h,m);return pn(l.element,v,l.section,l.isNew)},fi=(l,m)=>l.cells[m],Ic=(l,m)=>fi(l,m).element,Di=l=>l.cells.length,Ja=l=>{const m=os(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},ib=(l,m,h)=>{const v=on(l.cells,h);return pn(m(l.element),v,l.section,!0)},xs="data-snooker-locked-cols",Ru=l=>Ie(l,xs).bind(m=>he.from(m.match(/\d+/g))).map(m=>Ue(m,Ze)),gd=l=>{const m=Se(Ja(l).rows,(v,T)=>(qe(T.cells,(O,$)=>{O.isLocked&&(v[$]=!0)}),v),{}),h=Ss(m,(v,T)=>parseInt(T,10));return wt(h)},Ur=(l,m)=>l+","+m,lb=(l,m,h)=>he.from(l.access[Ur(m,h)]),Sv=(l,m,h)=>{const v=Mu(l,T=>h(m,T.element));return v.length>0?he.some(v[0]):he.none()},Mu=(l,m)=>{const h=bo(l.all,v=>v.cells);return pt(h,m)},js=l=>{const m={};let h=0;return qe(l.cells,v=>{const T=v.colspan;ko(T,O=>{const $=h+O;m[$]=Mr(v.element,T,$)}),h+=T}),m},Js=l=>{const m={},h=[],T=xe(l).map(_t=>_t.element).bind(zr).bind(Ru).getOr({});let O=0,$=0,U=0;const{pass:J,fail:le}=os(l,_t=>_t.section==="colgroup");qe(le,_t=>{const Ye=[];qe(_t.cells,Dt=>{let Ke=0;for(;m[Ur(U,Ke)]!==void 0;)Ke++;const en=ls(T,Ke.toString()),Hn=me(Dt.element,Dt.rowspan,Dt.colspan,U,Ke,en);for(let lo=0;lo<Dt.colspan;lo++)for(let tr=0;tr<Dt.rowspan;tr++){const Dc=U+tr,na=Ke+lo,nl=Ur(Dc,na);m[nl]=Hn,$=Math.max($,na+1)}Ye.push(Hn)}),O++,h.push(ve(_t.element,Ye,_t.section)),U++});const{columns:Te,colgroups:lt}=Io(J).map(_t=>{const Ye=js(_t);return{colgroups:[Do(_t.element,is(Ye))],columns:Ye}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ji(O,$),access:m,all:h,columns:Te,colgroups:lt}},Ro={fromTable:l=>{const m=id(l);return Js(m)},generate:Js,getAt:lb,findItem:Sv,filterItems:Mu,justCells:l=>bo(l.all,m=>m.cells),justColumns:l=>is(l.columns),hasColumns:l=>Rt(l.columns).length>0,getColumnAt:(l,m)=>he.from(l.columns[m])},ch=(l,m=Ze)=>{const h=l.grid,v=ko(h.columns,ot),T=ko(h.rows,ot);return on(v,O=>wp(()=>bo(T,le=>Ro.getAt(l,le,O).filter(Te=>Te.column===O).toArray()),le=>le.colspan===1&&m(le.element),()=>Ro.getAt(l,0,O)))},wp=(l,m,h)=>{const v=l();return H(v,m).orThunk(()=>he.from(v[0]).orThunk(h)).map($=>$.element)},xv=l=>{const m=l.grid,h=ko(m.rows,ot),v=ko(m.columns,ot);return on(h,T=>wp(()=>bo(v,J=>Ro.getAt(l,T,J).filter(le=>le.row===T).fold(K([]),le=>[le])),J=>J.rowspan===1,()=>Ro.getAt(l,T,0)))},Tv=(l,m)=>{if(m<0||m>=l.length-1)return he.none();const h=l[m].fold(()=>{const T=Ys(l.slice(0,m));return eo(T,(O,$)=>O.map(U=>({value:U,delta:$+1})))},T=>he.some({value:T,delta:0})),v=l[m+1].fold(()=>{const T=l.slice(m+1);return eo(T,(O,$)=>O.map(U=>({value:U,delta:$+1})))},T=>he.some({value:T,delta:1}));return h.bind(T=>v.map(O=>{const $=O.delta+T.delta;return Math.abs(O.value-T.value)/$}))},Yf=(l,m)=>h=>ub(h)==="rtl"?m:l,ub=l=>_i(l,"direction")==="rtl"?"rtl":"ltr",Xf=qf("height",l=>{const m=l.dom;return P(l)?m.getBoundingClientRect().height:m.offsetHeight}),ul=l=>Xf.get(l),db=l=>Xf.getOuter(l),ih=fe,mb=(l,m)=>({left:l,top:m,translate:(v,T)=>mb(l+v,m+T)}),_l=mb,Sp=l=>{const m=l.getBoundingClientRect();return _l(m.left,m.top)},Al=(l,m)=>l!==void 0?l:m!==void 0?m:0,lm=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,T=m.documentElement;if(h===l.dom)return _l(h.offsetLeft,h.offsetTop);const O=Al(v==null?void 0:v.pageYOffset,T.scrollTop),$=Al(v==null?void 0:v.pageXOffset,T.scrollLeft),U=Al(T.clientTop,h.clientTop),J=Al(T.clientLeft,h.clientLeft);return Ev(l).translate($-J,O-U)},Ev=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?_l(v.offsetLeft,v.offsetTop):P(l)?Sp(m):_l(0,0)},lh=(l,m)=>({row:l,y:m}),uh=(l,m)=>({col:l,x:m}),fb=l=>lm(l).left+To(l),dh=l=>lm(l).left,Ec=(l,m)=>uh(l,dh(m)),mh=(l,m)=>uh(l,fb(m)),Ba=l=>lm(l).top,kc=(l,m)=>lh(l,Ba(m)),vn=(l,m)=>lh(l,Ba(m)+db(m)),Ut=(l,m,h)=>{if(h.length===0)return[];const v=on(h.slice(1),(O,$)=>O.map(U=>l($,U))),T=h[h.length-1].map(O=>m(h.length-1,O));return v.concat([T])},Jf=l=>-l,oi={delta:ot,positions:l=>Ut(kc,vn,l),edge:Ba},Ri=Yf({delta:ot,edge:dh,positions:l=>Ut(Ec,mh,l)},{delta:Jf,edge:fb,positions:l=>Ut(mh,Ec,l)}),gi={delta:(l,m)=>Ri(m).delta(l,m),positions:(l,m)=>Ri(m).positions(l,m),edge:l=>Ri(l).edge(l)},gh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Wr=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",T=U=>`(?:${U})?`,$=`[+-]?(?:${["Infinity",l+v+T(l)+T(h),v+l+T(h),l+T(h)].join("|")})`;return new RegExp(`^(${$})(.*)$`)})(),ef=(l,m)=>rt(m,h=>rt(gh[h],v=>l===v)),eg=(l,m)=>he.from(Wr.exec(l)).bind(v=>{const T=Number(v[1]),O=v[2];return ef(O,m)?he.some({value:T,unit:O}):he.none()}),ft=/(\d+(\.\d+)?)%/,kv=/(\d+(\.\d+)?)px|em/,gb=Is("col"),Mi=(l,m,h)=>{const v=Ms(l).getOrThunk(()=>ne(qt(l)));return m(l)/h(v)*100},tf=(l,m)=>{Hs(l,"width",m+"px")},vd=(l,m)=>{Hs(l,"width",m+"%")},Pr=(l,m)=>{Hs(l,"height",m+"px")},hb=l=>ih(l)+"px",Bs=(l,m,h,v)=>{const T=zr(l).map(O=>{const $=h(O);return Math.floor(m/100*$)}).getOr(m);return v(l,T),T},Ts=(l,m,h,v)=>{const T=parseFloat(l);return Ns(l,"%")&&rs(m)!=="table"?Bs(m,T,h,v):T},_c=l=>{const m=hb(l);return m?Ts(m,l,ul,Pr):ul(l)},nf=(l,m,h)=>{const v=h(l),T=Pc(l,m);return v/T},ia=(l,m)=>il(l,m).orThunk(()=>Ie(l,m).map(h=>h+"px")),yd=l=>ia(l,"width"),la=l=>ia(l,"height"),Vs=l=>Mi(l,Zn,St),tg=l=>gb(l)?Zn(l):ks(l),Je=l=>nf(l,"rowspan",_c),Ki=l=>yd(l).bind(h=>eg(h,["fixed","relative","empty"])),hh=(l,m,h)=>{Hs(l,"width",m+h)},qr=l=>Zn(l)+"px",Ol=l=>Mi(l,Zn,St)+"%",xp=l=>yd(l).exists(m=>ft.test(m)),dl=l=>yd(l).exists(m=>kv.test(m)),_v=l=>yd(l).isNone(),Nu=K(ft),pb=Is("col"),hi=l=>yd(l).getOrThunk(()=>tg(l)+"px"),Cs=l=>la(l).getOrThunk(()=>Je(l)+"px"),su=l=>on(Ro.justColumns(l),m=>he.from(m.element)),ng=l=>{const m=kl().browser,h=m.isChromium()||m.isFirefox();return pb(l)?h:!0},Lc=(l,m,h,v,T,O)=>l.filter(v).fold(()=>O(Tv(h,m)),$=>T($)),Dl=(l,m,h,v)=>{const T=ch(l),O=Ro.hasColumns(l)?su(l):T,$=[he.some(gi.edge(m))].concat(on(gi.positions(T,m),J=>J.map(le=>le.x))),U=G(ei);return on(O,(J,le)=>Lc(J,le,$,U,Te=>{if(ng(Te))return h(Te);{const lt=Lo(T[le],ot);return Lc(lt,le,$,U,Nt=>v(he.some(Zn(Nt))),v)}},v))},Ac=l=>l.map(m=>m+"px").getOr(""),bb=(l,m)=>Dl(l,m,hi,Ac),Hc=(l,m,h)=>Dl(l,m,Vs,v=>v.fold(()=>h.minCellWidth(),T=>T/h.pixelWidth()*100)),Bu=(l,m,h)=>Dl(l,m,tg,v=>v.getOrThunk(h.minCellWidth)),_e=(l,m,h,v,T)=>{const O=xv(l),$=[he.some(h.edge(m))].concat(on(h.positions(O,m),U=>U.map(J=>J.y)));return on(O,(U,J)=>Lc(U,J,$,G(Xa),v,T))},si=(l,m,h)=>_e(l,m,h,Je,v=>v.getOrThunk(nm)),ru=(l,m,h)=>_e(l,m,h,Cs,Ac),pi=(l,m)=>()=>P(l)?m(l):parseFloat(il(l,"width").getOr("0")),Ni=l=>{const m=pi(l,Zn),h=K(0);return{width:m,pixelWidth:m,getWidths:(T,O)=>Bu(T,l,O),getCellDelta:h,singleColumnWidth:K([0]),minCellWidth:h,setElementWidth:mt,adjustTableWidth:mt,isRelative:!0,label:"none"}},Qa=l=>{const m=pi(l,J=>parseFloat(Ol(J))),h=pi(l,Zn);return{width:m,pixelWidth:h,getWidths:(J,le)=>Hc(J,l,le),getCellDelta:J=>J/h()*100,singleColumnWidth:(J,le)=>[100-J],minCellWidth:()=>jc()/h()*100,setElementWidth:vd,adjustTableWidth:J=>{const le=m(),Te=J/100*le,lt=le+Te;vd(l,lt)},isRelative:!0,label:"percent"}},Pa=l=>{const m=pi(l,Zn);return{width:m,pixelWidth:m,getWidths:($,U)=>Bu($,l,U),getCellDelta:ot,singleColumnWidth:($,U)=>[Math.max(jc(),$+U)-$],minCellWidth:jc,setElementWidth:tf,adjustTableWidth:$=>{const U=m()+$;tf(l,U)},isRelative:!1,label:"pixel"}},Av=(l,m)=>Nu().exec(m)!==null?Qa(l):Pa(l),w={getTableSize:l=>yd(l).fold(()=>Ni(l),h=>Av(l,h)),pixelSize:Pa,percentageSize:Qa,noneSize:Ni},S=(l,m,h,v,T,O)=>({minRow:l,minCol:m,maxRow:h,maxCol:v,allCells:T,selectedCells:O}),I=(l,m)=>{const h=l.grid.columns;let T=l.grid.rows,O=h,$=0,U=0;const J=[],le=[];return $n(l.access,Te=>{if(J.push(Te),m(Te)){le.push(Te);const lt=Te.row,Nt=lt+Te.rowspan-1,_t=Te.column,Ye=_t+Te.colspan-1;lt<T?T=lt:Nt>$&&($=Nt),_t<O?O=_t:Ye>U&&(U=Ye)}}),S(T,O,$,U,J,le)},Z=(l,m,h)=>{const v=l[h].element,T=be.fromTag("td");Ls(T,be.fromTag("br")),(m?Ls:Rr)(v,T)},ie=(l,m,h,v)=>{const T=pt(l,U=>U.section!=="colgroup"),O=m.grid.columns,$=m.grid.rows;for(let U=0;U<$;U++){let J=!1;for(let le=0;le<O;le++)U<h.minRow||U>h.maxRow||le<h.minCol||le>h.maxCol||(Ro.getAt(m,U,le).filter(v).isNone()?Z(T,J,U):J=!0)}},je=(l,m,h,v)=>{$n(h.columns,$=>{($.column<m.minCol||$.column>m.maxCol)&&fr($.element)});const T=pt(eu(l,"tr"),$=>$.dom.childElementCount===0);qe(T,fr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&qe(eu(l,"th,td"),$=>{Ne($,"rowspan"),Ne($,"colspan")}),Ne(l,xs),Ne(l,"data-snooker-col-series"),w.getTableSize(l).adjustTableWidth(v)},dt=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=Bu(m,l,h),O=Se(T,(le,Te)=>le+Te,0),J=Se(T.slice(v.minCol,v.maxCol+1),(le,Te)=>le+Te,0)/O*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(J)},Jt=(l,m)=>{const h=Nt=>Zo(Nt.element,m),v=Cc(l),T=id(v),O=w.getTableSize(l),$=Ro.generate(T),U=I($,h),J="th:not("+m+"),td:not("+m+")",le=tu(v,"th,td",Nt=>Zo(Nt,J));qe(le,fr),ie(T,$,U,h);const Te=Ro.fromTable(l),lt=dt(l,Te,O,U);return je(v,U,$,lt),v},qn=" ",Ps=((l,m)=>{const h=O=>{if(!l(O))throw new Error("Can only get "+m+" value of a "+m+" node");return v(O).getOr("")},v=O=>l(O)?he.from(O.dom.nodeValue):he.none();return{get:h,getOption:v,set:(O,$)=>{if(!l(O))throw new Error("Can only set raw "+m+" value of a "+m+" node");O.dom.nodeValue=$}}})(Jr,"text"),qo=l=>Ps.get(l),pr=l=>Ps.getOption(l),Bi=(l,m)=>Ps.set(l,m),uc=l=>rs(l)==="img"?1:pr(l).fold(()=>Rn(l).length,m=>m.length),Rl=l=>pr(l).filter(m=>m.trim().length!==0||m.indexOf(qn)>-1).isSome(),au=l=>hn(l)&&se(l,"contenteditable")==="false",um=["img","br"],Cd=l=>Rl(l)||Co(um,rs(l))||au(l),Ml=l=>sd(l,Cd),wd=l=>bh(l,Cd),bh=(l,m)=>{const h=v=>{const T=Rn(v);for(let O=T.length-1;O>=0;O--){const $=T[O];if(m($))return he.some($);const U=h($);if(U.isSome())return U}return he.none()};return h(l)},og={scope:["row","col"]},of=l=>()=>{const m=be.fromTag("td",l.dom);return Ls(m,be.fromTag("br",l.dom)),m},Ua=l=>()=>be.fromTag("col",l.dom),cu=l=>()=>be.fromTag("colgroup",l.dom),Ko=l=>()=>be.fromTag("tr",l.dom),Gs=(l,m,h)=>{const v=li(l,m);return $n(h,(T,O)=>{T===null?Ne(v,O):bs(v,O,T)}),v},qc=l=>l,ua=(l,m,h)=>Ml(l).map(T=>{const O=h.join(","),$=Kt(T,O,U=>nt(U,l));return un($,(U,J)=>{const le=ya(J);return Ls(U,le),le},m)}).getOr(m),bi=(l,m)=>{$n(og,(h,v)=>Ie(l,v).filter(T=>Co(h,T)).each(T=>bs(m,v,T)))},sg=(l,m,h)=>{const v=($,U)=>{Gr($.element,U),Qc(U,"height"),$.colspan!==1&&Qc(U,"width")},T=$=>{const U=be.fromTag(rs($.element),m.dom),J=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),le=J.length>0?ua($.element,U,J):U;return Ls(le,be.fromTag("br")),v($,U),bi($.element,U),l($.element,U),U};return{col:$=>{const U=be.fromTag(rs($.element),m.dom);return v($,U),l($.element,U),U},colgroup:cu(m),row:Ko(m),cell:T,replace:Gs,colGap:Ua(m),gap:of(m)}},Pu=l=>({col:Ua(l),colgroup:cu(l),row:Ko(l),cell:of(l),replace:qc,colGap:Ua(l),gap:of(l)}),ml=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,Rn(be.fromDom(v))},sf=l=>on(l,be.fromDom),Ov=l=>ke(l,"[contenteditable]"),Pi=(l,m=!1)=>P(l)?l.dom.isContentEditable:Ov(l).fold(K(m),h=>Sw(h)==="true"),Sw=l=>l.dom.contentEditable,$i=l=>be.fromDom(l.getBody()),$u=l=>m=>nt(m,$i(l)),fl=l=>{Ne(l,"data-mce-style");const m=h=>Ne(h,"data-mce-style");qe(nu(l),m),qe(ad(l),m),qe(om(l),m)},vb=l=>be.fromDom(l.selection.getStart()),rg=l=>l.getBoundingClientRect().width,xw=l=>l.getBoundingClientRect().height,ek=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return he.from(h).filter(As)},xa=l=>/^(\d+(\.\d+)?)%$/.test(l),yb=l=>/^(\d+(\.\d+)?)px$/.test(l),Sd=l=>gr(l,Is("table")).exists(Pi),Dv=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,T=m.row,O=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&T<=l.finishRow&&O>=l.startRow},Rv=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,ag=(l,m)=>{let h=!0;const v=ut(Rv,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let O=m.startCol;O<=m.finishCol;O++)h=h&&Ro.getAt(l,T,O).exists(v);return h?he.some(m):he.none()},qs=(l,m)=>vs(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),xd=(l,m,h)=>{const v=Ro.findItem(l,m,nt),T=Ro.findItem(l,h,nt);return v.bind(O=>T.map($=>qs(O,$)))},Tp=(l,m,h)=>xd(l,m,h).bind(v=>ag(l,v)),Mv=(l,m,h,v)=>Ro.findItem(l,m,nt).bind(T=>{const O=h>0?T.row+T.rowspan-1:T.row,$=v>0?T.column+T.colspan-1:T.column;return Ro.getAt(l,O+h,$+v).map(J=>J.element)}),vh=(l,m,h)=>xd(l,m,h).map(v=>{const T=Ro.filterItems(l,ut(Dv,v));return on(T,O=>O.element)}),Ep=(l,m)=>{const h=(v,T)=>At(T,v);return Ro.findItem(l,m,h).map(v=>v.element)},kp=(l,m,h)=>zr(l).bind(v=>{const T=dm(v);return Mv(T,l,m,h)}),tk=(l,m,h)=>{const v=dm(l);return vh(v,m,h)},Nv=(l,m,h,v,T)=>{const O=dm(l),$=nt(l,h)?he.some(m):Ep(O,m),U=nt(l,T)?he.some(v):Ep(O,v);return $.bind(J=>U.bind(le=>vh(O,J,le)))},Bv=(l,m,h)=>{const v=dm(l);return Tp(v,m,h)},dm=Ro.fromTable;var Td=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],mm=()=>{const l=le=>be.fromDom(le.dom.cloneNode(!1)),m=le=>Qt(le).dom,h=le=>Er(le)?rs(le)==="body"?!0:Co(Td,rs(le)):!1,v=le=>Er(le)?Co(["br","img","hr","input"],rs(le)):!1,T=le=>Er(le)&&se(le,"contenteditable")==="false",O=(le,Te)=>le.dom.compareDocumentPosition(Te.dom),$=(le,Te)=>{const lt=Yt(le);wr(Te,lt)},U=le=>{const Te=rs(le);return Co(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Te)},J=le=>Er(le)?Ie(le,"lang"):he.none();return{up:K({selector:xo,closest:ke,predicate:Vr,all:Da}),down:K({selector:ea,predicate:to}),styles:K({get:_i,getRaw:il,set:Hs,remove:Qc}),attrs:K({get:se,set:bs,remove:Ne,copyTo:$}),insert:K({before:Lr,after:jr,afterAll:ms,append:Ls,appendAll:va,prepend:Rr,wrap:Wi}),remove:K({unwrap:Zi,remove:fr}),create:K({nu:be.fromTag,clone:l,text:be.fromText}),query:K({comparePosition:O,prevSibling:Va,nextSibling:cc}),property:K({children:Rn,name:rs,parent:us,document:m,isText:Jr,isComment:Jo,isElement:Er,isSpecial:U,getLanguage:J,getText:qo,setText:Bi,isBoundary:h,isEmptyTag:v,isNonEditable:T}),eq:nt,is:Xt}};const rf=(l,m,h,v)=>{const T=h[0],O=h.slice(1);return v(l,m,T,O)},_p=(l,m,h)=>h.length>0?rf(l,m,h,Cb):he.none(),Cb=(l,m,h,v)=>{const T=m(l,h);return un(v,(O,$)=>{const U=m(l,$);return fm(l,O,U)},T)},fm=(l,m,h)=>m.bind(v=>h.filter(ut(l.eq,v))),Tw=(l,m)=>ut(l.eq,m),Ew=(l,m,h,v=Pt)=>{const T=[m].concat(l.up().all(m)),O=[h].concat(l.up().all(h)),$=Te=>ps(Te,v).fold(()=>Te,Nt=>Te.slice(0,Nt+1)),U=$(T),J=$(O),le=H(U,Te=>rt(J,Tw(l,Te)));return{firstpath:U,secondpath:J,shared:le}},Pv=_p,kw=Ew,Ap=mm(),fs=(l,m)=>Pv(Ap,(h,v)=>l(v),m),bn=(l,m,h)=>kw(Ap,l,m,h),gm=l=>xo(l,"table"),cg=(l,m,h)=>{const v=T=>O=>h!==void 0&&h(O)||nt(O,T);return nt(l,m)?he.some({boxes:he.some([l]),start:l,finish:m}):gm(l).bind(T=>gm(m).bind(O=>{if(nt(T,O))return he.some({boxes:tk(T,l,m),start:l,finish:m});if(At(T,O)){const $=Kt(m,"td,th",v(T)),U=$.length>0?$[$.length-1]:m;return he.some({boxes:Nv(T,l,T,m,O),start:l,finish:U})}else if(At(O,T)){const $=Kt(l,"td,th",v(O)),U=$.length>0?$[$.length-1]:l;return he.some({boxes:Nv(O,l,T,m,O),start:l,finish:U})}else return bn(l,m).shared.bind($=>ke($,"table",h).bind(U=>{const J=Kt(m,"td,th",v(U)),le=J.length>0?J[J.length-1]:m,Te=Kt(l,"td,th",v(U)),lt=Te.length>0?Te[Te.length-1]:l;return he.some({boxes:Nv(U,l,T,m,O),start:lt,finish:le})}))}))},wb=(l,m)=>{const h=ea(l,m);return h.length>0?he.some(h):he.none()},_w=(l,m)=>H(l,h=>Zo(h,m)),$v=(l,m,h)=>oe(l,m).bind(v=>oe(l,h).bind(T=>fs(gm,[v,T]).map(O=>({first:v,last:T,table:O})))),cr=(l,m)=>xo(l,"table").bind(h=>oe(h,m).bind(v=>cg(v,l).bind(T=>T.boxes.map(O=>({boxes:O,start:T.start,finish:T.finish}))))),Aw=(l,m,h,v,T)=>_w(l,T).bind(O=>kp(O,m,h).bind($=>cr($,v))),Fv=(l,m)=>wb(l,m),Ow=(l,m,h)=>$v(l,m,h).bind(v=>{const T=J=>nt(l,J),O="thead,tfoot,tbody,table",$=xo(v.first,O,T),U=xo(v.last,O,T);return $.bind(J=>U.bind(le=>nt(J,le)?Bv(v.table,v.first,v.last):he.none()))}),st=ot,Iv=l=>{const m=(v,T)=>Ie(v,T).exists(O=>parseInt(O,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&An(l,h)?he.some(l):he.none()},Lv=(l,m,h)=>m.length<=1?he.none():Ow(l,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),ig="data-mce-selected",Sb="td["+ig+"],th["+ig+"]",hm="["+ig+"]",Op="data-mce-first-selected",lg="td["+Op+"],th["+Op+"]",Hv="data-mce-last-selected",iu="td["+Hv+"],th["+Hv+"]",Zr=hm,Fi={selected:ig,selectedSelector:Sb,firstSelected:Op,firstSelectedSelector:lg,lastSelected:Hv,lastSelectedSelector:iu},Dp=(l,m,h)=>({element:h,mergable:Lv(m,l,Fi),unmergable:Iv(l),selection:st(l)}),Fu=(l,m,h)=>({element:l,clipboard:m,generators:h}),Dw=(l,m,h,v)=>({selection:st(l),clipboard:h,generators:v}),Vv=l=>zr(l).bind(m=>Fv(m,Fi.firstSelectedSelector)).fold(K(l),m=>m[0]),af=l=>(m,h)=>{const v=rs(m),T=v==="col"||v==="colgroup"?Vv(m):m;return ke(T,l,h)},zv=af("th,td,caption"),Rw=af("th,td"),pm=l=>sf(l.model.table.getSelectedCells()),cf=l=>pt(pm(l),m=>Zo(m,Fi.selectedSelector)),Iu=l=>zr(l[0]).map(m=>{const h=Jt(m,Zr);return fl(h),[h]}),xb=(l,m)=>on(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),nk=l=>on(l,m=>m.dom.innerText).join(""),yh=(l,m)=>{l.on("BeforeGetContent",h=>{const v=T=>{h.preventDefault(),Iu(T).each(O=>{h.content=h.format==="text"?nk(O):xb(l,O)})};if(h.selection===!0){const T=cf(l);T.length>=1&&v(T)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=pm(l);xe(v).each(T=>{zr(T).each(O=>{const $=pt(ml(h.content),J=>rs(J)!=="meta"),U=Is("table");if($.length===1&&U($[0])){h.preventDefault();const J=be.fromDom(l.getDoc()),le=Pu(J),Te=Fu(T,$[0],le);m.pasteCells(O,Te).each(()=>{l.focus()})}})})}})},ec=(l,m)=>({element:l,offset:m}),nn=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>nn(l,v,h).orThunk(()=>he.some(v))):he.none(),Uv=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Mw=(l,m)=>{const h=nn(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return ec(h,Uv(l,h));const v=l.property().children(h);return v.length>0?Mw(l,v[v.length-1]):ec(h,Uv(l,h))},Kc=Mw,Wv=mm(),Nw=l=>Kc(Wv,l),Zv=(l,m)=>{ei(l)||Ki(l).each(v=>{const T=v.value/2;hh(l,T,v.unit),hh(m,T,v.unit)})},Ed=l=>on(l,K(0)),gl=(l,m,h,v,T)=>T(l.slice(0,m)).concat(v).concat(T(l.slice(h))),Tb=l=>(m,h,v,T)=>{if(l(v)){const O=Math.max(T,m[h]-Math.abs(v)),$=Math.abs(O-m[h]);return v>=0?$:-$}else return v},ug=Tb(l=>l<0),ok=Tb(Ze),Bw=()=>{const l=(U,J,le,Te,lt)=>{const Nt=ug(U,J,Te,lt);return gl(U,J,le+1,[Nt,0],Ed)},m=(U,J,le,Te)=>{const lt=(100+le)/100,Nt=Math.max(Te,(U[J]+le)/lt);return on(U,(_t,Ye)=>(Ye===J?Nt:_t/lt)-_t)},h=(U,J,le,Te,lt,Nt)=>Nt?m(U,J,Te,lt):l(U,J,le,Te,lt);return{resizeTable:(U,J)=>U(J),clampTableDelta:ug,calcLeftEdgeDeltas:h,calcMiddleDeltas:(U,J,le,Te,lt,Nt,_t)=>h(U,le,Te,lt,Nt,_t),calcRightEdgeDeltas:(U,J,le,Te,lt,Nt)=>{if(Nt)return m(U,le,Te,lt);{const _t=ug(U,le,Te,lt);return Ed(U.slice(0,le)).concat([_t])}},calcRedestributedWidths:(U,J,le,Te)=>{if(Te){const Nt=(J+le)/J,_t=on(U,Ye=>Ye/Nt);return{delta:Nt*100-100,newSizes:_t}}else return{delta:le,newSizes:U}}}},Rp=()=>{const l=($,U,J,le,Te)=>{const lt=le>=0?J:U,Nt=ok($,lt,le,Te);return gl($,U,J+1,[Nt,-Nt],Ed)};return{resizeTable:($,U,J)=>{J&&$(U)},clampTableDelta:($,U,J,le,Te)=>{if(Te){if(J>=0)return J;{const lt=Se($,(Nt,_t)=>Nt+_t-le,0);return Math.max(-lt,J)}}else return ug($,U,J,le)},calcLeftEdgeDeltas:l,calcMiddleDeltas:($,U,J,le,Te,lt)=>l($,J,le,Te,lt),calcRightEdgeDeltas:($,U,J,le,Te,lt)=>{if(lt)return Ed($);{const Nt=le/$.length;return on($,K(Nt))}},calcRedestributedWidths:($,U,J,le)=>({delta:0,newSizes:$})}},Ch=l=>Ro.fromTable(l).grid,wh=Is("th"),dg=l=>An(l,m=>wh(m.element)),Pw=(l,m)=>l&&m?"sectionCells":l?"section":"cells",Eb=l=>{const m=l.section==="thead",h=ze(mg(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:Pw(m,h)}:{type:"body"}},mg=l=>{const m=pt(l,h=>wh(h.element));return m.length===0?he.some("td"):m.length===l.length?he.some("th"):he.none()},kb=l=>{const m=on(l,T=>Eb(T).type),h=Co(m,"header"),v=Co(m,"footer");if(!h&&!v)return he.some("body");{const T=Co(m,"body");return h&&!T&&!v?he.some("header"):!h&&!T&&v?he.some("footer"):he.none()}},Yi=l=>eo(l.all,m=>{const h=Eb(m);return h.type==="header"?he.from(h.subType):he.none()}),Ii=(l,m,h)=>it(h(l.element,m),!0,l.isLocked),bm=(l,m)=>l.section!==m?pn(l.element,l.cells,m,l.isNew):l,_b=()=>({transformRow:bm,transformCell:(l,m,h)=>{const v=h(l.element,m),T=rs(v)!=="td"?cl(v,"td"):v;return it(T,l.isNew,l.isLocked)}}),$w=()=>({transformRow:bm,transformCell:Ii}),Mp=()=>({transformRow:(l,m)=>bm(l,m==="thead"?"tbody":m),transformCell:Ii}),Sh={getTableSectionType:(l,m)=>{const h=Ro.fromTable(l);switch(Yi(h).getOr(m)){case"section":return _b();case"sectionCells":return $w();case"cells":return Mp()}},section:_b,sectionCells:$w,cells:Mp,fallback:()=>({transformRow:ot,transformCell:Ii})},kd=(l,m,h,v)=>{h===v?Ne(l,m):bs(l,m,h)},jv=(l,m,h)=>{Io(Hr(l,m)).fold(()=>Rr(l,h),v=>jr(v,h))},sk=(l,m)=>{const h=Y(l,m).getOrThunk(()=>{const v=be.fromTag(m,qt(l).dom);return m==="thead"?jv(l,"caption,colgroup",v):m==="colgroup"?jv(l,"caption",v):Ls(l,v),v});return Ra(h),h},Fw=(l,m)=>{const h=[],v=[],T=_t=>on(_t,Ye=>{Ye.isNew&&h.push(Ye.element);const Dt=Ye.element;return Ra(Dt),qe(Ye.cells,Ke=>{Ke.isNew&&v.push(Ke.element),kd(Ke.element,"colspan",Ke.colspan,1),kd(Ke.element,"rowspan",Ke.rowspan,1),Ls(Dt,Ke.element)}),Dt}),O=_t=>bo(_t,Ye=>on(Ye.cells,Dt=>(kd(Dt.element,"span",Dt.colspan,1),Dt.element))),$=(_t,Ye)=>{const Dt=sk(l,Ye),en=(Ye==="colgroup"?O:T)(_t);va(Dt,en)},U=_t=>{Y(l,_t).each(fr)},J=(_t,Ye)=>{_t.length>0?$(_t,Ye):U(Ye)},le=[],Te=[],lt=[],Nt=[];return qe(m,_t=>{switch(_t.section){case"thead":le.push(_t);break;case"tbody":Te.push(_t);break;case"tfoot":lt.push(_t);break;case"colgroup":Nt.push(_t);break}}),J(Nt,"colgroup"),J(le,"thead"),J(Te,"tbody"),J(lt,"tfoot"),{newRows:h,newCells:v}},Gv=l=>on(l,m=>{const h=ya(m.element);return qe(m.cells,v=>{const T=Cc(v.element);kd(T,"colspan",v.colspan,1),kd(T,"rowspan",v.rowspan,1),Ls(h,T)}),h}),br=(l,m)=>on(l,h=>fi(h,m)),rk=(l,m)=>l[m],Iw=(l,m)=>{if(l.length===0)return 0;const h=l[0];return ps(l,T=>!m(h.element,T.element)).getOr(l.length)},ak=(l,m,h,v)=>{const T=rk(l,m),O=T.section==="colgroup",$=Iw(T.cells.slice(h),v),U=O?1:Iw(br(l.slice(m),h),v);return{colspan:$,rowspan:U}},Ob=(l,m)=>{const h=on(l,T=>on(T.cells,Pt)),v=(T,O,$,U)=>{for(let J=T;J<T+$;J++)for(let le=O;le<O+U;le++)h[J][le]=!0};return on(l,(T,O)=>{const $=bo(T.cells,(U,J)=>{if(h[O][J]===!1){const le=ak(l,O,J,m);return v(O,J,le.rowspan,le.colspan),[W(U.element,le.rowspan,le.colspan,U.isNew)]}else return[]});return Le(T.element,$,T.section,T.isNew)})},xh=(l,m,h)=>{const v=[];qe(l.colgroups,T=>{const O=[];for(let $=0;$<l.grid.columns;$++){const U=Ro.getColumnAt(l,$).map(J=>it(J.element,h,!1)).getOrThunk(()=>it(m.colGap(),!0,!1));O.push(U)}v.push(pn(T.element,O,"colgroup",h))});for(let T=0;T<l.grid.rows;T++){const O=[];for(let J=0;J<l.grid.columns;J++){const le=Ro.getAt(l,T,J).map(Te=>it(Te.element,h,Te.isLocked)).getOrThunk(()=>it(m.gap(),!0,!1));O.push(le)}const $=l.all[T],U=pn($.element,O,$.section,h);v.push(U)}return v},vm=(l,m)=>xh(l,m,!1),Wa=l=>Ob(l,nt),ym=(l,m)=>eo(l.all,h=>H(h.cells,v=>nt(m,v.element))),qv=(l,m,h)=>{const v=on(m.selection,O=>ui(O).bind($=>ym(l,$)).filter(h)),T=tn(v);return Xs(T.length>0,T)},Za=(l,m,h,v,T)=>(O,$,U,J)=>{const le=Ro.fromTable(O),Te=he.from(J==null?void 0:J.section).getOrThunk(Sh.fallback);return m(le,$).map(Nt=>{const _t=vm(le,U),Ye=l(_t,Nt,nt,T(U),Te),Dt=gd(Ye.grid),Ke=Wa(Ye.grid);return{info:Nt,grid:Ke,cursor:Ye.cursor,lockedColumns:Dt}}).bind(Nt=>{const _t=Fw(O,Nt.grid),Ye=he.from(J==null?void 0:J.sizing).getOrThunk(()=>w.getTableSize(O)),Dt=he.from(J==null?void 0:J.resize).getOrThunk(Rp);return h(O,Nt.grid,Nt.info,{sizing:Ye,resize:Dt,section:Te}),v(O),Ne(O,xs),Nt.lockedColumns.length>0&&bs(O,xs,Nt.lockedColumns.join(",")),he.some({cursor:Nt.cursor,newRows:_t.newRows,newCells:_t.newCells})})},Kv=(l,m)=>ui(m.element).bind(h=>ym(l,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Db=(l,m)=>qv(l,m,Ze).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),MO=(l,m)=>m.mergable,Lw=(l,m)=>m.unmergable,lf=(l,m)=>qv(l,m,Ze),uf=(l,m)=>qv(l,m,h=>!h.isLocked),Rb=(l,m)=>ym(l,m).exists(h=>!h.isLocked),Hw=(l,m)=>An(m,h=>Rb(l,h)),NO=(l,m)=>MO(l,m).filter(h=>Hw(l,h.cells)),Hu=(l,m)=>Lw(l,m).filter(h=>Hw(l,h)),$s=(l,m,h,v)=>{const T=Ja(l).rows;if(T.length===0)return l;for(let O=m.startRow;O<=m.finishRow;O++)for(let $=m.startCol;$<=m.finishCol;$++){const U=T[O],J=fi(U,$).isLocked;cm(U,$,it(v(),!1,J))}return l},Vw=(l,m,h,v)=>{const T=Ja(l).rows;let O=!0;for(let $=0;$<T.length;$++)for(let U=0;U<Di(T[0]);U++){const J=T[$],le=fi(J,U),Te=le.element,lt=h(Te,m);lt&&!O?cm(J,U,it(v(),!0,le.isLocked)):lt&&(O=!1)}return l},da=(l,m)=>Se(l,(h,v)=>rt(h,T=>m(T.element,v.element))?h:h.concat([v]),[]),tc=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&qe(l,T=>{const O=T.cells[m-1];let $=0;const U=v();for(;T.cells.length>m+$&&h(O.element,T.cells[m+$].element);)cm(T,m+$,it(U,!0,T.cells[m+$].isLocked)),$++}),l),Nl=(l,m,h,v)=>{const T=Ja(l).rows;if(m>0&&m<T.length){const O=T[m-1].cells,$=da(O,h);qe($,U=>{let J=he.none();for(let le=m;le<T.length;le++)for(let Te=0;Te<Di(T[0]);Te++){const lt=T[le],Nt=fi(lt,Te);h(Nt.element,U.element)&&(J.isNone()&&(J=he.some(v())),J.each(Ye=>{cm(lt,Te,it(Ye,!0,Nt.isLocked))}))}})}return l},vi=l=>{const m=O=>O(l),h=K(l),v=()=>T,T={tag:!0,inner:l,fold:(O,$)=>$(l),isValue:Ze,isError:Pt,map:O=>Cm.value(O(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:O=>{O(l)},toOptional:()=>he.some(l)};return T},fg=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,T)=>v(l),isValue:Pt,isError:Ze,map:m,mapError:v=>Cm.error(v(l)),bind:m,exists:Pt,forall:Ze,getOr:ot,or:ot,getOrThunk:Vn,orThunk:Vn,getOrDie:ht(String(l)),each:mt,toOptional:he.none};return h},Cm={value:vi,error:fg,fromOption:(l,m)=>l.fold(()=>fg(m),vi)},hl=(l,m,h)=>{if(l.row>=m.length||l.column>Di(m[0]))return Cm.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),T=v[0].cells.slice(l.column),O=Di(h[0]),$=h.length;return Cm.value({rowDelta:v.length-$,colDelta:T.length-O})},lu=(l,m)=>{const h=Di(l[0]),v=Di(m[0]);return{rowDelta:0,colDelta:h-v}},Eh=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},Np=(l,m,h,v)=>{const T=m.section==="colgroup"?h.col:h.cell;return ko(l,O=>it(T(),!0,v(O)))},Yv=(l,m,h,v)=>{const T=l[l.length-1];return l.concat(ko(m,()=>{const O=T.section==="colgroup"?h.colgroup:h.row,$=ib(T,O,ot),U=Np($.cells.length,$,h,J=>ts(v,J.toString()));return Kf($,U)}))},zw=(l,m,h,v)=>on(l,T=>{const O=Np(m,T,h,Pt);return Na(T,v,O)}),Uw=(l,m,h)=>on(l,v=>Se(h,(T,O)=>{const $=Np(1,v,m,Ze)[0];return mi(T,O,$)},v)),kh=(l,m,h)=>{const v=m.colDelta<0?zw:ot,T=m.rowDelta<0?Yv:ot,O=gd(l),$=Di(l[0]),U=rt(O,Te=>Te===$-1),J=v(l,Math.abs(m.colDelta),h,U?$-1:$),le=gd(J);return T(J,Math.abs(m.rowDelta),h,Ue(le,Ze))},Xv=(l,m,h,v)=>{const T=fi(l[m],h),O=ut(v,T.element),$=l[m];return l.length>1&&Di($)>1&&(h>0&&O(Ic($,h-1))||h<$.cells.length-1&&O(Ic($,h+1))||m>0&&O(Ic(l[m-1],h))||m<l.length-1&&O(Ic(l[m+1],h)))},ck=(l,m,h,v,T,O)=>{const $=l.row,U=l.column,J=h.length,le=Di(h[0]),Te=$+J,lt=U+le+O.length,Nt=Ue(O,Ze);for(let _t=$;_t<Te;_t++){let Ye=0;for(let Dt=U;Dt<lt;Dt++){if(Nt[Dt]){Ye++;continue}Xv(m,_t,Dt,T)&&Vw(m,Ic(m[_t],Dt),T,v.cell);const Ke=Dt-U-Ye,en=fi(h[_t-$],Ke),Hn=en.element,lo=v.replace(Hn);cm(m[_t],Dt,it(lo,!0,en.isLocked))}}return m},ik=(l,m,h)=>{const v=Di(m[0]),T=Ja(m).cols.length+l.row,O=ko(v-l.column,U=>U+l.column),$=H(O,U=>An(h,J=>J!==U)).getOr(v-1);return{row:T,column:$}},Ww=(l,m,h)=>pt(h,v=>v>=l.column&&v<=Di(m[0])+l.column),Zw=(l,m,h,v,T)=>{const O=gd(m),$=ik(l,m,O),U=Ja(h).rows,J=Ww($,U,O);return hl($,m,U).map(Te=>{const lt={...Te,colDelta:Te.colDelta-J.length},Nt=kh(m,lt,v),_t=gd(Nt),Ye=Ww($,U,_t);return ck($,Nt,U,v,T,Ye)})},Jv=(l,m,h,v,T)=>{tc(m,l,T,v.cell);const O=Eh(h,m),$=kh(h,O,v),U=Eh(m,$),J=kh(m,U,v);return on(J,(le,Te)=>Na(le,l,$[Te].cells))},jw=(l,m,h,v,T)=>{Nl(m,l,T,v.cell);const O=gd(m),$=lu(m,h),U={...$,colDelta:$.colDelta-O.length},J=kh(m,U,v),{cols:le,rows:Te}=Ja(J),lt=gd(J),Nt=lu(h,m),_t={...Nt,colDelta:Nt.colDelta+lt.length},Ye=Uw(h,v,lt),Dt=kh(Ye,_t,v);return[...le,...Te.slice(0,l),...Dt,...Te.slice(l,Te.length)]},lk=(l,m,h,v)=>ib(l,T=>v(T,h),m),Qv=(l,m,h,v,T)=>{const{rows:O,cols:$}=Ja(l),U=O.slice(0,m),J=O.slice(m),le=lk(O[h],(Te,lt)=>m>0&&m<O.length&&v(Ic(O[m-1],lt),Ic(O[m],lt))?fi(O[m],lt):it(T(Te.element,v),!0,Te.isLocked),v,T);return[...$,...U,le,...J]},gg=(l,m,h,v,T,O,$)=>{if(h==="colgroup"||!v){const U=fi(l,T);return it($(U.element,O),!0,!1)}else return fi(l,m)},ey=(l,m,h,v,T)=>on(l,O=>{const $=m>0&&m<Di(O)&&v(Ic(O,m-1),Ic(O,m)),U=gg(O,m,O.section,$,h,v,T);return mi(O,m,U)}),uk=(l,m)=>bo(l,h=>{const v=h.cells,T=un(m,(O,$)=>$>=0&&$<O.length?O.slice(0,$).concat(O.slice($+1)):O,v);return T.length>0?[pn(h.element,T,h.section,h.isNew)]:[]}),dk=(l,m,h)=>{const{rows:v,cols:T}=Ja(l);return[...T,...v.slice(0,m),...v.slice(h+1)]},Gw=(l,m,h,v)=>Ic(l[m],h)!==void 0&&m>0&&v(Ic(l[m-1],h),Ic(l[m],h)),kr=(l,m,h)=>m>0&&h(Ic(l,m-1),Ic(l,m)),df=(l,m,h,v)=>Gw(l,m,h,v)||kr(l[m],h,v),hg=(l,m)=>An(m,ot)&&dg(l.cells)?Ze:(v,T,O)=>!(rs(v.element)==="th"&&m[O]),qw=(l,m)=>An(m,ot)&&dg(l)?Ze:(v,T,O)=>!(rs(v.element)==="th"&&m[T]),Mb=(l,m,h,v)=>{const T=$=>$==="row"?Xa(m):ei(m),O=$=>T($)?`${$}group`:$;return l?wh(m)?O(h):null:v&&wh(m)?O(h==="row"?"col":"row"):null},Yc=(l,m)=>(h,v,T)=>he.some(Mb(l,h.element,"col",m[T])),Li=(l,m)=>(h,v)=>he.some(Mb(l,h.element,"row",m[v])),pg=(l,m,h)=>it(h(l.element,m),!0,l.isLocked),Nb=(l,m,h,v,T,O,$)=>{const U=J=>rt(m,le=>h(J.element,le.element));return on(l,(J,le)=>ll(J,(Te,lt)=>{if(U(Te)){const Nt=$(Te,le,lt)?T(Te,h,v):Te;return O(Nt,le,lt).each(_t=>{de(Nt.element,{scope:he.from(_t)})}),Nt}else return Te}))},ty=(l,m,h)=>bo(l,(v,T)=>df(l,T,m,h)?[]:[fi(v,m)]),Kw=(l,m,h)=>{const v=l[m];return bo(v.cells,(T,O)=>df(l,m,O,h)?[]:[T])},Yw=(l,m,h,v,T)=>{const O=Ja(l).rows,$=bo(m,Te=>ty(O,Te,v)),U=on(O,Te=>dg(Te.cells)),J=qw($,U),le=Li(h,U);return Nb(l,$,v,T,pg,le,J)},Xw=(l,m,h,v,T,O,$)=>{const{cols:U,rows:J}=Ja(l),le=J[m[0]],Te=bo(m,Ke=>Kw(J,Ke,T)),lt=on(le.cells,(Ke,en)=>dg(ty(J,en,T))),Nt=[...J];qe(m,Ke=>{Nt[Ke]=$.transformRow(J[Ke],h)});const _t=[...U,...Nt],Ye=hg(le,lt),Dt=Yc(v,lt);return Nb(_t,Te,T,O,$.transformCell,Dt,Ye)},uu=(l,m,h,v)=>{const T=Ja(l).rows,O=on(m,$=>fi(T[$.row],$.column));return Nb(l,O,h,v,pg,he.none,Ze)},$r={generate:l=>{if(!Wt(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return qe(l,(v,T)=>{const O=Rt(v);if(O.length!==1)throw new Error("one and only one name per case");const $=O[0],U=v[$];if(h[$]!==void 0)throw new Error("duplicate key detected:"+$);if($==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Wt(U))throw new Error("case arguments must be an array");m.push($),h[$]=(...J)=>{const le=J.length;if(le!==U.length)throw new Error("Wrong number of arguments to case "+$+". Expected "+U.length+" ("+U+"), got "+le);return{fold:(...lt)=>{if(lt.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+lt.length);return lt[T].apply(null,J)},match:lt=>{const Nt=Rt(lt);if(m.length!==Nt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Nt.join(","));if(!An(m,Ye=>Co(Nt,Ye)))throw new Error("Not all branches were specified when using match. Specified: "+Nt.join(", ")+`
Required: `+m.join(", "));return lt[$].apply(null,J)},log:lt=>{console.log(lt,{constructors:m,constructor:$,params:J})}}}}),h}},Vu={...$r.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},mk=(l,m)=>l.length===0?Vu.none():l.length===1?Vu.only(0):m===0?Vu.left(0,1):m===l.length-1?Vu.right(m-1,m):m>0&&m<l.length-1?Vu.middle(m-1,m,m+1):Vu.none(),Jw=(l,m,h,v,T)=>{const O=l.slice(0),$=mk(l,m),U=K(on(O,K(0))),J=Nt=>v.singleColumnWidth(O[Nt],h),le=(Nt,_t)=>T.calcLeftEdgeDeltas(O,Nt,_t,h,v.minCellWidth(),v.isRelative),Te=(Nt,_t,Ye)=>T.calcMiddleDeltas(O,Nt,_t,Ye,h,v.minCellWidth(),v.isRelative),lt=(Nt,_t)=>T.calcRightEdgeDeltas(O,Nt,_t,h,v.minCellWidth(),v.isRelative);return $.fold(U,J,le,Te,lt)},ny=(l,m,h)=>{let v=0;for(let T=l;T<m;T++)v+=h[T]!==void 0?h[T]:0;return v},bg=(l,m)=>{const h=Ro.justCells(l);return on(h,v=>{const T=ny(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},oy=(l,m)=>{const h=Ro.justColumns(l);return on(h,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},_h=(l,m)=>{const h=Ro.justCells(l);return on(h,v=>{const T=ny(v.row,v.row+v.rowspan,m);return{element:v.element,height:T,rowspan:v.rowspan}})},vg=(l,m)=>on(l.all,(h,v)=>({element:h.element,height:m[v]})),fk=l=>un(l,(m,h)=>m+h,0),Bp=(l,m)=>Ro.hasColumns(l)?oy(l,m):bg(l,m),Pp=(l,m,h)=>{const v=Bp(l,m);qe(v,T=>{h.setElementWidth(T.element,T.width)})},sy=(l,m,h,v,T)=>{const O=Ro.fromTable(l),$=T.getCellDelta(m),U=T.getWidths(O,T),J=h===O.grid.columns-1,le=v.clampTableDelta(U,h,$,T.minCellWidth(),J),Te=Jw(U,h,le,T,v),lt=on(Te,(Nt,_t)=>Nt+U[_t]);Pp(O,lt,T),v.resizeTable(T.adjustTableWidth,le,J)},Bb=(l,m,h,v)=>{const T=Ro.fromTable(l),O=si(T,l,v),$=on(O,(Te,lt)=>h===lt?Math.max(m+Te,nm()):Te),U=_h(T,$),J=vg(T,$);qe(J,Te=>{Pr(Te.element,Te.height)}),qe(U,Te=>{Pr(Te.element,Te.height)});const le=fk($);Pr(l,le)},$p=(l,m,h,v,T)=>{const O=Ro.generate(m),$=v.getWidths(O,v),U=v.pixelWidth(),{newSizes:J,delta:le}=T.calcRedestributedWidths($,U,h.pixelDelta,v.isRelative);Pp(O,J,v),v.adjustTableWidth(le)},ry=(l,m,h,v)=>{const T=Ro.generate(m),O=v.getWidths(T,v);Pp(T,O,v)},mf=l=>Se(l,(h,v)=>rt(h,O=>O.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),Ah=Is("col"),Qw=Is("colgroup"),eS=l=>rs(l)==="tr"||Qw(l),tS=l=>{const m=lc(l,"colspan",1),h=lc(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},zu=(l,m=tS)=>{const h=U=>Ah(U.element)?l.col(U):l.cell(U),v=U=>Qw(U.element)?l.colgroup(U):l.row(U),T=U=>{if(eS(U))return v({element:U});{const J=U,le=h(m(J));return O=he.some({item:J,replacement:le}),le}};let O=he.none();return{getOrInit:(U,J)=>O.fold(()=>T(U),le=>J(U,le.item)?le.replacement:T(U))}},Bl=l=>m=>{const h=[],v=($,U)=>H(h,J=>U(J.item,$)),T=$=>{const U=l==="td"?{scope:null}:{},J=m.replace($,l,U);return h.push({item:$,sub:J}),J};return{replaceOrInit:($,U)=>{if(eS($)||Ah($))return $;{const J=$;return v(J,U).fold(()=>T(J),le=>U($,le.item)?le.sub:T(J))}}}},Fp=l=>Ie(l,"scope").map(m=>m.substr(0,3)),_r={modification:zu,transform:Bl,merging:l=>({unmerge:v=>{const T=Fp(v);return T.each(O=>bs(v,"scope",O)),()=>{const O=l.cell({element:v,colspan:1,rowspan:1});return Qc(O,"width"),Qc(v,"width"),T.each($=>bs(O,"scope",$)),O}},merge:v=>{const T=()=>{const O=tn(on(v,Fp));if(O.length===0)return he.none();{const $=O[0],U=["row","col"];return rt(O,le=>le!==$&&Co(U,le))?he.none():he.from($)}};return Qc(v[0],"width"),T().fold(()=>Ne(v[0],"scope"),O=>bs(v[0],"scope",O+"group")),K(v[0])}})},yg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ay=(l,m)=>{const h=l.property().name(m);return Co(["ol","ul"],h)},ir=(l,m)=>{const h=l.property().name(m);return Co(yg,h)},du=(l,m)=>Co(["br","img","hr","input"],l.property().name(m)),Ip=mm(),nc=l=>ir(Ip,l),Sm=l=>ay(Ip,l),cy=l=>du(Ip,l),gk=l=>{const m=Is("br"),h=J=>An(J,le=>m(le)||Jr(le)&&qo(le).trim().length===0),v=J=>rs(J)==="li"||Vr(J,Sm).isSome(),T=J=>cc(J).map(le=>nc(le)?!0:cy(le)?rs(le)!=="img":!1).getOr(!1),O=J=>wd(J).bind(le=>{const Te=T(le);return us(le).map(lt=>Te===!0||v(lt)||m(le)||nc(lt)&&!nt(J,lt)?[]:[be.fromTag("br")])}).getOr([]),U=(()=>{const J=bo(l,le=>{const Te=Rn(le);return h(Te)?[]:Te.concat(O(le))});return J.length===0?[be.fromTag("br")]:J})();Ra(l[0]),va(l[0],U)},iy=l=>Pi(l,!0),Lp=l=>{nu(l).length===0&&fr(l)},Cg=(l,m)=>({grid:l,cursor:m}),ly=l=>eo(l,m=>eo(m.cells,h=>{const v=h.element;return Xs(iy(v),v)})),Pb=(l,m,h)=>{var v,T;const O=Ja(l).rows;return he.from((T=(v=O[m])===null||v===void 0?void 0:v.cells[h])===null||T===void 0?void 0:T.element).filter(iy).orThunk(()=>ly(O))},yi=(l,m,h)=>{const v=Pb(l,m,h);return Cg(l,v)},Hp=l=>Se(l,(h,v)=>rt(h,O=>O.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),uy=(l,m,h,v)=>{const T=m[0].row,O=Hp(m),$=un(O,(U,J)=>({grid:Qv(U.grid,T,J.row+U.delta,h,v.getOrInit),delta:U.delta+1}),{grid:l,delta:0}).grid;return yi($,T,m[0].column)},Vp=(l,m,h,v)=>{const T=Hp(m),O=T[T.length-1],$=O.row+O.rowspan,U=un(T,(J,le)=>Qv(J,$,le.row,h,v.getOrInit),l);return yi(U,$,m[0].column)},Oh=(l,m,h,v)=>{const T=m.details,O=mf(T),$=O[0].column,U=un(O,(J,le)=>({grid:ey(J.grid,$,le.column+J.delta,h,v.getOrInit),delta:J.delta+1}),{grid:l,delta:0}).grid;return yi(U,T[0].row,$)},Xi=(l,m,h,v)=>{const T=m.details,O=T[T.length-1],$=O.column+O.colspan,U=mf(T),J=un(U,(le,Te)=>ey(le,$,Te.column,h,v.getOrInit),l);return yi(J,T[0].row,$)},hk=(l,m,h,v)=>{const T=mf(m),O=on(T,U=>U.column),$=Yw(l,O,!0,h,v.replaceOrInit);return yi($,m[0].row,m[0].column)},dc=(l,m,h,v)=>{const T=uu(l,m,h,v.replaceOrInit);return yi(T,m[0].row,m[0].column)},nS=(l,m,h,v)=>{const T=mf(m),O=on(T,U=>U.column),$=Yw(l,O,!1,h,v.replaceOrInit);return yi($,m[0].row,m[0].column)},xm=(l,m,h,v)=>{const T=uu(l,m,h,v.replaceOrInit);return yi(T,m[0].row,m[0].column)},zp=(l,m)=>(h,v,T,O,$)=>{const U=Hp(v),J=on(U,Te=>Te.row),le=Xw(h,J,l,m,T,O.replaceOrInit,$);return yi(le,v[0].row,v[0].column)},oS=zp("thead",!0),dy=zp("tbody",!1),my=zp("tfoot",!1),fy=(l,m,h,v)=>{const T=mf(m.details),O=uk(l,on(T,U=>U.column)),$=O.length>0?O[0].cells.length-1:0;return yi(O,T[0].row,Math.min(T[0].column,$))},gy=(l,m,h,v)=>{const T=Hp(m),O=dk(l,T[0].row,T[T.length-1].row),$=O.length>0?O.length-1:0;return yi(O,Math.min(m[0].row,$),m[0].column)},sS=(l,m,h,v)=>{const T=m.cells;gk(T);const O=$s(l,m.bounds,h,v.merge(T));return Cg(O,he.from(T[0]))},pk=(l,m,h,v)=>{const O=un(m,($,U)=>Vw($,U,h,v.unmerge(U)),l);return Cg(O,he.from(m[0]))},mc=(l,m,h,v)=>{const O=((J,le)=>{const Te=Ro.fromTable(J);return xh(Te,le,!0)})(m.clipboard,m.generators),$=Wc(m.row,m.column);return Zw($,l,O,m.generators,h).fold(()=>Cg(l,he.some(m.element)),J=>yi(J,m.row,m.column))},ja=(l,m,h)=>{const v=ld(l,h.section),T=Ro.generate(v);return xh(T,m,!0)},Ci=(l,m,h,v)=>{const T=Ja(l).rows,O=m.cells[0].column,$=T[m.cells[0].row],U=ja(m.clipboard,m.generators,$),J=Jv(O,l,U,m.generators,h);return yi(J,m.cells[0].row,m.cells[0].column)},Ji=(l,m,h,v)=>{const T=Ja(l).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,$=T[m.cells[0].row],U=ja(m.clipboard,m.generators,$),J=Jv(O,l,U,m.generators,h);return yi(J,m.cells[0].row,m.cells[0].column)},Kr=(l,m,h,v)=>{const T=Ja(l).rows,O=m.cells[0].row,$=T[O],U=ja(m.clipboard,m.generators,$),J=jw(O,l,U,m.generators,h);return yi(J,m.cells[0].row,m.cells[0].column)},Oc=(l,m,h,v)=>{const T=Ja(l).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,$=T[m.cells[0].row],U=ja(m.clipboard,m.generators,$),J=jw(O,l,U,m.generators,h);return yi(J,m.cells[0].row,m.cells[0].column)},mu=(l,m)=>{const h=Ro.fromTable(l);return lf(h,m).bind(T=>{const O=T[T.length-1],$=T[0].column,U=O.column+O.colspan,J=Dn(on(h.all,le=>pt(le.cells,Te=>Te.column>=$&&Te.column<U)));return mg(J)}).getOr("")},hy=(l,m)=>{const h=Ro.fromTable(l);return lf(h,m).bind(mg).getOr("")},rS=(l,m)=>{const h=Ro.fromTable(l);return lf(h,m).bind(T=>{const O=T[T.length-1],$=T[0].row,U=O.row+O.rowspan,J=h.all.slice($,U);return kb(J)}).getOr("")},$b=(l,m,h,v)=>ry(l,m,h,v.sizing),Fb=(l,m,h,v)=>$p(l,m,h,v.sizing,v.resize),Ib=(l,m)=>rt(m,h=>h.column===0&&h.isLocked),Up=(l,m)=>rt(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),Lb=(l,m)=>{const h=ch(l),v=mf(m);return Se(v,(T,O)=>{const U=h[O.column].map(To).getOr(0);return T+U},0)},py=l=>(m,h)=>lf(m,h).filter(v=>!(l?Ib:Up)(m,v)).map(v=>({details:v,pixelDelta:Lb(m,v)})),BO=(l,m)=>uf(l,m).map(h=>({details:h,pixelDelta:-Lb(l,h)})),Hb=l=>(m,h)=>Db(m,h).filter(v=>!(l?Ib:Up)(m,v.cells)),by=_r.transform("th"),Vb=_r.transform("td"),vy=Za(uy,lf,mt,mt,_r.modification),aS=Za(Vp,lf,mt,mt,_r.modification),sn=Za(Oh,py(!0),Fb,mt,_r.modification),yy=Za(Xi,py(!1),Fb,mt,_r.modification),cS=Za(fy,BO,Fb,Lp,_r.modification),iS=Za(gy,lf,mt,Lp,_r.modification),yt=Za(hk,uf,mt,mt,by),bk=Za(nS,uf,mt,mt,Vb),fc=Za(oS,uf,mt,mt,by),vk=Za(dy,uf,mt,mt,Vb),lS=Za(my,uf,mt,mt,Vb),uS=Za(dc,uf,mt,mt,by),Pl=Za(xm,uf,mt,mt,Vb),$l=Za(sS,NO,$b,mt,_r.merging),Wp=Za(pk,Hu,$b,mt,_r.merging),fu=Za(mc,Kv,$b,mt,_r.modification),Cy=Za(Ci,Hb(!0),mt,mt,_r.modification),Zp=Za(Ji,Hb(!1),mt,mt,_r.modification),Ad=Za(Kr,Db,mt,mt,_r.modification),Uu=Za(Oc,Db,mt,mt,_r.modification),zb=mu,Fl=hy,yk=rS,Ub=(l,m)=>l.dispatch("NewRow",{node:m}),Wb=(l,m)=>l.dispatch("NewCell",{node:m}),ff=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},dS=(l,m,h,v,T)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:T})},wy=l=>{l.dispatch("TableSelectionClear")},Ck=(l,m,h,v,T)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:T})},mS=(l,m,h,v,T)=>{l.dispatch("ObjectResized",{target:m,width:h,height:v,origin:T})},Dh={structure:!1,style:!0},gc={structure:!0,style:!1},wk={structure:!0,style:!0},wg=l=>m=>m.options.get(l),fS="100%",Zb=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return St(be.fromDom(v))+"px"},Sk=(l,m)=>Qs(l)||!ri(l)?m:Il(l)?{...m,width:Zb(l)}:{...m,width:fS},Sy=(l,m)=>Qs(l)||ri(l)?m:Il(l)?{...m,width:Zb(l)}:{...m,width:fS},xk=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=Co(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=Co(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},jp=l=>he.from(l.options.get("table_clone_elements")),gS=l=>{const m=l.options.get("object_resizing");return Co(m.split(","),"table")},hS=wg("table_header_type"),xy=wg("table_column_resizing"),Ty=l=>xy(l)==="preservetable",pS=l=>xy(l)==="resizetable",Od=wg("table_sizing_mode"),jb=l=>Od(l)==="relative",Il=l=>Od(l)==="fixed",Qs=l=>Od(l)==="responsive",Rh=wg("table_resize_bars"),ri=wg("table_style_by_css"),Ey=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:Sy(l,h)},bS=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:Sk(l,h)},vS=wg("table_use_colgroups"),Gp=(l,m)=>jb(l)?w.percentageSize(m):Il(l)?w.pixelSize(m):w.getTableSize(m),ky=(l,m,h)=>{const v=xi=>rs($i(xi))==="table",T=xi=>!v(l)||Ch(xi).rows>1,O=xi=>!v(l)||Ch(xi).columns>1,$=jp(l),U=pS(l)?mt:Zv,J=xi=>{switch(hS(l)){case"section":return Sh.section();case"sectionCells":return Sh.sectionCells();case"cells":return Sh.cells();default:return Sh.getTableSectionType(xi,"section")}},le=(xi,vx)=>vx.cursor.fold(()=>{const Gh=nu(xi);return xe(Gh).filter(P).map(Vl=>{h.clearSelectedCells(xi.dom);const Vc=l.dom.createRng();return Vc.selectNode(Vl.dom),l.selection.setRng(Vc),bs(Vl,"data-mce-selected","1"),Vc})},Gh=>{const Vl=Nw(Gh),Vc=l.dom.createRng();return Vc.setStart(Vl.element.dom,Vl.offset),Vc.setEnd(Vl.element.dom,Vl.offset),l.selection.setRng(Vc),h.clearSelectedCells(xi.dom),he.some(Vc)}),Te=(xi,vx,Gh,Vl)=>(Vc,zl,yx=!1)=>{fl(Vc);const Cx=be.fromDom(l.getDoc()),x_=sg(Gh,Cx,$),T_={sizing:Gp(l,Vc),resize:pS(l)?Bw():Rp(),section:J(Vc)};return vx(Vc)?xi(Vc,zl,x_,T_).bind(I2=>{m.refresh(Vc.dom),qe(I2.newRows,Vg=>{Ub(l,Vg.dom)}),qe(I2.newCells,Vg=>{Wb(l,Vg.dom)});const qh=le(Vc,I2);return P(Vc)&&(fl(Vc),yx||ff(l,Vc.dom,Vl)),qh.map(Vg=>({rng:Vg,effect:Vl}))}):he.none()},lt=Te(iS,T,mt,gc),Nt=Te(cS,O,mt,gc),_t=Te(vy,Ze,mt,gc),Ye=Te(aS,Ze,mt,gc),Dt=Te(sn,Ze,U,gc),Ke=Te(yy,Ze,U,gc),en=Te($l,Ze,mt,gc),Hn=Te(Wp,Ze,mt,gc),lo=Te(Cy,Ze,mt,gc),tr=Te(Zp,Ze,mt,gc),Dc=Te(Ad,Ze,mt,gc),na=Te(Uu,Ze,mt,gc),nl=Te(fu,Ze,mt,wk),Ef=Te(uS,Ze,mt,gc),v1=Te(Pl,Ze,mt,gc),F2=Te(yt,Ze,mt,gc),D0=Te(bk,Ze,mt,gc),zs=Te(fc,Ze,mt,gc),wi=Te(vk,Ze,mt,gc),Si=Te(lS,Ze,mt,gc);return{deleteRow:lt,deleteColumn:Nt,insertRowsBefore:_t,insertRowsAfter:Ye,insertColumnsBefore:Dt,insertColumnsAfter:Ke,mergeCells:en,unmergeCells:Hn,pasteColsBefore:lo,pasteColsAfter:tr,pasteRowsBefore:Dc,pasteRowsAfter:na,pasteCells:nl,makeCellsHeader:Ef,unmakeCellsHeader:v1,makeColumnsHeader:F2,unmakeColumnsHeader:D0,makeRowsHeader:zs,makeRowsBody:wi,makeRowsFooter:Si,getTableRowType:yk,getTableCellType:Fl,getTableColType:zb}},yS=(l,m,h)=>{const v=lc(l,m,1);h===1||v<=1?Ne(l,m):bs(l,m,Math.min(h,v))},CS=(l,m)=>h=>{const v=h.column+h.colspan-1,T=h.column;return v>=l&&T<m},Tk=(l,m,h)=>{if(Ro.hasColumns(l)){const v=pt(Ro.justColumns(l),CS(m,h)),T=on(v,$=>{const U=Cc($.element);return yS(U,"span",h-m),U}),O=be.fromTag("colgroup");return va(O,T),[O]}else return[]},Ek=(l,m,h)=>on(l.all,v=>{const T=pt(v.cells,CS(m,h)),O=on(T,U=>{const J=Cc(U.element);return yS(J,"colspan",h-m),J}),$=be.fromTag("tr");return va($,O),$}),kk=(l,m)=>{const h=Ro.fromTable(l);return uf(h,m).map(T=>{const O=T[T.length-1],$=T[0].column,U=O.column+O.colspan,J=Tk(h,$,U),le=Ek(h,$,U);return[...J,...le]})},_k=(l,m,h)=>{const v=Ro.fromTable(l);return lf(v,m).bind(O=>{const $=xh(v,h,!1),J=Ja($).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),le=bo(J,lt=>{const Nt=pt(lt.cells,_t=>!_t.isLocked);return Nt.length>0?[{...lt,cells:Nt}]:[]}),Te=Wa(le);return Xs(Te.length>0,Te)}).map(O=>Gv(O))},Mh=$r.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),_y=(l,m,h)=>{const v=h.substring(0,h.length-l.length),T=parseFloat(v);return v===T.toString()?m(T):Mh.invalid(h)},Sg={...Mh,from:l=>Ns(l,"%")?_y("%",Mh.percent,l):Ns(l,"px")?_y("px",Mh.pixels,l):Mh.invalid(l)},Ak=(l,m)=>on(l,h=>Sg.from(h).fold(()=>h,T=>T/m*100+"%",T=>T+"%")),Ok=(l,m,h)=>{const v=h/m;return on(l,T=>Sg.from(T).fold(()=>T,$=>$*v+"px",$=>$/100*h+"px"))},Dk=(l,m)=>{const h=l.fold(()=>K(""),v=>{const T=v/m;return K(T+"px")},()=>{const v=100/m;return K(v+"%")});return ko(m,h)},Oy=(l,m,h)=>l.fold(()=>m,v=>Ok(m,h,v),v=>Ak(m,h)),wS=(l,m,h)=>{const v=Sg.from(h),T=An(l,O=>O==="0px")?Dk(v,l.length):Oy(v,l,m);return Mk(T)},xg=(l,m)=>l.length===0?m:un(l,(h,v)=>Sg.from(v).fold(K(0),ot,ot)+h,0),SS=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},Rk=(l,m)=>Sg.from(l).fold(K(l),h=>h+m+"px",h=>h+m+"%"),Mk=l=>{if(l.length===0)return l;const m=un(l,(v,T)=>{const O=Sg.from(T).fold(()=>({value:T,remainder:0}),$=>SS($,"px"),$=>({value:$+"%",remainder:0}));return{output:[O.value].concat(v.output),remainder:v.remainder+O.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([Rk(h[h.length-1],Math.round(m.remainder))])},Nk=Sg.from,Nh=(l,m,h)=>{qe(m,v=>{const T=l.slice(v.column,v.colspan+v.column),O=xg(T,jc());Hs(v.element,"width",O+h)})},Gb=(l,m,h)=>{qe(m,(v,T)=>{const O=xg([l[T]],jc());Hs(v.element,"width",O+h)})},Tg=(l,m,h,v)=>{qe(h,T=>{const O=l.slice(T.row,T.rowspan+T.row),$=xg(O,nm());Hs(T.element,"height",$+v)}),qe(m,(T,O)=>{Hs(T.element,"height",l[O])})},qb=l=>Nk(l).fold(K("px"),K("px"),K("%")),xS=(l,m,h)=>{const v=Ro.fromTable(l),T=v.all,O=Ro.justCells(v),$=Ro.justColumns(v);m.each(U=>{const J=qb(U),le=Zn(l),Te=bb(v,l),lt=wS(Te,le,U);Ro.hasColumns(v)?Gb(lt,$,J):Nh(lt,O,J),Hs(l,"width",U)}),h.each(U=>{const J=qb(U),le=ul(l),Te=ru(v,l,oi),lt=wS(Te,le,U);Tg(lt,T,O,J),Hs(l,"height",U)})},Dd=xp,Kb=dl,TS=_v,Wu=l=>{Ne(l,"width")},gf=l=>{const m=Ol(l);xS(l,he.some(m),he.none()),Wu(l)},Dy=l=>{const m=qr(l);xS(l,he.some(m),he.none()),Wu(l)},ES=l=>{Qc(l,"width");const m=ad(l),h=m.length>0?m:nu(l);qe(h,v=>{Qc(v,"width"),Wu(v)}),Wu(l)},Bk={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Pk=()=>be.fromTag("th"),Ry=()=>be.fromTag("td"),$k=()=>be.fromTag("col"),Fk=(l,m,h,v)=>{const T=be.fromTag("tr");for(let O=0;O<l;O++){const $=v<m||O<h?Pk():Ry();O<h&&bs($,"scope","row"),v<m&&bs($,"scope","col"),Ls($,be.fromTag("br")),Ls(T,$)}return T},kS=l=>{const m=be.fromTag("colgroup");return ko(l,()=>Ls(m,$k())),m},_S=(l,m,h,v)=>ko(l,T=>Fk(m,h,v,T)),Yb=(l,m,h,v,T,O=Bk)=>{const $=be.fromTag("table"),U=T!=="cells";xc($,O.styles),wr($,O.attributes),O.colGroups&&Ls($,kS(m));const J=Math.min(l,h);if(U&&h>0){const _t=be.fromTag("thead");Ls($,_t);const Dt=_S(h,m,T==="sectionCells"?J:0,v);va(_t,Dt)}const le=be.fromTag("tbody");Ls($,le);const Te=U?l-J:l,Nt=_S(Te,m,U?0:h,v);return va(le,Nt),$},Ik=l=>l.dom.innerHTML,Lk=l=>{const m=be.fromTag("div"),h=be.fromDom(l.dom.cloneNode(!0));return Ls(m,h),Ik(m)},Hk=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},AS=(l,m)=>{oe(m,"td,th").each(ut(Hk,l))},My=(l,m)=>{qe(ea(m,"tr"),h=>{Ub(l,h.dom),qe(ea(h,"th,td"),v=>{Wb(l,v.dom)})})},OS=l=>oo(l)&&l.indexOf("%")!==-1,Vk=(l,m,h,v,T)=>{const O=bS(l),$={styles:O,attributes:Ey(l),colGroups:vS(l)};return l.undoManager.ignore(()=>{const U=Yb(h,m,T,v,hS(l),$);bs(U,"data-mce-id","__mce");const J=Lk(U);l.insertContent(J),l.addVisual()}),oe($i(l),'table[data-mce-id="__mce"]').map(U=>(Il(l)?Dy(U):Qs(l)?ES(U):(jb(l)||OS(O.width))&&gf(U),fl(U),Ne(U,"data-mce-id"),My(l,U),AS(l,U),U.dom)).getOrNull()},DS=(l,m,h,v={})=>{const T=O=>Xn(O)&&O>0;if(T(m)&&T(h)){const O=v.headerRows||0,$=v.headerColumns||0;return Vk(l,h,m,$,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var qp=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ny="x-tinymce/dom-table-",By=Ny+"rows",Bh=Ny+"columns",Xb=l=>{const m=qp.FakeClipboardItem(l);qp.write([m])},Py=l=>{var m;const h=(m=qp.read())!==null&&m!==void 0?m:[];return eo(h,v=>he.from(v.getType(l)))},RS=l=>{Py(l).isSome()&&qp.clear()},MS=l=>{l.fold(Eg,m=>Xb({[By]:m}))},NS=()=>Py(By),Eg=()=>RS(By),BS=l=>{l.fold(zk,m=>Xb({[Bh]:m}))},Kp=()=>Py(Bh),zk=()=>RS(Bh),$y=l=>zv(vb(l),$u(l)).filter(Sd),PS=l=>Rw(vb(l),$u(l)).filter(Sd),Uk=(l,m)=>{const h=$u(l),v=()=>$y(l).each(Ke=>{zr(Ke,h).filter(G(h)).each(en=>{const Hn=be.fromText("");if(jr(en,Hn),fr(en),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const lo=l.dom.createRng();lo.setStart(Hn.dom,0),lo.setEnd(Hn.dom,0),l.selection.setRng(lo),l.nodeChanged()}})}),T=Ke=>$y(l).each(en=>{Qs(l)||Il(l)||jb(l)||zr(en,h).each(lo=>{Ke==="relative"&&!Dd(lo)?gf(lo):Ke==="fixed"&&!Kb(lo)?Dy(lo):Ke==="responsive"&&!TS(lo)&&ES(lo),fl(lo),ff(l,lo.dom,gc)})}),O=Ke=>zr(Ke,h),$=Ke=>PS(l).bind(en=>O(en).map(Hn=>Ke(Hn,en))),U=(Ke,en)=>{$(Hn=>{l.formatter.toggle("tableclass",{value:en},Hn.dom),ff(l,Hn.dom,Dh)})},J=(Ke,en)=>{$(Hn=>{const lo=pm(l),Dc=An(lo,na=>l.formatter.match("tablecellclass",{value:en},na.dom))?l.formatter.remove:l.formatter.apply;qe(lo,na=>Dc("tablecellclass",{value:en},na.dom)),ff(l,Hn.dom,Dh)})},le=()=>{$y(l).each(Ke=>{zr(Ke,h).each(en=>{Y(en,"caption").fold(()=>{const Hn=be.fromTag("caption");Ls(Hn,be.fromText("Caption")),Ql(en,Hn,0),l.selection.setCursorLocation(Hn.dom,0)},Hn=>{Is("caption")(Ke)&&tt("td",en).each(lo=>l.selection.setCursorLocation(lo.dom,0)),fr(Hn)}),ff(l,en.dom,gc)})})},Te=Ke=>{l.focus()},lt=(Ke,en=!1)=>$((Hn,lo)=>{const tr=Dp(pm(l),Hn,lo);Ke(Hn,tr,en).each(Te)}),Nt=()=>$((Ke,en)=>{const Hn=Dp(pm(l),Ke,en),lo=sg(mt,be.fromDom(l.getDoc()),he.none());return _k(Ke,Hn,lo)}),_t=()=>$((Ke,en)=>{const Hn=Dp(pm(l),Ke,en);return kk(Ke,Hn)}),Ye=(Ke,en)=>en().each(Hn=>{const lo=on(Hn,tr=>Cc(tr));$((tr,Dc)=>{const na=Pu(be.fromDom(l.getDoc())),nl=Dw(pm(l),Dc,lo,na);Ke(tr,nl).each(Te)})}),Dt=Ke=>(en,Hn)=>Uc(Hn,"type").each(lo=>{lt(Ke(lo),Hn.no_events)});$n({mceTableSplitCells:()=>lt(m.unmergeCells),mceTableMergeCells:()=>lt(m.mergeCells),mceTableInsertRowBefore:()=>lt(m.insertRowsBefore),mceTableInsertRowAfter:()=>lt(m.insertRowsAfter),mceTableInsertColBefore:()=>lt(m.insertColumnsBefore),mceTableInsertColAfter:()=>lt(m.insertColumnsAfter),mceTableDeleteCol:()=>lt(m.deleteColumn),mceTableDeleteRow:()=>lt(m.deleteRow),mceTableCutCol:()=>_t().each(Ke=>{BS(Ke),lt(m.deleteColumn)}),mceTableCutRow:()=>Nt().each(Ke=>{MS(Ke),lt(m.deleteRow)}),mceTableCopyCol:()=>_t().each(Ke=>BS(Ke)),mceTableCopyRow:()=>Nt().each(Ke=>MS(Ke)),mceTablePasteColBefore:()=>Ye(m.pasteColsBefore,Kp),mceTablePasteColAfter:()=>Ye(m.pasteColsAfter,Kp),mceTablePasteRowBefore:()=>Ye(m.pasteRowsBefore,NS),mceTablePasteRowAfter:()=>Ye(m.pasteRowsAfter,NS),mceTableDelete:v,mceTableCellToggleClass:J,mceTableToggleClass:U,mceTableToggleCaption:le,mceTableSizingMode:(Ke,en)=>T(en),mceTableCellType:Dt(Ke=>Ke==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Dt(Ke=>Ke==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Dt(Ke=>{switch(Ke){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Ke,en)=>l.addCommand(en,Ke)),l.addCommand("mceInsertTable",(Ke,en)=>{DS(l,en.rows,en.columns,en.options)}),l.addCommand("mceTableApplyCellStyle",(Ke,en)=>{const Hn=Dc=>"tablecell"+Dc.toLowerCase().replace("-","");if(!Vt(en))return;const lo=pt(pm(l),Sd);if(lo.length===0)return;const tr=Ir(en,(Dc,na)=>l.formatter.has(Hn(na))&&oo(Dc));ss(tr)||($n(tr,(Dc,na)=>{const nl=Hn(na);qe(lo,Ef=>{Dc===""?l.formatter.remove(nl,{value:null},Ef.dom,!0):l.formatter.apply(nl,{value:Dc},Ef.dom)})}),O(lo[0]).each(Dc=>ff(l,Dc.dom,Dh)))})},Wk=(l,m)=>{const h=$u(l),v=T=>Rw(vb(l)).bind(O=>zr(O,h).map($=>{const U=Dp(pm(l),$,O);return T($,U)})).getOr("");$n({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,O)=>l.addQueryValueHandler(O,T))},Jb=$r.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Yp=(l,m,h,v)=>l.fold(m,h,v),Tm=l=>l.fold(ot,ot,ot),Zk=Jb.before,Fy=Jb.on,$S=Jb.after,Xc={before:Zk,on:Fy,after:$S,cata:Yp,getStart:Tm},kg={create:(l,m)=>({selection:l,kill:m})},jk=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},Xp=(l,m)=>{const h=l.document.createRange();return IS(h,m),h},IS=(l,m)=>l.selectNodeContents(m.dom),Ph=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},_g=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},Jp=(l,m,h)=>{const v=l.document.createRange();return Ph(v,m),_g(v,h),v},hf=(l,m,h,v,T)=>{const O=l.document.createRange();return O.setStart(m.dom,h),O.setEnd(v.dom,T),O},Gk=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),Ga=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?he.some(h).map(Gk):he.none()},pl=$r.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Qb=(l,m,h)=>m(be.fromDom(h.startContainer),h.startOffset,be.fromDom(h.endContainer),h.endOffset),LS=(l,m)=>m.match({domRange:h=>({ltr:K(h),rtl:he.none}),relative:(h,v)=>({ltr:Du(()=>Jp(l,h,v)),rtl:Du(()=>he.some(Jp(l,v,h)))}),exact:(h,v,T,O)=>({ltr:Du(()=>hf(l,h,v,T,O)),rtl:Du(()=>he.some(hf(l,T,O,h,v)))})}),HS=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>pl.rtl(be.fromDom(T.endContainer),T.endOffset,be.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>Qb(l,pl.ltr,h)):Qb(l,pl.ltr,h)},Iy=(l,m)=>{const h=LS(l,m);return HS(l,h)},Ag=(l,m)=>Iy(l,m).match({ltr:(v,T,O,$)=>{const U=l.document.createRange();return U.setStart(v.dom,T),U.setEnd(O.dom,$),U},rtl:(v,T,O,$)=>{const U=l.document.createRange();return U.setStart(O.dom,$),U.setEnd(v.dom,T),U}});pl.ltr,pl.rtl;const Og={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},$h={create:(l,m,h,v)=>({start:Xc.on(l,m),finish:Xc.on(h,v)})},e1=(l,m)=>{const h=Ag(l,m);return Og.create(be.fromDom(h.startContainer),h.startOffset,be.fromDom(h.endContainer),h.endOffset)},Dg=$h.create,Ly=(l,m,h,v,T,O,$)=>nt(h,T)&&v===O?he.none():ke(h,"td,th",m).bind(U=>ke(T,"td,th",m).bind(J=>Fh(l,m,U,J,$))),Fh=(l,m,h,v,T)=>nt(h,v)?he.none():cg(h,v,m).bind(O=>{const $=O.boxes.getOr([]);return $.length>1?(T(l,$,O.start,O.finish),he.some(kg.create(he.some(Dg(h,0,h,uc(h))),!0))):he.none()}),hc=(l,m,h,v,T)=>{const O=$=>(T.clearBeforeUpdate(h),T.selectRange(h,$.boxes,$.start,$.finish),$.boxes);return Aw(v,l,m,T.firstSelectedSelector,T.lastSelectedSelector).map(O)},Hy=(l,m)=>({item:l,mode:m}),Zu=(l,m,h,v=Rd)=>l.property().parent(m).map(T=>Hy(T,v)),Rd=(l,m,h,v=pf)=>h.sibling(l,m).map(T=>Hy(T,v)),pf=(l,m,h,v=pf)=>{const T=l.property().children(m);return h.first(T).map($=>Hy($,v))},Rg=[{current:Zu,next:Rd,fallback:he.none()},{current:Rd,next:pf,fallback:he.some(Zu)},{current:pf,next:pf,fallback:he.some(Rd)}],e0=(l,m,h,v,T=Rg)=>H(T,$=>$.current===h).bind($=>$.current(l,m,v,$.next).orThunk(()=>$.fallback.bind(U=>e0(l,m,U,v)))),n0={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?he.some(h[h.length-1]):he.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?he.some(h[0]):he.none()})},t1=(l,m,h,v,T,O)=>e0(l,m,v,T).bind(U=>O(U.item)?he.none():h(U.item)?he.some(U.item):t1(l,U.item,h,U.mode,T,O)),VS=(l,m,h,v)=>t1(l,m,h,Rd,n0.left(),v),o0=(l,m,h,v)=>t1(l,m,h,Rd,n0.right(),v),gu=l=>m=>l.property().children(m).length===0,Kk=(l,m,h)=>Vy(l,m,gu(l),h),Yk=(l,m,h)=>zy(l,m,gu(l),h),Vy=VS,zy=o0,n1=mm(),zS=(l,m)=>Kk(n1,l,m),US=(l,m)=>Yk(n1,l,m),Ll=(l,m,h)=>Vy(n1,l,m,h),s0=(l,m,h)=>zy(n1,l,m,h),WS=(l,m,h)=>Vr(l,m,h).isSome(),Md=$r.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),bl=(l,m,h)=>{const v=l.getRect(m),T=l.getRect(h);return T.right>v.left&&T.left<v.right},hu=l=>ke(l,"tr"),vf={...Md,verify:(l,m,h,v,T,O,$)=>ke(v,"td,th",$).bind(U=>ke(m,"td,th",$).map(J=>nt(U,J)?nt(v,U)&&uc(U)===T?O(J):Md.none("in same cell"):fs(hu,[U,J]).fold(()=>bl(l,J,U)?Md.success():O(J),le=>O(J)))).getOr(Md.none("default")),cata:(l,m,h,v,T)=>l.fold(m,h,v,T)},Yr=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),Em=l=>us(l).bind(m=>{const h=Rn(m);return o1(h,l).map(v=>Yr(m,h,l,v))}),o1=(l,m)=>ps(l,ut(nt,m)),Mg=Is("br"),r0=(l,m,h)=>m(l,h).bind(v=>Jr(v)&&qo(v).trim().length===0?r0(v,m,h):he.some(v)),a0=(l,m,h)=>h.traverse(m).orThunk(()=>r0(m,h.gather,l)).map(h.relative),Uy=(l,m)=>jo(l,m).filter(Mg).orThunk(()=>jo(l,m-1).filter(Mg)),c0=(l,m,h,v)=>Uy(m,h).bind(T=>v.traverse(T).fold(()=>r0(T,v.gather,l).map(v.relative),O=>Em(O).map($=>Xc.on($.parent,$.index)))),ZS=(l,m,h,v)=>(Mg(m)?a0(l,m,v):c0(l,m,h,v)).map(O=>({start:O,finish:O})),Xk=l=>vf.cata(l,m=>he.none(),()=>he.none(),m=>he.some(ec(m,0)),m=>he.some(ec(m,uc(m)))),Nd=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),s1=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),Wy=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),Bd=l=>l.top,Zy=l=>l.bottom,r1=(l,m,h)=>h>=0&&h<uc(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):he.none(),yf=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),jy=(l,m)=>he.some(l.getRect(m)),jS=(l,m,h)=>Er(m)?jy(l,m).map(yf):Jr(m)?r1(l,m,h).map(yf):he.none(),Gy=(l,m)=>Er(m)?jy(l,m).map(yf):Jr(m)?l.getRangedRect(m,0,m,uc(m)).map(yf):he.none(),Cf=5,Jk=100,Pd=$r.generate([{none:[]},{retry:["caret"]}]),vl=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,GS=(l,m,h)=>gr(m,nc).fold(Pt,v=>Gy(l,v).exists(T=>vl(h,T))),i0=(l,m,h,v,T)=>{const O=Nd(T,Cf);return Math.abs(h.bottom-v.bottom)<1||h.top>T.bottom?Pd.retry(O):h.top===T.bottom?Pd.retry(Nd(T,1)):GS(l,m,T)?Pd.retry(Wy(O,Cf,0)):Pd.none()},qy={point:Bd,adjuster:(l,m,h,v,T)=>{const O=s1(T,Cf);return Math.abs(h.top-v.top)<1||h.bottom<T.top?Pd.retry(O):h.bottom===T.top?Pd.retry(s1(T,1)):GS(l,m,T)?Pd.retry(Wy(O,Cf,0)):Pd.none()},move:s1,gather:zS},Qk={point:Zy,adjuster:i0,move:Nd,gather:US},qS=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>rs(v)==="table").isSome(),Ky=(l,m,h,v,T)=>l0(l,m,h,m.move(v,Cf),T),l0=(l,m,h,v,T)=>T===0?he.some(v):qS(l,v.left,m.point(v))?Ky(l,m,h,v,T-1):l.situsFromPoint(v.left,m.point(v)).bind(O=>O.start.fold(he.none,$=>Gy(l,$).bind(U=>m.adjuster(l,$,U,h,v).fold(he.none,J=>l0(l,m,h,J,T-1))).orThunk(()=>he.some(v)),he.none)),e_=(l,m,h)=>l.point(m)>h.getInnerHeight()?he.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?he.some(-l.point(m)):he.none(),t_=(l,m,h)=>{const v=l.move(h,Cf),T=l0(m,l,h,v,Jk).getOr(v);return e_(l,T,m).fold(()=>m.situsFromPoint(T.left,l.point(T)),O=>(m.scrollBy(0,O),m.situsFromPoint(T.left,l.point(T)-O)))},u0={tryUp:ut(t_,qy),tryDown:ut(t_,Qk),getJumpSize:K(Cf)},KS=20,$O=(l,m,h)=>l.getSelection().bind(v=>ZS(m,v.finish,v.foffset,h).fold(()=>he.some(ec(v.finish,v.foffset)),T=>{const O=l.fromSitus(T),$=vf.verify(l,v.finish,v.foffset,O.finish,O.foffset,h.failure,m);return Xk($)})),Ih=(l,m,h,v,T,O)=>O===0?he.none():Lh(l,m,h,v,T).bind($=>{const U=l.fromSitus($),J=vf.verify(l,h,v,U.finish,U.foffset,T.failure,m);return vf.cata(J,()=>he.none(),()=>he.some($),le=>nt(h,le)&&v===0?Mo(l,h,v,s1,T):Ih(l,m,le,0,T,O-1),le=>nt(h,le)&&v===uc(le)?Mo(l,h,v,Nd,T):Ih(l,m,le,uc(le),T,O-1))}),Mo=(l,m,h,v,T)=>jS(l,m,h).bind(O=>km(l,T,v(O,u0.getJumpSize()))),km=(l,m,h)=>{const v=kl().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):he.none()},Lh=(l,m,h,v,T)=>jS(l,h,v).bind(O=>km(l,T,O)),Yy=(l,m,h)=>$O(l,m,h).bind(v=>Ih(l,m,v.element,v.offset,h,KS).map(l.fromSitus)),n_=(l,m)=>WS(l,h=>us(h).exists(v=>nt(v,m))),c1=(l,m,h,v,T)=>ke(v,"td,th",m).bind(O=>ke(O,"table",m).bind($=>n_(T,$)?Yy(l,m,h).bind(U=>ke(U.finish,"td,th",m).map(J=>({start:O,finish:J,range:U}))):he.none())),Ng=(l,m,h,v,T,O)=>O(v,m).orThunk(()=>c1(l,m,h,v,T).map($=>{const U=$.range;return kg.create(he.some(Dg(U.start,U.soffset,U.finish,U.foffset)),!0)})),Bg=(l,m)=>ke(l,"tr",m).bind(h=>ke(h,"table",m).bind(v=>{const T=ea(v,"tr");return nt(h,T[0])?Ll(v,O=>wd(O).isSome(),m).map(O=>{const $=uc(O);return kg.create(he.some(Dg(O,$,O,$)),!0)}):he.none()})),Xy=(l,m)=>ke(l,"tr",m).bind(h=>ke(h,"table",m).bind(v=>{const T=ea(v,"tr");return nt(h,T[T.length-1])?s0(v,O=>Ml(O).isSome(),m).map(O=>kg.create(he.some(Dg(O,0,O,0)),!0)):he.none()})),Jy=(l,m,h,v,T,O,$)=>c1(l,h,v,T,O).bind(U=>Fh(m,h,U.start,U.finish,$)),Qy=l=>{let m=l;return{get:()=>m,set:T=>{m=T}}},YS=l=>{const m=Qy(he.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(he.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:U=>{h(),m.set(he.some(U))}}},i1=()=>{const l=YS(mt);return{...l,on:h=>l.get().each(h)}},d0=(l,m)=>ke(l,"td,th",m),e2=l=>Ms(l).exists(Pi),t2=(l,m,h,v)=>{const T=i1(),O=T.clear,$=Te=>{T.on(lt=>{v.clearBeforeUpdate(m),d0(Te.target,h).each(Nt=>{cg(lt,Nt,h).each(_t=>{const Ye=_t.boxes.getOr([]);if(Ye.length===1){const Dt=Ye[0],Ke=Sw(Dt)==="false",en=ze(Ov(Te.target),Dt,nt);Ke&&en&&(v.selectRange(m,Ye,Dt,Dt),l.selectContents(Dt))}else Ye.length>1&&(v.selectRange(m,Ye,_t.start,_t.finish),l.selectContents(Nt))})})})};return{clearstate:O,mousedown:Te=>{v.clear(m),d0(Te.target,h).filter(e2).each(T.set)},mouseover:Te=>{$(Te)},mouseup:Te=>{$(Te),O()}}},m0={traverse:cc,gather:US,relative:Xc.before,retry:u0.tryDown,failure:vf.failedDown},l1={traverse:Va,gather:zS,relative:Xc.before,retry:u0.tryUp,failure:vf.failedUp},_m=l=>m=>m===l,XS=_m(38),$d=_m(40),wf=l=>l>=37&&l<=40,o_={isBackward:_m(37),isForward:_m(39)},JS={isBackward:_m(39),isForward:_m(37)},n2=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return _l(h,v)},Hh=(l,m,h)=>{const T=(h!==void 0?h.dom:document).defaultView;T&&T.scrollBy(l,m)},Vh=$r.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),s_=l=>Vh.exact(l.start,l.soffset,l.finish,l.foffset),r_=l=>l.match({domRange:m=>be.fromDom(m.startContainer),relative:(m,h)=>Xc.getStart(m),exact:(m,h,v,T)=>m}),QS=Vh.domRange,Sf=Vh.relative,o2=Vh.exact,s2=l=>{const m=r_(l);return xn(m)},f0=Og.create,Pg={domRange:QS,relative:Sf,exact:o2,exactFromRange:s_,getWin:s2,range:f0},g0=(l,m,h)=>{var v,T;return he.from((T=(v=l.dom).caretPositionFromPoint)===null||T===void 0?void 0:T.call(v,m,h)).bind(O=>{if(O.offsetNode===null)return he.none();const $=l.dom.createRange();return $.setStart(O.offsetNode,O.offset),$.collapse(),he.some($)})},Ft=(l,m,h)=>{var v,T;return he.from((T=(v=l.dom).caretRangeFromPoint)===null||T===void 0?void 0:T.call(v,m,h))},pc=(()=>document.caretPositionFromPoint?g0:document.caretRangeFromPoint?Ft:he.none)(),h0=(l,m,h)=>{const v=be.fromDom(l.document);return pc(v,m,h).map(T=>Og.create(be.fromDom(T.startContainer),T.startOffset,be.fromDom(T.endContainer),T.endOffset))},Sr=(l,m)=>{const h=rs(l);return h==="input"?Xc.after(l):Co(["br","img"],h)?m===0?Xc.before(l):Xc.after(l):Xc.on(l,m)},pu=(l,m)=>{const h=l.fold(Xc.before,Sr,Xc.after),v=m.fold(Xc.before,Sr,Xc.after);return Pg.relative(h,v)},ex=(l,m,h,v)=>{const T=Sr(l,m),O=Sr(h,v);return Pg.relative(T,O)},Hi=(l,m,h,v)=>{const O=qt(l).dom.createRange();return O.setStart(l.dom,m),O.setEnd(h.dom,v),O},qa=(l,m,h,v)=>{const T=Hi(l,m,h,v),O=nt(l,h)&&m===v;return T.collapsed&&!O},p0=l=>he.from(l.getSelection()),b0=(l,m)=>{p0(l).each(h=>{h.removeAllRanges(),h.addRange(m)})},Am=(l,m,h,v,T)=>{const O=hf(l,m,h,v,T);b0(l,O)},tx=(l,m,h,v,T,O)=>{m.collapse(h.dom,v),m.extend(T.dom,O)},r2=(l,m)=>Iy(l,m).match({ltr:(h,v,T,O)=>{Am(l,h,v,T,O)},rtl:(h,v,T,O)=>{p0(l).each($=>{if($.setBaseAndExtent)$.setBaseAndExtent(h.dom,v,T.dom,O);else if($.extend)try{tx(l,$,h,v,T,O)}catch{Am(l,T,O,h,v)}else Am(l,T,O,h,v)})}}),nx=(l,m,h,v,T)=>{const O=ex(m,h,v,T);r2(l,O)},a2=(l,m,h)=>{const v=pu(m,h);r2(l,v)},c2=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return he.some(Og.create(be.fromDom(m.startContainer),m.startOffset,be.fromDom(h.endContainer),h.endOffset))}else return he.none()},i2=l=>{if(l.anchorNode===null||l.focusNode===null)return c2(l);{const m=be.fromDom(l.anchorNode),h=be.fromDom(l.focusNode);return qa(m,l.anchorOffset,h,l.focusOffset)?he.some(Og.create(m,l.anchorOffset,h,l.focusOffset)):c2(l)}},u1=(l,m,h=!0)=>{const T=(h?Xp:jk)(l,m);b0(l,T)},v0=l=>p0(l).filter(m=>m.rangeCount>0).bind(i2),d1=l=>v0(l).map(m=>Pg.exact(m.start,m.soffset,m.finish,m.foffset)),m1=(l,m)=>{const h=Ag(l,m);return Ga(h)},y0=(l,m,h)=>h0(l,m,h),ox=l=>{p0(l).each(m=>m.removeAllRanges())},Om=l=>({elementFromPoint:(Ke,en)=>be.fromPoint(be.fromDom(l.document),Ke,en),getRect:Ke=>Ke.dom.getBoundingClientRect(),getRangedRect:(Ke,en,Hn,lo)=>{const tr=Pg.exact(Ke,en,Hn,lo);return m1(l,tr)},getSelection:()=>d1(l).map(Ke=>e1(l,Ke)),fromSitus:Ke=>{const en=Pg.relative(Ke.start,Ke.finish);return e1(l,en)},situsFromPoint:(Ke,en)=>y0(l,Ke,en).map(Hn=>$h.create(Hn.start,Hn.soffset,Hn.finish,Hn.foffset)),clearSelection:()=>{ox(l)},collapseSelection:(Ke=!1)=>{d1(l).each(en=>en.fold(Hn=>Hn.collapse(Ke),(Hn,lo)=>{const tr=Ke?Hn:lo;a2(l,tr,tr)},(Hn,lo,tr,Dc)=>{const na=Ke?Hn:tr,nl=Ke?lo:Dc;nx(l,na,nl,na,nl)}))},setSelection:Ke=>{nx(l,Ke.start,Ke.soffset,Ke.finish,Ke.foffset)},setRelativeSelection:(Ke,en)=>{a2(l,Ke,en)},selectNode:Ke=>{u1(l,Ke,!1)},selectContents:Ke=>{u1(l,Ke)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>n2(be.fromDom(l.document)).top,scrollBy:(Ke,en)=>{Hh(Ke,en,be.fromDom(l.document))}}),Fd=(l,m)=>({rows:l,cols:m}),$g=(l,m,h,v)=>{const T=Om(l),O=t2(T,m,h,v);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},zh=l=>gr(l,hn).exists(Pi),l2=(l,m)=>zh(l)||zh(m),a_=(l,m,h,v)=>{const T=Om(l),O=()=>(v.clear(m),he.none());return{keydown:(J,le,Te,lt,Nt,_t)=>{const Ye=J.raw,Dt=Ye.which,Ke=Ye.shiftKey===!0;return wb(m,v.selectedSelector).fold(()=>(wf(Dt)&&!Ke&&v.clearBeforeUpdate(m),wf(Dt)&&Ke&&!l2(le,lt)?he.none:$d(Dt)&&Ke?ut(Jy,T,m,h,m0,lt,le,v.selectRange):XS(Dt)&&Ke?ut(Jy,T,m,h,l1,lt,le,v.selectRange):$d(Dt)?ut(Ng,T,h,m0,lt,le,Xy):XS(Dt)?ut(Ng,T,h,l1,lt,le,Bg):he.none),Hn=>{const lo=tr=>()=>eo(tr,na=>hc(na.rows,na.cols,m,Hn,v)).fold(()=>$v(m,v.firstSelectedSelector,v.lastSelectedSelector).map(na=>{const nl=$d(Dt)||_t.isForward(Dt)?Xc.after:Xc.before;return T.setRelativeSelection(Xc.on(na.first,0),nl(na.table)),v.clear(m),kg.create(he.none(),!0)}),na=>he.some(kg.create(he.none(),!0)));return wf(Dt)&&Ke&&!l2(le,lt)?he.none:$d(Dt)&&Ke?lo([Fd(1,0)]):XS(Dt)&&Ke?lo([Fd(-1,0)]):_t.isBackward(Dt)&&Ke?lo([Fd(0,-1),Fd(-1,0)]):_t.isForward(Dt)&&Ke?lo([Fd(0,1),Fd(1,0)]):wf(Dt)&&!Ke?O:he.none})()},keyup:(J,le,Te,lt,Nt)=>wb(m,v.selectedSelector).fold(()=>{const _t=J.raw,Ye=_t.which;return _t.shiftKey===!0&&wf(Ye)&&l2(le,lt)?Ly(m,h,le,Te,lt,Nt,v.selectRange):he.none()},he.none)}},sx=(l,m,h,v)=>{const T=Om(l);return(O,$)=>{v.clearBeforeUpdate(m),cg(O,$,h).each(U=>{const J=U.boxes.getOr([]);v.selectRange(m,J,U.start,U.finish),T.selectContents($),T.collapseSelection()})}},C0=(l,m)=>{const h=se(l,m);return h===void 0||h===""?[]:h.split(" ")},rx=(l,m,h)=>{const T=C0(l,m).concat([h]);return bs(l,m,T.join(" ")),!0},w0=(l,m,h)=>{const v=pt(C0(l,m),T=>T!==h);return v.length>0?bs(l,m,v.join(" ")):Ne(l,m),!1},oc=l=>l.dom.classList!==void 0,bu=l=>C0(l,"class"),Hl=(l,m)=>rx(l,"class",m),f1=(l,m)=>w0(l,"class",m),el=(l,m)=>{oc(l)?l.dom.classList.add(m):Hl(l,m)},ax=l=>{(oc(l)?l.dom.classList:bu(l)).length===0&&Ne(l,"class")},u2=(l,m)=>{oc(l)?l.dom.classList.remove(m):f1(l,m),ax(l)},d2=(l,m)=>oc(l)&&l.dom.classList.contains(m),m2=(l,m)=>{qe(m,h=>{u2(l,h)})},c_=l=>m=>{el(m,l)},f2=l=>m=>{m2(m,l)},g2={byClass:l=>{const m=c_(l.selected),h=f2([l.selected,l.lastSelected,l.firstSelected]),v=O=>{const $=ea(O,l.selectedSelector);qe($,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(O,$,U,J)=>{v(O),qe($,m),el(U,l.firstSelected),el(J,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=J=>{Ne(J,l.selected),Ne(J,l.firstSelected),Ne(J,l.lastSelected)},T=J=>{bs(J,l.selected,"1")},O=J=>{$(J),h()},$=J=>{const le=ea(J,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);qe(le,v)};return{clearBeforeUpdate:$,clear:O,selectRange:(J,le,Te,lt)=>{O(J),qe(le,T),bs(Te,l.firstSelected,"1"),bs(lt,l.lastSelected,"1"),m(le,Te,lt)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},h2=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},er=()=>({tag:"none"}),Id=l=>({tag:"multiple",elements:l}),p2=l=>({tag:"single",element:l}),b2=(l,m,h)=>({get:()=>Fv(l(),h).fold(()=>m().fold(er,p2),Id)}),v2=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=Wa(h);return bo(v,T=>{const O=T.cells.slice(0,m[m.length-1].column+1);return on(O,$=>$.element)})},y2=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=Wa(h);return bo(v,T=>{const O=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return on(O,$=>$.element)})},C2=(l,m,h)=>{const v=Ro.fromTable(l);return lf(v,m).map(O=>{const $=xh(v,h,!1),{rows:U}=Ja($),J=v2(U,O),le=y2(U,O);return{upOrLeftCells:J,downOrRightCells:le}})},w2=(l,m,h,v,T,O,$)=>({target:l,x:m,y:h,stop:v,prevent:T,kill:O,raw:$}),S2=l=>{const m=be.fromDom(es(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),T=Nn(v,h);return w2(m,l.clientX,l.clientY,h,v,T,l)},u_=(l,m)=>h=>{l(h)&&m(S2(h))},cx=(l,m,h,v,T)=>{const O=u_(h,v);return l.dom.addEventListener(m,O,T),{unbind:ut(x2,l,m,O,T)}},d_=(l,m,h,v)=>cx(l,m,h,v,!1),x2=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},m_=Ze,xf=(l,m,h)=>d_(l,m,m_,h),rn=S2,Dm=l=>!d2(be.fromDom(l.target),"ephox-snooker-resizer-bar"),f_=(l,m)=>{const h=b2(()=>be.fromDom(l.getBody()),()=>Rw(vb(l),$u(l)),Fi.selectedSelector),v=(J,le,Te)=>{zr(le).each(Nt=>{const _t=jp(l),Ye=sg(mt,be.fromDom(l.getDoc()),_t),Dt=pm(l),Ke=C2(Nt,{selection:Dt},Ye);dS(l,J,le,Te,Ke)})},T=()=>wy(l),O=g2.byAttr(Fi,v,T);return l.on("init",J=>{const le=l.getWin(),Te=$i(l),lt=$u(l),Nt=()=>{const zs=l.selection,wi=be.fromDom(zs.getStart()),Si=be.fromDom(zs.getEnd());fs(zr,[wi,Si]).fold(()=>O.clear(Te),mt)},_t=$g(le,Te,lt,O),Ye=a_(le,Te,lt,O),Dt=sx(le,Te,lt,O),Ke=zs=>zs.raw.shiftKey===!0;l.on("TableSelectorChange",zs=>Dt(zs.start,zs.finish));const en=(zs,wi)=>{Ke(zs)&&(wi.kill&&zs.kill(),wi.selection.each(Si=>{const yu=Pg.relative(Si.start,Si.finish),ol=Ag(le,yu);l.selection.setRng(ol)}))},Hn=zs=>{const wi=rn(zs);if(wi.raw.shiftKey&&wf(wi.raw.which)){const Si=l.selection.getRng(),yu=be.fromDom(Si.startContainer),ol=be.fromDom(Si.endContainer);Ye.keyup(wi,yu,Si.startOffset,ol,Si.endOffset).each(kf=>{en(wi,kf)})}},lo=zs=>{const wi=rn(zs);m.hide();const Si=l.selection.getRng(),yu=be.fromDom(Si.startContainer),ol=be.fromDom(Si.endContainer),kf=Yf(o_,JS)(be.fromDom(l.selection.getStart()));Ye.keydown(wi,yu,Si.startOffset,ol,Si.endOffset,kf).each(xi=>{en(wi,xi)}),m.show()},tr=zs=>zs.button===0,Dc=zs=>zs.buttons===void 0?!0:(zs.buttons&1)!==0,na=zs=>{_t.clearstate()},nl=zs=>{tr(zs)&&Dm(zs)&&_t.mousedown(rn(zs))},Ef=zs=>{Dc(zs)&&Dm(zs)&&_t.mouseover(rn(zs))},v1=zs=>{tr(zs)&&Dm(zs)&&_t.mouseup(rn(zs))},D0=(()=>{const zs=Qy(be.fromDom(Te)),wi=Qy(0);return{touchEnd:yu=>{const ol=be.fromDom(yu.target);if(Is("td")(ol)||Is("th")(ol)){const kf=zs.get(),xi=wi.get();nt(kf,ol)&&yu.timeStamp-xi<300&&(yu.preventDefault(),Dt(ol,ol))}zs.set(ol),wi.set(yu.timeStamp)}}})();l.on("dragstart",na),l.on("mousedown",nl),l.on("mouseover",Ef),l.on("mouseup",v1),l.on("touchend",D0.touchEnd),l.on("keyup",Hn),l.on("keydown",lo),l.on("NodeChange",Nt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Fi.firstSelected),l.serializer.addTempAttr(Fi.lastSelected)}),{getSelectedCells:()=>h2(h.get(),K([]),J=>on(J,le=>le.dom),J=>[J.dom]),clearSelectedCells:J=>O.clear(be.fromDom(J))}},Ta=l=>{let m=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");m.push(O)},unbind:O=>{m=pt(m,$=>$!==O)},trigger:(...O)=>{const $={};qe(l,(U,J)=>{$[U]=O[J]}),qe(m,U=>{U($)})}}},ma=l=>{const m=ur(l,v=>({bind:v.bind,unbind:v.unbind})),h=ur(l,v=>v.trigger);return{registry:m,trigger:h}},Tf=(l,m)=>{let h=null;const v=()=>{Lt(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...O)=>{v(),h=setTimeout(()=>{h=null,l.apply(null,O)},m)}}},S0=l=>l.slice(0).sort(),ix=(l,m)=>{throw new Error("All required keys ("+S0(l).join(", ")+") were not specified. Specified keys were: "+S0(m).join(", ")+".")},g_=l=>{throw new Error("Unsupported keys for object: "+S0(l).join(", "))},Ho=(l,m)=>{if(!Wt(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");qe(m,h=>{if(!oo(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},lx=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+S0(l).join(", ")+") were not.")},x0=l=>{const m=S0(l);H(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},Fg=(l,m)=>ux(l,m,{validate:So,label:"function"}),ux=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Ho("required",m),x0(m),v=>{const T=Rt(v);An(m,U=>Co(T,U))||ix(m,T),l(m,T);const $=pt(m,U=>!h.validate(v[U],U));return $.length>0&&lx($,h.label),v}},h_=(l,m)=>{const h=pt(m,v=>!Co(l,v));h.length>0&&g_(h)},T2=l=>Fg(h_,l),p_=T2(["compare","extract","mutate","sink"]),FO=T2(["element","start","stop","destroy"]),dx=T2(["forceDrop","drop","move","delayDrop"]),E2=()=>{let l=he.none();const m=()=>{l=he.none()},h=(O,$)=>{const U=l.map(J=>O.compare(J,$));return l=he.some($),U},v=(O,$)=>{$.extract(O).each(J=>{h($,J).each(Te=>{T.trigger.move(Te)})})},T=ma({move:Ta(["info"])});return{onEvent:v,reset:m,events:T.registry}},k2=()=>{const l=ma({move:Ta(["info"])});return{onEvent:mt,reset:mt,events:l.registry}},mx=()=>{const l=k2(),m=E2();let h=l;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=l},isOn:()=>h===m,onEvent:(U,J)=>{h.onEvent(U,J)},events:m.events}},IO=(l,m,h)=>{let v=!1;const T=ma({start:Ta([]),stop:Ta([])}),O=mx(),$=()=>{Ye.stop(),O.isOn()&&(O.off(),T.trigger.stop())},U=Tf($,200),J=Ke=>{Ye.start(Ke),O.on(),T.trigger.start()},le=Ke=>{U.cancel(),O.onEvent(Ke,m)};O.events.move.bind(Ke=>{m.mutate(l,Ke.info)});const Te=()=>{v=!0},lt=()=>{v=!1},Nt=()=>v,_t=Ke=>(...en)=>{v&&Ke.apply(null,en)},Ye=m.sink(dx({forceDrop:$,drop:_t($),move:_t(le),delayDrop:_t(U.throttle)}),h),Dt=()=>{Ye.destroy()};return{element:Ye.element,go:J,on:Te,off:lt,isActive:Nt,destroy:Dt,events:T.registry}},T0=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},b_=T0("ephox-dragster").resolve,v_=l=>{const m={layerClass:b_("blocker"),...l},h=be.fromTag("div");return bs(h,"role","presentation"),xc(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),el(h,b_("blocker")),el(h,m.layerClass),{element:K(h),destroy:()=>{fr(h)}}};var y_=p_({compare:(l,m)=>_l(m.left-l.left,m.top-l.top),extract:l=>he.some(_l(l.x,l.y)),sink:(l,m)=>{const h=v_(m),v=xf(h.element(),"mousedown",l.forceDrop),T=xf(h.element(),"mouseup",l.drop),O=xf(h.element(),"mousemove",l.move),$=xf(h.element(),"mouseout",l.delayDrop),U=()=>{h.destroy(),T.unbind(),O.unbind(),$.unbind(),v.unbind()},J=Te=>{Ls(Te,h.element())},le=()=>{fr(h.element())};return FO({element:h.element,start:J,stop:le,destroy:U})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const g1=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:y_;return IO(l,v,m)},E0=T0("ephox-snooker").resolve,C_=()=>{const l=ma({drag:Ta(["xDelta","yDelta"])});return{mutate:(h,v)=>{l.trigger.drag(h,v)},events:l.registry}},w_=()=>{const l=ma({drag:Ta(["xDelta","yDelta","target"])});let m=he.none();const h=C_();return h.events.drag.bind(O=>{m.each($=>{l.trigger.drag(O.xDelta,O.yDelta,$)})}),{assign:O=>{m=he.some(O)},get:()=>m,mutate:h.mutate,events:l.registry}},A2=(l,m,h,v,T)=>{const O=be.fromTag("div");return xc(O,{position:"absolute",left:m-v/2+"px",top:h+"px",height:T+"px",width:v+"px"}),wr(O,{"data-column":l,role:"presentation"}),O},Uh=(l,m,h,v,T)=>{const O=be.fromTag("div");return xc(O,{position:"absolute",left:m+"px",top:h-T/2+"px",height:T+"px",width:v+"px"}),wr(O,{"data-row":l,role:"presentation"}),O},Wh=E0("resizer-bar"),O2=E0("resizer-rows"),k0=E0("resizer-cols"),D2=7,R2=(l,m)=>bo(l.all,(h,v)=>m(h.element)?[v]:[]),S_=(l,m)=>{const h=[];return ko(l.grid.columns,v=>{Ro.getColumnAt(l,v).map(O=>O.element).forall(m)&&h.push(v)}),pt(h,v=>{const T=Ro.filterItems(l,O=>O.column===v);return An(T,O=>m(O.element))})},_0=l=>{const m=ea(l.parent(),"."+Wh);qe(m,fr)},M2=(l,m,h)=>{const v=l.origin();qe(m,T=>{T.each(O=>{const $=h(v,O);el($,Wh),Ls(l.parent(),$)})})},N2=(l,m,h,v)=>{M2(l,m,(T,O)=>{const $=A2(O.col,O.x-T.left,h.top-T.top,D2,v);return el($,k0),$})},gs=(l,m,h,v)=>{M2(l,m,(T,O)=>{const $=Uh(O.row,h.left-T.left,O.y-T.top,v,D2);return el($,O2),$})},fx=(l,m,h,v,T)=>{const O=lm(h),$=m.isResizable,U=v.length>0?oi.positions(v,h):[],J=U.length>0?R2(l,$):[],le=pt(U,(_t,Ye)=>rt(J,Dt=>Ye===Dt));gs(m,le,O,To(h));const Te=T.length>0?gi.positions(T,h):[],lt=Te.length>0?S_(l,$):[],Nt=pt(Te,(_t,Ye)=>rt(lt,Dt=>Ye===Dt));N2(m,Nt,O,db(h))},Ld=(l,m)=>{if(_0(l),l.isResizable(m)){const h=Ro.fromTable(m),v=xv(h),T=ch(h);fx(h,l,m,v,T)}},ju=(l,m)=>{const h=ea(l.parent(),"."+Wh);qe(h,m)},h1=l=>{ju(l,m=>{Hs(m,"display","none")})},tl=l=>{ju(l,m=>{Hs(m,"display","block")})},A0=l=>d2(l,O2),Ig=l=>d2(l,k0),p1=E0("resizer-bar-dragging"),Mm=l=>{const m=w_(),h=g1(m,{});let v=he.none();const T=(Ye,Dt)=>he.from(se(Ye,Dt));m.events.drag.bind(Ye=>{T(Ye.target,"data-row").each(Dt=>{const Ke=Br(Ye.target,"top");Hs(Ye.target,"top",Ke+Ye.yDelta+"px")}),T(Ye.target,"data-column").each(Dt=>{const Ke=Br(Ye.target,"left");Hs(Ye.target,"left",Ke+Ye.xDelta+"px")})});const O=(Ye,Dt)=>{const Ke=Br(Ye,Dt),en=lc(Ye,"data-initial-"+Dt,0);return Ke-en};h.events.stop.bind(()=>{m.get().each(Ye=>{v.each(Dt=>{T(Ye,"data-row").each(Ke=>{const en=O(Ye,"top");Ne(Ye,"data-initial-top"),_t.trigger.adjustHeight(Dt,en,parseInt(Ke,10))}),T(Ye,"data-column").each(Ke=>{const en=O(Ye,"left");Ne(Ye,"data-initial-left"),_t.trigger.adjustWidth(Dt,en,parseInt(Ke,10))}),Ld(l,Dt)})})});const $=(Ye,Dt)=>{_t.trigger.startAdjust(),m.assign(Ye),bs(Ye,"data-initial-"+Dt,Br(Ye,Dt)),el(Ye,p1),Hs(Ye,"opacity","0.2"),h.go(l.parent())},U=xf(l.parent(),"mousedown",Ye=>{A0(Ye.target)&&$(Ye.target,"top"),Ig(Ye.target)&&$(Ye.target,"left")}),J=Ye=>nt(Ye,l.view()),le=Ye=>ke(Ye,"table",J).filter(Pi),Te=xf(l.view(),"mouseover",Ye=>{le(Ye.target).fold(()=>{P(Ye.target)&&_0(l)},Dt=>{h.isActive()&&(v=he.some(Dt),Ld(l,Dt))})}),lt=()=>{U.unbind(),Te.unbind(),h.destroy(),_0(l)},Nt=Ye=>{Ld(l,Ye)},_t=ma({adjustHeight:Ta(["table","delta","row"]),adjustWidth:Ta(["table","delta","column"]),startAdjust:Ta([])});return{destroy:lt,refresh:Nt,on:h.on,off:h.off,hideBars:ut(h1,l),showBars:ut(tl,l),events:_t.registry}},O0={create:(l,m,h)=>{const v=oi,T=gi,O=Mm(l),$=ma({beforeResize:Ta(["table","type"]),afterResize:Ta(["table","type"]),startDrag:Ta([])});return O.events.adjustHeight.bind(U=>{const J=U.table;$.trigger.beforeResize(J,"row");const le=v.delta(U.delta,J);Bb(J,le,U.row,v),$.trigger.afterResize(J,"row")}),O.events.startAdjust.bind(U=>{$.trigger.startDrag()}),O.events.adjustWidth.bind(U=>{const J=U.table;$.trigger.beforeResize(J,"col");const le=T.delta(U.delta,J),Te=h(J);sy(J,le,U.column,m,Te),$.trigger.afterResize(J,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:$.registry}}},vu={only:(l,m)=>{const h=Oa(l)?Sn(l):l;return{parent:K(h),view:K(l),origin:K(_l(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>lm(m);return{parent:K(m),view:K(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:K(m),view:K(l),origin:K(_l(0,0)),isResizable:h})},Lg=()=>{const l=be.fromTag("div");return xc(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ls(q(),l),l},gx=(l,m)=>l.inline?vu.body(be.fromDom(l.getBody()),Lg(),m):vu.only(be.fromDom(l.getDoc()),m),b1=(l,m)=>{l.inline&&fr(m.parent())},as=l=>_n(l)&&l.nodeName==="TABLE",hx="bar-",px=l=>se(l,"data-mce-resize")!=="false",P2=l=>{const m=Ro.fromTable(l);Ro.hasColumns(m)||qe(nu(l),h=>{const v=_i(h,"width");Hs(h,"width",v),Ne(h,"width")})},$2=l=>{const m=i1(),h=i1(),v=i1();let T,O;const $=Ye=>Gp(l,Ye),U=()=>Ty(l)?Rp():Bw(),J=Ye=>Ch(Ye).columns,le=(Ye,Dt,Ke)=>{const en=Ns(Dt,"e");if(O===""&&gf(Ye),Ke!==T&&O!==""){Hs(Ye,"width",O);const Hn=U(),lo=$(Ye),tr=Ty(l)||en?J(Ye)-1:0;sy(Ye,Ke-T,tr,Hn,lo)}else if(xa(O)){const Hn=parseFloat(O.replace("%","")),lo=Ke*Hn/T;Hs(Ye,"width",lo+"%")}yb(O)&&P2(Ye)},Te=()=>{h.on(Ye=>{Ye.destroy()}),v.on(Ye=>{b1(l,Ye)})};return l.on("init",()=>{const Ye=gx(l,px);if(v.set(Ye),gS(l)&&Rh(l)){const Dt=U(),Ke=O0.create(Ye,Dt,$);Ke.on(),Ke.events.startDrag.bind(en=>{m.set(l.selection.getRng())}),Ke.events.beforeResize.bind(en=>{const Hn=en.table.dom;Ck(l,Hn,rg(Hn),xw(Hn),hx+en.type)}),Ke.events.afterResize.bind(en=>{const Hn=en.table,lo=Hn.dom;fl(Hn),m.on(tr=>{l.selection.setRng(tr),l.focus()}),mS(l,lo,rg(lo),xw(lo),hx+en.type),l.undoManager.add()}),h.set(Ke)}}),l.on("ObjectResizeStart",Ye=>{const Dt=Ye.target;if(as(Dt)){const Ke=be.fromDom(Dt);qe(l.dom.select(".mce-clonedresizable"),en=>{l.dom.addClass(en,"mce-"+xy(l)+"-columns")}),!Kb(Ke)&&Il(l)?Dy(Ke):!Dd(Ke)&&jb(l)&&gf(Ke),TS(Ke)&&Ca(Ye.origin,hx)&&gf(Ke),T=Ye.width,O=Qs(l)?"":ek(l,Dt).getOr("")}}),l.on("ObjectResized",Ye=>{const Dt=Ye.target;if(as(Dt)){const Ke=be.fromDom(Dt),en=Ye.origin;Ca(en,"corner-")&&le(Ke,en,Ye.width),fl(Ke),ff(l,Ke.dom,Dh)}}),l.on("SwitchMode",()=>{h.on(Ye=>{l.mode.isReadOnly()?Ye.hideBars():Ye.showBars()})}),l.on("dragstart dragend",Ye=>{h.on(Dt=>{Ye.type==="dragstart"?(Dt.hideBars(),Dt.off()):(Dt.on(),Dt.showBars())})}),l.on("remove",()=>{Te()}),{refresh:Ye=>{h.on(Dt=>Dt.refreshBars(be.fromDom(Ye)))},hide:()=>{h.on(Ye=>Ye.hideBars())},show:()=>{h.on(Ye=>Ye.showBars())}}},jh=l=>{xk(l);const m=$2(l),h=f_(l,m),v=ky(l,m,h);return Uk(l,v),Wk(l,v),yh(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},Hg=l=>({table:jh(l)});var bx=()=>{Ht.add("dom",Hg)};bx()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,In=pt=>un=>un.options.get(pt),Mn=pt=>{const un=pt.options.register;un("autolink_pattern",{processor:"regexp",default:new RegExp("^"+Qn().source+"$","i")}),un("link_default_target",{processor:"string"}),un("link_default_protocol",{processor:"string",default:"https"})},Yn=In("autolink_pattern"),Wn=In("link_default_target"),oo=In("link_default_protocol"),Vt=In("allow_unsafe_link_target"),Wt=(pt,un,Se)=>{var Qe;return Se(pt,un.prototype)?!0:((Qe=pt.constructor)===null||Qe===void 0?void 0:Qe.name)===un.name},Lt=pt=>{const un=typeof pt;return pt===null?"null":un==="object"&&Array.isArray(pt)?"array":un==="object"&&Wt(pt,String,(Se,Qe)=>Qe.isPrototypeOf(Se))?"string":un},Oo=pt=>un=>Lt(un)===pt,Yo=pt=>un=>pt===un,ho=Oo("string"),_n=Yo(void 0),So=pt=>pt==null,Xn=pt=>!So(pt),mt=pt=>un=>!pt(un),Nn=Object.hasOwnProperty,ct=(pt,un)=>Nn.call(pt,un),K=(pt,un,Se)=>un===""||pt.length>=un.length&&pt.substr(Se,Se+un.length)===un,ot=(pt,un,Se=0,Qe)=>{const H=pt.indexOf(un,Se);return H!==-1?_n(Qe)?!0:H+un.length<=Qe:!1},zt=(pt,un)=>K(pt,un,0),ut="\uFEFF",G=pt=>pt===ut,ht=pt=>pt.replace(/\uFEFF/g,"");var Vn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Pt=pt=>pt.nodeType===3,Ze=pt=>pt.nodeType===1,he=pt=>/^[(\[{ \u00a0]$/.test(pt),Uo=pt=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(pt),Ln=pt=>/[?!,.;:]/.test(pt),Zt=(pt,un,Se)=>{for(let Qe=un-1;Qe>=0;Qe--){const H=pt.charAt(Qe);if(!G(H)&&Se(H))return Qe}return-1},A=(pt,un)=>{let Se=pt,Qe=un;for(;Ze(Se)&&Se.childNodes[Qe];)Se=Se.childNodes[Qe],Qe=Pt(Se)?Se.data.length:Se.childNodes.length;return{container:Se,offset:Qe}},Co=(pt,un)=>{var Se;const Qe=pt.schema.getVoidElements(),H=Yn(pt),{dom:ps,selection:Dn}=pt;if(ps.getParent(Dn.getNode(),"a[href]")!==null)return null;const bo=Dn.getRng(),An=Vn(ps,$n=>ps.isBlock($n)||ct(Qe,$n.nodeName.toLowerCase())||ps.getContentEditable($n)==="false"),{container:Ys,offset:Ue}=A(bo.endContainer,bo.endOffset),wt=(Se=ps.getParent(Ys,ps.isBlock))!==null&&Se!==void 0?Se:ps.getRoot(),Ge=An.backwards(Ys,Ue+un,($n,ur)=>{const Wo=$n.data,Fs=Zt(Wo,ur,mt(he));return Fs===-1||Ln(Wo[Fs])?Fs:Fs+1},wt);if(!Ge)return null;let xe=Ge.container;const Io=An.backwards(Ge.container,Ge.offset,($n,ur)=>{xe=$n;const Wo=Zt($n.data,ur,he);return Wo===-1?Wo:Wo+1},wt),eo=ps.createRng();Io?eo.setStart(Io.container,Io.offset):eo.setStart(xe,0),eo.setEnd(Ge.container,Ge.offset);const Tr=ht(eo.toString()).match(H);if(Tr){let $n=Tr[0];return zt($n,"www.")?$n=oo(pt)+"://"+$n:ot($n,"@")&&!Uo($n)&&($n="mailto:"+$n),{rng:eo,url:$n}}else return null},rt=(pt,un)=>{const{dom:Se,selection:Qe}=pt,{rng:H,url:ps}=un,Dn=Qe.getBookmark();Qe.setRng(H);const bo="createlink",An={command:bo,ui:!1,value:ps};if(!pt.dispatch("BeforeExecCommand",An).isDefaultPrevented()){pt.getDoc().execCommand(bo,!1,ps),pt.dispatch("ExecCommand",An);const Ue=Wn(pt);if(ho(Ue)){const wt=Qe.getNode();Se.setAttrib(wt,"target",Ue),Ue==="_blank"&&!Vt(pt)&&Se.setAttrib(wt,"rel","noopener")}}Qe.moveToBookmark(Dn),pt.nodeChanged()},ko=pt=>{const un=Co(pt,-1);Xn(un)&&rt(pt,un)},on=ko,qe=pt=>{const un=Co(pt,0);Xn(un)&&rt(pt,un)},po=pt=>{pt.on("keydown",un=>{un.keyCode===13&&!un.isDefaultPrevented()&&qe(pt)}),pt.on("keyup",un=>{un.keyCode===32?ko(pt):(un.keyCode===48&&un.shiftKey||un.keyCode===221)&&on(pt)})};var os=()=>{Ht.add("autolink",pt=>{Mn(pt),po(pt)})};os()})();(function(){const Ht=K=>{let ot=K;return{get:()=>ot,set:G=>{ot=G}}};var Qn=tinymce.util.Tools.resolve("tinymce.PluginManager");const In=K=>()=>K;var Mn=tinymce.util.Tools.resolve("tinymce.Env");const Yn=K=>K.dispatch("ResizeEditor"),Wn=K=>ot=>ot.options.get(K),oo=K=>{const ot=K.options.register;ot("autoresize_overflow_padding",{processor:"number",default:1}),ot("autoresize_bottom_margin",{processor:"number",default:50})},Vt=Wn("min_height"),Wt=Wn("max_height"),Lt=Wn("autoresize_overflow_padding"),Oo=Wn("autoresize_bottom_margin"),Yo=K=>K.plugins.fullscreen&&K.plugins.fullscreen.isFullscreen(),ho=(K,ot)=>{const zt=K.getBody();zt&&(zt.style.overflowY=ot?"":"hidden",ot||(zt.scrollTop=0))},_n=(K,ot,zt,ut)=>{var G;const ht=parseInt((G=K.getStyle(ot,zt,ut))!==null&&G!==void 0?G:"",10);return isNaN(ht)?0:ht},So=K=>{if((K==null?void 0:K.type.toLowerCase())==="setcontent"){const ot=K;return ot.selection===!0||ot.paste===!0}else return!1},Xn=(K,ot,zt,ut)=>{var G;const ht=K.dom,Vn=K.getDoc();if(!Vn)return;if(Yo(K)){ho(K,!0);return}const Pt=Vn.documentElement,Ze=ut?ut():Lt(K),he=(G=Vt(K))!==null&&G!==void 0?G:K.getElement().offsetHeight;let Uo=he;const Ln=_n(ht,Pt,"margin-top",!0),Zt=_n(ht,Pt,"margin-bottom",!0);let A=Pt.offsetHeight+Ln+Zt+Ze;A<0&&(A=0);const Co=K.getContainer().offsetHeight,rt=K.getContentAreaContainer().offsetHeight,ko=Co-rt;A+ko>he&&(Uo=A+ko);const on=Wt(K);if(on&&Uo>on?(Uo=on,ho(K,!0)):ho(K,!1),Uo!==ot.get()){const qe=Uo-ot.get();if(ht.setStyle(K.getContainer(),"height",Uo+"px"),ot.set(Uo),Yn(K),Mn.browser.isSafari()&&(Mn.os.isMacOS()||Mn.os.isiOS())){const po=K.getWin();po.scrollTo(po.pageXOffset,po.pageYOffset)}K.hasFocus()&&So(zt)&&K.selection.scrollIntoView(),(Mn.browser.isSafari()||Mn.browser.isChromium())&&qe<0&&Xn(K,ot,zt,ut)}},mt=(K,ot)=>{let zt=()=>Oo(K),ut,G;K.on("init",ht=>{ut=0;const Vn=Lt(K),Pt=K.dom;Pt.setStyles(K.getDoc().documentElement,{height:"auto"}),Mn.browser.isEdge()||Mn.browser.isIE()?Pt.setStyles(K.getBody(),{paddingLeft:Vn,paddingRight:Vn,"min-height":0}):Pt.setStyles(K.getBody(),{paddingLeft:Vn,paddingRight:Vn}),Xn(K,ot,ht,zt),ut+=1}),K.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",ht=>{if(ut===1)G=K.getContainer().offsetHeight,Xn(K,ot,ht,zt),ut+=1;else if(ut===2){const Vn=G<K.getContainer().offsetHeight;if(Vn){const Pt=K.dom,Ze=K.getDoc();Pt.setStyles(Ze.documentElement,{"min-height":0}),Pt.setStyles(K.getBody(),{"min-height":"inherit"})}zt=Vn?In(0):zt,ut+=1}else Xn(K,ot,ht,zt)})},Nn=(K,ot)=>{K.addCommand("mceAutoResize",()=>{Xn(K,ot)})};var ct=()=>{Qn.add("autoresize",K=>{if(oo(K),K.options.isSet("resize")||K.options.set("resize",!1),!K.inline){const ot=Ht(0);Nn(K,ot),mt(K,ot)}})};ct()})();(function(){const Ht=Y=>{let oe=Y;return{get:()=>oe,set:tn=>{oe=tn}}};var Qn=tinymce.util.Tools.resolve("tinymce.PluginManager");const In=Y=>({isFullscreen:()=>Y.get()!==null}),Mn=(Y,oe,ke)=>{var ze;return ke(Y,oe.prototype)?!0:((ze=Y.constructor)===null||ze===void 0?void 0:ze.name)===oe.name},Yn=Y=>{const oe=typeof Y;return Y===null?"null":oe==="object"&&Array.isArray(Y)?"array":oe==="object"&&Mn(Y,String,(ke,ze)=>ze.isPrototypeOf(ke))?"string":oe},Wn=Y=>oe=>Yn(oe)===Y,oo=Y=>oe=>typeof oe===Y,Vt=Y=>oe=>Y===oe,Wt=Wn("string"),Lt=Wn("array"),Oo=Vt(null),Yo=oo("boolean"),ho=Vt(void 0),_n=Y=>Y==null,So=Y=>!_n(Y),Xn=oo("function"),mt=oo("number"),Nn=()=>{},ct=(Y,oe)=>(...ke)=>Y(oe.apply(null,ke)),K=(Y,oe)=>ke=>Y(oe(ke)),ot=Y=>()=>Y;function zt(Y,...oe){return(...ke)=>{const ze=oe.concat(ke);return Y.apply(null,ze)}}const ut=ot(!1),G=ot(!0);class ht{constructor(oe,ke){this.tag=oe,this.value=ke}static some(oe){return new ht(!0,oe)}static none(){return ht.singletonNone}fold(oe,ke){return this.tag?ke(this.value):oe()}isSome(){return this.tag}isNone(){return!this.tag}map(oe){return this.tag?ht.some(oe(this.value)):ht.none()}bind(oe){return this.tag?oe(this.value):ht.none()}exists(oe){return this.tag&&oe(this.value)}forall(oe){return!this.tag||oe(this.value)}filter(oe){return!this.tag||oe(this.value)?this:ht.none()}getOr(oe){return this.tag?this.value:oe}or(oe){return this.tag?this:oe}getOrThunk(oe){return this.tag?this.value:oe()}orThunk(oe){return this.tag?this:oe()}getOrDie(oe){if(this.tag)return this.value;throw new Error(oe??"Called getOrDie on None")}static from(oe){return So(oe)?ht.some(oe):ht.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oe){this.tag&&oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ht.singletonNone=new ht(!1);const Vn=Y=>{const oe=Ht(ht.none()),ke=()=>oe.get().each(Y);return{clear:()=>{ke(),oe.set(ht.none())},isSet:()=>oe.get().isSome(),get:()=>oe.get(),set:_o=>{ke(),oe.set(ht.some(_o))}}},Pt=()=>Vn(Y=>Y.unbind()),Ze=()=>{const Y=Vn(Nn);return{...Y,on:ke=>Y.get().each(ke)}},he=(Y,oe)=>{let ke=null;return{cancel:()=>{Oo(ke)||(clearTimeout(ke),ke=null)},throttle:(...Lo)=>{Oo(ke)&&(ke=setTimeout(()=>{ke=null,Y.apply(null,Lo)},oe))}}},Uo=Array.prototype.push,Ln=(Y,oe)=>{const ke=Y.length,ze=new Array(ke);for(let tn=0;tn<ke;tn++){const Lo=Y[tn];ze[tn]=oe(Lo,tn)}return ze},Zt=(Y,oe)=>{for(let ke=0,ze=Y.length;ke<ze;ke++){const tn=Y[ke];oe(tn,ke)}},A=(Y,oe)=>{const ke=[];for(let ze=0,tn=Y.length;ze<tn;ze++){const Lo=Y[ze];oe(Lo,ze)&&ke.push(Lo)}return ke},Co=(Y,oe,ke)=>{for(let ze=0,tn=Y.length;ze<tn;ze++){const Lo=Y[ze];if(oe(Lo,ze))return ht.some(Lo);if(ke(Lo,ze))break}return ht.none()},rt=(Y,oe)=>Co(Y,oe,ut),ko=Y=>{const oe=[];for(let ke=0,ze=Y.length;ke<ze;++ke){if(!Lt(Y[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+Y);Uo.apply(oe,Y[ke])}return oe},on=(Y,oe)=>ko(Ln(Y,oe)),qe=(Y,oe)=>oe>=0&&oe<Y.length?ht.some(Y[oe]):ht.none(),po=Y=>qe(Y,0),os=(Y,oe)=>{for(let ke=0;ke<Y.length;ke++){const ze=oe(Y[ke],ke);if(ze.isSome())return ze}return ht.none()},pt=Object.keys,un=(Y,oe)=>{const ke=pt(Y);for(let ze=0,tn=ke.length;ze<tn;ze++){const Lo=ke[ze],Xs=Y[Lo];oe(Xs,Lo)}},Se=(Y,oe,ke=0,ze)=>{const tn=Y.indexOf(oe,ke);return tn!==-1?ho(ze)?!0:tn+oe.length<=ze:!1},Qe=Y=>Y.style!==void 0&&Xn(Y.style.getPropertyValue),H=(Y,oe)=>{const ze=(oe||document).createElement("div");if(ze.innerHTML=Y,!ze.hasChildNodes()||ze.childNodes.length>1){const tn="HTML does not have a single root node";throw console.error(tn,Y),new Error(tn)}return bo(ze.childNodes[0])},ps=(Y,oe)=>{const ze=(oe||document).createElement(Y);return bo(ze)},Dn=(Y,oe)=>{const ze=(oe||document).createTextNode(Y);return bo(ze)},bo=Y=>{if(Y==null)throw new Error("Node cannot be null or undefined");return{dom:Y}},Ys={fromHtml:H,fromTag:ps,fromText:Dn,fromDom:bo,fromPoint:(Y,oe,ke)=>ht.from(Y.dom.elementFromPoint(oe,ke)).map(bo)};typeof window<"u"||Function("return this;")();const Ue=9,wt=11,Ge=1,xe=3,Io=Y=>Y.dom.nodeType,eo=Y=>oe=>Io(oe)===Y,Rt=eo(Ge),Tr=eo(xe),$n=eo(Ue),ur=eo(wt),Wo=(Y,oe)=>{const ke=Y.dom;if(ke.nodeType!==Ge)return!1;{const ze=ke;if(ze.matches!==void 0)return ze.matches(oe);if(ze.msMatchesSelector!==void 0)return ze.msMatchesSelector(oe);if(ze.webkitMatchesSelector!==void 0)return ze.webkitMatchesSelector(oe);if(ze.mozMatchesSelector!==void 0)return ze.mozMatchesSelector(oe);throw new Error("Browser lacks native selectors")}},Fs=Y=>Y.nodeType!==Ge&&Y.nodeType!==Ue&&Y.nodeType!==wt||Y.childElementCount===0,ba=(Y,oe)=>{const ke=oe===void 0?document:oe.dom;return Fs(ke)?[]:Ln(ke.querySelectorAll(Y),Ys.fromDom)},Ir=(Y,oe)=>Y.dom===oe.dom,Ss=Y=>Ys.fromDom(Y.dom.ownerDocument),is=Y=>$n(Y)?Y:Ss(Y),Uc=Y=>ht.from(Y.dom.parentNode).map(Ys.fromDom),ts=(Y,oe)=>{const ke=Xn(oe)?oe:ut;let ze=Y.dom;const tn=[];for(;ze.parentNode!==null&&ze.parentNode!==void 0;){const Lo=ze.parentNode,Xs=Ys.fromDom(Lo);if(tn.push(Xs),ke(Xs)===!0)break;ze=Lo}return tn},ls=Y=>{const oe=ke=>A(ke,ze=>!Ir(Y,ze));return Uc(Y).map(ss).map(oe).getOr([])},ss=Y=>Ln(Y.dom.childNodes,Ys.fromDom),Xo=Y=>ur(Y)&&So(Y.dom.host),Ds=Xn(Element.prototype.attachShadow)&&Xn(Node.prototype.getRootNode),dr=ot(Ds),aa=Ds?Y=>Ys.fromDom(Y.dom.getRootNode()):is,mr=Y=>{const oe=aa(Y);return Xo(oe)?ht.some(oe):ht.none()},Rs=Y=>Ys.fromDom(Y.dom.host),Or=Y=>{if(dr()&&So(Y.target)){const oe=Ys.fromDom(Y.target);if(Rt(oe)&&bt(oe)&&Y.composed&&Y.composedPath){const ke=Y.composedPath();if(ke)return po(ke)}}return ht.from(Y.target)},bt=Y=>So(Y.dom.shadowRoot),io=Y=>{const oe=Tr(Y)?Y.dom.parentNode:Y.dom;if(oe==null||oe.ownerDocument===null)return!1;const ke=oe.ownerDocument;return mr(Ys.fromDom(oe)).fold(()=>ke.body.contains(oe),K(io,Rs))},ca=Y=>{const oe=Y.dom.body;if(oe==null)throw new Error("Body is not available yet");return Ys.fromDom(oe)},sr=(Y,oe,ke)=>{if(Wt(ke)||Yo(ke)||mt(ke))Y.setAttribute(oe,ke+"");else throw console.error("Invalid call to Attribute.set. Key ",oe,":: Value ",ke,":: Element ",Y),new Error("Attribute value was not simple")},ac=(Y,oe,ke)=>{sr(Y.dom,oe,ke)},Aa=(Y,oe)=>{const ke=Y.dom.getAttribute(oe);return ke===null?void 0:ke},rs=(Y,oe)=>{Y.dom.removeAttribute(oe)},La=(Y,oe,ke)=>{if(!Wt(ke))throw console.error("Invalid call to CSS.set. Property ",oe,":: Value ",ke,":: Element ",Y),new Error("CSS value must be a string: "+ke);Qe(Y)&&Y.style.setProperty(oe,ke)},Dr=(Y,oe)=>{const ke=Y.dom;un(oe,(ze,tn)=>{La(ke,tn,ze)})},Jo=(Y,oe)=>{const ke=Y.dom,tn=window.getComputedStyle(ke).getPropertyValue(oe);return tn===""&&!io(Y)?hn(ke,oe):tn},hn=(Y,oe)=>Qe(Y)?Y.style.getPropertyValue(oe):"",Er=(Y,oe,ke,ze,tn,Lo,Xs)=>({target:Y,x:oe,y:ke,stop:ze,prevent:tn,kill:Lo,raw:Xs}),Jr=Y=>{const oe=Ys.fromDom(Or(Y).getOr(Y.target)),ke=()=>Y.stopPropagation(),ze=()=>Y.preventDefault(),tn=ct(ze,ke);return Er(oe,Y.clientX,Y.clientY,ke,ze,tn,Y)},Oa=(Y,oe)=>ke=>{Y(ke)&&oe(Jr(ke))},Ha=(Y,oe,ke,ze,tn)=>{const Lo=Oa(ke,ze);return Y.dom.addEventListener(oe,Lo,tn),{unbind:zt(Ws,Y,oe,Lo,tn)}},Is=(Y,oe,ke,ze)=>Ha(Y,oe,ke,ze,!1),Ws=(Y,oe,ke,ze)=>{Y.dom.removeEventListener(oe,ke,ze)},bs=G,wr=(Y,oe,ke)=>Is(Y,oe,bs,ke),de=Y=>{let oe=!1,ke;return(...ze)=>(oe||(oe=!0,ke=Y.apply(null,ze)),ke)},se=(Y,oe,ke,ze)=>{const tn=Y.isiOS()&&/ipad/i.test(ke)===!0,Lo=Y.isiOS()&&!tn,Xs=Y.isiOS()||Y.isAndroid(),_o=Xs||ze("(pointer:coarse)"),Zs=tn||!Lo&&Xs&&ze("(min-device-width:768px)"),Ca=Lo||Xs&&!Zs,Ns=oe.isSafari()&&Y.isiOS()&&/safari/i.test(ke)===!1,Sc=!Ca&&!Zs&&!Ns;return{isiPad:ot(tn),isiPhone:ot(Lo),isTablet:ot(Zs),isPhone:ot(Ca),isTouch:ot(_o),isAndroid:Y.isAndroid,isiOS:Y.isiOS,isWebView:ot(Ns),isDesktop:ot(Sc)}},Ie=(Y,oe)=>{for(let ke=0;ke<Y.length;ke++){const ze=Y[ke];if(ze.test(oe))return ze}},Ne=(Y,oe)=>{const ke=Ie(Y,oe);if(!ke)return{major:0,minor:0};const ze=tn=>Number(oe.replace(ke,"$"+tn));return so(ze(1),ze(2))},Yt=(Y,oe)=>{const ke=String(oe).toLowerCase();return Y.length===0?fn():Ne(Y,ke)},fn=()=>so(0,0),so=(Y,oe)=>({major:Y,minor:oe}),Qo={nu:so,detect:Yt,unknown:fn},jn=(Y,oe)=>os(oe.brands,ke=>{const ze=ke.brand.toLowerCase();return rt(Y,tn=>{var Lo;return ze===((Lo=tn.brand)===null||Lo===void 0?void 0:Lo.toLowerCase())}).map(tn=>({current:tn.name,version:Qo.nu(parseInt(ke.version,10),0)}))}),uo=(Y,oe)=>{const ke=String(oe).toLowerCase();return rt(Y,ze=>ze.search(ke))},be=(Y,oe)=>uo(Y,oe).map(ke=>{const ze=Qo.detect(ke.versionRegexes,oe);return{current:ke.name,version:ze}}),Zo=(Y,oe)=>uo(Y,oe).map(ke=>{const ze=Qo.detect(ke.versionRegexes,oe);return{current:ke.name,version:ze}}),re=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ce=Y=>oe=>Se(oe,Y),tt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Y=>Se(Y,"edge/")&&Se(Y,"chrome")&&Se(Y,"safari")&&Se(Y,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,re],search:Y=>Se(Y,"chrome")&&!Se(Y,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Y=>Se(Y,"msie")||Se(Y,"trident")},{name:"Opera",versionRegexes:[re,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ce("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ce("firefox")},{name:"Safari",versionRegexes:[re,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Y=>(Se(Y,"safari")||Se(Y,"mobile/"))&&Se(Y,"applewebkit")}],nt=[{name:"Windows",search:ce("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Y=>Se(Y,"iphone")||Se(Y,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ce("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ce("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ce("linux"),versionRegexes:[]},{name:"Solaris",search:ce("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ce("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ce("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],At={browsers:ot(tt),oses:ot(nt)},Xt="Edge",qt="Chromium",Qt="IE",Sn="Opera",xn="Firefox",us="Safari",Ms=()=>Da({current:void 0,version:Qo.unknown()}),Da=Y=>{const oe=Y.current,ke=Y.version,ze=tn=>()=>oe===tn;return{current:oe,version:ke,isEdge:ze(Xt),isChromium:ze(qt),isIE:ze(Qt),isOpera:ze(Sn),isFirefox:ze(xn),isSafari:ze(us)}},Va={unknown:Ms,nu:Da,edge:ot(Xt),chromium:ot(qt),ie:ot(Qt),opera:ot(Sn),firefox:ot(xn),safari:ot(us)},cc="Windows",Rn="iOS",jo="Android",ds="Linux",Lr="macOS",jr="Solaris",Rr="FreeBSD",Ls="ChromeOS",Ql=()=>Wi({current:void 0,version:Qo.unknown()}),Wi=Y=>{const oe=Y.current,ke=Y.version,ze=tn=>()=>oe===tn;return{current:oe,version:ke,isWindows:ze(cc),isiOS:ze(Rn),isAndroid:ze(jo),isMacOS:ze(Lr),isLinux:ze(ds),isSolaris:ze(jr),isFreeBSD:ze(Rr),isChromeOS:ze(Ls)}},ms={unknown:Ql,nu:Wi,windows:ot(cc),ios:ot(Rn),android:ot(jo),linux:ot(ds),macos:ot(Lr),solaris:ot(jr),freebsd:ot(Rr),chromeos:ot(Ls)},Ra={detect:(Y,oe,ke)=>{const ze=At.browsers(),tn=At.oses(),Lo=oe.bind(Zs=>jn(ze,Zs)).orThunk(()=>be(ze,Y)).fold(Va.unknown,Va.nu),Xs=Zo(tn,Y).fold(ms.unknown,ms.nu),_o=se(Xs,Lo,Y,ke);return{browser:Lo,os:Xs,deviceType:_o}}},fr=Y=>window.matchMedia(Y).matches;let Zi=de(()=>Ra.detect(navigator.userAgent,ht.from(navigator.userAgentData),fr));const ic=()=>Zi(),ya=(Y,oe)=>({left:Y,top:oe,translate:(ze,tn)=>ya(Y+ze,oe+tn)}),Cc=ya,al=Y=>{const oe=Y!==void 0?Y.dom:document,ke=oe.body.scrollLeft||oe.documentElement.scrollLeft,ze=oe.body.scrollTop||oe.documentElement.scrollTop;return Cc(ke,ze)},li=Y=>{const oe=Y===void 0?window:Y;return ic().browser.isFirefox()?ht.none():ht.from(oe.visualViewport)},cl=(Y,oe,ke,ze)=>({x:Y,y:oe,width:ke,height:ze,right:Y+ke,bottom:oe+ze}),Ma=Y=>{const oe=Y===void 0?window:Y,ke=oe.document,ze=al(Ys.fromDom(ke));return li(oe).fold(()=>{const tn=oe.document.documentElement,Lo=tn.clientWidth,Xs=tn.clientHeight;return cl(ze.left,ze.top,Lo,Xs)},tn=>cl(Math.max(tn.pageLeft,ze.left),Math.max(tn.pageTop,ze.top),tn.width,tn.height))},Nc=(Y,oe,ke)=>li(ke).map(ze=>{const tn=Lo=>oe(Jr(Lo));return ze.addEventListener(Y,tn),{unbind:()=>ze.removeEventListener(Y,tn)}}).getOrThunk(()=>({unbind:Nn}));var ji=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Wc=tinymce.util.Tools.resolve("tinymce.Env");const Gi=(Y,oe)=>{Y.dispatch("FullscreenStateChanged",{state:oe}),Y.dispatch("ResizeEditor")},W=Y=>oe=>oe.options.get(Y),me=Y=>{const oe=Y.options.register;oe("fullscreen_native",{processor:"boolean",default:!1})},ve=W("fullscreen_native"),Le=Y=>{const oe=Ys.fromDom(Y.getElement());return mr(oe).map(Rs).getOrThunk(()=>ca(Ss(oe)))},it=Y=>Y.fullscreenElement!==void 0?Y.fullscreenElement:Y.msFullscreenElement!==void 0?Y.msFullscreenElement:Y.webkitFullscreenElement!==void 0?Y.webkitFullscreenElement:null,pn=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",vs=Y=>{const oe=Y.dom;oe.requestFullscreen?oe.requestFullscreen():oe.msRequestFullscreen?oe.msRequestFullscreen():oe.webkitRequestFullScreen&&oe.webkitRequestFullScreen()},Mr=Y=>{const oe=Y.dom;oe.exitFullscreen?oe.exitFullscreen():oe.msExitFullscreen?oe.msExitFullscreen():oe.webkitCancelFullScreen&&oe.webkitCancelFullScreen()},Do=Y=>Y.dom===it(Ss(Y).dom),Nr=(Y,oe,ke)=>A(ts(Y,ke),oe),Go=(Y,oe)=>A(ls(Y),oe),rr=Y=>ba(Y),Bc=(Y,oe,ke)=>Nr(Y,ze=>Wo(ze,oe),ke),wc=(Y,oe)=>Go(Y,ke=>Wo(ke,oe)),zn="data-ephox-mobile-fullscreen-style",es="display:none!important;",Qr="position:absolute!important;",P="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",q="background-color:rgb(255,255,255)!important;",ne=Wc.os.isAndroid(),Be=Y=>{const oe=Jo(Y,"background-color");return oe!==void 0&&oe!==""?"background-color:"+oe+"!important":q},Mt=(Y,oe,ke)=>{const ze=Ca=>wc(Ca,"*:not(.tox-silver-sink)"),tn=Ca=>Ns=>{const Sc=Aa(Ns,"style"),Zc=Sc===void 0?"no-styles":Sc.trim();Zc!==Ca&&(ac(Ns,zn,Zc),Dr(Ns,Y.parseStyle(Ca)))},Lo=Bc(oe,"*"),Xs=on(Lo,ze),_o=Be(ke);Zt(Xs,tn(es)),Zt(Lo,tn(Qr+P+_o)),tn((ne===!0?"":Qr)+P+_o)(oe)},to=Y=>{const oe=rr("["+zn+"]");Zt(oe,ke=>{const ze=Aa(ke,zn);ze&&ze!=="no-styles"?Dr(ke,Y.parseStyle(ze)):rs(ke,"style"),rs(ke,zn)})},Kt=ji.DOM,Hr=()=>Ma(window),ea=Y=>window.scrollTo(Y.x,Y.y),et=li().fold(()=>({bind:Nn,unbind:Nn}),Y=>{const oe=Ze(),ke=Pt(),ze=Pt(),tn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Lo=()=>{window.requestAnimationFrame(()=>{oe.on(Ca=>Dr(Ca,{top:Y.offsetTop+"px",left:Y.offsetLeft+"px",height:Y.height+"px",width:Y.width+"px"}))})},Xs=he(()=>{tn(),Lo()},50);return{bind:Ca=>{oe.set(Ca),Xs.throttle(),ke.set(Nc("resize",Xs.throttle)),ze.set(Nc("scroll",Xs.throttle))},unbind:()=>{oe.on(()=>{ke.clear(),ze.clear()}),oe.clear()}}}),Vr=(Y,oe)=>{const ke=document.body,ze=document.documentElement,tn=Y.getContainer(),Lo=Ys.fromDom(tn),Xs=Le(Y),_o=oe.get(),Zs=Ys.fromDom(Y.getBody()),Ca=Wc.deviceType.isTouch(),Ns=tn.style,Sc=Y.iframeElement,Zc=Sc==null?void 0:Sc.style,As=hr=>{hr(ke,"tox-fullscreen"),hr(ze,"tox-fullscreen"),hr(tn,"tox-fullscreen"),mr(Lo).map(ki=>Rs(ki).dom).each(ki=>{hr(ki,"tox-fullscreen"),hr(ki,"tox-shadowhost")})},wa=()=>{Ca&&to(Y.dom),As(Kt.removeClass),et.unbind(),ht.from(oe.get()).each(hr=>hr.fullscreenChangeHandler.unbind())};if(_o)_o.fullscreenChangeHandler.unbind(),ve(Y)&&Do(Xs)&&Mr(Ss(Xs)),Zc.width=_o.iframeWidth,Zc.height=_o.iframeHeight,Ns.width=_o.containerWidth,Ns.height=_o.containerHeight,Ns.top=_o.containerTop,Ns.left=_o.containerLeft,wa(),ea(_o.scrollPos),oe.set(null),Gi(Y,!1),Y.off("remove",wa);else{const hr=wr(Ss(Xs),pn(),Tl=>{ve(Y)&&!Do(Xs)&&oe.get()!==null&&Vr(Y,oe)}),ki={scrollPos:Hr(),containerWidth:Ns.width,containerHeight:Ns.height,containerTop:Ns.top,containerLeft:Ns.left,iframeWidth:Zc.width,iframeHeight:Zc.height,fullscreenChangeHandler:hr};Ca&&Mt(Y.dom,Lo,Zs),Zc.width=Zc.height="100%",Ns.width=Ns.height="",As(Kt.addClass),et.bind(Lo),Y.on("remove",wa),oe.set(ki),ve(Y)&&vs(Xs),Gi(Y,!0)}},gr=(Y,oe)=>{Y.addCommand("mceFullScreen",()=>{Vr(Y,oe)})},ta=(Y,oe)=>ke=>{ke.setActive(oe.get()!==null);const ze=tn=>ke.setActive(tn.state);return Y.on("FullscreenStateChanged",ze),()=>Y.off("FullscreenStateChanged",ze)},sd=(Y,oe)=>{const ke=()=>Y.execCommand("mceFullScreen");Y.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:ke,onSetup:ta(Y,oe)}),Y.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:ke,onSetup:ta(Y,oe)})};var xo=()=>{Qn.add("fullscreen",Y=>{const oe=Ht(null);return Y.inline||(me(Y),gr(Y,oe),sd(Y,oe),Y.addShortcut("Meta+Shift+F","","mceFullScreen")),In(oe)})};xo()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=Object.getPrototypeOf,In=(P,q,ne)=>{var Be;return ne(P,q.prototype)?!0:((Be=P.constructor)===null||Be===void 0?void 0:Be.name)===q.name},Mn=P=>{const q=typeof P;return P===null?"null":q==="object"&&Array.isArray(P)?"array":q==="object"&&In(P,String,(ne,Be)=>Be.isPrototypeOf(ne))?"string":q},Yn=P=>q=>Mn(q)===P,Wn=P=>q=>typeof q===P,oo=P=>q=>P===q,Vt=(P,q)=>Lt(P)&&In(P,q,(ne,Be)=>Qn(ne)===Be),Wt=Yn("string"),Lt=Yn("object"),Oo=P=>Vt(P,Object),Yo=Yn("array"),ho=oo(null),_n=Wn("boolean"),So=P=>P==null,Xn=P=>!So(P),mt=Wn("function"),Nn=Wn("number"),ct=(P,q)=>{if(Yo(P)){for(let ne=0,Be=P.length;ne<Be;++ne)if(!q(P[ne]))return!1;return!0}return!1},K=()=>{};class ot{constructor(q,ne){this.tag=q,this.value=ne}static some(q){return new ot(!0,q)}static none(){return ot.singletonNone}fold(q,ne){return this.tag?ne(this.value):q()}isSome(){return this.tag}isNone(){return!this.tag}map(q){return this.tag?ot.some(q(this.value)):ot.none()}bind(q){return this.tag?q(this.value):ot.none()}exists(q){return this.tag&&q(this.value)}forall(q){return!this.tag||q(this.value)}filter(q){return!this.tag||q(this.value)?this:ot.none()}getOr(q){return this.tag?this.value:q}or(q){return this.tag?this:q}getOrThunk(q){return this.tag?this.value:q()}orThunk(q){return this.tag?this:q()}getOrDie(q){if(this.tag)return this.value;throw new Error(q??"Called getOrDie on None")}static from(q){return Xn(q)?ot.some(q):ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(q){this.tag&&q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ot.singletonNone=new ot(!1);const zt=Object.keys,ut=Object.hasOwnProperty,G=(P,q)=>{const ne=zt(P);for(let Be=0,Mt=ne.length;Be<Mt;Be++){const to=ne[Be],Kt=P[to];q(Kt,to)}},ht=P=>(q,ne)=>{P[ne]=q},Vn=(P,q,ne,Be)=>{G(P,(Mt,to)=>{(q(Mt,to)?ne:Be)(Mt,to)})},Pt=(P,q)=>{const ne={};return Vn(P,q,ht(ne),K),ne},Ze=(P,q)=>ut.call(P,q),he=(P,q)=>Ze(P,q)&&P[q]!==void 0&&P[q]!==null,Uo=Array.prototype.push,Ln=P=>{const q=[];for(let ne=0,Be=P.length;ne<Be;++ne){if(!Yo(P[ne]))throw new Error("Arr.flatten item "+ne+" was not an array, input: "+P);Uo.apply(q,P[ne])}return q},Zt=(P,q)=>q>=0&&q<P.length?ot.some(P[q]):ot.none(),A=P=>Zt(P,0),Co=(P,q)=>{for(let ne=0;ne<P.length;ne++){const Be=q(P[ne],ne);if(Be.isSome())return Be}return ot.none()};typeof window<"u"||Function("return this;")();const rt=(P,q,ne)=>{if(Wt(ne)||_n(ne)||Nn(ne))P.setAttribute(q,ne+"");else throw console.error("Invalid call to Attribute.set. Key ",q,":: Value ",ne,":: Element ",P),new Error("Attribute value was not simple")},ko=(P,q,ne)=>{rt(P.dom,q,ne)},on=(P,q)=>{P.dom.removeAttribute(q)},qe=(P,q)=>{const Be=(q||document).createElement("div");if(Be.innerHTML=P,!Be.hasChildNodes()||Be.childNodes.length>1){const Mt="HTML does not have a single root node";throw console.error(Mt,P),new Error(Mt)}return pt(Be.childNodes[0])},po=(P,q)=>{const Be=(q||document).createElement(P);return pt(Be)},os=(P,q)=>{const Be=(q||document).createTextNode(P);return pt(Be)},pt=P=>{if(P==null)throw new Error("Node cannot be null or undefined");return{dom:P}},Se={fromHtml:qe,fromTag:po,fromText:os,fromDom:pt,fromPoint:(P,q,ne)=>ot.from(P.dom.elementFromPoint(q,ne)).map(pt)};var Qe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),H=tinymce.util.Tools.resolve("tinymce.util.URI");const ps=P=>P.length>0,Dn=P=>q=>q.options.get(P),bo=P=>{const q=P.options.register;q("image_dimensions",{processor:"boolean",default:!0}),q("image_advtab",{processor:"boolean",default:!1}),q("image_uploadtab",{processor:"boolean",default:!0}),q("image_prepend_url",{processor:"string",default:""}),q("image_class_list",{processor:"object[]"}),q("image_description",{processor:"boolean",default:!0}),q("image_title",{processor:"boolean",default:!1}),q("image_caption",{processor:"boolean",default:!1}),q("image_list",{processor:ne=>{const Be=ne===!1||Wt(ne)||ct(ne,Lt)||mt(ne);return Be?{value:ne,valid:Be}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},An=Dn("image_dimensions"),Ys=Dn("image_advtab"),Ue=Dn("image_uploadtab"),wt=Dn("image_prepend_url"),Ge=Dn("image_class_list"),xe=Dn("image_description"),Io=Dn("image_title"),eo=Dn("image_caption"),Rt=Dn("image_list"),Tr=Dn("a11y_advanced_options"),$n=Dn("automatic_uploads"),ur=P=>ps(P.options.get("images_upload_url")),Wo=P=>Xn(P.options.get("images_upload_handler")),Fs=(P,q)=>Math.max(parseInt(P,10),parseInt(q,10)),ba=P=>new Promise(q=>{const ne=document.createElement("img"),Be=to=>{ne.onload=ne.onerror=null,ne.parentNode&&ne.parentNode.removeChild(ne),q(to)};ne.onload=()=>{const to=Fs(ne.width,ne.clientWidth),Kt=Fs(ne.height,ne.clientHeight),Hr={width:to,height:Kt};Be(Promise.resolve(Hr))},ne.onerror=()=>{Be(Promise.reject(`Failed to get image dimensions for: ${P}`))};const Mt=ne.style;Mt.visibility="hidden",Mt.position="fixed",Mt.bottom=Mt.left="0px",Mt.width=Mt.height="auto",document.body.appendChild(ne),ne.src=P}),Ir=P=>(P&&(P=P.replace(/px$/,"")),P),Ss=P=>(P.length>0&&/^[0-9]+$/.test(P)&&(P+="px"),P),is=P=>{if(P.margin){const q=String(P.margin).split(" ");switch(q.length){case 1:P["margin-top"]=P["margin-top"]||q[0],P["margin-right"]=P["margin-right"]||q[0],P["margin-bottom"]=P["margin-bottom"]||q[0],P["margin-left"]=P["margin-left"]||q[0];break;case 2:P["margin-top"]=P["margin-top"]||q[0],P["margin-right"]=P["margin-right"]||q[1],P["margin-bottom"]=P["margin-bottom"]||q[0],P["margin-left"]=P["margin-left"]||q[1];break;case 3:P["margin-top"]=P["margin-top"]||q[0],P["margin-right"]=P["margin-right"]||q[1],P["margin-bottom"]=P["margin-bottom"]||q[2],P["margin-left"]=P["margin-left"]||q[1];break;case 4:P["margin-top"]=P["margin-top"]||q[0],P["margin-right"]=P["margin-right"]||q[1],P["margin-bottom"]=P["margin-bottom"]||q[2],P["margin-left"]=P["margin-left"]||q[3]}delete P.margin}return P},Uc=(P,q)=>{const ne=Rt(P);Wt(ne)?fetch(ne).then(Be=>{Be.ok&&Be.json().then(q)}):mt(ne)?ne(q):q(ne)},ts=(P,q,ne)=>{const Be=()=>{ne.onload=ne.onerror=null,P.selection&&(P.selection.select(ne),P.nodeChanged())};ne.onload=()=>{!q.width&&!q.height&&An(P)&&P.dom.setAttribs(ne,{width:String(ne.clientWidth),height:String(ne.clientHeight)}),Be()},ne.onerror=Be},ls=P=>new Promise((q,ne)=>{const Be=new FileReader;Be.onload=()=>{q(Be.result)},Be.onerror=()=>{var Mt;ne((Mt=Be.error)===null||Mt===void 0?void 0:Mt.message)},Be.readAsDataURL(P)}),ss=P=>P.nodeName==="IMG"&&(P.hasAttribute("data-mce-object")||P.hasAttribute("data-mce-placeholder")),Xo=(P,q)=>{const ne=P.options.get;return H.isDomSafe(q,"img",{allow_html_data_urls:ne("allow_html_data_urls"),allow_script_urls:ne("allow_script_urls"),allow_svg_data_urls:ne("allow_svg_data_urls")})},Ds=Qe.DOM,dr=P=>P.style.marginLeft&&P.style.marginRight&&P.style.marginLeft===P.style.marginRight?Ir(P.style.marginLeft):"",aa=P=>P.style.marginTop&&P.style.marginBottom&&P.style.marginTop===P.style.marginBottom?Ir(P.style.marginTop):"",mr=P=>P.style.borderWidth?Ir(P.style.borderWidth):"",Rs=(P,q)=>{var ne;return P.hasAttribute(q)&&(ne=P.getAttribute(q))!==null&&ne!==void 0?ne:""},Or=P=>P.parentNode!==null&&P.parentNode.nodeName==="FIGURE",bt=(P,q,ne)=>{ne===""||ne===null?P.removeAttribute(q):P.setAttribute(q,ne)},io=P=>{const q=Ds.create("figure",{class:"image"});Ds.insertAfter(q,P),q.appendChild(P),q.appendChild(Ds.create("figcaption",{contentEditable:"true"},"Caption")),q.contentEditable="false"},ca=P=>{const q=P.parentNode;Xn(q)&&(Ds.insertAfter(P,q),Ds.remove(q))},sr=P=>{Or(P)?ca(P):io(P)},ac=(P,q)=>{const ne=P.getAttribute("style"),Be=q(ne!==null?ne:"");Be.length>0?(P.setAttribute("style",Be),P.setAttribute("data-mce-style",Be)):P.removeAttribute("style")},Aa=(P,q)=>(ne,Be,Mt)=>{const to=ne.style;to[Be]?(to[Be]=Ss(Mt),ac(ne,q)):bt(ne,Be,Mt)},rs=(P,q)=>P.style[q]?Ir(P.style[q]):Rs(P,q),La=(P,q)=>{const ne=Ss(q);P.style.marginLeft=ne,P.style.marginRight=ne},Dr=(P,q)=>{const ne=Ss(q);P.style.marginTop=ne,P.style.marginBottom=ne},Jo=(P,q)=>{const ne=Ss(q);P.style.borderWidth=ne},hn=(P,q)=>{P.style.borderStyle=q},Er=P=>{var q;return(q=P.style.borderStyle)!==null&&q!==void 0?q:""},Jr=P=>Xn(P)&&P.nodeName==="FIGURE",Oa=P=>P.nodeName==="IMG",Ha=P=>Ds.getAttrib(P,"alt").length===0&&Ds.getAttrib(P,"role")==="presentation",Is=P=>Ha(P)?"":Rs(P,"alt"),Ws=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),bs=(P,q)=>{var ne;const Be=document.createElement("img");return bt(Be,"style",q.style),(dr(Be)||q.hspace!=="")&&La(Be,q.hspace),(aa(Be)||q.vspace!=="")&&Dr(Be,q.vspace),(mr(Be)||q.border!=="")&&Jo(Be,q.border),(Er(Be)||q.borderStyle!=="")&&hn(Be,q.borderStyle),P((ne=Be.getAttribute("style"))!==null&&ne!==void 0?ne:"")},wr=(P,q)=>{const ne=document.createElement("img");if(fn(P,{...q,caption:!1},ne),Ie(ne,q.alt,q.isDecorative),q.caption){const Be=Ds.create("figure",{class:"image"});return Be.appendChild(ne),Be.appendChild(Ds.create("figcaption",{contentEditable:"true"},"Caption")),Be.contentEditable="false",Be}else return ne},de=(P,q)=>({src:Rs(q,"src"),alt:Is(q),title:Rs(q,"title"),width:rs(q,"width"),height:rs(q,"height"),class:Rs(q,"class"),style:P(Rs(q,"style")),caption:Or(q),hspace:dr(q),vspace:aa(q),border:mr(q),borderStyle:Er(q),isDecorative:Ha(q)}),se=(P,q,ne,Be,Mt)=>{ne[Be]!==q[Be]&&Mt(P,Be,String(ne[Be]))},Ie=(P,q,ne)=>{if(ne){Ds.setAttrib(P,"role","presentation");const Be=Se.fromDom(P);ko(Be,"alt","")}else{if(ho(q)){const Be=Se.fromDom(P);on(Be,"alt")}else{const Be=Se.fromDom(P);ko(Be,"alt",q)}Ds.getAttrib(P,"role")==="presentation"&&Ds.setAttrib(P,"role","")}},Ne=(P,q,ne)=>{(ne.alt!==q.alt||ne.isDecorative!==q.isDecorative)&&Ie(P,ne.alt,ne.isDecorative)},Yt=(P,q)=>(ne,Be,Mt)=>{P(ne,Mt),ac(ne,q)},fn=(P,q,ne)=>{const Be=de(P,ne);se(ne,Be,q,"caption",(Mt,to,Kt)=>sr(Mt)),se(ne,Be,q,"src",bt),se(ne,Be,q,"title",bt),se(ne,Be,q,"width",Aa("width",P)),se(ne,Be,q,"height",Aa("height",P)),se(ne,Be,q,"class",bt),se(ne,Be,q,"style",Yt((Mt,to)=>bt(Mt,"style",to),P)),se(ne,Be,q,"hspace",Yt(La,P)),se(ne,Be,q,"vspace",Yt(Dr,P)),se(ne,Be,q,"border",Yt(Jo,P)),se(ne,Be,q,"borderStyle",Yt(hn,P)),Ne(ne,Be,q)},so=(P,q)=>{const ne=P.dom.styles.parse(q),Be=is(ne),Mt=P.dom.styles.parse(P.dom.styles.serialize(Be));return P.dom.styles.serialize(Mt)},Qo=P=>{const q=P.selection.getNode(),ne=P.dom.getParent(q,"figure.image");return ne?P.dom.select("img",ne)[0]:q&&(q.nodeName!=="IMG"||ss(q))?null:q},jn=(P,q)=>{var ne;const Be=P.dom,Mt=Pt(P.schema.getTextBlockElements(),(Kt,Hr)=>!P.schema.isValidChild(Hr,"figure")),to=Be.getParent(q.parentNode,Kt=>he(Mt,Kt.nodeName),P.getBody());return to&&(ne=Be.split(to,q))!==null&&ne!==void 0?ne:q},uo=P=>{const q=Qo(P);return q?de(ne=>so(P,ne),q):Ws()},be=(P,q)=>{const ne=wr(Mt=>so(P,Mt),q);P.dom.setAttrib(ne,"data-mce-id","__mcenew"),P.focus(),P.selection.setContent(ne.outerHTML);const Be=P.dom.select('*[data-mce-id="__mcenew"]')[0];if(P.dom.setAttrib(Be,"data-mce-id",null),Jr(Be)){const Mt=jn(P,Be);P.selection.select(Mt)}else P.selection.select(Be)},Zo=(P,q)=>{P.dom.setAttrib(q,"src",q.getAttribute("src"))},re=(P,q)=>{if(q){const ne=P.dom.is(q.parentNode,"figure.image")?q.parentNode:q;P.dom.remove(ne),P.focus(),P.nodeChanged(),P.dom.isEmpty(P.getBody())&&(P.setContent(""),P.selection.setCursorLocation())}},ce=(P,q)=>{const ne=Qo(P);if(ne)if(fn(Be=>so(P,Be),q,ne),Zo(P,ne),Jr(ne.parentNode)){const Be=ne.parentNode;jn(P,Be),P.selection.select(ne.parentNode)}else P.selection.select(ne),ts(P,q,ne)},tt=(P,q)=>{const ne=q.src;return{...q,src:Xo(P,ne)?ne:""}},nt=(P,q)=>{const ne=Qo(P);if(ne){const Mt={...de(Kt=>so(P,Kt),ne),...q},to=tt(P,Mt);Mt.src?ce(P,to):re(P,ne)}else q.src&&be(P,{...Ws(),...q})},qt=(P=>(...q)=>{if(q.length===0)throw new Error("Can't merge zero objects");const ne={};for(let Be=0;Be<q.length;Be++){const Mt=q[Be];for(const to in Mt)Ze(Mt,to)&&(ne[to]=P(ne[to],Mt[to]))}return ne})((P,q)=>Oo(P)&&Oo(q)?qt(P,q):q);var Qt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Sn=tinymce.util.Tools.resolve("tinymce.util.Tools");const xn=P=>Wt(P.value)?P.value:"",us=P=>Wt(P.text)?P.text:Wt(P.title)?P.title:"",Ms=(P,q)=>{const ne=[];return Sn.each(P,Be=>{const Mt=us(Be);if(Be.menu!==void 0){const to=Ms(Be.menu,q);ne.push({text:Mt,items:to})}else{const to=q(Be);ne.push({text:Mt,value:to})}}),ne},Da=(P=xn)=>q=>q?ot.from(q).map(ne=>Ms(ne,P)):ot.none(),Va=P=>Da(xn)(P),cc=P=>Ze(P,"items"),Rn=(P,q)=>Co(P,ne=>cc(ne)?Rn(ne.items,q):ne.value===q?ot.some(ne):ot.none()),ds={sanitizer:Da,sanitize:Va,findEntry:(P,q)=>P.bind(ne=>Rn(ne,q))},jr={makeTab:P=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Rr=P=>{const q=ds.sanitizer(oe=>P.convertURL(oe.value||oe.url||"","src")),ne=new Promise(oe=>{Uc(P,ke=>{oe(q(ke).map(ze=>Ln([[{text:"None",value:""}],ze])))})}),Be=ds.sanitize(Ge(P)),Mt=Ys(P),to=Ue(P),Kt=ur(P),Hr=Wo(P),ea=uo(P),et=xe(P),Vr=Io(P),gr=An(P),ta=eo(P),sd=Tr(P),xo=$n(P),Y=ot.some(wt(P)).filter(oe=>Wt(oe)&&oe.length>0);return ne.then(oe=>({image:ea,imageList:oe,classList:Be,hasAdvTab:Mt,hasUploadTab:to,hasUploadUrl:Kt,hasUploadHandler:Hr,hasDescription:et,hasImageTitle:Vr,hasDimensions:gr,hasImageCaption:ta,prependURL:Y,hasAccessibilityOptions:sd,automaticUploads:xo}))},Ls=P=>{const q={name:"src",type:"urlinput",filetype:"image",label:"Source"},ne=P.imageList.map(Vr=>({name:"images",type:"listbox",label:"Image list",items:Vr})),Be={name:"alt",type:"input",label:"Alternative description",enabled:!(P.hasAccessibilityOptions&&P.image.isDecorative)},Mt={name:"title",type:"input",label:"Image title"},to={name:"dimensions",type:"sizeinput"},Kt={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Hr=P.classList.map(Vr=>({name:"classes",type:"listbox",label:"Class",items:Vr})),ea={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},et=Vr=>Vr?{type:"grid",columns:2}:{type:"panel"};return Ln([[q],ne.toArray(),P.hasAccessibilityOptions&&P.hasDescription?[Kt]:[],P.hasDescription?[Be]:[],P.hasImageTitle?[Mt]:[],P.hasDimensions?[to]:[],[{...et(P.classList.isSome()&&P.hasImageCaption),items:Ln([Hr.toArray(),P.hasImageCaption?[ea]:[]])}]])},Wi={makeTab:P=>({title:"General",name:"general",items:Ls(P)}),makeItems:Ls},va={makeTab:P=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Ra=P=>({prevImage:ds.findEntry(P.imageList,P.image.src),prevAlt:P.image.alt,open:!0}),fr=P=>({src:{value:P.src,meta:{}},images:P.src,alt:P.alt,title:P.title,dimensions:{width:P.width,height:P.height},classes:P.class,caption:P.caption,style:P.style,vspace:P.vspace,border:P.border,hspace:P.hspace,borderstyle:P.borderStyle,fileinput:[],isDecorative:P.isDecorative}),Zi=(P,q)=>({src:P.src.value,alt:(P.alt===null||P.alt.length===0)&&q?null:P.alt,title:P.title,width:P.dimensions.width,height:P.dimensions.height,class:P.classes,style:P.style,caption:P.caption,hspace:P.hspace,vspace:P.vspace,border:P.border,borderStyle:P.borderstyle,isDecorative:P.isDecorative}),ic=(P,q)=>/^(?:[a-zA-Z]+:)?\/\//.test(q)?ot.none():P.prependURL.bind(ne=>q.substring(0,ne.length)!==ne?ot.some(ne+q):ot.none()),ya=(P,q)=>{const ne=q.getData();ic(P,ne.src.value).each(Be=>{q.setData({src:{value:Be,meta:ne.src.meta}})})},Cc=(P,q,ne)=>{P.hasDescription&&Wt(ne.alt)&&(q.alt=ne.alt),P.hasAccessibilityOptions&&(q.isDecorative=ne.isDecorative||q.isDecorative||!1),P.hasImageTitle&&Wt(ne.title)&&(q.title=ne.title),P.hasDimensions&&(Wt(ne.width)&&(q.dimensions.width=ne.width),Wt(ne.height)&&(q.dimensions.height=ne.height)),Wt(ne.class)&&ds.findEntry(P.classList,ne.class).each(Be=>{q.classes=Be.value}),P.hasImageCaption&&_n(ne.caption)&&(q.caption=ne.caption),P.hasAdvTab&&(Wt(ne.style)&&(q.style=ne.style),Wt(ne.vspace)&&(q.vspace=ne.vspace),Wt(ne.border)&&(q.border=ne.border),Wt(ne.hspace)&&(q.hspace=ne.hspace),Wt(ne.borderstyle)&&(q.borderstyle=ne.borderstyle))},al=(P,q)=>{const ne=q.getData(),Be=ne.src.meta;if(Be!==void 0){const Mt=qt({},ne);Cc(P,Mt,Be),q.setData(Mt)}},li=(P,q,ne,Be)=>{const Mt=Be.getData(),to=Mt.src.value,Kt=Mt.src.meta||{};!Kt.width&&!Kt.height&&q.hasDimensions&&(ps(to)?P.imageSize(to).then(Hr=>{ne.open&&Be.setData({dimensions:Hr})}).catch(Hr=>console.error(Hr)):Be.setData({dimensions:{width:"",height:""}}))},cl=(P,q,ne)=>{const Be=ne.getData(),Mt=ds.findEntry(P.imageList,Be.src.value);q.prevImage=Mt,ne.setData({images:Mt.map(to=>to.value).getOr("")})},Ma=(P,q,ne,Be)=>{ya(q,Be),al(q,Be),li(P,q,ne,Be),cl(q,ne,Be)},Nc=(P,q,ne,Be)=>{const Mt=Be.getData(),to=ds.findEntry(q.imageList,Mt.images);to.each(Kt=>{Mt.alt===""||ne.prevImage.map(ea=>ea.text===Mt.alt).getOr(!1)?Kt.value===""?Be.setData({src:Kt,alt:ne.prevAlt}):Be.setData({src:Kt,alt:Kt.text}):Be.setData({src:Kt})}),ne.prevImage=to,Ma(P,q,ne,Be)},ji=(P,q,ne,Be)=>{const Mt=Be.getData();Be.block("Uploading image"),A(Mt.fileinput).fold(()=>{Be.unblock()},to=>{const Kt=URL.createObjectURL(to),Hr=()=>{Be.unblock(),URL.revokeObjectURL(Kt)},ea=et=>{Be.setData({src:{value:et,meta:{}}}),Be.showTab("general"),Ma(P,q,ne,Be)};ls(to).then(et=>{const Vr=P.createBlobCache(to,Kt,et);q.automaticUploads?P.uploadImage(Vr).then(gr=>{ea(gr.url),Hr()}).catch(gr=>{Hr(),P.alertErr(gr)}):(P.addToBlobCache(Vr),ea(Vr.blobUri()),Be.unblock())})})},Wc=(P,q,ne)=>(Be,Mt)=>{Mt.name==="src"?Ma(P,q,ne,Be):Mt.name==="images"?Nc(P,q,ne,Be):Mt.name==="alt"?ne.prevAlt=Be.getData().alt:Mt.name==="fileinput"?ji(P,q,ne,Be):Mt.name==="isDecorative"&&Be.setEnabled("alt",!Be.getData().isDecorative)},Gi=P=>()=>{P.open=!1},W=P=>P.hasAdvTab||P.hasUploadUrl||P.hasUploadHandler?{type:"tabpanel",tabs:Ln([[Wi.makeTab(P)],P.hasAdvTab?[jr.makeTab(P)]:[],P.hasUploadTab&&(P.hasUploadUrl||P.hasUploadHandler)?[va.makeTab(P)]:[]])}:{type:"panel",items:Wi.makeItems(P)},me=(P,q,ne)=>Be=>{const Mt=qt(fr(q.image),Be.getData()),to={...Mt,style:bs(ne.normalizeCss,Zi(Mt,!1))};P.execCommand("mceUpdateImage",!1,Zi(to,q.hasAccessibilityOptions)),P.editorUpload.uploadImagesAuto(),Be.close()},ve=P=>q=>Xo(P,q)?ba(P.documentBaseURI.toAbsolute(q)).then(ne=>({width:String(ne.width),height:String(ne.height)})):Promise.resolve({width:"",height:""}),Le=P=>(q,ne,Be)=>{var Mt;return P.editorUpload.blobCache.create({blob:q,blobUri:ne,name:(Mt=q.name)===null||Mt===void 0?void 0:Mt.replace(/\.[^\.]+$/,""),filename:q.name,base64:Be.split(",")[1]})},it=P=>q=>{P.editorUpload.blobCache.add(q)},pn=P=>q=>{P.windowManager.alert(q)},vs=P=>q=>so(P,q),Mr=P=>q=>P.dom.parseStyle(q),Do=P=>(q,ne)=>P.dom.serializeStyle(q,ne),Nr=P=>q=>Qt(P).upload([q],!1).then(ne=>{var Be;return ne.length===0?Promise.reject("Failed to upload image"):ne[0].status===!1?Promise.reject((Be=ne[0].error)===null||Be===void 0?void 0:Be.message):ne[0]}),Go=P=>{const q={imageSize:ve(P),addToBlobCache:it(P),createBlobCache:Le(P),alertErr:pn(P),normalizeCss:vs(P),parseStyle:Mr(P),serializeStyle:Do(P),uploadImage:Nr(P)};return{open:()=>{Rr(P).then(Be=>{const Mt=Ra(Be);return{title:"Insert/Edit Image",size:"normal",body:W(Be),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:fr(Be.image),onSubmit:me(P,Be,q),onChange:Wc(q,Be,Mt),onClose:Gi(Mt)}}).then(P.windowManager.open)}}},rr=P=>{P.addCommand("mceImage",Go(P).open),P.addCommand("mceUpdateImage",(q,ne)=>{P.undoManager.transact(()=>nt(P,ne))})},Bc=P=>{const q=P.attr("class");return Xn(q)&&/\bimage\b/.test(q)},wc=P=>q=>{let ne=q.length;const Be=Mt=>{Mt.attr("contenteditable",P?"true":null)};for(;ne--;){const Mt=q[ne];Bc(Mt)&&(Mt.attr("contenteditable",P?"false":null),Sn.each(Mt.getAll("figcaption"),Be))}},zn=P=>{P.on("PreInit",()=>{P.parser.addNodeFilter("figure",wc(!0)),P.serializer.addNodeFilter("figure",wc(!1))})},es=P=>{P.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Go(P).open,onSetup:q=>(q.setActive(Xn(Qo(P))),P.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",q.setActive).unbind)}),P.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Go(P).open}),P.ui.registry.addContextMenu("image",{update:q=>Jr(q)||Oa(q)&&!ss(q)?["image"]:[]})};var Qr=()=>{Ht.add("image",P=>{bo(P),zn(P),es(P),rr(P)})};Qr()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=zt=>ut=>ut.options.get(zt),In=zt=>{const ut=zt.options.register;ut("insertdatetime_dateformat",{processor:"string",default:zt.translate("%Y-%m-%d")}),ut("insertdatetime_timeformat",{processor:"string",default:zt.translate("%H:%M:%S")}),ut("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),ut("insertdatetime_element",{processor:"boolean",default:!1})},Mn=Qn("insertdatetime_dateformat"),Yn=Qn("insertdatetime_timeformat"),Wn=Qn("insertdatetime_formats"),oo=Qn("insertdatetime_element"),Vt=zt=>{const ut=Wn(zt);return ut.length>0?ut[0]:Yn(zt)},Wt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Lt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Oo="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Yo="January February March April May June July August September October November December".split(" "),ho=(zt,ut)=>{if(zt=""+zt,zt.length<ut)for(let G=0;G<ut-zt.length;G++)zt="0"+zt;return zt},_n=(zt,ut,G=new Date)=>(ut=ut.replace("%D","%m/%d/%Y"),ut=ut.replace("%r","%I:%M:%S %p"),ut=ut.replace("%Y",""+G.getFullYear()),ut=ut.replace("%y",""+G.getYear()),ut=ut.replace("%m",ho(G.getMonth()+1,2)),ut=ut.replace("%d",ho(G.getDate(),2)),ut=ut.replace("%H",""+ho(G.getHours(),2)),ut=ut.replace("%M",""+ho(G.getMinutes(),2)),ut=ut.replace("%S",""+ho(G.getSeconds(),2)),ut=ut.replace("%I",""+((G.getHours()+11)%12+1)),ut=ut.replace("%p",G.getHours()<12?"AM":"PM"),ut=ut.replace("%B",""+zt.translate(Yo[G.getMonth()])),ut=ut.replace("%b",""+zt.translate(Oo[G.getMonth()])),ut=ut.replace("%A",""+zt.translate(Lt[G.getDay()])),ut=ut.replace("%a",""+zt.translate(Wt[G.getDay()])),ut=ut.replace("%%","%"),ut),So=(zt,ut,G,ht)=>{const Vn=zt.dom.create("time",{datetime:G},ht);zt.dom.replace(Vn,ut),zt.selection.select(Vn,!0),zt.selection.collapse(!1)},Xn=(zt,ut)=>{if(oo(zt)){const G=_n(zt,ut);let ht;/%[HMSIp]/.test(ut)?ht=_n(zt,"%Y-%m-%dT%H:%M"):ht=_n(zt,"%Y-%m-%d");const Vn=zt.dom.getParent(zt.selection.getStart(),"time");Vn?So(zt,Vn,ht,G):zt.insertContent('<time datetime="'+ht+'">'+G+"</time>")}else zt.insertContent(_n(zt,ut))},mt=zt=>{zt.addCommand("mceInsertDate",(ut,G)=>{Xn(zt,G??Mn(zt))}),zt.addCommand("mceInsertTime",(ut,G)=>{Xn(zt,G??Yn(zt))})},Nn=zt=>{let ut=zt;return{get:()=>ut,set:Vn=>{ut=Vn}}};var ct=tinymce.util.Tools.resolve("tinymce.util.Tools");const K=zt=>{const ut=Wn(zt),G=Nn(Vt(zt)),ht=Pt=>zt.execCommand("mceInsertDate",!1,Pt);zt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Pt=>Pt===G.get(),fetch:Pt=>{Pt(ct.map(ut,Ze=>({type:"choiceitem",text:_n(zt,Ze),value:Ze})))},onAction:Pt=>{ht(G.get())},onItemAction:(Pt,Ze)=>{G.set(Ze),ht(Ze)}});const Vn=Pt=>()=>{G.set(Pt),ht(Pt)};zt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>ct.map(ut,Pt=>({type:"menuitem",text:_n(zt,Pt),onAction:Vn(Pt)}))})};var ot=()=>{Ht.add("insertdatetime",zt=>{In(zt),mt(zt),K(zt)})};ot()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=(W,me,ve)=>{var Le;return ve(W,me.prototype)?!0:((Le=W.constructor)===null||Le===void 0?void 0:Le.name)===me.name},In=W=>{const me=typeof W;return W===null?"null":me==="object"&&Array.isArray(W)?"array":me==="object"&&Qn(W,String,(ve,Le)=>Le.isPrototypeOf(ve))?"string":me},Mn=W=>me=>In(me)===W,Yn=W=>me=>typeof me===W,Wn=W=>me=>W===me,oo=Mn("string"),Vt=Mn("object"),Wt=Mn("array"),Lt=Wn(null),Oo=Yn("boolean"),Yo=W=>W==null,ho=W=>!Yo(W),_n=Yn("function"),So=(W,me)=>{if(Wt(W)){for(let ve=0,Le=W.length;ve<Le;++ve)if(!me(W[ve]))return!1;return!0}return!1},Xn=()=>{},mt=W=>()=>W,Nn=(W,me)=>W===me;class ct{constructor(me,ve){this.tag=me,this.value=ve}static some(me){return new ct(!0,me)}static none(){return ct.singletonNone}fold(me,ve){return this.tag?ve(this.value):me()}isSome(){return this.tag}isNone(){return!this.tag}map(me){return this.tag?ct.some(me(this.value)):ct.none()}bind(me){return this.tag?me(this.value):ct.none()}exists(me){return this.tag&&me(this.value)}forall(me){return!this.tag||me(this.value)}filter(me){return!this.tag||me(this.value)?this:ct.none()}getOr(me){return this.tag?this.value:me}or(me){return this.tag?this:me}getOrThunk(me){return this.tag?this.value:me()}orThunk(me){return this.tag?this:me()}getOrDie(me){if(this.tag)return this.value;throw new Error(me??"Called getOrDie on None")}static from(me){return ho(me)?ct.some(me):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(me){this.tag&&me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const K=Array.prototype.indexOf,ot=Array.prototype.push,zt=(W,me)=>K.call(W,me),ut=(W,me)=>zt(W,me)>-1,G=(W,me)=>{const ve=W.length,Le=new Array(ve);for(let it=0;it<ve;it++){const pn=W[it];Le[it]=me(pn,it)}return Le},ht=(W,me)=>{for(let ve=0,Le=W.length;ve<Le;ve++){const it=W[ve];me(it,ve)}},Vn=(W,me,ve)=>(ht(W,(Le,it)=>{ve=me(ve,Le,it)}),ve),Pt=W=>{const me=[];for(let ve=0,Le=W.length;ve<Le;++ve){if(!Wt(W[ve]))throw new Error("Arr.flatten item "+ve+" was not an array, input: "+W);ot.apply(me,W[ve])}return me},Ze=(W,me)=>Pt(G(W,me)),he=(W,me)=>{for(let ve=0;ve<W.length;ve++){const Le=me(W[ve],ve);if(Le.isSome())return Le}return ct.none()},Uo=(W,me,ve=Nn)=>W.exists(Le=>ve(Le,me)),Ln=W=>{const me=[],ve=Le=>{me.push(Le)};for(let Le=0;Le<W.length;Le++)W[Le].each(ve);return me},Zt=(W,me)=>W?ct.some(me):ct.none(),A=W=>me=>me.options.get(W),Co=W=>{const me=W.options.register;me("link_assume_external_targets",{processor:ve=>{const Le=oo(ve)||Oo(ve);return Le?ve===!0?{value:1,valid:Le}:ve==="http"||ve==="https"?{value:ve,valid:Le}:{value:0,valid:Le}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),me("link_context_toolbar",{processor:"boolean",default:!1}),me("link_list",{processor:ve=>oo(ve)||_n(ve)||So(ve,Vt)}),me("link_default_target",{processor:"string"}),me("link_default_protocol",{processor:"string",default:"https"}),me("link_target_list",{processor:ve=>Oo(ve)||So(ve,Vt),default:!0}),me("link_rel_list",{processor:"object[]",default:[]}),me("link_class_list",{processor:"object[]",default:[]}),me("link_title",{processor:"boolean",default:!0}),me("allow_unsafe_link_target",{processor:"boolean",default:!1}),me("link_quicklink",{processor:"boolean",default:!1})},rt=A("link_assume_external_targets"),ko=A("link_context_toolbar"),on=A("link_list"),qe=A("link_default_target"),po=A("link_default_protocol"),os=A("link_target_list"),pt=A("link_rel_list"),un=A("link_class_list"),Se=A("link_title"),Qe=A("allow_unsafe_link_target"),H=A("link_quicklink");var ps=tinymce.util.Tools.resolve("tinymce.util.Tools");const Dn=W=>oo(W.value)?W.value:"",bo=W=>oo(W.text)?W.text:oo(W.title)?W.title:"",An=(W,me)=>{const ve=[];return ps.each(W,Le=>{const it=bo(Le);if(Le.menu!==void 0){const pn=An(Le.menu,me);ve.push({text:it,items:pn})}else{const pn=me(Le);ve.push({text:it,value:pn})}}),ve},Ys=(W=Dn)=>me=>ct.from(me).map(ve=>An(ve,W)),Ge={sanitize:W=>Ys(Dn)(W),sanitizeWith:Ys,createUi:(W,me)=>ve=>({name:W,type:"listbox",label:me,items:ve}),getValue:Dn},xe=Object.keys,Io=Object.hasOwnProperty,eo=(W,me)=>{const ve=xe(W);for(let Le=0,it=ve.length;Le<it;Le++){const pn=ve[Le],vs=W[pn];me(vs,pn)}},Rt=W=>(me,ve)=>{W[ve]=me},Tr=(W,me,ve,Le)=>{eo(W,(it,pn)=>{(me(it,pn)?ve:Le)(it,pn)})},$n=(W,me)=>{const ve={};return Tr(W,me,Rt(ve),Xn),ve},ur=(W,me)=>Io.call(W,me),Wo=(W,me)=>ur(W,me)&&W[me]!==void 0&&W[me]!==null;var Fs=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ba=tinymce.util.Tools.resolve("tinymce.util.URI");const Ir=W=>ho(W)&&W.nodeName.toLowerCase()==="a",Ss=W=>Ir(W)&&!!ts(W),is=(W,me)=>{if(W.collapsed)return[];{const ve=W.cloneContents(),Le=ve.firstChild,it=new Fs(Le,ve),pn=[];let vs=Le;do me(vs)&&pn.push(vs);while(vs=it.next());return pn}},Uc=W=>/^\w+:/i.test(W),ts=W=>{var me,ve;return(ve=(me=W.getAttribute("data-mce-href"))!==null&&me!==void 0?me:W.getAttribute("href"))!==null&&ve!==void 0?ve:""},ls=(W,me)=>{const ve=["noopener"],Le=W?W.split(/\s+/):[],it=Do=>ps.trim(Do.sort().join(" ")),pn=Do=>(Do=vs(Do),Do.length>0?Do.concat(ve):ve),vs=Do=>Do.filter(Nr=>ps.inArray(ve,Nr)===-1),Mr=me?pn(Le):vs(Le);return Mr.length>0?it(Mr):""},ss=W=>W.replace(/\uFEFF/g,""),Xo=(W,me)=>(me=me||aa(W.selection.getRng())[0]||W.selection.getNode(),io(me)?ct.from(W.dom.select("a[href]",me)[0]):ct.from(W.dom.getParent(me,"a[href]"))),Ds=(W,me)=>Xo(W,me).isSome(),dr=(W,me)=>{const ve=me.fold(()=>W.getContent({format:"text"}),Le=>Le.innerText||Le.textContent||"");return ss(ve)},aa=W=>is(W,Ss),mr=W=>ps.grep(W,Ss),Rs=W=>mr(W).length>0,Or=W=>aa(W).length>0,bt=W=>{const me=W.schema.getTextInlineElements(),ve=pn=>pn.nodeType===1&&!Ir(pn)&&!ur(me,pn.nodeName.toLowerCase());if(Xo(W).exists(pn=>pn.hasAttribute("data-mce-block")))return!1;const it=W.selection.getRng();return it.collapsed?!0:is(it,ve).length===0},io=W=>ho(W)&&W.nodeName==="FIGURE"&&/\bimage\b/i.test(W.className),ca=W=>Vn(["title","rel","class","target"],(ve,Le)=>(W[Le].each(it=>{ve[Le]=it.length>0?it:null}),ve),{href:W.href}),sr=(W,me)=>(me==="http"||me==="https")&&!Uc(W)?me+"://"+W:W,ac=(W,me)=>{const ve={...me};if(pt(W).length===0&&!Qe(W)){const Le=ls(ve.rel,ve.target==="_blank");ve.rel=Le||null}return ct.from(ve.target).isNone()&&os(W)===!1&&(ve.target=qe(W)),ve.href=sr(ve.href,rt(W)),ve},Aa=(W,me,ve,Le)=>{ve.each(it=>{ur(me,"innerText")?me.innerText=it:me.textContent=it}),W.dom.setAttribs(me,Le),W.selection.select(me)},rs=(W,me,ve,Le)=>{const it=W.dom;io(me)?Is(it,me,Le):ve.fold(()=>{W.execCommand("mceInsertLink",!1,Le)},pn=>{W.insertContent(it.createHTML("a",Le,it.encode(pn)))})},La=(W,me,ve)=>{const Le=W.selection.getNode(),it=Xo(W,Le),pn=ac(W,ca(ve));W.undoManager.transact(()=>{ve.href===me.href&&me.attach(),it.fold(()=>{rs(W,Le,ve.text,pn)},vs=>{W.focus(),Aa(W,vs,ve.text,pn)})})},Dr=W=>{const me=W.dom,ve=W.selection,Le=ve.getBookmark(),it=ve.getRng().cloneRange(),pn=me.getParent(it.startContainer,"a[href]",W.getBody()),vs=me.getParent(it.endContainer,"a[href]",W.getBody());pn&&it.setStartBefore(pn),vs&&it.setEndAfter(vs),ve.setRng(it),W.execCommand("unlink"),ve.moveToBookmark(Le)},Jo=W=>{W.undoManager.transact(()=>{const me=W.selection.getNode();io(me)?Ha(W,me):Dr(W),W.focus()})},hn=W=>{const{class:me,href:ve,rel:Le,target:it,text:pn,title:vs}=W;return $n({class:me.getOrNull(),href:ve,rel:Le.getOrNull(),target:it.getOrNull(),text:pn.getOrNull(),title:vs.getOrNull()},(Mr,Do)=>Lt(Mr)===!1)},Er=(W,me)=>{const ve=W.options.get,Le={allow_html_data_urls:ve("allow_html_data_urls"),allow_script_urls:ve("allow_script_urls"),allow_svg_data_urls:ve("allow_svg_data_urls")},it=me.href;return{...me,href:ba.isDomSafe(it,"a",Le)?it:""}},Jr=(W,me,ve)=>{const Le=Er(W,ve);W.hasPlugin("rtc",!0)?W.execCommand("createlink",!1,hn(Le)):La(W,me,Le)},Oa=W=>{W.hasPlugin("rtc",!0)?W.execCommand("unlink"):Jo(W)},Ha=(W,me)=>{var ve;const Le=W.dom.select("img",me)[0];if(Le){const it=W.dom.getParents(Le,"a[href]",me)[0];it&&((ve=it.parentNode)===null||ve===void 0||ve.insertBefore(Le,it),W.dom.remove(it))}},Is=(W,me,ve)=>{var Le;const it=W.select("img",me)[0];if(it){const pn=W.create("a",ve);(Le=it.parentNode)===null||Le===void 0||Le.insertBefore(pn,it),pn.appendChild(it)}},Ws=W=>Wo(W,"items"),bs=(W,me)=>he(me,ve=>Ws(ve)?bs(W,ve.items):Zt(ve.value===W,ve)),wr=(W,me,ve,Le)=>{const it=Le[me],pn=W.length>0;return it!==void 0?bs(it,ve).map(vs=>({url:{value:vs.value,meta:{text:pn?W:vs.text,attach:Xn}},text:pn?W:vs.text})):ct.none()},de=(W,me)=>me==="link"?W.link:me==="anchor"?W.anchor:ct.none(),Ie={init:(W,me)=>{const ve={text:W.text,title:W.title},Le=Do=>{var Nr;return Zt(ve.title.length<=0,ct.from((Nr=Do.meta)===null||Nr===void 0?void 0:Nr.title).getOr(""))},it=Do=>{var Nr;return Zt(ve.text.length<=0,ct.from((Nr=Do.meta)===null||Nr===void 0?void 0:Nr.text).getOr(Do.value))},pn=Do=>{const Nr=it(Do.url),Go=Le(Do.url);return Nr.isSome()||Go.isSome()?ct.some({...Nr.map(rr=>({text:rr})).getOr({}),...Go.map(rr=>({title:rr})).getOr({})}):ct.none()},vs=(Do,Nr)=>{const Go=de(me,Nr).getOr([]);return wr(ve.text,Nr,Go,Do)};return{onChange:(Do,Nr)=>{const Go=Nr.name;return Go==="url"?pn(Do()):ut(["anchor","link"],Go)?vs(Do(),Go):((Go==="text"||Go==="title")&&(ve[Go]=Do()[Go]),ct.none())}}},getDelta:wr};var Ne=tinymce.util.Tools.resolve("tinymce.util.Delay");const Yt=(W,me,ve)=>{const Le=W.selection.getRng();Ne.setEditorTimeout(W,()=>{W.windowManager.confirm(me,it=>{W.selection.setRng(Le),ve(it)})})},fn=W=>{const me=W.href;return me.indexOf("@")>0&&me.indexOf("/")===-1&&me.indexOf("mailto:")===-1?ct.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Le=>({...Le,href:"mailto:"+me})}):ct.none()},so=(W,me)=>ve=>{const Le=ve.href;return W===1&&!Uc(Le)||W===0&&/^\s*www(\.|\d\.)/i.test(Le)?ct.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${me}:// prefix?`,preprocess:pn=>({...pn,href:me+"://"+Le})}):ct.none()},jn={preprocess:(W,me)=>he([fn,so(rt(W),po(W))],ve=>ve(me)).fold(()=>Promise.resolve(me),ve=>new Promise(Le=>{Yt(W,ve.message,it=>{Le(it?ve.preprocess(me):me)})}))},be={getAnchors:W=>{const me=W.dom.select("a:not([href])"),ve=Ze(me,Le=>{const it=Le.name||Le.id;return it?[{text:it,value:"#"+it}]:[]});return ve.length>0?ct.some([{text:"None",value:""}].concat(ve)):ct.none()}},re={getClasses:W=>{const me=un(W);return me.length>0?Ge.sanitize(me):ct.none()}},ce=W=>{try{return ct.some(JSON.parse(W))}catch{return ct.none()}},nt={getLinks:W=>{const me=Le=>W.convertURL(Le.value||Le.url||"","href"),ve=on(W);return new Promise(Le=>{oo(ve)?fetch(ve).then(it=>it.ok?it.text().then(ce):Promise.reject()).then(Le,()=>Le(ct.none())):_n(ve)?ve(it=>Le(ct.some(it))):Le(ct.from(ve))}).then(Le=>Le.bind(Ge.sanitizeWith(me)).map(it=>it.length>0?[{text:"None",value:""}].concat(it):it))}},Xt={getRels:(W,me)=>{const ve=pt(W);if(ve.length>0){const Le=Uo(me,"_blank"),it=Qe(W)===!1,pn=Mr=>ls(Ge.getValue(Mr),Le);return(it?Ge.sanitizeWith(pn):Ge.sanitize)(ve)}return ct.none()}},qt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Sn={getTargets:W=>{const me=os(W);return Wt(me)?Ge.sanitize(me).orThunk(()=>ct.some(qt)):me===!1?ct.none():ct.some(qt)}},xn=(W,me,ve)=>{const Le=W.getAttrib(me,ve);return Le!==null&&Le.length>0?ct.some(Le):ct.none()},us=(W,me)=>{const ve=W.dom,it=bt(W)?ct.some(dr(W.selection,me)):ct.none(),pn=me.bind(Go=>ct.from(ve.getAttrib(Go,"href"))),vs=me.bind(Go=>ct.from(ve.getAttrib(Go,"target"))),Mr=me.bind(Go=>xn(ve,Go,"rel")),Do=me.bind(Go=>xn(ve,Go,"class")),Nr=me.bind(Go=>xn(ve,Go,"title"));return{url:pn,text:it,title:Nr,target:vs,rel:Mr,linkClass:Do}},Da={collect:(W,me)=>nt.getLinks(W).then(ve=>{const Le=us(W,me);return{anchor:Le,catalogs:{targets:Sn.getTargets(W),rels:Xt.getRels(W,Le.target),classes:re.getClasses(W),anchor:be.getAnchors(W),link:ve},optNode:me,flags:{titleEnabled:Se(W)}}})},Va=(W,me)=>ve=>{const Le=ve.getData();if(!Le.url.value){Oa(W),ve.close();return}const it=Mr=>ct.from(Le[Mr]).filter(Do=>!Uo(me.anchor[Mr],Do)),pn={href:Le.url.value,text:it("text"),target:it("target"),rel:it("rel"),class:it("linkClass"),title:it("title")},vs={href:Le.url.value,attach:Le.url.meta!==void 0&&Le.url.meta.attach?Le.url.meta.attach:Xn};jn.preprocess(W,pn).then(Mr=>{Jr(W,vs,Mr)}),ve.close()},cc=W=>{const me=Xo(W);return Da.collect(W,me)},Rn=(W,me)=>{const ve=W.anchor,Le=ve.url.getOr("");return{url:{value:Le,meta:{original:{value:Le}}},text:ve.text.getOr(""),title:ve.title.getOr(""),anchor:Le,link:Le,rel:ve.rel.getOr(""),target:ve.target.or(me).getOr(""),linkClass:ve.linkClass.getOr("")}},jo=(W,me,ve)=>{const Le=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],it=W.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),pn=W.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],vs=ct.from(qe(ve)),Mr=Rn(W,vs),Do=W.catalogs,Nr=Ie.init(Mr,Do);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Pt([Le,it,pn,Ln([Do.anchor.map(Ge.createUi("anchor","Anchors")),Do.rels.map(Ge.createUi("rel","Rel")),Do.targets.map(Ge.createUi("target","Open link in...")),Do.link.map(Ge.createUi("link","Link list")),Do.classes.map(Ge.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Mr,onChange:(rr,{name:Bc})=>{Nr.onChange(rr.getData,{name:Bc}).each(wc=>{rr.setData(wc)})},onSubmit:me}},ds=W=>{cc(W).then(ve=>{const Le=Va(W,ve);return jo(ve,Le,W)}).then(ve=>{W.windowManager.open(ve)})},Lr=W=>{W.addCommand("mceLink",(me,ve)=>{(ve==null?void 0:ve.dialog)===!0||!H(W)?ds(W):W.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var jr=tinymce.util.Tools.resolve("tinymce.util.VK");const Rr=(W,me)=>{document.body.appendChild(W),W.dispatchEvent(me),document.body.removeChild(W)},Ls=W=>{const me=document.createElement("a");me.target="_blank",me.href=W,me.rel="noreferrer noopener";const ve=document.createEvent("MouseEvents");ve.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Rr(me,ve)},Ql=(W,me)=>W.dom.getParent(me,"a[href]"),Wi=W=>Ql(W,W.selection.getStart()),ms=W=>W.altKey===!0&&W.shiftKey===!1&&W.ctrlKey===!1&&W.metaKey===!1,va=(W,me)=>{if(me){const ve=ts(me);if(/^#/.test(ve)){const Le=W.dom.select(ve);Le.length&&W.selection.scrollIntoView(Le[0],!0)}else Ls(me.href)}},Ra=W=>()=>{W.execCommand("mceLink",!1,{dialog:!0})},fr=W=>()=>{va(W,Wi(W))},Zi=W=>{W.on("click",me=>{const ve=Ql(W,me.target);ve&&jr.metaKeyPressed(me)&&(me.preventDefault(),va(W,ve))}),W.on("keydown",me=>{if(!me.isDefaultPrevented()&&me.keyCode===13&&ms(me)){const ve=Wi(W);ve&&(me.preventDefault(),va(W,ve))}})},ic=(W,me)=>(W.on("NodeChange",me),()=>W.off("NodeChange",me)),ya=W=>me=>{const ve=()=>me.setActive(!W.mode.isReadOnly()&&Ds(W,W.selection.getNode()));return ve(),ic(W,ve)},Cc=W=>(W.selection.isCollapsed()?mr(W.dom.getParents(W.selection.getStart())):aa(W.selection.getRng())).length===1,al=W=>me=>{const ve=()=>me.setEnabled(Cc(W));return ve(),ic(W,ve)},li=W=>me=>{const ve=it=>Rs(it)||Or(W.selection.getRng()),Le=W.dom.getParents(W.selection.getStart());return me.setEnabled(ve(Le)),ic(W,it=>me.setEnabled(ve(it.parents)))},cl=W=>{W.addShortcut("Meta+K","",()=>{W.execCommand("mceLink")})},Ma=W=>{W.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ra(W),onSetup:ya(W)}),W.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:fr(W),onSetup:al(W)}),W.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Oa(W),onSetup:li(W)})},Nc=W=>{W.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:fr(W),onSetup:al(W)}),W.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Ra(W)}),W.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Oa(W),onSetup:li(W)})},ji=W=>{const me="link unlink openlink",ve="link";W.ui.registry.addContextMenu("link",{update:Le=>W.dom.isEditable(Le)?Rs(W.dom.getParents(Le,"a"))?me:ve:""})},Wc=W=>{const me=it=>{it.selection.collapse(!1)},ve=it=>{const pn=W.selection.getNode();return it.setEnabled(Ds(W,pn)),Xn},Le=it=>{const pn=Xo(W),vs=bt(W);if(pn.isNone()&&vs){const Mr=dr(W.selection,pn);return Zt(Mr.length===0,it)}else return ct.none()};W.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ya(W)},label:"Link",predicate:it=>ko(W)&&Ds(W,it),initValue:()=>Xo(W).fold(mt(""),ts),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:it=>{const pn=W.selection.getNode();return it.setActive(Ds(W,pn)),ya(W)(it)},onAction:it=>{const pn=it.getValue(),vs=Le(pn);Jr(W,{href:pn,attach:Xn},{href:pn,text:vs,title:ct.none(),rel:ct.none(),target:ct.none(),class:ct.none()}),me(W),it.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ve,onAction:it=>{Oa(W),it.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ve,onAction:it=>{fr(W)(),it.hide()}}]})};var Gi=()=>{Ht.add("link",W=>{Co(W),Ma(W),Nc(W),ji(W),Wc(W),Zi(W),Lr(W),cl(W)})};Gi()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=(k,M,z)=>{var fe;return z(k,M.prototype)?!0:((fe=k.constructor)===null||fe===void 0?void 0:fe.name)===M.name},In=k=>{const M=typeof k;return k===null?"null":M==="object"&&Array.isArray(k)?"array":M==="object"&&Qn(k,String,(z,fe)=>fe.isPrototypeOf(z))?"string":M},Mn=k=>M=>In(M)===k,Yn=k=>M=>typeof M===k,Wn=Mn("string"),oo=Mn("object"),Vt=Mn("array"),Wt=Yn("boolean"),Lt=k=>k==null,Oo=k=>!Lt(k),Yo=Yn("function"),ho=Yn("number"),_n=()=>{},So=k=>()=>k,Xn=(k,M)=>k===M,mt=k=>M=>!k(M),Nn=So(!1);class ct{constructor(M,z){this.tag=M,this.value=z}static some(M){return new ct(!0,M)}static none(){return ct.singletonNone}fold(M,z){return this.tag?z(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?ct.some(M(this.value)):ct.none()}bind(M){return this.tag?M(this.value):ct.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:ct.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M??"Called getOrDie on None")}static from(M){return Oo(M)?ct.some(M):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const K=Array.prototype.slice,ot=Array.prototype.indexOf,zt=Array.prototype.push,ut=(k,M)=>ot.call(k,M),G=(k,M)=>ut(k,M)>-1,ht=(k,M)=>{for(let z=0,fe=k.length;z<fe;z++){const ge=k[z];if(M(ge,z))return!0}return!1},Vn=(k,M)=>{const z=k.length,fe=new Array(z);for(let ge=0;ge<z;ge++){const Et=k[ge];fe[ge]=M(Et,ge)}return fe},Pt=(k,M)=>{for(let z=0,fe=k.length;z<fe;z++){const ge=k[z];M(ge,z)}},Ze=(k,M)=>{const z=[];for(let fe=0,ge=k.length;fe<ge;fe++){const Et=k[fe];M(Et,fe)&&z.push(Et)}return z},he=(k,M)=>{if(k.length===0)return[];{let z=M(k[0]);const fe=[];let ge=[];for(let Et=0,En=k.length;Et<En;Et++){const Zn=k[Et],To=M(Zn);To!==z&&(fe.push(ge),ge=[]),z=To,ge.push(Zn)}return ge.length!==0&&fe.push(ge),fe}},Uo=(k,M,z)=>(Pt(k,(fe,ge)=>{z=M(z,fe,ge)}),z),Ln=(k,M,z)=>{for(let fe=0,ge=k.length;fe<ge;fe++){const Et=k[fe];if(M(Et,fe))return ct.some(Et);if(z(Et,fe))break}return ct.none()},Zt=(k,M)=>Ln(k,M,Nn),A=k=>{const M=[];for(let z=0,fe=k.length;z<fe;++z){if(!Vt(k[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+k);zt.apply(M,k[z])}return M},Co=(k,M)=>A(Vn(k,M)),rt=k=>{const M=K.call(k,0);return M.reverse(),M},ko=(k,M)=>M>=0&&M<k.length?ct.some(k[M]):ct.none(),on=k=>ko(k,0),qe=k=>ko(k,k.length-1),po=(k,M)=>{const z=[],fe=Yo(M)?ge=>ht(z,Et=>M(Et,ge)):ge=>G(z,ge);for(let ge=0,Et=k.length;ge<Et;ge++){const En=k[ge];fe(En)||z.push(En)}return z},os=(k,M,z=Xn)=>k.exists(fe=>z(fe,M)),pt=(k,M,z=Xn)=>un(k,M,z).getOr(k.isNone()&&M.isNone()),un=(k,M,z)=>k.isSome()&&M.isSome()?ct.some(z(k.getOrDie(),M.getOrDie())):ct.none(),Se=1,Qe=(k,M)=>{const fe=(M||document).createElement("div");if(fe.innerHTML=k,!fe.hasChildNodes()||fe.childNodes.length>1){const ge="HTML does not have a single root node";throw console.error(ge,k),new Error(ge)}return Dn(fe.childNodes[0])},H=(k,M)=>{const fe=(M||document).createElement(k);return Dn(fe)},ps=(k,M)=>{const fe=(M||document).createTextNode(k);return Dn(fe)},Dn=k=>{if(k==null)throw new Error("Node cannot be null or undefined");return{dom:k}},An={fromHtml:Qe,fromTag:H,fromText:ps,fromDom:Dn,fromPoint:(k,M,z)=>ct.from(k.dom.elementFromPoint(M,z)).map(Dn)},Ys=(k,M)=>{const z=k.dom;if(z.nodeType!==Se)return!1;{const fe=z;if(fe.matches!==void 0)return fe.matches(M);if(fe.msMatchesSelector!==void 0)return fe.msMatchesSelector(M);if(fe.webkitMatchesSelector!==void 0)return fe.webkitMatchesSelector(M);if(fe.mozMatchesSelector!==void 0)return fe.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},Ue=(k,M)=>k.dom===M.dom,wt=(k,M)=>{const z=k.dom,fe=M.dom;return z===fe?!1:z.contains(fe)},Ge=Ys;var xe=(k,M,z,fe,ge)=>k(z,fe)?ct.some(z):Yo(ge)&&ge(z)?ct.none():M(z,fe,ge);typeof window<"u"||Function("return this;")();const Io=k=>k.dom.nodeName.toLowerCase(),eo=k=>k.dom.nodeType,Tr=(k=>M=>eo(M)===k)(Se),$n=k=>M=>Tr(M)&&Io(M)===k,ur=k=>ct.from(k.dom.parentNode).map(An.fromDom),Wo=k=>ct.from(k.dom.parentElement).map(An.fromDom),Fs=k=>ct.from(k.dom.nextSibling).map(An.fromDom),ba=k=>Vn(k.dom.childNodes,An.fromDom),Ir=(k,M)=>{const z=k.dom.childNodes;return ct.from(z[M]).map(An.fromDom)},Ss=k=>Ir(k,0),is=k=>Ir(k,k.dom.childNodes.length-1),Uc=(k,M,z)=>{let fe=k.dom;const ge=Yo(z)?z:Nn;for(;fe.parentNode;){fe=fe.parentNode;const Et=An.fromDom(fe);if(M(Et))return ct.some(Et);if(ge(Et))break}return ct.none()},ts=(k,M,z)=>xe((ge,Et)=>Et(ge),Uc,k,M,z),ls=(k,M)=>{ur(k).each(fe=>{fe.dom.insertBefore(M.dom,k.dom)})},ss=(k,M)=>{Fs(k).fold(()=>{ur(k).each(ge=>{Xo(ge,M)})},fe=>{ls(fe,M)})},Xo=(k,M)=>{k.dom.appendChild(M.dom)},Ds=(k,M)=>{Pt(M,z=>{ls(k,z)})},dr=(k,M)=>{Pt(M,z=>{Xo(k,z)})},aa=k=>{k.dom.textContent="",Pt(ba(k),M=>{mr(M)})},mr=k=>{const M=k.dom;M.parentNode!==null&&M.parentNode.removeChild(M)};var Rs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Or=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),bt=tinymce.util.Tools.resolve("tinymce.util.VK");const io=k=>Vn(k,An.fromDom),ca=Object.keys,sr=(k,M)=>{const z=ca(k);for(let fe=0,ge=z.length;fe<ge;fe++){const Et=z[fe],En=k[Et];M(En,Et)}},ac=k=>(M,z)=>{k[z]=M},Aa=(k,M,z,fe)=>{sr(k,(ge,Et)=>{(M(ge,Et)?z:fe)(ge,Et)})},rs=(k,M)=>{const z={};return Aa(k,M,ac(z),_n),z},La=(k,M,z)=>{if(Wn(z)||Wt(z)||ho(z))k.setAttribute(M,z+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",z,":: Element ",k),new Error("Attribute value was not simple")},Dr=(k,M)=>{const z=k.dom;sr(M,(fe,ge)=>{La(z,ge,fe)})},Jo=k=>Uo(k.dom.attributes,(M,z)=>(M[z.name]=z.value,M),{}),hn=(k,M)=>An.fromDom(k.dom.cloneNode(M)),Er=k=>hn(k,!0),Jr=(k,M)=>{const z=An.fromTag(M),fe=Jo(k);return Dr(z,fe),z},Oa=(k,M)=>{const z=Jr(k,M);ss(k,z);const fe=ba(k);return dr(z,fe),mr(k),z};var Ha=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Is=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ws=k=>M=>Oo(M)&&M.nodeName.toLowerCase()===k,bs=k=>M=>Oo(M)&&k.test(M.nodeName),wr=k=>Oo(k)&&k.nodeType===3,de=k=>Oo(k)&&k.nodeType===1,se=bs(/^(OL|UL|DL)$/),Ie=bs(/^(OL|UL)$/),Ne=Ws("ol"),Yt=bs(/^(LI|DT|DD)$/),fn=bs(/^(DT|DD)$/),so=bs(/^(TH|TD)$/),Qo=Ws("br"),jn=k=>{var M;return((M=k.parentNode)===null||M===void 0?void 0:M.firstChild)===k},uo=(k,M)=>Oo(M)&&M.nodeName in k.schema.getTextBlockElements(),be=(k,M)=>Oo(k)&&k.nodeName in M,Zo=(k,M)=>Oo(M)&&M.nodeName in k.schema.getVoidElements(),re=(k,M)=>Qo(M)?k.isBlock(M.nextSibling)&&!Qo(M.previousSibling):!1,ce=(k,M,z)=>{const fe=k.isEmpty(M);return z&&k.select("span[data-mce-type=bookmark]",M).length>0?!1:fe},tt=(k,M)=>k.isChildOf(M,k.getRoot()),nt=k=>M=>M.options.get(k),At=k=>{const M=k.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},Xt=nt("lists_indent_on_tab"),qt=nt("forced_root_block"),Qt=nt("forced_root_block_attrs"),Sn=(k,M)=>{const z=k.dom,fe=k.schema.getBlockElements(),ge=z.createFragment(),Et=qt(k),En=Qt(k);let Zn,To,St=!1;for(To=z.create(Et,En),be(M.firstChild,fe)||ge.appendChild(To);Zn=M.firstChild;){const ks=Zn.nodeName;!St&&(ks!=="SPAN"||Zn.getAttribute("data-mce-type")!=="bookmark")&&(St=!0),be(Zn,fe)?(ge.appendChild(Zn),To=null):(To||(To=z.create(Et,En),ge.appendChild(To)),To.appendChild(Zn))}return!St&&To&&To.appendChild(z.create("br",{"data-mce-bogus":"1"})),ge},xn=Ha.DOM,us=(k,M,z)=>{const fe=St=>{const ks=St.parentNode;ks&&Is.each(ge,Na=>{ks.insertBefore(Na,z.parentNode)}),xn.remove(St)},ge=xn.select('span[data-mce-type="bookmark"]',M),Et=Sn(k,z),En=xn.createRng();En.setStartAfter(z),En.setEndAfter(M);const Zn=En.extractContents();for(let St=Zn.firstChild;St;St=St.firstChild)if(St.nodeName==="LI"&&k.dom.isEmpty(St)){xn.remove(St);break}k.dom.isEmpty(Zn)||xn.insertAfter(Zn,M),xn.insertAfter(Et,M);const To=z.parentElement;To&&ce(k.dom,To)&&fe(To),xn.remove(z),ce(k.dom,M)&&xn.remove(M)},Ms=$n("dd"),Da=$n("dt"),Va=(k,M)=>{Ms(M)?Oa(M,"dt"):Da(M)&&Wo(M).each(z=>us(k,z.dom,M.dom))},cc=k=>{Da(k)&&Oa(k,"dd")},Rn=(k,M,z)=>{M==="Indent"?Pt(z,cc):Pt(z,fe=>Va(k,fe))},jo=(k,M)=>{if(wr(k))return{container:k,offset:M};const z=Rs.getNode(k,M);return wr(z)?{container:z,offset:M>=k.childNodes.length?z.data.length:0}:z.previousSibling&&wr(z.previousSibling)?{container:z.previousSibling,offset:z.previousSibling.data.length}:z.nextSibling&&wr(z.nextSibling)?{container:z.nextSibling,offset:0}:{container:k,offset:M}},ds=k=>{const M=k.cloneRange(),z=jo(k.startContainer,k.startOffset);M.setStart(z.container,z.offset);const fe=jo(k.endContainer,k.endOffset);return M.setEnd(fe.container,fe.offset),M},Lr=["OL","UL","DL"],jr=Lr.join(","),Rr=(k,M)=>{const z=M||k.selection.getStart(!0);return k.dom.getParent(z,jr,ic(k,z))},Ls=(k,M)=>Oo(k)&&M.length===1&&M[0]===k,Ql=k=>Ze(k.querySelectorAll(jr),se),Wi=k=>{const M=Rr(k),z=k.selection.getSelectedBlocks();return Ls(M,z)?Ql(M):Ze(z,fe=>se(fe)&&M!==fe)},ms=(k,M)=>{const z=Is.map(M,fe=>{const ge=k.dom.getParent(fe,"li,dd,dt",ic(k,fe));return ge||fe});return po(z)},va=k=>{const M=k.selection.getSelectedBlocks();return Ze(ms(k,M),Yt)},Ra=k=>Ze(va(k),fn),fr=(k,M)=>{const z=k.dom.getParents(M,"TD,TH");return z.length>0?z[0]:k.getBody()},Zi=(k,M)=>!se(M)&&!Yt(M)&&ht(Lr,z=>k.isValidChild(M.nodeName,z)),ic=(k,M)=>{const z=k.dom.getParents(M,k.dom.isBlock);return Zt(z,ge=>Zi(k.schema,ge)).getOr(k.getBody())},ya=(k,M)=>{const z=k.dom.getParents(M,"ol,ul",ic(k,M));return qe(z)},Cc=k=>{const M=ya(k,k.selection.getStart()),z=Ze(k.selection.getSelectedBlocks(),Ie);return M.toArray().concat(z)},al=k=>{const M=Cc(k);return li(k,M)},li=(k,M)=>{const z=Vn(M,fe=>ya(k,fe).getOr(fe));return po(z)},cl=k=>/\btox\-/.test(k.className),Ma=(k,M)=>Ln(k,se,so).exists(z=>z.nodeName===M&&!cl(z)),Nc=(k,M)=>M!==null&&!k.dom.isEditable(M),ji=k=>{const M=Rr(k);return Nc(k,M)},Wc=(k,M)=>{const z=k.dom.getParent(M,"ol,ul,dl");return Nc(k,z)},Gi=k=>ht(k.selection.getSelectedBlocks(),mt(k.dom.isEditable)),W=(k,M)=>{const z=k.selection.getNode();return M({parents:k.dom.getParents(z),element:z}),k.on("NodeChange",M),()=>k.off("NodeChange",M)},me=(k,M)=>{const fe=(M||document).createDocumentFragment();return Pt(k,ge=>{fe.appendChild(ge.dom)}),An.fromDom(fe)},ve=(k,M,z)=>k.dispatch("ListMutation",{action:M,element:z}),it=(k=>M=>M.replace(k,""))(/^\s+|\s+$/g),pn=k=>k.length>0,vs=k=>!pn(k),Mr=k=>k.style!==void 0&&Yo(k.style.getPropertyValue),Do=(k,M,z)=>{if(!Wn(z))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",z,":: Element ",k),new Error("CSS value must be a string: "+z);Mr(k)&&k.style.setProperty(M,z)},Nr=(k,M,z)=>{const fe=k.dom;Do(fe,M,z)},Go=(k,M)=>{Xo(k.item,M.list)},rr=k=>{for(let M=1;M<k.length;M++)Go(k[M-1],k[M])},Bc=(k,M)=>{un(qe(k),on(M),Go)},wc=(k,M)=>{const z={list:An.fromTag(M,k),item:An.fromTag("li",k)};return Xo(z.list,z.item),z},zn=(k,M,z)=>{const fe=[];for(let ge=0;ge<z;ge++)fe.push(wc(k,M.listType));return fe},es=(k,M)=>{for(let z=0;z<k.length-1;z++)Nr(k[z].item,"list-style-type","none");qe(k).each(z=>{Dr(z.list,M.listAttributes),Dr(z.item,M.itemAttributes),dr(z.item,M.content)})},Qr=(k,M)=>{Io(k.list)!==M.listType&&(k.list=Oa(k.list,M.listType)),Dr(k.list,M.listAttributes)},P=(k,M,z)=>{const fe=An.fromTag("li",k);return Dr(fe,M),dr(fe,z),fe},q=(k,M)=>{Xo(k.list,M),k.item=M},ne=(k,M,z)=>{const fe=M.slice(0,z.depth);return qe(fe).each(ge=>{const Et=P(k,z.itemAttributes,z.content);q(ge,Et),Qr(ge,z)}),fe},Be=(k,M,z)=>{const fe=zn(k,z,z.depth-M.length);return rr(fe),es(fe,z),Bc(M,fe),M.concat(fe)},Mt=(k,M)=>{const z=Uo(M,(fe,ge)=>ge.depth>fe.length?Be(k,fe,ge):ne(k,fe,ge),[]);return on(z).map(fe=>fe.list)},to=k=>Ge(k,"OL,UL"),Kt=k=>Ss(k).exists(to),Hr=k=>is(k).exists(to),ea=k=>k.depth>0,et=k=>k.isSelected,Vr=k=>{const M=ba(k),z=Hr(k)?M.slice(0,-1):M;return Vn(z,Er)},gr=(k,M,z)=>ur(k).filter(Tr).map(fe=>({depth:M,dirty:!1,isSelected:z,content:Vr(k),itemAttributes:Jo(k),listAttributes:Jo(fe),listType:Io(fe)})),ta=(k,M)=>{switch(k){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},sd=(k,M)=>{k.listType=M.listType,k.listAttributes={...M.listAttributes}},xo=k=>{k.listAttributes=rs(k.listAttributes,(M,z)=>z!=="start")},Y=(k,M)=>{const z=k[M].depth,fe=Et=>Et.depth===z&&!Et.dirty,ge=Et=>Et.depth<z;return Ln(rt(k.slice(0,M)),fe,ge).orThunk(()=>Ln(k.slice(M+1),fe,ge))},oe=k=>(Pt(k,(M,z)=>{Y(k,z).fold(()=>{M.dirty&&xo(M)},fe=>sd(M,fe))}),k),ke=k=>{let M=k;return{get:()=>M,set:ge=>{M=ge}}},ze=(k,M,z,fe)=>Ss(fe).filter(to).fold(()=>{M.each(En=>{Ue(En.start,fe)&&z.set(!0)});const ge=gr(fe,k,z.get());M.each(En=>{Ue(En.end,fe)&&z.set(!1)});const Et=is(fe).filter(to).map(En=>tn(k,M,z,En)).getOr([]);return ge.toArray().concat(Et)},ge=>tn(k,M,z,ge)),tn=(k,M,z,fe)=>Co(ba(fe),ge=>{const Et=to(ge)?tn:ze,En=k+1;return Et(En,M,z,ge)}),Lo=(k,M)=>{const z=ke(!1),fe=0;return Vn(k,ge=>({sourceList:ge,entries:tn(fe,M,z,ge)}))},Xs=(k,M)=>{const z=oe(M);return Vn(z,fe=>{const ge=me(fe.content);return An.fromDom(Sn(k,ge.dom))})},_o=(k,M)=>{const z=oe(M);return Mt(k.contentDocument,z).toArray()},Zs=(k,M)=>Co(he(M,ea),z=>on(z).exists(ea)?_o(k,z):Xs(k,z)),Ca=(k,M)=>{Pt(Ze(k,et),z=>ta(M,z))},Ns=k=>{const M=Vn(va(k),An.fromDom);return un(Zt(M,mt(Kt)),Zt(rt(M),mt(Kt)),(z,fe)=>({start:z,end:fe}))},Sc=(k,M,z)=>{const fe=Lo(M,Ns(k));Pt(fe,ge=>{Ca(ge.entries,z);const Et=Zs(k,ge.entries);Pt(Et,En=>{ve(k,z==="Indent"?"IndentList":"OutdentList",En.dom)}),Ds(ge.sourceList,Et),mr(ge.sourceList)})},Zc=(k,M)=>{const z=io(al(k)),fe=io(Ra(k));let ge=!1;if(z.length||fe.length){const Et=k.selection.getBookmark();Sc(k,z,M),Rn(k,M,fe),k.selection.moveToBookmark(Et),k.selection.setRng(ds(k.selection.getRng())),k.nodeChanged(),ge=!0}return ge},As=(k,M)=>!ji(k)&&Zc(k,M),wa=k=>As(k,"Indent"),hr=k=>As(k,"Outdent"),ki=k=>As(k,"Flatten"),Tl="\uFEFF",Hs=k=>k===Tl;var xc=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const _i=Ha.DOM,rd=k=>{const M={},z=fe=>{let ge=k[fe?"startContainer":"endContainer"],Et=k[fe?"startOffset":"endOffset"];if(de(ge)){const En=_i.create("span",{"data-mce-type":"bookmark"});ge.hasChildNodes()?(Et=Math.min(Et,ge.childNodes.length-1),fe?ge.insertBefore(En,ge.childNodes[Et]):_i.insertAfter(En,ge.childNodes[Et])):ge.appendChild(En),ge=En,Et=0}M[fe?"startContainer":"endContainer"]=ge,M[fe?"startOffset":"endOffset"]=Et};return z(!0),k.collapsed||z(),M},il=k=>{const M=fe=>{const ge=Zn=>{var To;let St=(To=Zn.parentNode)===null||To===void 0?void 0:To.firstChild,ks=0;for(;St;){if(St===Zn)return ks;(!de(St)||St.getAttribute("data-mce-type")!=="bookmark")&&ks++,St=St.nextSibling}return-1};let Et=k[fe?"startContainer":"endContainer"],En=k[fe?"startOffset":"endOffset"];if(Et){if(de(Et)&&Et.parentNode){const Zn=Et;En=ge(Et),Et=Et.parentNode,_i.remove(Zn),!Et.hasChildNodes()&&_i.isBlock(Et)&&Et.appendChild(_i.create("br"))}k[fe?"startContainer":"endContainer"]=Et,k[fe?"startOffset":"endOffset"]=En}};M(!0),M();const z=_i.createRng();return z.setStart(k.startContainer,k.startOffset),k.endContainer&&z.setEnd(k.endContainer,k.endOffset),ds(z)},Qc=k=>{switch(k){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Gr=(k,M,z)=>{const fe=z["list-style-type"]?z["list-style-type"]:null;k.setStyle(M,"list-style-type",fe)},lc=(k,M)=>{Is.each(M,(z,fe)=>{k.setAttribute(fe,z)})},Pc=(k,M,z)=>{lc(M,z["list-attributes"]),Is.each(k.select("li",M),fe=>{lc(fe,z["list-item-attributes"])})},ei=(k,M,z)=>{Gr(k,M,z),Pc(k,M,z)},Xa=(k,M,z)=>{Is.each(z,fe=>k.setStyle(M,fe,""))},Br=(k,M)=>Oo(M)&&!be(M,k.schema.getBlockElements()),jc=(k,M,z,fe)=>{let ge=M[z?"startContainer":"endContainer"];const Et=M[z?"startOffset":"endOffset"];de(ge)&&(ge=ge.childNodes[Math.min(Et,ge.childNodes.length-1)]||ge),!z&&Qo(ge.nextSibling)&&(ge=ge.nextSibling);const En=(Zn,To)=>{var St;const ks=new Or(Zn,fe),Na=To?"next":"prev";let mi;for(;mi=ks[Na]();)if(!(Zo(k,mi)||Hs(mi.textContent)||((St=mi.textContent)===null||St===void 0?void 0:St.length)===0))return ct.some(mi);return ct.none()};if(z&&wr(ge))if(Hs(ge.textContent))ge=En(ge,!1).getOr(ge);else for(ge.parentNode!==null&&Br(k,ge.parentNode)&&(ge=ge.parentNode);ge.previousSibling!==null&&(Br(k,ge.previousSibling)||wr(ge.previousSibling));)ge=ge.previousSibling;if(!z&&wr(ge))if(Hs(ge.textContent))ge=En(ge,!0).getOr(ge);else for(ge.parentNode!==null&&Br(k,ge.parentNode)&&(ge=ge.parentNode);ge.nextSibling!==null&&(Br(k,ge.nextSibling)||wr(ge.nextSibling));)ge=ge.nextSibling;for(;ge.parentNode!==fe;){const Zn=ge.parentNode;if(uo(k,ge)||/^(TD|TH)$/.test(Zn.nodeName))return ge;ge=Zn}return ge},nm=(k,M,z)=>{const fe=[],ge=k.dom,Et=jc(k,M,!0,z),En=jc(k,M,!1,z);let Zn;const To=[];for(let St=Et;St&&(To.push(St),St!==En);St=St.nextSibling);return Is.each(To,St=>{var ks;if(uo(k,St)){fe.push(St),Zn=null;return}if(ge.isBlock(St)||Qo(St)){Qo(St)&&ge.remove(St),Zn=null;return}const Na=St.nextSibling;if(xc.isBookmarkNode(St)&&(se(Na)||uo(k,Na)||!Na&&St.parentNode===z)){Zn=null;return}Zn||(Zn=ge.create("p"),(ks=St.parentNode)===null||ks===void 0||ks.insertBefore(Zn,St),fe.push(Zn)),Zn.appendChild(St)}),fe},eu=(k,M,z)=>{const fe=k.getStyle(M,"list-style-type");let ge=z?z["list-style-type"]:"";return ge=ge===null?"":ge,fe===ge},tu=(k,M,z)=>{const fe=k.selection.getRng();let ge="LI";const Et=ic(k,k.selection.getStart(!0)),En=k.dom;if(En.getContentEditable(k.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&(ge="DT");const Zn=rd(fe),To=nm(k,fe,Et);Is.each(To,St=>{let ks;const Na=St.previousSibling,mi=St.parentNode;Yt(mi)||(Na&&se(Na)&&Na.nodeName===M&&eu(En,Na,z)?(ks=Na,St=En.rename(St,ge),Na.appendChild(St)):(ks=En.create(M),mi.insertBefore(ks,St),ks.appendChild(St),St=En.rename(St,ge)),Xa(En,St,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ei(En,ks,z),zr(k.dom,ks))}),k.selection.setRng(il(Zn))},Gm=(k,M)=>se(k)&&k.nodeName===(M==null?void 0:M.nodeName),ui=(k,M,z)=>{const fe=k.getStyle(M,"list-style-type",!0),ge=k.getStyle(z,"list-style-type",!0);return fe===ge},nu=(k,M)=>k.className===M.className,ad=(k,M,z)=>Gm(M,z)&&ui(k,M,z)&&nu(M,z),zr=(k,M)=>{let z,fe=M.nextSibling;if(ad(k,M,fe)){const ge=fe;for(;z=ge.firstChild;)M.appendChild(z);k.remove(ge)}if(fe=M.previousSibling,ad(k,M,fe)){const ge=fe;for(;z=ge.lastChild;)M.insertBefore(z,M.firstChild);k.remove(ge)}},om=(k,M,z,fe)=>{if(M.nodeName!==z){const ge=k.dom.rename(M,z);ei(k.dom,ge,fe),ve(k,Qc(z),ge)}else ei(k.dom,M,fe),ve(k,Qc(z),M)},Au=(k,M,z,fe,ge)=>{const Et=se(M);if(Et&&M.nodeName===fe&&!Ou(ge))ki(k);else{tu(k,fe,ge);const En=rd(k.selection.getRng()),Zn=Et?[M,...z]:z;Is.each(Zn,To=>{om(k,To,fe,ge)}),k.selection.setRng(il(En))}},Ou=k=>"list-style-type"in k,cd=(k,M,z,fe)=>{if(M!==k.getBody())if(M)if(M.nodeName===z&&!Ou(fe)&&!cl(M))ki(k);else{const ge=rd(k.selection.getRng());ei(k.dom,M,fe);const Et=k.dom.rename(M,z);zr(k.dom,Et),k.selection.setRng(il(ge)),tu(k,z,fe),ve(k,Qc(z),Et)}else tu(k,z,fe),ve(k,Qc(z),M)},id=(k,M,z)=>{const fe=Rr(k);if(Wc(k,fe)||Gi(k))return;const ge=Wi(k),Et=oo(z)?z:{};ge.length>0?Au(k,fe,ge,M,Et):cd(k,fe,M,Et)},ld=Ha.DOM,Du=(k,M)=>{const z=M.parentElement;if(z&&z.nodeName==="LI"&&z.firstChild===M){const fe=z.previousSibling;fe&&fe.nodeName==="LI"?(fe.appendChild(M),ce(k,z)&&ld.remove(z)):ld.setStyle(z,"listStyleType","none")}if(se(z)){const fe=z.previousSibling;fe&&fe.nodeName==="LI"&&fe.appendChild(M)}},qm=(k,M)=>{const z=Is.grep(k.select("ol,ul",M));Is.each(z,fe=>{Du(k,fe)})},Km=(k,M,z,fe)=>{let ge=M.startContainer;const Et=M.startOffset;if(wr(ge)&&(z?Et<ge.data.length:Et>0))return ge;const En=k.schema.getNonEmptyElements();de(ge)&&(ge=Rs.getNode(ge,Et));const Zn=new Or(ge,fe);z&&re(k.dom,ge)&&Zn.next();const To=z?Zn.next.bind(Zn):Zn.prev2.bind(Zn);for(;ge=To();)if(ge.nodeName==="LI"&&!ge.hasChildNodes()||En[ge.nodeName]||wr(ge)&&ge.data.length>0)return ge;return null},ou=(k,M)=>{const z=M.childNodes;return z.length===1&&!se(z[0])&&k.isBlock(z[0])},vp=(k,M)=>{ou(k,M)&&k.remove(M.firstChild,!0)},ae=(k,M,z)=>{let fe;const ge=ou(k,z)?z.firstChild:z;if(vp(k,M),!ce(k,M,!0))for(;fe=M.firstChild;)ge.appendChild(fe)},ud=(k,M,z)=>{let fe;const ge=M.parentNode;if(!tt(k,M)||!tt(k,z))return;se(z.lastChild)&&(fe=z.lastChild),ge===z.lastChild&&Qo(ge.previousSibling)&&k.remove(ge.previousSibling);const Et=z.lastChild;Et&&Qo(Et)&&M.hasChildNodes()&&k.remove(Et),ce(k,z,!0)&&aa(An.fromDom(z)),ae(k,M,z),fe&&z.appendChild(fe);const Zn=wt(An.fromDom(z),An.fromDom(M))?k.getParents(M,se,z):[];k.remove(M),Pt(Zn,To=>{ce(k,To)&&To!==k.getRoot()&&k.remove(To)})},$c=(k,M,z)=>{aa(An.fromDom(z)),ud(k.dom,M,z),k.selection.setCursorLocation(z,0)},Zf=(k,M,z,fe)=>{const ge=k.dom;if(ge.isEmpty(fe))$c(k,z,fe);else{const Et=rd(M);ud(ge,z,fe),k.selection.setRng(il(Et))}},yp=(k,M,z,fe)=>{const ge=rd(M);ud(k.dom,z,fe);const Et=il(ge);k.selection.setRng(Et)},Cp=(k,M)=>{const z=k.dom,fe=k.selection,ge=fe.getStart(),Et=fr(k,ge),En=z.getParent(fe.getStart(),"LI",Et);if(En){const Zn=En.parentElement;if(Zn===k.getBody()&&ce(z,Zn))return!0;const To=ds(fe.getRng()),St=z.getParent(Km(k,To,M,Et),"LI",Et);if(St&&St!==En)return k.undoManager.transact(()=>{M?Zf(k,To,St,En):jn(En)?hr(k):yp(k,To,En,St)}),!0;if(!St&&!M&&To.startOffset===0&&To.endOffset===0)return k.undoManager.transact(()=>{ki(k)}),!0}return!1},ys=(k,M,z)=>{const fe=k.getParent(M.parentNode,k.isBlock,z);k.remove(M),fe&&k.isEmpty(fe)&&k.remove(fe)},Ai=(k,M)=>{const z=k.dom,fe=k.selection.getStart(),ge=fr(k,fe),Et=z.getParent(fe,z.isBlock,ge);if(Et&&z.isEmpty(Et)){const En=ds(k.selection.getRng()),Zn=z.getParent(Km(k,En,M,ge),"LI",ge);if(Zn){const To=mi=>G(["td","th","caption"],Io(mi)),St=mi=>mi.dom===ge,ks=ts(An.fromDom(Zn),To,St),Na=ts(An.fromDom(En.startContainer),To,St);return pt(ks,Na,Ue)?(k.undoManager.transact(()=>{ys(z,Et,ge),zr(z,Zn.parentNode),k.selection.select(Zn,!0),k.selection.collapse(M)}),!0):!1}}return!1},Tc=(k,M)=>Cp(k,M)||Ai(k,M),ti=k=>{const M=k.selection.getStart(),z=fr(k,M);return k.dom.getParent(M,"LI,DT,DD",z)||va(k).length>0},nh=k=>ti(k)?(k.undoManager.transact(()=>{k.execCommand("Delete"),qm(k.dom,k.getBody())}),!0):!1,El=(k,M)=>{const z=k.selection;return!Wc(k,z.getNode())&&(z.isCollapsed()?Tc(k,M):nh(k))},di=k=>{k.on("ExecCommand",M=>{const z=M.command.toLowerCase();(z==="delete"||z==="forwarddelete")&&ti(k)&&qm(k.dom,k.getBody())}),k.on("keydown",M=>{M.keyCode===bt.BACKSPACE?El(k,!1)&&M.preventDefault():M.keyCode===bt.DELETE&&El(k,!0)&&M.preventDefault()})},sm=k=>({backspaceDelete:M=>{El(k,M)}}),jf=(k,M)=>{const z=Rr(k);z===null||Wc(k,z)||k.undoManager.transact(()=>{oo(M.styles)&&k.dom.setStyles(z,M.styles),oo(M.attrs)&&sr(M.attrs,(fe,ge)=>k.dom.setAttrib(z,ge,fe))})},oh=k=>{const M=rt(it(k).split("")),z=Vn(M,(fe,ge)=>{const Et=fe.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,ge)*Et});return Uo(z,(fe,ge)=>fe+ge,0)},Gc=k=>{if(k--,k<0)return"";{const M=k%26,z=Math.floor(k/26),fe=Gc(z),ge=String.fromCharCode("A".charCodeAt(0)+M);return fe+ge}},dd=k=>/^[A-Z]+$/.test(k),sh=k=>/^[a-z]+$/.test(k),ni=k=>/^[0-9]+$/.test(k),za=k=>ni(k)?2:dd(k)?0:sh(k)?1:vs(k)?3:4,md=k=>{switch(za(k)){case 2:return ct.some({listStyleType:ct.none(),start:k});case 0:return ct.some({listStyleType:ct.some("upper-alpha"),start:oh(k).toString()});case 1:return ct.some({listStyleType:ct.some("lower-alpha"),start:oh(k).toString()});case 3:return ct.some({listStyleType:ct.none(),start:""});case 4:return ct.none()}},fd=k=>{const M=parseInt(k.start,10);return os(k.listStyleType,"upper-alpha")?Gc(M):os(k.listStyleType,"lower-alpha")?Gc(M).toLowerCase():k.start},Oi=k=>{const M=Rr(k);!Ne(M)||Wc(k,M)||k.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:fd({start:k.dom.getAttrib(M,"start","1"),listStyleType:ct.from(k.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:z=>{const fe=z.getData();md(fe.start).each(ge=>{k.execCommand("mceListUpdate",!1,{attrs:{start:ge.start==="1"?"":ge.start},styles:{"list-style-type":ge.listStyleType.getOr("")}})}),z.close()}})},Fc=(k,M)=>()=>{const z=Rr(k);return Oo(z)&&z.nodeName===M},Ym=k=>{k.addCommand("mceListProps",()=>{Oi(k)})},Xm=k=>{k.on("BeforeExecCommand",M=>{const z=M.command.toLowerCase();z==="indent"?wa(k):z==="outdent"&&hr(k)}),k.addCommand("InsertUnorderedList",(M,z)=>{id(k,"UL",z)}),k.addCommand("InsertOrderedList",(M,z)=>{id(k,"OL",z)}),k.addCommand("InsertDefinitionList",(M,z)=>{id(k,"DL",z)}),k.addCommand("RemoveList",()=>{ki(k)}),Ym(k),k.addCommand("mceListUpdate",(M,z)=>{oo(z)&&jf(k,z)}),k.addQueryStateHandler("InsertUnorderedList",Fc(k,"UL")),k.addQueryStateHandler("InsertOrderedList",Fc(k,"OL")),k.addQueryStateHandler("InsertDefinitionList",Fc(k,"DL"))};var Jm=tinymce.util.Tools.resolve("tinymce.html.Node");const Qm=k=>k.type===3,qi=k=>k.length===0,rm=k=>{const M=(ge,Et)=>{const En=Jm.create("li");Pt(ge,Zn=>En.append(Zn)),Et?k.insert(En,Et,!0):k.append(En)},z=(ge,Et)=>Qm(Et)?[...ge,Et]:!qi(ge)&&!Qm(Et)?(M(ge,Et),[]):ge,fe=Uo(k.children(),z,[]);qi(fe)||M(fe)},rh=k=>{k.on("PreInit",()=>{const{parser:M}=k;M.addNodeFilter("ul,ol",z=>Pt(z,rm))})},wv=k=>{k.on("keydown",M=>{M.keyCode!==bt.TAB||bt.metaKeyPressed(M)||k.undoManager.transact(()=>{(M.shiftKey?hr(k):wa(k))&&M.preventDefault()})})},ah=k=>{Xt(k)&&wv(k),di(k)},am=(k,M)=>z=>W(k,ge=>{z.setActive(Ma(ge.parents,M)),z.setEnabled(!Wc(k,ge.element))}),Gf=k=>{const M=z=>()=>k.execCommand(z);k.hasPlugin("advlist")||(k.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:am(k,"OL")}),k.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:am(k,"UL")}))},kl=(k,M)=>z=>W(k,ge=>z.setEnabled(Ma(ge.parents,M)&&!Wc(k,ge.element))),qf=k=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>k.execCommand("mceListProps"),onSetup:kl(k,"OL")};k.ui.registry.addMenuItem("listprops",M),k.ui.registry.addContextMenu("lists",{update:z=>{const fe=Rr(k,z);return Ne(fe)?["listprops"]:[]}})};var ar=()=>{Ht.add("lists",k=>(At(k),rh(k),k.hasPlugin("rtc",!0)?Ym(k):(ah(k),Xm(k)),Gf(k),qf(k),sm(k)))};ar()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=(de,se,Ie)=>{var Ne;return Ie(de,se.prototype)?!0:((Ne=de.constructor)===null||Ne===void 0?void 0:Ne.name)===se.name},In=de=>{const se=typeof de;return de===null?"null":se==="object"&&Array.isArray(de)?"array":se==="object"&&Qn(de,String,(Ie,Ne)=>Ne.isPrototypeOf(Ie))?"string":se},Mn=de=>se=>In(se)===de,Yn=Mn("string"),Wn=Mn("object"),oo=Mn("array"),Vt=de=>de==null,Wt=de=>!Vt(de);class Lt{constructor(se,Ie){this.tag=se,this.value=Ie}static some(se){return new Lt(!0,se)}static none(){return Lt.singletonNone}fold(se,Ie){return this.tag?Ie(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?Lt.some(se(this.value)):Lt.none()}bind(se){return this.tag?se(this.value):Lt.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:Lt.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Wt(se)?Lt.some(se):Lt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Lt.singletonNone=new Lt(!1);const Oo=Array.prototype.push,Yo=(de,se)=>{for(let Ie=0,Ne=de.length;Ie<Ne;Ie++){const Yt=de[Ie];se(Yt,Ie)}},ho=de=>{const se=[];for(let Ie=0,Ne=de.length;Ie<Ne;++Ie){if(!oo(de[Ie]))throw new Error("Arr.flatten item "+Ie+" was not an array, input: "+de);Oo.apply(se,de[Ie])}return se},_n=de=>{let se=de;return{get:()=>se,set:Yt=>{se=Yt}}},So=Object.keys,Xn=Object.hasOwnProperty,mt=(de,se)=>{const Ie=So(de);for(let Ne=0,Yt=Ie.length;Ne<Yt;Ne++){const fn=Ie[Ne],so=de[fn];se(so,fn)}},Nn=(de,se)=>ct(de,se)?Lt.from(de[se]):Lt.none(),ct=(de,se)=>Xn.call(de,se),K=de=>se=>se.options.get(de),ot=de=>{const se=de.options.register;se("audio_template_callback",{processor:"function"}),se("video_template_callback",{processor:"function"}),se("iframe_template_callback",{processor:"function"}),se("media_live_embeds",{processor:"boolean",default:!0}),se("media_filter_html",{processor:"boolean",default:!0}),se("media_url_resolver",{processor:"function"}),se("media_alt_source",{processor:"boolean",default:!0}),se("media_poster",{processor:"boolean",default:!0}),se("media_dimensions",{processor:"boolean",default:!0})},zt=K("audio_template_callback"),ut=K("video_template_callback"),G=K("iframe_template_callback"),ht=K("media_live_embeds"),Vn=K("media_filter_html"),Pt=K("media_url_resolver"),Ze=K("media_alt_source"),he=K("media_poster"),Uo=K("media_dimensions");var Ln=tinymce.util.Tools.resolve("tinymce.util.Tools"),Zt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Co=Zt.DOM,rt=de=>de.replace(/px$/,""),ko=de=>{const se=de.attr("style"),Ie=se?Co.parseStyle(se):{};return{type:"ephox-embed-iri",source:de.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Nn(Ie,"max-width").map(rt).getOr(""),height:Nn(Ie,"max-height").map(rt).getOr("")}},on=(de,se)=>{let Ie={};const Yt=A({validate:!1,forced_root_block:!1},se).parse(de);for(let fn=Yt;fn;fn=fn.walk())if(fn.type===1){const so=fn.name;if(fn.attr("data-ephox-embed-iri")){Ie=ko(fn);break}else!Ie.source&&so==="param"&&(Ie.source=fn.attr("movie")),(so==="iframe"||so==="object"||so==="embed"||so==="video"||so==="audio")&&(Ie.type||(Ie.type=so),Ie=Ln.extend(fn.attributes.map,Ie)),so==="script"&&(Ie={type:"script",source:fn.attr("src")}),so==="source"&&(Ie.source?Ie.altsource||(Ie.altsource=fn.attr("src")):Ie.source=fn.attr("src")),so==="img"&&!Ie.poster&&(Ie.poster=fn.attr("src"))}return Ie.source=Ie.source||Ie.src||"",Ie.altsource=Ie.altsource||"",Ie.poster=Ie.poster||"",Ie},qe=de=>{var se;const Ie={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ne=(se=de.toLowerCase().split(".").pop())!==null&&se!==void 0?se:"";return Nn(Ie,Ne).getOr("")};var po=tinymce.util.Tools.resolve("tinymce.html.Node"),os=tinymce.util.Tools.resolve("tinymce.html.Serializer");const pt=(de,se={})=>A({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...se},de),un=Zt.DOM,Se=de=>/^[0-9.]+$/.test(de)?de+"px":de,Qe=(de,se)=>{const Ie=se.attr("style"),Ne=Ie?un.parseStyle(Ie):{};Wt(de.width)&&(Ne["max-width"]=Se(de.width)),Wt(de.height)&&(Ne["max-height"]=Se(de.height)),se.attr("style",un.serializeStyle(Ne))},H=["source","altsource"],ps=(de,se,Ie,Ne)=>{let Yt=0,fn=0;const so=pt(Ne);so.addNodeFilter("source",jn=>Yt=jn.length);const Qo=so.parse(de);for(let jn=Qo;jn;jn=jn.walk())if(jn.type===1){const uo=jn.name;if(jn.attr("data-ephox-embed-iri")){Qe(se,jn);break}else{switch(uo){case"video":case"object":case"embed":case"img":case"iframe":se.height!==void 0&&se.width!==void 0&&(jn.attr("width",se.width),jn.attr("height",se.height));break}if(Ie)switch(uo){case"video":jn.attr("poster",se.poster),jn.attr("src",null);for(let Zo=Yt;Zo<2;Zo++)if(se[H[Zo]]){const re=new po("source",1);re.attr("src",se[H[Zo]]),re.attr("type",se[H[Zo]+"mime"]||null),jn.append(re)}break;case"iframe":jn.attr("src",se.source);break;case"object":const be=jn.getAll("img").length>0;if(se.poster&&!be){jn.attr("src",se.poster);const Zo=new po("img",1);Zo.attr("src",se.poster),Zo.attr("width",se.width),Zo.attr("height",se.height),jn.append(Zo)}break;case"source":if(fn<2&&(jn.attr("src",se[H[fn]]),jn.attr("type",se[H[fn]+"mime"]||null),!se[H[fn]])){jn.remove();continue}fn++;break;case"img":se.poster||jn.remove();break}}}return os({},Ne).serialize(Qo)},Dn=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],bo=de=>{const se=de.match(/^(https?:\/\/|www\.)(.+)$/i);return se&&se.length>1?se[1]==="www."?"https://":se[1]:"https://"},An=(de,se)=>{const Ie=bo(se),Ne=de.regex.exec(se);let Yt=Ie+de.url;if(Wt(Ne))for(let fn=0;fn<Ne.length;fn++)Yt=Yt.replace("$"+fn,()=>Ne[fn]?Ne[fn]:"");return Yt.replace(/\?$/,"")},Ys=de=>{const se=Dn.filter(Ie=>Ie.regex.test(de));return se.length>0?Ln.extend({},se[0],{url:An(se[0],de)}):null},Ue=(de,se)=>{if(se)return se(de);{const Ie=de.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+de.source+'" width="'+de.width+'" height="'+de.height+'"'+Ie+"></iframe>"}},wt=de=>{let se='<object data="'+de.source+'" width="'+de.width+'" height="'+de.height+'" type="application/x-shockwave-flash">';return de.poster&&(se+='<img src="'+de.poster+'" width="'+de.width+'" height="'+de.height+'" />'),se+="</object>",se},Ge=(de,se)=>se?se(de):'<audio controls="controls" src="'+de.source+'">'+(de.altsource?`
<source src="`+de.altsource+'"'+(de.altsourcemime?' type="'+de.altsourcemime+'"':"")+` />
`:"")+"</audio>",xe=(de,se)=>se?se(de):'<video width="'+de.width+'" height="'+de.height+'"'+(de.poster?' poster="'+de.poster+'"':"")+` controls="controls">
<source src="`+de.source+'"'+(de.sourcemime?' type="'+de.sourcemime+'"':"")+` />
`+(de.altsource?'<source src="'+de.altsource+'"'+(de.altsourcemime?' type="'+de.altsourcemime+'"':"")+` />
`:"")+"</video>",Io=de=>'<script src="'+de.source+'"><\/script>',eo=(de,se)=>{var Ie;const Ne=Ln.extend({},se);if(!Ne.source&&(Ln.extend(Ne,on((Ie=Ne.embed)!==null&&Ie!==void 0?Ie:"",de.schema)),!Ne.source))return"";Ne.altsource||(Ne.altsource=""),Ne.poster||(Ne.poster=""),Ne.source=de.convertURL(Ne.source,"source"),Ne.altsource=de.convertURL(Ne.altsource,"source"),Ne.sourcemime=qe(Ne.source),Ne.altsourcemime=qe(Ne.altsource),Ne.poster=de.convertURL(Ne.poster,"poster");const Yt=Ys(Ne.source);if(Yt&&(Ne.source=Yt.url,Ne.type=Yt.type,Ne.allowfullscreen=Yt.allowFullscreen,Ne.width=Ne.width||String(Yt.w),Ne.height=Ne.height||String(Yt.h)),Ne.embed)return ps(Ne.embed,Ne,!0,de.schema);{const fn=zt(de),so=ut(de),Qo=G(de);return Ne.width=Ne.width||"300",Ne.height=Ne.height||"150",Ln.each(Ne,(jn,uo)=>{Ne[uo]=de.dom.encode(""+jn)}),Ne.type==="iframe"?Ue(Ne,Qo):Ne.sourcemime==="application/x-shockwave-flash"?wt(Ne):Ne.sourcemime.indexOf("audio")!==-1?Ge(Ne,fn):Ne.type==="script"?Io(Ne):xe(Ne,so)}},Rt=de=>de.hasAttribute("data-mce-object")||de.hasAttribute("data-ephox-embed-iri"),Tr=de=>{de.on("click keyup touchend",()=>{const se=de.selection.getNode();se&&de.dom.hasClass(se,"mce-preview-object")&&de.dom.getAttrib(se,"data-mce-selected")&&se.setAttribute("data-mce-selected","2")}),de.on("ObjectSelected",se=>{se.target.getAttribute("data-mce-object")==="script"&&se.preventDefault()}),de.on("ObjectResized",se=>{const Ie=se.target;if(Ie.getAttribute("data-mce-object")){let Ne=Ie.getAttribute("data-mce-html");Ne&&(Ne=unescape(Ne),Ie.setAttribute("data-mce-html",escape(ps(Ne,{width:String(se.width),height:String(se.height)},!1,de.schema))))}})},$n={},ur=(de,se,Ie)=>new Promise((Ne,Yt)=>{const fn=so=>(so.html&&($n[de.source]=so),Ne({url:de.source,html:so.html?so.html:se(de)}));$n[de.source]?fn($n[de.source]):Ie({url:de.source},fn,Yt)}),Wo=(de,se)=>Promise.resolve({html:se(de),url:de.source}),Fs=de=>se=>eo(de,se),ba=(de,se)=>{const Ie=Pt(de);return Ie?ur(se,Fs(de),Ie):Wo(se,Fs(de))},Ir=de=>ct($n,de),Ss=(de,se)=>Nn(se,de).bind(Ie=>Nn(Ie,"meta")),is=(de,se,Ie)=>Ne=>{const Yt=()=>Nn(de,Ne),fn=()=>Nn(se,Ne),so=uo=>Nn(uo,"value").bind(be=>be.length>0?Lt.some(be):Lt.none()),Qo=()=>Yt().bind(uo=>Wn(uo)?so(uo).orThunk(fn):fn().orThunk(()=>Lt.from(uo))),jn=()=>fn().orThunk(()=>Yt().bind(uo=>Wn(uo)?so(uo):Lt.from(uo)));return{[Ne]:(Ne===Ie?Qo():jn()).getOr("")}},Uc=(de,se)=>{const Ie={};return Nn(de,"dimensions").each(Ne=>{Yo(["width","height"],Yt=>{Nn(se,Yt).orThunk(()=>Nn(Ne,Yt)).each(fn=>Ie[Yt]=fn)})}),Ie},ts=(de,se)=>{const Ie=se&&se!=="dimensions"?Ss(se,de).getOr({}):{},Ne=is(de,Ie,se);return{...Ne("source"),...Ne("altsource"),...Ne("poster"),...Ne("embed"),...Uc(de,Ie)}},ls=de=>{const se={...de,source:{value:Nn(de,"source").getOr("")},altsource:{value:Nn(de,"altsource").getOr("")},poster:{value:Nn(de,"poster").getOr("")}};return Yo(["width","height"],Ie=>{Nn(de,Ie).each(Ne=>{const Yt=se.dimensions||{};Yt[Ie]=Ne,se.dimensions=Yt})}),se},ss=de=>se=>{const Ie=se&&se.msg?"Media embed handler error: "+se.msg:"Media embed handler threw unknown error.";de.notificationManager.open({type:"error",text:Ie})},Xo=de=>{const se=de.selection.getNode(),Ie=Rt(se)?de.serializer.serialize(se,{selection:!0}):"";return{embed:Ie,...on(Ie,de.schema)}},Ds=(de,se)=>Ie=>{if(Yn(Ie.url)&&Ie.url.trim().length>0){const Ne=Ie.html,fn={...on(Ne,se.schema),source:Ie.url,embed:Ne};de.setData(ls(fn))}},dr=(de,se)=>{const Ie=de.dom.select("*[data-mce-object]");for(let Ne=0;Ne<se.length;Ne++)for(let Yt=Ie.length-1;Yt>=0;Yt--)se[Ne]===Ie[Yt]&&Ie.splice(Yt,1);de.selection.select(Ie[0])},aa=(de,se)=>{const Ie=de.dom.select("*[data-mce-object]");de.insertContent(se),dr(de,Ie),de.nodeChanged()},mr=(de,se,Ie)=>{var Ne;se.embed=ps((Ne=se.embed)!==null&&Ne!==void 0?Ne:"",se,!1,Ie.schema),se.embed&&(de.source===se.source||Ir(se.source))?aa(Ie,se.embed):ba(Ie,se).then(Yt=>{aa(Ie,Yt.html)}).catch(ss(Ie))},Rs=de=>{const se=Xo(de),Ie=_n(se),Ne=ls(se),Yt=(Xt,qt)=>{const Qt=ts(qt.getData(),"source");Xt.source!==Qt.source&&(Ds(At,de)({url:Qt.source,html:""}),ba(de,Qt).then(Ds(At,de)).catch(ss(de)))},fn=Xt=>{var qt;const Qt=ts(Xt.getData()),Sn=on((qt=Qt.embed)!==null&&qt!==void 0?qt:"",de.schema);Xt.setData(ls(Sn))},so=(Xt,qt)=>{const Qt=ts(Xt.getData(),qt),Sn=eo(de,Qt);Xt.setData(ls({...Qt,embed:Sn}))},Qo=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],jn=Uo(de)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],uo={title:"General",name:"general",items:ho([Qo,jn])},Zo={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},re=[];Ze(de)&&re.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),he(de)&&re.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const ce={title:"Advanced",name:"advanced",items:re},tt=[uo,Zo];re.length>0&&tt.push(ce);const nt={type:"tabpanel",tabs:tt},At=de.windowManager.open({title:"Insert/Edit Media",size:"normal",body:nt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Xt=>{const qt=ts(Xt.getData());mr(Ie.get(),qt,de),Xt.close()},onChange:(Xt,qt)=>{switch(qt.name){case"source":Yt(Ie.get(),Xt);break;case"embed":fn(Xt);break;case"dimensions":case"altsource":case"poster":so(Xt,qt.name);break}Ie.set(ts(Xt.getData()))},initialData:Ne})},Or=de=>({showDialog:()=>{Rs(de)}}),bt=de=>{const se=()=>{Rs(de)};de.addCommand("mceMedia",se)},io=(de,se,Ie)=>se===""||de.length>=se.length&&de.substr(Ie,Ie+se.length)===se,ca=(de,se)=>io(de,se,0);var sr=tinymce.util.Tools.resolve("tinymce.Env");const ac=de=>{const se=de.name;return se==="iframe"||se==="video"||se==="audio"},Aa=(de,se,Ie,Ne=null)=>{const Yt=de.attr(Ie);return Wt(Yt)?Yt:ct(se,Ie)?null:Ne},rs=(de,se,Ie)=>{const Ne=se.name==="img"||de.name==="video",Yt=Ne?"300":null,fn=de.name==="audio"?"30":"150",so=Ne?fn:null;se.attr({width:Aa(de,Ie,"width",Yt),height:Aa(de,Ie,"height",so)})},La=(de,se,Ie,Ne)=>{const Yt=pt(de.schema).parse(Ne,{context:se});for(;Yt.firstChild;)Ie.append(Yt.firstChild)},Dr=(de,se)=>{const Ie=se.name,Ne=new po("img",1);return hn(de,se,Ne),rs(se,Ne,{}),Ne.attr({style:se.attr("style"),src:sr.transparentSrc,"data-mce-object":Ie,class:"mce-object mce-object-"+Ie}),Ne},Jo=(de,se)=>{var Ie;const Ne=se.name,Yt=new po("span",1);Yt.attr({contentEditable:"false",style:se.attr("style"),"data-mce-object":Ne,class:"mce-preview-object mce-object-"+Ne}),hn(de,se,Yt);const fn=de.dom.parseStyle((Ie=se.attr("style"))!==null&&Ie!==void 0?Ie:""),so=new po(Ne,1);if(rs(se,so,fn),so.attr({src:se.attr("src"),style:se.attr("style"),class:se.attr("class")}),Ne==="iframe")so.attr({allowfullscreen:se.attr("allowfullscreen"),frameborder:"0"});else{Yo(["controls","crossorigin","currentTime","loop","muted","poster","preload"],be=>{so.attr(be,se.attr(be))});const uo=Yt.attr("data-mce-html");Wt(uo)&&La(de,Ne,so,unescape(uo))}const Qo=new po("span",1);return Qo.attr("class","mce-shim"),Yt.append(so),Yt.append(Qo),Yt},hn=(de,se,Ie)=>{var Ne;const Yt=(Ne=se.attributes)!==null&&Ne!==void 0?Ne:[];let fn=Yt.length;for(;fn--;){const uo=Yt[fn].name;let be=Yt[fn].value;uo!=="width"&&uo!=="height"&&uo!=="style"&&!ca(uo,"data-mce-")&&((uo==="data"||uo==="src")&&(be=de.convertURL(be,uo)),Ie.attr("data-mce-p-"+uo,be))}const so=os({inner:!0},de.schema),Qo=new po("div",1);Yo(se.children(),uo=>Qo.append(uo));const jn=so.serialize(Qo);jn&&(Ie.attr("data-mce-html",escape(jn)),Ie.empty())},Er=de=>{const se=de.attr("class");return Yn(se)&&/\btiny-pageembed\b/.test(se)},Jr=de=>{let se=de;for(;se=se.parent;)if(se.attr("data-ephox-embed-iri")||Er(se))return!0;return!1},Oa=de=>se=>{let Ie=se.length,Ne;for(;Ie--;)Ne=se[Ie],Ne.parent&&(Ne.parent.attr("data-mce-object")||(ac(Ne)&&ht(de)?Jr(Ne)||Ne.replace(Jo(de,Ne)):Jr(Ne)||Ne.replace(Dr(de,Ne))))},Ha=(de,se,Ie)=>{const Ne=de.options.get,Yt=Ne("xss_sanitization"),fn=Vn(de);return pt(de.schema,{sanitize:Yt,validate:fn}).parse(Ie,{context:se})},Is=de=>{de.on("PreInit",()=>{const{schema:se,serializer:Ie,parser:Ne}=de,Yt=se.getBoolAttrs();Yo("webkitallowfullscreen mozallowfullscreen".split(" "),fn=>{Yt[fn]={}}),mt({embed:["wmode"]},(fn,so)=>{const Qo=se.getElementRule(so);Qo&&Yo(fn,jn=>{Qo.attributes[jn]={},Qo.attributesOrder.push(jn)})}),Ne.addNodeFilter("iframe,video,audio,object,embed,script",Oa(de)),Ie.addAttributeFilter("data-mce-object",(fn,so)=>{var Qo;let jn=fn.length;for(;jn--;){const uo=fn[jn];if(!uo.parent)continue;const be=uo.attr(so),Zo=new po(be,1);if(be!=="audio"&&be!=="script"){const nt=uo.attr("class");nt&&nt.indexOf("mce-preview-object")!==-1&&uo.firstChild?Zo.attr({width:uo.firstChild.attr("width"),height:uo.firstChild.attr("height")}):Zo.attr({width:uo.attr("width"),height:uo.attr("height")})}Zo.attr({style:uo.attr("style")});const re=(Qo=uo.attributes)!==null&&Qo!==void 0?Qo:[];let ce=re.length;for(;ce--;){const nt=re[ce].name;nt.indexOf("data-mce-p-")===0&&Zo.attr(nt.substr(11),re[ce].value)}be==="script"&&Zo.attr("type","text/javascript");const tt=uo.attr("data-mce-html");if(tt){const nt=Ha(de,be,unescape(tt));Yo(nt.children(),At=>Zo.append(At))}uo.replace(Zo)}})}),de.on("SetContent",()=>{const se=de.dom;Yo(se.select("span.mce-preview-object"),Ie=>{se.select("span.mce-shim",Ie).length===0&&se.add(Ie,"span",{class:"mce-shim"})})})},Ws=de=>{de.on("ResolveName",se=>{let Ie;se.target.nodeType===1&&(Ie=se.target.getAttribute("data-mce-object"))&&(se.name=Ie)})},bs=de=>{const se=()=>de.execCommand("mceMedia");de.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:se,onSetup:Ie=>{const Ne=de.selection;return Ie.setActive(Rt(Ne.getNode())),Ne.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Ie.setActive).unbind}}),de.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:se})};var wr=()=>{Ht.add("media",de=>(ot(de),bt(de),bs(de),Ws(de),Is(de),Tr(de),Or(de)))};wr()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager"),Qn=tinymce.util.Tools.resolve("tinymce.Env"),In=tinymce.util.Tools.resolve("tinymce.util.Tools");const Mn=_n=>So=>So.options.get(_n),Yn=Mn("content_style"),Wn=Mn("content_css_cors"),oo=Mn("body_class"),Vt=Mn("body_id"),Wt=_n=>{var So;let Xn="";const mt=_n.dom.encode,Nn=(So=Yn(_n))!==null&&So!==void 0?So:"";Xn+='<base href="'+mt(_n.documentBaseURI.getURI())+'">';const ct=Wn(_n)?' crossorigin="anonymous"':"";In.each(_n.contentCSS,Pt=>{Xn+='<link type="text/css" rel="stylesheet" href="'+mt(_n.documentBaseURI.toAbsolute(Pt))+'"'+ct+">"}),Nn&&(Xn+='<style type="text/css">'+Nn+"</style>");const K=Vt(_n),ot=oo(_n),ut='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(Qn.os.isMacOS()||Qn.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",G=_n.getBody().dir,ht=G?' dir="'+mt(G)+'"':"";return"<!DOCTYPE html><html><head>"+Xn+'</head><body id="'+mt(K)+'" class="mce-content-body '+mt(ot)+'"'+ht+">"+_n.getContent()+ut+"</body></html>"},Lt=_n=>{const So=Wt(_n);_n.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:So}}).focus("close")},Oo=_n=>{_n.addCommand("mcePreview",()=>{Lt(_n)})},Yo=_n=>{const So=()=>_n.execCommand("mcePreview");_n.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:So}),_n.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:So})};var ho=()=>{Ht.add("preview",_n=>{Oo(_n),Yo(_n)})};ho()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=(w,S,I)=>{var Z;return I(w,S.prototype)?!0:((Z=w.constructor)===null||Z===void 0?void 0:Z.name)===S.name},In=w=>{const S=typeof w;return w===null?"null":S==="object"&&Array.isArray(w)?"array":S==="object"&&Qn(w,String,(I,Z)=>Z.isPrototypeOf(I))?"string":S},Mn=w=>S=>In(S)===w,Yn=w=>S=>typeof S===w,Wn=w=>S=>w===S,oo=Mn("string"),Vt=Mn("array"),Wt=Yn("boolean"),Lt=Wn(void 0),Oo=w=>w==null,Yo=w=>!Oo(w),ho=Yn("function"),_n=Yn("number"),So=()=>{},Xn=(w,S)=>I=>w(S(I)),mt=w=>()=>w,Nn=w=>w,ct=(w,S)=>w===S;function K(w,...S){return(...I)=>{const Z=S.concat(I);return w.apply(null,Z)}}const ot=w=>{w()},zt=mt(!1),ut=mt(!0);class G{constructor(S,I){this.tag=S,this.value=I}static some(S){return new G(!0,S)}static none(){return G.singletonNone}fold(S,I){return this.tag?I(this.value):S()}isSome(){return this.tag}isNone(){return!this.tag}map(S){return this.tag?G.some(S(this.value)):G.none()}bind(S){return this.tag?S(this.value):G.none()}exists(S){return this.tag&&S(this.value)}forall(S){return!this.tag||S(this.value)}filter(S){return!this.tag||S(this.value)?this:G.none()}getOr(S){return this.tag?this.value:S}or(S){return this.tag?this:S}getOrThunk(S){return this.tag?this.value:S()}orThunk(S){return this.tag?this:S()}getOrDie(S){if(this.tag)return this.value;throw new Error(S??"Called getOrDie on None")}static from(S){return Yo(S)?G.some(S):G.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(S){this.tag&&S(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}G.singletonNone=new G(!1);const ht=Object.keys,Vn=Object.hasOwnProperty,Pt=(w,S)=>{const I=ht(w);for(let Z=0,ie=I.length;Z<ie;Z++){const je=I[Z],dt=w[je];S(dt,je)}},Ze=w=>(S,I)=>{w[I]=S},he=(w,S,I,Z)=>{Pt(w,(ie,je)=>{(S(ie,je)?I:Z)(ie,je)})},Uo=(w,S)=>{const I={};return he(w,S,Ze(I),So),I},Ln=(w,S)=>{const I=[];return Pt(w,(Z,ie)=>{I.push(S(Z,ie))}),I},Zt=w=>Ln(w,Nn),A=w=>ht(w).length,Co=(w,S)=>rt(w,S)?G.from(w[S]):G.none(),rt=(w,S)=>Vn.call(w,S),ko=(w,S)=>rt(w,S)&&w[S]!==void 0&&w[S]!==null,on=Array.prototype.indexOf,qe=Array.prototype.push,po=(w,S)=>on.call(w,S),os=(w,S)=>po(w,S)>-1,pt=(w,S)=>{for(let I=0,Z=w.length;I<Z;I++){const ie=w[I];if(S(ie,I))return!0}return!1},un=(w,S)=>{const I=[];for(let Z=0;Z<w;Z++)I.push(S(Z));return I},Se=(w,S)=>{const I=w.length,Z=new Array(I);for(let ie=0;ie<I;ie++){const je=w[ie];Z[ie]=S(je,ie)}return Z},Qe=(w,S)=>{for(let I=0,Z=w.length;I<Z;I++){const ie=w[I];S(ie,I)}},H=(w,S)=>{for(let I=w.length-1;I>=0;I--){const Z=w[I];S(Z,I)}},ps=(w,S)=>{const I=[],Z=[];for(let ie=0,je=w.length;ie<je;ie++){const dt=w[ie];(S(dt,ie)?I:Z).push(dt)}return{pass:I,fail:Z}},Dn=(w,S)=>{const I=[];for(let Z=0,ie=w.length;Z<ie;Z++){const je=w[Z];S(je,Z)&&I.push(je)}return I},bo=(w,S,I)=>(H(w,(Z,ie)=>{I=S(I,Z,ie)}),I),An=(w,S,I)=>(Qe(w,(Z,ie)=>{I=S(I,Z,ie)}),I),Ys=(w,S,I)=>{for(let Z=0,ie=w.length;Z<ie;Z++){const je=w[Z];if(S(je,Z))return G.some(je);if(I(je,Z))break}return G.none()},Ue=(w,S)=>Ys(w,S,zt),wt=w=>{const S=[];for(let I=0,Z=w.length;I<Z;++I){if(!Vt(w[I]))throw new Error("Arr.flatten item "+I+" was not an array, input: "+w);qe.apply(S,w[I])}return S},Ge=(w,S)=>wt(Se(w,S)),xe=(w,S)=>{for(let I=0,Z=w.length;I<Z;++I){const ie=w[I];if(S(ie,I)!==!0)return!1}return!0},Io=(w,S)=>{const I={};for(let Z=0,ie=w.length;Z<ie;Z++){const je=w[Z];I[String(je)]=S(je,Z)}return I},eo=(w,S)=>S>=0&&S<w.length?G.some(w[S]):G.none(),Rt=w=>eo(w,0),Tr=w=>eo(w,w.length-1),$n=(w,S)=>{for(let I=0;I<w.length;I++){const Z=S(w[I],I);if(Z.isSome())return Z}return G.none()},ur=8,Wo=9,Fs=11,ba=1,Ir=3,Ss=(w,S)=>{const Z=(S||document).createElement("div");if(Z.innerHTML=w,!Z.hasChildNodes()||Z.childNodes.length>1){const ie="HTML does not have a single root node";throw console.error(ie,w),new Error(ie)}return ts(Z.childNodes[0])},is=(w,S)=>{const Z=(S||document).createElement(w);return ts(Z)},Uc=(w,S)=>{const Z=(S||document).createTextNode(w);return ts(Z)},ts=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},ss={fromHtml:Ss,fromTag:is,fromText:Uc,fromDom:ts,fromPoint:(w,S,I)=>G.from(w.dom.elementFromPoint(S,I)).map(ts)},Xo=(w,S)=>{const I=w.dom;if(I.nodeType!==ba)return!1;{const Z=I;if(Z.matches!==void 0)return Z.matches(S);if(Z.msMatchesSelector!==void 0)return Z.msMatchesSelector(S);if(Z.webkitMatchesSelector!==void 0)return Z.webkitMatchesSelector(S);if(Z.mozMatchesSelector!==void 0)return Z.mozMatchesSelector(S);throw new Error("Browser lacks native selectors")}},Ds=w=>w.nodeType!==ba&&w.nodeType!==Wo&&w.nodeType!==Fs||w.childElementCount===0,dr=(w,S)=>{const I=S===void 0?document:S.dom;return Ds(I)?[]:Se(I.querySelectorAll(w),ss.fromDom)},aa=(w,S)=>{const I=S===void 0?document:S.dom;return Ds(I)?G.none():G.from(I.querySelector(w)).map(ss.fromDom)},mr=(w,S)=>w.dom===S.dom,Rs=Xo;typeof window<"u"||Function("return this;")();const Or=w=>w.dom.nodeName.toLowerCase(),bt=w=>w.dom.nodeType,io=w=>S=>bt(S)===w,ca=w=>bt(w)===ur||Or(w)==="#comment",sr=io(ba),ac=io(Ir),Aa=io(Wo),rs=io(Fs),La=w=>S=>sr(S)&&Or(S)===w,Dr=w=>ss.fromDom(w.dom.ownerDocument),Jo=w=>Aa(w)?w:Dr(w),hn=w=>G.from(w.dom.parentNode).map(ss.fromDom),Er=(w,S)=>{const I=ho(S)?S:zt;let Z=w.dom;const ie=[];for(;Z.parentNode!==null&&Z.parentNode!==void 0;){const je=Z.parentNode,dt=ss.fromDom(je);if(ie.push(dt),I(dt)===!0)break;Z=je}return ie},Jr=w=>G.from(w.dom.previousSibling).map(ss.fromDom),Oa=w=>G.from(w.dom.nextSibling).map(ss.fromDom),Ha=w=>Se(w.dom.childNodes,ss.fromDom),Is=(w,S)=>{const I=w.dom.childNodes;return G.from(I[S]).map(ss.fromDom)},Ws=w=>Is(w,0),bs=w=>rs(w)&&Yo(w.dom.host),de=ho(Element.prototype.attachShadow)&&ho(Node.prototype.getRootNode)?w=>ss.fromDom(w.dom.getRootNode()):Jo,se=w=>{const S=de(w);return bs(S)?G.some(S):G.none()},Ie=w=>ss.fromDom(w.dom.host),Ne=w=>{const S=ac(w)?w.dom.parentNode:w.dom;if(S==null||S.ownerDocument===null)return!1;const I=S.ownerDocument;return se(ss.fromDom(S)).fold(()=>I.body.contains(S),Xn(Ne,Ie))};var Yt=(w,S,I,Z,ie)=>w(I,Z)?G.some(I):ho(ie)&&ie(I)?G.none():S(I,Z,ie);const fn=(w,S,I)=>{let Z=w.dom;const ie=ho(I)?I:zt;for(;Z.parentNode;){Z=Z.parentNode;const je=ss.fromDom(Z);if(S(je))return G.some(je);if(ie(je))break}return G.none()},so=(w,S,I)=>Yt((ie,je)=>je(ie),fn,w,S,I),Qo=(w,S)=>{const I=ie=>S(ss.fromDom(ie));return Ue(w.dom.childNodes,I).map(ss.fromDom)},jn=(w,S,I)=>fn(w,Z=>Xo(Z,S),I),uo=(w,S)=>Qo(w,I=>Xo(I,S)),be=(w,S)=>aa(S,w),Zo=(w,S,I)=>Yt((ie,je)=>Xo(ie,je),jn,w,S,I),re=w=>Zo(w,"[contenteditable]"),ce=(w,S=!1)=>Ne(w)?w.dom.isContentEditable:re(w).fold(mt(S),I=>tt(I)==="true"),tt=w=>w.dom.contentEditable,nt=w=>w.nodeName.toLowerCase(),At=w=>ss.fromDom(w.getBody()),Xt=w=>S=>mr(S,At(w)),qt=w=>w?w.replace(/px$/,""):"",Qt=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,Sn=w=>ss.fromDom(w.selection.getStart()),xn=w=>ss.fromDom(w.selection.getEnd()),us=w=>so(w,La("table")).forall(ce),Ms=(w,S)=>Dn(Ha(w),S),Da=(w,S)=>{let I=[];return Qe(Ha(w),Z=>{S(Z)&&(I=I.concat([Z])),I=I.concat(Da(Z,S))}),I},Va=(w,S)=>Ms(w,I=>Xo(I,S)),cc=(w,S)=>dr(S,w),Rn=(w,S,I)=>{if(oo(I)||Wt(I)||_n(I))w.setAttribute(S,I+"");else throw console.error("Invalid call to Attribute.set. Key ",S,":: Value ",I,":: Element ",w),new Error("Attribute value was not simple")},jo=(w,S,I)=>{Rn(w.dom,S,I)},ds=(w,S)=>{const I=w.dom;Pt(S,(Z,ie)=>{Rn(I,ie,Z)})},Lr=(w,S)=>{const I=w.dom.getAttribute(S);return I===null?void 0:I},jr=(w,S)=>G.from(Lr(w,S)),Rr=(w,S)=>{w.dom.removeAttribute(S)},Ls=w=>An(w.dom.attributes,(S,I)=>(S[I.name]=I.value,S),{}),Ql=(w,S,I=ct)=>w.exists(Z=>I(Z,S)),Wi=w=>{const S=[],I=Z=>{S.push(Z)};for(let Z=0;Z<w.length;Z++)w[Z].each(I);return S},ms=(w,S,I)=>w.isSome()&&S.isSome()?G.some(I(w.getOrDie(),S.getOrDie())):G.none(),va=w=>w.bind(Nn),Ra=(w,S)=>w?G.some(S):G.none(),fr=(w,S)=>w.substring(S),Zi=(w,S,I)=>S===""||w.length>=S.length&&w.substr(I,I+S.length)===S,ic=(w,S)=>ya(w,S)?fr(w,S.length):w,ya=(w,S)=>Zi(w,S,0),al=(w=>S=>S.replace(w,""))(/^\s+|\s+$/g),li=w=>w.length>0,cl=w=>!li(w),Ma=(w,S=10)=>{const I=parseInt(w,S);return isNaN(I)?G.none():G.some(I)},Nc=w=>{const S=parseFloat(w);return isNaN(S)?G.none():G.some(S)},ji=w=>w.style!==void 0&&ho(w.style.getPropertyValue),Wc=(w,S,I)=>{if(!oo(I))throw console.error("Invalid call to CSS.set. Property ",S,":: Value ",I,":: Element ",w),new Error("CSS value must be a string: "+I);ji(w)&&w.style.setProperty(S,I)},Gi=(w,S)=>{ji(w)&&w.style.removeProperty(S)},W=(w,S,I)=>{const Z=w.dom;Wc(Z,S,I)},me=(w,S)=>{const I=w.dom,ie=window.getComputedStyle(I).getPropertyValue(S);return ie===""&&!Ne(w)?ve(I,S):ie},ve=(w,S)=>ji(w)?w.style.getPropertyValue(S):"",Le=(w,S)=>{const I=w.dom,Z=ve(I,S);return G.from(Z).filter(ie=>ie.length>0)},it=(w,S)=>{const I=w.dom;Gi(I,S),Ql(jr(w,"style").map(al),"")&&Rr(w,"style")},pn=(w,S,I=0)=>jr(w,S).map(Z=>parseInt(Z,10)).getOr(I),vs=(w,S)=>Mr(w,S,ut),Mr=(w,S,I)=>Ge(Ha(w),Z=>Xo(Z,S)?I(Z)?[Z]:[]:Mr(Z,S,I)),Do=["tfoot","thead","tbody","colgroup"],Nr=w=>os(Do,w),Go=(w,S)=>({rows:w,columns:S}),rr=(w,S,I)=>({element:w,rowspan:S,colspan:I}),Bc=(w,S,I,Z,ie,je)=>({element:w,rowspan:S,colspan:I,row:Z,column:ie,isLocked:je}),wc=(w,S,I)=>({element:w,cells:S,section:I}),zn=(w,S,I,Z)=>({startRow:w,startCol:S,finishRow:I,finishCol:Z}),es=(w,S,I)=>({element:w,colspan:S,column:I}),Qr=(w,S)=>({element:w,columns:S}),P=(w,S,I=zt)=>{if(I(S))return G.none();if(os(w,Or(S)))return G.some(S);const Z=ie=>Xo(ie,"table")||I(ie);return jn(S,w.join(","),Z)},q=(w,S)=>P(["td","th"],w,S),ne=w=>vs(w,"th,td"),Be=w=>Xo(w,"colgroup")?Va(w,"col"):Ge(Kt(w),S=>Va(S,"col")),Mt=(w,S)=>Zo(w,"table",S),to=w=>vs(w,"tr"),Kt=w=>Mt(w).fold(mt([]),S=>Va(S,"colgroup")),Hr=(w,S)=>Se(w,I=>{if(Or(I)==="colgroup"){const Z=Se(Be(I),ie=>{const je=pn(ie,"span",1);return rr(ie,1,je)});return wc(I,Z,"colgroup")}else{const Z=Se(ne(I),ie=>{const je=pn(ie,"rowspan",1),dt=pn(ie,"colspan",1);return rr(ie,je,dt)});return wc(I,Z,S(I))}}),ea=w=>hn(w).map(S=>{const I=Or(S);return Nr(I)?I:"tbody"}).getOr("tbody"),et=w=>{const S=to(w),Z=[...Kt(w),...S];return Hr(Z,ea)},Vr="data-snooker-locked-cols",gr=w=>jr(w,Vr).bind(S=>G.from(S.match(/\d+/g))).map(S=>Io(S,ut)),ta=(w,S)=>w+","+S,sd=(w,S,I)=>G.from(w.access[ta(S,I)]),xo=(w,S,I)=>{const Z=Y(w,ie=>I(S,ie.element));return Z.length>0?G.some(Z[0]):G.none()},Y=(w,S)=>{const I=Ge(w.all,Z=>Z.cells);return Dn(I,S)},oe=w=>{const S={};let I=0;return Qe(w.cells,Z=>{const ie=Z.colspan;un(ie,je=>{const dt=I+je;S[dt]=es(Z.element,ie,dt)}),I+=ie}),S},ke=w=>{const S={},I=[],ie=Rt(w).map(Bi=>Bi.element).bind(Mt).bind(gr).getOr({});let je=0,dt=0,Jt=0;const{pass:qn,fail:no}=ps(w,Bi=>Bi.section==="colgroup");Qe(no,Bi=>{const uc=[];Qe(Bi.cells,Rl=>{let au=0;for(;S[ta(Jt,au)]!==void 0;)au++;const um=ko(ie,au.toString()),Cd=Bc(Rl.element,Rl.rowspan,Rl.colspan,Jt,au,um);for(let Ml=0;Ml<Rl.colspan;Ml++)for(let wd=0;wd<Rl.rowspan;wd++){const bh=Jt+wd,og=au+Ml,of=ta(bh,og);S[of]=Cd,dt=Math.max(dt,og+1)}uc.push(Cd)}),je++,I.push(wc(Bi.element,uc,Bi.section)),Jt++});const{columns:Ps,colgroups:qo}=Tr(qn).map(Bi=>{const uc=oe(Bi);return{colgroups:[Qr(Bi.element,Zt(uc))],columns:uc}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Go(je,dt),access:S,all:I,columns:Ps,colgroups:qo}},Zs={fromTable:w=>{const S=et(w);return ke(S)},generate:ke,getAt:sd,findItem:xo,filterItems:Y,justCells:w=>Ge(w.all,S=>S.cells),justColumns:w=>Zt(w.columns),hasColumns:w=>ht(w.columns).length>0,getColumnAt:(w,S)=>G.from(w.columns[S])};var Ca=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ns=(w,S,I)=>{const Z=w.select("td,th",S);let ie;for(let je=0;je<Z.length;je++){const dt=w.getStyle(Z[je],I);if(Lt(ie)&&(ie=dt),ie!==dt)return""}return ie},Sc=(w,S,I)=>{Ca.each("left center right".split(" "),Z=>{Z!==I&&w.formatter.remove("align"+Z,{},S)}),I&&w.formatter.apply("align"+I,{},S)},Zc=(w,S,I)=>{Ca.each("top middle bottom".split(" "),Z=>{Z!==I&&w.formatter.remove("valign"+Z,{},S)}),I&&w.formatter.apply("valign"+I,{},S)},As=(w,S,I)=>{w.dispatch("TableModified",{...I,table:S})},wa=(w,S)=>Nc(w).getOr(S),hr=(w,S,I)=>wa(me(w,S),I),ki=(w,S,I,Z)=>{const ie=hr(w,`padding-${I}`,0),je=hr(w,`padding-${Z}`,0),dt=hr(w,`border-${I}-width`,0),Jt=hr(w,`border-${Z}-width`,0);return S-ie-je-dt-Jt},Tl=(w,S)=>{const I=w.dom,Z=I.getBoundingClientRect().width||I.offsetWidth;return S==="border-box"?Z:ki(w,Z,"left","right")},xc=w=>Tl(w,"content-box");var _i=tinymce.util.Tools.resolve("tinymce.Env");const rd="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",il=un(5,w=>{const S=`${w+1}px`;return{title:S,value:S}}),Qc=Se(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),Gr="100%",lc=w=>{var S;const I=w.dom,Z=(S=I.getParent(w.selection.getStart(),I.isBlock))!==null&&S!==void 0?S:w.getBody();return xc(ss.fromDom(Z))+"px"},Pc=(w,S)=>qm(w)||!zr(w)?S:Du(w)?{...S,width:lc(w)}:{...S,width:Gr},ei=(w,S)=>qm(w)||zr(w)?S:Du(w)?{...S,width:lc(w)}:{...S,width:Gr},Xa=w=>S=>S.options.get(w),Br=w=>{const S=w.options.register;S("table_border_widths",{processor:"object[]",default:il}),S("table_border_styles",{processor:"object[]",default:Qc}),S("table_cell_advtab",{processor:"boolean",default:!0}),S("table_row_advtab",{processor:"boolean",default:!0}),S("table_advtab",{processor:"boolean",default:!0}),S("table_appearance_options",{processor:"boolean",default:!0}),S("table_grid",{processor:"boolean",default:!_i.deviceType.isTouch()}),S("table_cell_class_list",{processor:"object[]",default:[]}),S("table_row_class_list",{processor:"object[]",default:[]}),S("table_class_list",{processor:"object[]",default:[]}),S("table_toolbar",{processor:"string",default:rd}),S("table_background_color_map",{processor:"object[]",default:[]}),S("table_border_color_map",{processor:"object[]",default:[]})},jc=Xa("table_sizing_mode"),nm=Xa("table_border_widths"),eu=Xa("table_border_styles"),tu=Xa("table_cell_advtab"),Gm=Xa("table_row_advtab"),ui=Xa("table_advtab"),nu=Xa("table_appearance_options"),ad=Xa("table_grid"),zr=Xa("table_style_by_css"),om=Xa("table_cell_class_list"),Au=Xa("table_row_class_list"),Ou=Xa("table_class_list"),cd=Xa("table_toolbar"),id=Xa("table_background_color_map"),ld=Xa("table_border_color_map"),Du=w=>jc(w)==="fixed",qm=w=>jc(w)==="responsive",Km=w=>{const S=w.options,I=S.get("table_default_styles");return S.isSet("table_default_styles")?I:Pc(w,I)},ou=w=>{const S=w.options,I=S.get("table_default_attributes");return S.isSet("table_default_attributes")?I:ei(w,I)},vp=(w,S)=>S.column>=w.startCol&&S.column+S.colspan-1<=w.finishCol&&S.row>=w.startRow&&S.row+S.rowspan-1<=w.finishRow,ae=(w,S)=>{let I=!0;const Z=K(vp,S);for(let ie=S.startRow;ie<=S.finishRow;ie++)for(let je=S.startCol;je<=S.finishCol;je++)I=I&&Zs.getAt(w,ie,je).exists(Z);return I?G.some(S):G.none()},ud=(w,S)=>zn(Math.min(w.row,S.row),Math.min(w.column,S.column),Math.max(w.row+w.rowspan-1,S.row+S.rowspan-1),Math.max(w.column+w.colspan-1,S.column+S.colspan-1)),$c=(w,S,I)=>{const Z=Zs.findItem(w,S,mr),ie=Zs.findItem(w,I,mr);return Z.bind(je=>ie.map(dt=>ud(je,dt)))},Zf=(w,S,I)=>$c(w,S,I).bind(Z=>ae(w,Z)),yp=(w,S,I)=>{const Z=Cp(w);return Zf(Z,S,I)},Cp=Zs.fromTable,ys=(w,S)=>{hn(w).each(Z=>{Z.dom.insertBefore(S.dom,w.dom)})},Ai=(w,S)=>{Oa(w).fold(()=>{hn(w).each(ie=>{ti(ie,S)})},Z=>{ys(Z,S)})},Tc=(w,S)=>{Ws(w).fold(()=>{ti(w,S)},Z=>{w.dom.insertBefore(S.dom,Z.dom)})},ti=(w,S)=>{w.dom.appendChild(S.dom)},nh=(w,S)=>{ys(w,S),ti(S,w)},El=(w,S)=>{Qe(S,(I,Z)=>{const ie=Z===0?w:S[Z-1];Ai(ie,I)})},di=(w,S)=>{Qe(S,I=>{ti(w,I)})},sm=w=>{const S=w.dom;S.parentNode!==null&&S.parentNode.removeChild(S)},jf=w=>{const S=Ha(w);S.length>0&&El(w,S),sm(w)},Gc=((w,S)=>{const I=je=>{if(!w(je))throw new Error("Can only get "+S+" value of a "+S+" node");return Z(je).getOr("")},Z=je=>w(je)?G.from(je.dom.nodeValue):G.none();return{get:I,getOption:Z,set:(je,dt)=>{if(!w(je))throw new Error("Can only set raw "+S+" value of a "+S+" node");je.dom.nodeValue=dt}}})(ac,"text"),dd=w=>Gc.get(w),sh=(w,S)=>Gc.set(w,S);var ni=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],za=()=>{const w=no=>ss.fromDom(no.dom.cloneNode(!1)),S=no=>Jo(no).dom,I=no=>sr(no)?Or(no)==="body"?!0:os(ni,Or(no)):!1,Z=no=>sr(no)?os(["br","img","hr","input"],Or(no)):!1,ie=no=>sr(no)&&Lr(no,"contenteditable")==="false",je=(no,Ps)=>no.dom.compareDocumentPosition(Ps.dom),dt=(no,Ps)=>{const qo=Ls(no);ds(Ps,qo)},Jt=no=>{const Ps=Or(no);return os(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ps)},qn=no=>sr(no)?jr(no,"lang"):G.none();return{up:mt({selector:jn,closest:Zo,predicate:fn,all:Er}),down:mt({selector:cc,predicate:Da}),styles:mt({get:me,getRaw:Le,set:W,remove:it}),attrs:mt({get:Lr,set:jo,remove:Rr,copyTo:dt}),insert:mt({before:ys,after:Ai,afterAll:El,append:ti,appendAll:di,prepend:Tc,wrap:nh}),remove:mt({unwrap:jf,remove:sm}),create:mt({nu:ss.fromTag,clone:w,text:ss.fromText}),query:mt({comparePosition:je,prevSibling:Jr,nextSibling:Oa}),property:mt({children:Ha,name:Or,parent:hn,document:S,isText:ac,isComment:ca,isElement:sr,isSpecial:Jt,getLanguage:qn,getText:dd,setText:sh,isBoundary:I,isEmptyTag:Z,isNonEditable:ie}),eq:mr,is:Rs}};const md=(w,S,I,Z)=>{const ie=I[0],je=I.slice(1);return Z(w,S,ie,je)},fd=(w,S,I)=>I.length>0?md(w,S,I,Oi):G.none(),Oi=(w,S,I,Z)=>{const ie=S(w,I);return bo(Z,(je,dt)=>{const Jt=S(w,dt);return Fc(w,je,Jt)},ie)},Fc=(w,S,I)=>S.bind(Z=>I.filter(K(w.eq,Z))),Ym=fd,Xm=za(),Jm=(w,S)=>Ym(Xm,(I,Z)=>w(Z),S),Qm=w=>jn(w,"table"),qi=(w,S)=>{const I=cc(w,S);return I.length>0?G.some(I):G.none()},rm=(w,S,I)=>be(w,S).bind(Z=>be(w,I).bind(ie=>Jm(Qm,[Z,ie]).map(je=>({first:Z,last:ie,table:je})))),rh=(w,S)=>qi(w,S),wv=(w,S,I)=>rm(w,S,I).bind(Z=>{const ie=qn=>mr(w,qn),je="thead,tfoot,tbody,table",dt=jn(Z.first,je,ie),Jt=jn(Z.last,je,ie);return dt.bind(qn=>Jt.bind(no=>mr(qn,no)?yp(Z.table,Z.first,Z.last):G.none()))}),ah=w=>Se(w,ss.fromDom),am="data-mce-selected",Gf="td["+am+"],th["+am+"]",kl="data-mce-first-selected",qf="td["+kl+"],th["+kl+"]",ar="data-mce-last-selected",k="td["+ar+"],th["+ar+"]",M={selected:am,selectedSelector:Gf,firstSelected:kl,firstSelectedSelector:qf,lastSelected:ar,lastSelectedSelector:k},z=w=>Mt(w).bind(S=>rh(S,M.firstSelectedSelector)).fold(mt(w),S=>S[0]),fe=w=>(S,I)=>{const Z=Or(S),ie=Z==="col"||Z==="colgroup"?z(S):S;return Zo(ie,w,I)},ge=fe("th,td,caption"),Et=fe("th,td"),En=w=>ah(w.model.table.getSelectedCells()),Zn=(w,S)=>{const I=Et(w),Z=I.bind(ie=>Mt(ie)).map(ie=>to(ie));return ms(I,Z,(ie,je)=>Dn(je,dt=>pt(ah(dt.dom.cells),Jt=>Lr(Jt,S)==="1"||mr(Jt,ie)))).getOr([])},To=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],St=w=>({value:cm(w)}),ks=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Na=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,mi=w=>ks.test(w)||Na.test(w),cm=w=>ic(w,"#").toUpperCase(),Kf=w=>mi(w)?G.some({value:cm(w)}):G.none(),ll=w=>{const S=w.toString(16);return(S.length===1?"0"+S:S).toUpperCase()},fi=w=>{const S=ll(w.red)+ll(w.green)+ll(w.blue);return St(S)},Ic=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Di=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ja=(w,S,I,Z)=>({red:w,green:S,blue:I,alpha:Z}),ib=(w,S,I,Z)=>{const ie=parseInt(w,10),je=parseInt(S,10),dt=parseInt(I,10),Jt=parseFloat(Z);return Ja(ie,je,dt,Jt)},xs=w=>{if(w==="transparent")return G.some(Ja(0,0,0,0));const S=Ic.exec(w);if(S!==null)return G.some(ib(S[1],S[2],S[3],"1"));const I=Di.exec(w);return I!==null?G.some(ib(I[1],I[2],I[3],I[4])):G.none()},Ru=w=>Kf(w).orThunk(()=>xs(w).map(fi)).getOrThunk(()=>{const S=document.createElement("canvas");S.height=1,S.width=1;const I=S.getContext("2d");I.clearRect(0,0,S.width,S.height),I.fillStyle="#FFFFFF",I.fillStyle=w,I.fillRect(0,0,1,1);const Z=I.getImageData(0,0,1,1).data,ie=Z[0],je=Z[1],dt=Z[2],Jt=Z[3];return fi(Ja(ie,je,dt,Jt))}),gd=w=>xs(w).map(fi).map(S=>"#"+S.value).getOr(w),Ur=w=>{let S=w;return{get:()=>S,set:ie=>{S=ie}}},lb=w=>{const S=Ur(G.none()),I=()=>S.get().each(w);return{clear:()=>{I(),S.set(G.none())},isSet:()=>S.get().isSome(),get:()=>S.get(),set:Jt=>{I(),S.set(G.some(Jt))}}},Sv=()=>lb(w=>w.unbind()),Mu=(w,S,I)=>Z=>{const ie=Sv(),je=cl(I),dt=()=>{const Jt=En(w),qn=no=>w.formatter.match(S,{value:I},no.dom,je);je?(Z.setActive(!pt(Jt,qn)),ie.set(w.formatter.formatChanged(S,no=>Z.setActive(!no),!0))):(Z.setActive(xe(Jt,qn)),ie.set(w.formatter.formatChanged(S,Z.setActive,!1,{value:I})))};return w.initialized?dt():w.on("init",dt),ie.clear},js=w=>ko(w,"menu"),Js=w=>Se(w,S=>{const I=S.text||S.title||"";return js(S)?{text:I,items:Js(S.menu)}:{text:I,value:S.value}}),Sa=(w,S,I,Z)=>Se(S,ie=>{const je=ie.text||ie.title;return js(ie)?{type:"nestedmenuitem",text:je,getSubmenuItems:()=>Sa(w,ie.menu,I,Z)}:{text:je,type:"togglemenuitem",onAction:()=>Z(ie.value),onSetup:Mu(w,I,ie.value)}}),hd=(w,S)=>I=>{w.execCommand("mceTableApplyCellStyle",!1,{[S]:I})},pd=w=>Ge(w,S=>js(S)?[{...S,menu:pd(S.menu)}]:li(S.value)?[S]:[]),im=(w,S,I,Z)=>ie=>ie(Sa(w,S,I,Z)),bd=(w,S,I)=>{const Z=Se(S,ie=>({text:ie.title,value:"#"+Ru(ie.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:Z.length>0?Z:void 0,allowCustomColors:!1},onAction:ie=>{const je=ie.value==="remove"?"":ie.value;w.execCommand("mceTableApplyCellStyle",!1,{[I]:je})}}]},Ro=w=>()=>{const I=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:I})},ch=w=>()=>{const I=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:I})},wp=w=>{const S=Js(om(w));return S.length>0?G.some({name:"class",type:"listbox",label:"Class",items:S}):G.none()},xv=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:To}],Tv=w=>xv.concat(wp(w).toArray()),Yf=(w,S)=>{const Z=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Js(eu(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:S==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(Z):Z}},Xf={normal:(w,S)=>{const I=w.dom;return{setAttrib:(dt,Jt)=>{I.setAttrib(S,dt,Jt)},setStyle:(dt,Jt)=>{I.setStyle(S,dt,Jt)},setFormat:(dt,Jt)=>{Jt===""?w.formatter.remove(dt,{value:null},S,!0):w.formatter.apply(dt,{value:Jt},S)}}}},ul=La("th"),db=(w,S)=>w&&S?"sectionCells":w?"section":"cells",ih=w=>{const S=w.section==="thead",I=Ql(mb(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:S||I?{type:"header",subType:db(S,I)}:{type:"body"}},mb=w=>{const S=Dn(w,I=>ul(I.element));return S.length===0?G.some("td"):S.length===w.length?G.some("th"):G.none()},_l=w=>{const S=Se(w,ie=>ih(ie).type),I=os(S,"header"),Z=os(S,"footer");if(!I&&!Z)return G.some("body");{const ie=os(S,"body");return I&&!ie&&!Z?G.some("header"):!I&&!ie&&Z?G.some("footer"):G.none()}},Sp=w=>{let S=!1,I;return(...Z)=>(S||(S=!0,I=w.apply(null,Z)),I)},Al=(w,S)=>$n(w.all,I=>Ue(I.cells,Z=>mr(S,Z.element))),lm=(w,S,I)=>{const Z=Se(S.selection,je=>q(je).bind(dt=>Al(w,dt)).filter(I)),ie=Wi(Z);return Ra(ie.length>0,ie)},Ev=(w,S)=>S.mergable,lh=(w,S)=>S.unmergable,uh=(w,S)=>lm(w,S,ut),fb=(w,S)=>Al(w,S).exists(I=>!I.isLocked),dh=(w,S)=>xe(S,I=>fb(w,I)),Ec=(w,S)=>Ev(w,S).filter(I=>dh(w,I.cells)),mh=(w,S)=>lh(w,S).filter(I=>dh(w,I));({...{generate:w=>{if(!Vt(w))throw new Error("cases must be an array");if(w.length===0)throw new Error("there must be at least one case");const S=[],I={};return Qe(w,(Z,ie)=>{const je=ht(Z);if(je.length!==1)throw new Error("one and only one name per case");const dt=je[0],Jt=Z[dt];if(I[dt]!==void 0)throw new Error("duplicate key detected:"+dt);if(dt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Vt(Jt))throw new Error("case arguments must be an array");S.push(dt),I[dt]=(...qn)=>{const no=qn.length;if(no!==Jt.length)throw new Error("Wrong number of arguments to case "+dt+". Expected "+Jt.length+" ("+Jt+"), got "+no);return{fold:(...qo)=>{if(qo.length!==w.length)throw new Error("Wrong number of arguments to fold. Expected "+w.length+", got "+qo.length);return qo[ie].apply(null,qn)},match:qo=>{const pr=ht(qo);if(S.length!==pr.length)throw new Error("Wrong number of arguments to match. Expected: "+S.join(",")+`
Actual: `+pr.join(","));if(!xe(S,uc=>os(pr,uc)))throw new Error("Not all branches were specified when using match. Specified: "+pr.join(", ")+`
Required: `+S.join(", "));return qo[dt].apply(null,qn)},log:qo=>{console.log(qo,{constructors:S,constructor:dt,params:qn})}}}}),I}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const Jf=(w,S)=>{const I=Zs.fromTable(w);return uh(I,S).bind(ie=>{const je=ie[ie.length-1],dt=ie[0].row,Jt=je.row+je.rowspan,qn=I.all.slice(dt,Jt);return _l(qn)}).getOr("")},oi=w=>ya(w,"rgb")?gd(w):w,Qf=w=>{const S=ss.fromDom(w);return{borderwidth:Le(S,"border-width").getOr(""),borderstyle:Le(S,"border-style").getOr(""),bordercolor:Le(S,"border-color").map(oi).getOr(""),backgroundcolor:Le(S,"background-color").map(oi).getOr("")}},fh=w=>{const S=w[0],I=w.slice(1);return Qe(I,Z=>{Qe(ht(S),ie=>{Pt(Z,(je,dt)=>{const Jt=S[ie];Jt!==""&&ie===dt&&Jt!==je&&(S[ie]="")})})}),S},Ri=(w,S,I,Z)=>Ue(w,ie=>!Lt(I.formatter.matchNode(Z,S+ie))).getOr(""),gi=K(Ri,["left","center","right"],"align"),gh=K(Ri,["top","middle","bottom"],"valign"),Wr=(w,S)=>{const I=Km(w),Z=ou(w),ie=()=>({borderstyle:Co(I,"border-style").getOr(""),bordercolor:oi(Co(I,"border-color").getOr("")),backgroundcolor:oi(Co(I,"background-color").getOr(""))}),je={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},dt=()=>{const Ps=I["border-width"];return zr(w)&&Ps?{border:Ps}:Co(Z,"border").fold(()=>({}),qo=>({border:qo}))},Jt=S?ie():{},qn=()=>{const Ps=Co(I,"border-spacing").or(Co(Z,"cellspacing")).fold(()=>({}),pr=>({cellspacing:pr})),qo=Co(I,"border-padding").or(Co(Z,"cellpadding")).fold(()=>({}),pr=>({cellpadding:pr}));return{...Ps,...qo}};return{...je,...I,...Z,...Jt,...dt(),...qn()}},ef=w=>Mt(ss.fromDom(w)).map(S=>{const I={selection:ah(w.cells)};return Jf(S,I)}).getOr(""),eg=(w,S,I)=>{const Z=(Jt,qn)=>{const no=Le(ss.fromDom(qn),"border-width");return zr(w)&&no.isSome()?no.getOr(""):Jt.getAttrib(qn,"border")||Ns(w.dom,qn,"border-width")||Ns(w.dom,qn,"border")||""},ie=w.dom,je=zr(w)?ie.getStyle(S,"border-spacing")||ie.getAttrib(S,"cellspacing"):ie.getAttrib(S,"cellspacing")||ie.getStyle(S,"border-spacing"),dt=zr(w)?Ns(ie,S,"padding")||ie.getAttrib(S,"cellpadding"):ie.getAttrib(S,"cellpadding")||Ns(ie,S,"padding");return{width:ie.getStyle(S,"width")||ie.getAttrib(S,"width"),height:ie.getStyle(S,"height")||ie.getAttrib(S,"height"),cellspacing:je??"",cellpadding:dt??"",border:Z(ie,S),caption:!!ie.select("caption",S)[0],class:ie.getAttrib(S,"class",""),align:gi(w,S),...I?Qf(S):{}}},ft=(w,S,I)=>{const Z=w.dom;return{height:Z.getStyle(S,"height")||Z.getAttrib(S,"height"),class:Z.getAttrib(S,"class",""),type:ef(S),align:gi(w,S),...I?Qf(S):{}}},kv=(w,S,I,Z)=>{const ie=w.dom,je=Z.getOr(S),dt=(Jt,qn)=>ie.getStyle(Jt,qn)||ie.getAttrib(Jt,qn);return{width:dt(je,"width"),height:dt(S,"height"),scope:ie.getAttrib(S,"scope"),celltype:nt(S),class:ie.getAttrib(S,"class",""),halign:gi(w,S),valign:gh(w,S),...I?Qf(S):{}}},gb=(w,S)=>{const I=Zs.fromTable(w),Z=Zs.justCells(I),ie=Dn(Z,je=>pt(S,dt=>mr(je.element,dt)));return Se(ie,je=>({element:je.element.dom,column:Zs.getColumnAt(I,je.column).map(dt=>dt.element.dom)}))},Mi=(w,S,I,Z)=>{Z("scope")&&w.setAttrib("scope",I.scope),Z("class")&&w.setAttrib("class",I.class),Z("height")&&w.setStyle("height",Qt(I.height)),Z("width")&&S.setStyle("width",Qt(I.width))},tf=(w,S,I)=>{I("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",S.backgroundcolor),I("bordercolor")&&w.setFormat("tablecellbordercolor",S.bordercolor),I("borderstyle")&&w.setFormat("tablecellborderstyle",S.borderstyle),I("borderwidth")&&w.setFormat("tablecellborderwidth",Qt(S.borderwidth))},vd=(w,S,I,Z)=>{const ie=S.length===1;Qe(S,je=>{const dt=je.element,Jt=ie?ut:Z,qn=Xf.normal(w,dt),no=je.column.map(Ps=>Xf.normal(w,Ps)).getOr(qn);Mi(qn,no,I,Jt),tu(w)&&tf(qn,I,Jt),Z("halign")&&Sc(w,dt,I.halign),Z("valign")&&Zc(w,dt,I.valign)})},Pr=(w,S)=>{w.execCommand("mceTableCellType",!1,{type:S.celltype,no_events:!0})},hb=(w,S,I,Z)=>{const ie=Uo(Z,(je,dt)=>I[dt]!==je);A(ie)>0&&S.length>=1&&Mt(S[0]).each(je=>{const dt=gb(je,S),Jt=A(Uo(ie,(no,Ps)=>Ps!=="scope"&&Ps!=="celltype"))>0,qn=rt(ie,"celltype");(Jt||rt(ie,"scope"))&&vd(w,dt,Z,K(rt,ie)),qn&&Pr(w,Z),As(w,je.dom,{structure:qn,style:Jt})})},Bs=(w,S,I,Z)=>{const ie=Z.getData();Z.close(),w.undoManager.transact(()=>{hb(w,S,I,ie),w.focus()})},Ts=(w,S)=>{const I=Mt(S[0]).map(Z=>Se(gb(Z,S),ie=>kv(w,ie.element,tu(w),ie.column)));return fh(I.getOrDie())},_c=w=>{const S=En(w);if(S.length===0)return;const I=Ts(w,S),Z={type:"tabpanel",tabs:[{title:"General",name:"general",items:Tv(w)},Yf(w,"cell")]},ie={type:"panel",items:[{type:"grid",columns:2,items:Tv(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:tu(w)?Z:ie,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:I,onSubmit:K(Bs,w,S,I)})},nf=w=>{const S=Js(Au(w));return S.length>0?G.some({name:"class",type:"listbox",label:"Class",items:S}):G.none()},ia=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],yd=w=>ia.concat(nf(w).toArray()),la=(w,S,I)=>{I("class")&&w.setAttrib("class",S.class),I("height")&&w.setStyle("height",Qt(S.height))},Vs=(w,S,I)=>{I("backgroundcolor")&&w.setStyle("background-color",S.backgroundcolor),I("bordercolor")&&w.setStyle("border-color",S.bordercolor),I("borderstyle")&&w.setStyle("border-style",S.borderstyle)},tg=(w,S,I,Z)=>{const je=S.length===1?ut:Z;Qe(S,dt=>{const Jt=Xf.normal(w,dt);la(Jt,I,je),Gm(w)&&Vs(Jt,I,je),Z("align")&&Sc(w,dt,I.align)})},Je=(w,S)=>{w.execCommand("mceTableRowType",!1,{type:S.type,no_events:!0})},Ki=(w,S,I,Z)=>{const ie=Uo(Z,(je,dt)=>I[dt]!==je);if(A(ie)>0){const je=rt(ie,"type"),dt=je?A(ie)>1:!0;dt&&tg(w,S,Z,K(rt,ie)),je&&Je(w,Z),Mt(ss.fromDom(S[0])).each(Jt=>As(w,Jt.dom,{structure:je,style:dt}))}},hh=(w,S,I,Z)=>{const ie=Z.getData();Z.close(),w.undoManager.transact(()=>{Ki(w,S,I,ie),w.focus()})},qr=w=>{const S=Zn(Sn(w),M.selected);if(S.length===0)return;const I=Se(S,dt=>ft(w,dt.dom,Gm(w))),Z=fh(I),ie={type:"tabpanel",tabs:[{title:"General",name:"general",items:yd(w)},Yf(w,"row")]},je={type:"panel",items:[{type:"grid",columns:2,items:yd(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Gm(w)?ie:je,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Z,onSubmit:K(hh,w,Se(S,dt=>dt.dom),Z)})},Ol=(w,S,I)=>{const Z=I?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ie=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],je=nu(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],dt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Jt=S.length>0?[{type:"listbox",name:"class",label:"Class",items:S}]:[];return Z.concat(ie).concat(je).concat(dt).concat(Jt)},xp=(w,S,I,Z)=>{if(S.tagName==="TD"||S.tagName==="TH")oo(I)&&Yo(Z)?w.setStyle(S,I,Z):w.setStyles(S,I);else if(S.children)for(let ie=0;ie<S.children.length;ie++)xp(w,S.children[ie],I,Z)},dl=(w,S,I)=>{const Z=w.dom,ie={},je={};if(Lt(I.class)||(ie.class=I.class),je.height=Qt(I.height),zr(w)?je.width=Qt(I.width):Z.getAttrib(S,"width")&&(ie.width=qt(I.width)),zr(w)?(je["border-width"]=Qt(I.border),je["border-spacing"]=Qt(I.cellspacing)):(ie.border=I.border,ie.cellpadding=I.cellpadding,ie.cellspacing=I.cellspacing),zr(w)&&S.children)for(let dt=0;dt<S.children.length;dt++)xp(Z,S.children[dt],{"border-width":Qt(I.border),padding:Qt(I.cellpadding)}),ui(w)&&xp(Z,S.children[dt],{"border-color":I.bordercolor});if(ui(w)){const dt=I;je["background-color"]=dt.backgroundcolor,je["border-color"]=dt.bordercolor,je["border-style"]=dt.borderstyle}ie.style=Z.serializeStyle({...Km(w),...je}),Z.setAttribs(S,{...ou(w),...ie})},_v=(w,S,I,Z)=>{const ie=w.dom,je=Z.getData(),dt=Uo(je,(Jt,qn)=>I[qn]!==Jt);Z.close(),je.class===""&&delete je.class,w.undoManager.transact(()=>{if(!S){const Jt=Ma(je.cols).getOr(1),qn=Ma(je.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:qn,columns:Jt}),S=Et(Sn(w),Xt(w)).bind(no=>Mt(no,Xt(w))).map(no=>no.dom).getOrDie()}if(A(dt)>0){dl(w,S,je);const Jt=ie.select("caption",S)[0];(Jt&&!je.caption||!Jt&&je.caption)&&w.execCommand("mceTableToggleCaption"),Sc(w,S,je.align)}if(w.focus(),w.addVisual(),A(dt)>0){const Jt=rt(dt,"caption"),qn=Jt?A(dt)>1:!0;As(w,S,{structure:Jt,style:qn})}})},Nu=(w,S)=>{const I=w.dom;let Z,ie=Wr(w,ui(w));S?(ie.cols="1",ie.rows="1",ui(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor="")):(Z=I.getParent(w.selection.getStart(),"table",w.getBody()),Z?ie=eg(w,Z,ui(w)):ui(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor=""));const je=Js(Ou(w));je.length>0&&ie.class&&(ie.class=ie.class.replace(/\s*mce\-item\-table\s*/g,""));const dt={type:"grid",columns:2,items:Ol(w,je,S)},Jt=()=>({type:"panel",items:[dt]}),qn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[dt]},Yf(w,"table")]}),no=ui(w)?qn():Jt();w.windowManager.open({title:"Table Properties",size:"normal",body:no,onSubmit:K(_v,w,Z,ie),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ie})},pb=w=>{const S=I=>{us(Sn(w))&&I()};Pt({mceTableProps:K(Nu,w,!1),mceTableRowProps:K(qr,w),mceTableCellProps:K(_c,w),mceInsertTableDialog:K(Nu,w,!0)},(I,Z)=>w.addCommand(Z,()=>S(I)))},hi=(w,S)=>uo(w,S).isSome(),Cs=Nn,su=w=>{const S=(Z,ie)=>jr(Z,ie).exists(je=>parseInt(je,10)>1),I=Z=>S(Z,"rowspan")||S(Z,"colspan");return w.length>0&&xe(w,I)?G.some(w):G.none()},ng=(w,S,I)=>S.length<=1?G.none():wv(w,I.firstSelectedSelector,I.lastSelectedSelector).map(Z=>({bounds:Z,cells:S})),Lc=w=>({element:w,mergable:G.none(),unmergable:G.none(),selection:[w]}),Dl=(w,S,I)=>({element:I,mergable:ng(S,w,M),unmergable:su(w),selection:Cs(w)}),Ac=w=>{const S=Ur(G.none()),I=Ur([]);let Z=G.none();const ie=La("caption"),je=Ko=>Z.forall(Gs=>!Gs[Ko]),dt=()=>ge(Sn(w),Xt(w)),Jt=()=>ge(xn(w),Xt(w)),qn=()=>dt().bind(Ko=>va(ms(Mt(Ko),Jt().bind(Mt),(Gs,qc)=>mr(Gs,qc)?ie(Ko)?G.some(Lc(Ko)):G.some(Dl(En(w),Gs,Ko)):G.none()))),no=Ko=>Mt(Ko.element).map(qc=>{const ua=Zs.fromTable(qc),bi=uh(ua,Ko).getOr([]),sg=An(bi,(Pu,ml)=>(ml.isLocked&&(Pu.onAny=!0,ml.column===0?Pu.onFirst=!0:ml.column+ml.colspan>=ua.grid.columns&&(Pu.onLast=!0)),Pu),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Ec(ua,Ko).isSome(),unmergeable:mh(ua,Ko).isSome(),locked:sg}}),Ps=()=>{S.set(Sp(qn)()),Z=S.get().bind(no),Qe(I.get(),ot)},qo=Ko=>(Ko(),I.set(I.get().concat([Ko])),()=>{I.set(Dn(I.get(),Gs=>Gs!==Ko))}),pr=(Ko,Gs)=>qo(()=>S.get().fold(()=>{Ko.setEnabled(!1)},qc=>{Ko.setEnabled(!Gs(qc))})),Bi=(Ko,Gs,qc)=>qo(()=>S.get().fold(()=>{Ko.setEnabled(!1),Ko.setActive(!1)},ua=>{Ko.setEnabled(!Gs(ua)),Ko.setActive(qc(ua))})),uc=Ko=>Z.exists(Gs=>Gs.locked[Ko]),Rl=Ko=>pr(Ko,Gs=>!1),au=Ko=>pr(Ko,Gs=>ie(Gs.element)),um=Ko=>Gs=>pr(Gs,qc=>ie(qc.element)||uc(Ko)),Cd=Ko=>Gs=>pr(Gs,qc=>ie(qc.element)||Ko().isNone()),Ml=(Ko,Gs)=>qc=>pr(qc,ua=>ie(ua.element)||Ko().isNone()||uc(Gs)),wd=Ko=>pr(Ko,Gs=>je("mergeable")),bh=Ko=>pr(Ko,Gs=>je("unmergeable")),og=Ko=>Bi(Ko,zt,Gs=>Mt(Gs.element,Xt(w)).exists(ua=>hi(ua,"caption"))),of=(Ko,Gs)=>qc=>Bi(qc,ua=>ie(ua.element),()=>w.queryCommandValue(Ko)===Gs),Ua=of("mceTableRowType","header"),cu=of("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",Ps),{onSetupTable:Rl,onSetupCellOrRow:au,onSetupColumn:um,onSetupPasteable:Cd,onSetupPasteableColumn:Ml,onSetupMergeable:wd,onSetupUnmergeable:bh,resetTargets:Ps,onSetupTableWithCaption:og,onSetupTableRowHeaders:Ua,onSetupTableColumnHeaders:cu,targets:S.get}};var bb=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Hc="x-tinymce/dom-table-",Bu=Hc+"rows",_e=Hc+"columns",si=w=>{var S;const I=(S=bb.read())!==null&&S!==void 0?S:[];return $n(I,Z=>G.from(Z.getType(w)))},ru=()=>si(Bu),pi=()=>si(_e),Ni=(w,S)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:Jt=>Jt("inserttable | cell row column | advtablesort | tableprops deletetable")});const I=Jt=>()=>w.execCommand(Jt),Z=(Jt,qn)=>{w.queryCommandSupported(qn.command)&&w.ui.registry.addButton(Jt,{...qn,onAction:ho(qn.onAction)?qn.onAction:I(qn.command)})},ie=(Jt,qn)=>{w.queryCommandSupported(qn.command)&&w.ui.registry.addToggleButton(Jt,{...qn,onAction:ho(qn.onAction)?qn.onAction:I(qn.command)})};Z("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:S.onSetupTable}),Z("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:S.onSetupTable}),Z("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:S.onSetupCellOrRow}),Z("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:S.onSetupMergeable}),Z("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:S.onSetupUnmergeable}),Z("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:S.onSetupCellOrRow}),Z("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:S.onSetupCellOrRow}),Z("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:S.onSetupCellOrRow}),Z("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:S.onSetupCellOrRow}),Z("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:S.onSetupColumn("onFirst")}),Z("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:S.onSetupColumn("onLast")}),Z("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:S.onSetupColumn("onAny")}),Z("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:S.onSetupCellOrRow}),Z("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:S.onSetupCellOrRow}),Z("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:S.onSetupPasteable(ru)}),Z("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:S.onSetupPasteable(ru)}),Z("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:S.onSetupColumn("onAny")}),Z("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:S.onSetupColumn("onAny")}),Z("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:S.onSetupPasteableColumn(pi,"onFirst")}),Z("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:S.onSetupPasteableColumn(pi,"onLast")}),Z("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const je=pd(Ou(w));je.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:im(w,je,"tableclass",Jt=>w.execCommand("mceTableToggleClass",!1,Jt)),onSetup:S.onSetupTable});const dt=pd(om(w));dt.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:im(w,dt,"tablecellclass",Jt=>w.execCommand("mceTableCellToggleClass",!1,Jt)),onSetup:S.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:im(w,To,"tablecellverticalalign",hd(w,"vertical-align")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:im(w,nm(w),"tablecellborderwidth",hd(w,"border-width")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:im(w,eu(w),"tablecellborderstyle",hd(w,"border-style")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Jt=>Jt(bd(w,id(w),"background-color")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Jt=>Jt(bd(w,ld(w),"border-color")),onSetup:S.onSetupCellOrRow})),ie("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),ie("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Ro(w),onSetup:S.onSetupTableRowHeaders}),ie("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ch(w),onSetup:S.onSetupTableColumnHeaders})},Qa=w=>{const S=Z=>w.dom.is(Z,"table")&&w.getBody().contains(Z),I=cd(w);I.length>0&&w.ui.registry.addContextToolbar("table",{predicate:S,items:I,scope:"node",position:"node"})},Pa=(w,S)=>{const I=qo=>()=>w.execCommand(qo),Z=(qo,pr)=>w.queryCommandSupported(pr.command)?(w.ui.registry.addMenuItem(qo,{...pr,onAction:ho(pr.onAction)?pr.onAction:I(pr.command)}),!0):!1,ie=(qo,pr)=>{w.queryCommandSupported(pr.command)&&w.ui.registry.addToggleMenuItem(qo,{...pr,onAction:ho(pr.onAction)?pr.onAction:I(pr.command)})},je=qo=>{w.execCommand("mceInsertTable",!1,{rows:qo.numRows,columns:qo.numColumns})},dt=[Z("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:S.onSetupCellOrRow}),Z("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:S.onSetupCellOrRow}),Z("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:S.onSetupCellOrRow}),Z("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:S.onSetupCellOrRow}),Z("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:S.onSetupCellOrRow}),Z("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:S.onSetupCellOrRow}),Z("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:S.onSetupPasteable(ru)}),Z("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:S.onSetupPasteable(ru)})],Jt=[Z("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:S.onSetupColumn("onFirst")}),Z("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:S.onSetupColumn("onLast")}),Z("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:S.onSetupColumn("onAny")}),Z("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:S.onSetupColumn("onAny")}),Z("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:S.onSetupColumn("onAny")}),Z("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:S.onSetupPasteableColumn(pi,"onFirst")}),Z("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:S.onSetupPasteableColumn(pi,"onLast")})],qn=[Z("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:S.onSetupCellOrRow}),Z("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:S.onSetupMergeable}),Z("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:S.onSetupUnmergeable})];ad(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:je}]}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:I("mceInsertTableDialog")}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:I("mceInsertTableDialog")}),Z("tableprops",{text:"Table properties",onSetup:S.onSetupTable,command:"mceTableProps"}),Z("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:S.onSetupTable,command:"mceTableDelete"}),os(dt,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:mt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),os(Jt,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:mt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),os(qn,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:mt("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(S.resetTargets(),S.targets().fold(mt(""),qo=>Or(qo.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const no=pd(Ou(w));no.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Sa(w,no,"tableclass",qo=>w.execCommand("mceTableToggleClass",!1,qo)),onSetup:S.onSetupTable});const Ps=pd(om(w));Ps.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Sa(w,Ps,"tablecellclass",qo=>w.execCommand("mceTableCellToggleClass",!1,qo)),onSetup:S.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Sa(w,To,"tablecellverticalalign",hd(w,"vertical-align")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Sa(w,nm(w),"tablecellborderwidth",hd(w,"border-width")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Sa(w,eu(w),"tablecellborderstyle",hd(w,"border-style")),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>bd(w,id(w),"background-color"),onSetup:S.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>bd(w,ld(w),"border-color"),onSetup:S.onSetupCellOrRow})),ie("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),ie("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Ro(w),onSetup:S.onSetupTableRowHeaders}),ie("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ch(w),onSetup:S.onSetupTableRowHeaders})},Av=w=>{const S=Ac(w);Br(w),pb(w),Pa(w,S),Ni(w,S),Qa(w)};var ph=()=>{Ht.add("table",Av)};ph()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const In=(Ue=>wt=>Ue===wt)(null),Mn=Ue=>Ue,Yn="\uFEFF",Wn=Ue=>Ue.replace(/\uFEFF/g,""),oo=(Ue,wt)=>{const Ge=Ue.length,xe=new Array(Ge);for(let Io=0;Io<Ge;Io++){const eo=Ue[Io];xe[Io]=wt(eo,Io)}return xe},Wt={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},Lt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},Oo=[new RegExp(Wt.aletter),new RegExp(Wt.midnumlet),new RegExp(Wt.midletter),new RegExp(Wt.midnum),new RegExp(Wt.numeric),new RegExp(Wt.cr),new RegExp(Wt.lf),new RegExp(Wt.newline),new RegExp(Wt.extend),new RegExp(Wt.format),new RegExp(Wt.katakana),new RegExp(Wt.extendnumlet),new RegExp("@")],Yo="",ho=new RegExp("^"+Wt.punctuation+"$"),_n=/^\s+$/,So=Oo,Xn=Lt.OTHER,mt=Ue=>{let wt=Xn;const Ge=So.length;for(let xe=0;xe<Ge;++xe){const Io=So[xe];if(Io&&Io.test(Ue)){wt=xe;break}}return wt},Nn=Ue=>{const wt={};return Ge=>{if(wt[Ge])return wt[Ge];{const xe=Ue(Ge);return wt[Ge]=xe,xe}}},ct=Ue=>{const wt=Nn(mt);return oo(Ue,wt)},K=(Ue,wt)=>{const Ge=Ue[wt],xe=Ue[wt+1];if(wt<0||wt>Ue.length-1&&wt!==0||Ge===Lt.ALETTER&&xe===Lt.ALETTER)return!1;const Io=Ue[wt+2];if(Ge===Lt.ALETTER&&(xe===Lt.MIDLETTER||xe===Lt.MIDNUMLET||xe===Lt.AT)&&Io===Lt.ALETTER)return!1;const eo=Ue[wt-1];return(Ge===Lt.MIDLETTER||Ge===Lt.MIDNUMLET||xe===Lt.AT)&&xe===Lt.ALETTER&&eo===Lt.ALETTER||(Ge===Lt.NUMERIC||Ge===Lt.ALETTER)&&(xe===Lt.NUMERIC||xe===Lt.ALETTER)||(Ge===Lt.MIDNUM||Ge===Lt.MIDNUMLET)&&xe===Lt.NUMERIC&&eo===Lt.NUMERIC||Ge===Lt.NUMERIC&&(xe===Lt.MIDNUM||xe===Lt.MIDNUMLET)&&Io===Lt.NUMERIC||Ge===Lt.EXTEND||Ge===Lt.FORMAT||eo===Lt.EXTEND||eo===Lt.FORMAT||xe===Lt.EXTEND||xe===Lt.FORMAT||Ge===Lt.CR&&xe===Lt.LF?!1:Ge===Lt.NEWLINE||Ge===Lt.CR||Ge===Lt.LF||xe===Lt.NEWLINE||xe===Lt.CR||xe===Lt.LF?!0:!(Ge===Lt.KATAKANA&&xe===Lt.KATAKANA||xe===Lt.EXTENDNUMLET&&(Ge===Lt.ALETTER||Ge===Lt.NUMERIC||Ge===Lt.KATAKANA||Ge===Lt.EXTENDNUMLET)||Ge===Lt.EXTENDNUMLET&&(xe===Lt.ALETTER||xe===Lt.NUMERIC||xe===Lt.KATAKANA)||Ge===Lt.AT)},ot=Yo,zt=_n,ut=ho,G=Ue=>Ue==="http"||Ue==="https",ht=(Ue,wt)=>{let Ge;for(Ge=wt;Ge<Ue.length&&!zt.test(Ue[Ge]);Ge++);return Ge},Vn=(Ue,wt)=>{const Ge=ht(Ue,wt+1);return Ue.slice(wt+1,Ge).join(ot).substr(0,3)==="://"?Ge:wt},Pt=(Ue,wt,Ge,xe)=>{const Io=[];let eo=[];for(let Rt=0;Rt<Ge.length;++Rt)if(eo.push(Ue[Rt]),K(Ge,Rt)){const Tr=wt[Rt];if((xe.includeWhitespace||!zt.test(Tr))&&(xe.includePunctuation||!ut.test(Tr))){const $n=Rt-eo.length+1,ur=Rt+1,Wo=wt.slice($n,ur).join(ot);if(G(Wo)){const Fs=Vn(wt,Rt),ba=Ue.slice(ur,Fs);Array.prototype.push.apply(eo,ba),Rt=Fs}Io.push(eo)}eo=[]}return Io},Ze=()=>({includeWhitespace:!1,includePunctuation:!1}),Uo=(Ue,wt,Ge)=>{Ge={...Ze(),...Ge};const xe=[],Io=[];for(let Rt=0;Rt<Ue.length;Rt++){const Tr=wt(Ue[Rt]);Tr!==Yn&&(xe.push(Ue[Rt]),Io.push(Tr))}const eo=ct(Io);return Pt(xe,Io,eo,Ge)};var Ln=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Zt=(Ue,wt)=>{const Ge=wt.getBlockElements(),xe=wt.getVoidElements(),Io=ur=>Ge[ur.nodeName]||xe[ur.nodeName],eo=[];let Rt="";const Tr=new Ln(Ue,Ue);let $n;for(;$n=Tr.next();)$n.nodeType===3?Rt+=Wn($n.data):Io($n)&&Rt.length&&(eo.push(Rt),Rt="");return Rt.length&&eo.push(Rt),eo},A=Ue=>Ue.replace(/\u200B/g,""),Co=Ue=>Ue.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,rt=(Ue,wt)=>{const Ge=A(Zt(Ue,wt).join(`
`));return Uo(Ge.split(""),Mn).length},ko=(Ue,wt)=>{const Ge=Zt(Ue,wt).join("");return Co(Ge)},on=(Ue,wt)=>{const Ge=Zt(Ue,wt).join("").replace(/\s/g,"");return Co(Ge)},qe=(Ue,wt)=>()=>wt(Ue.getBody(),Ue.schema),po=(Ue,wt)=>()=>wt(Ue.selection.getRng().cloneContents(),Ue.schema),os=Ue=>qe(Ue,rt),pt=Ue=>({body:{getWordCount:os(Ue),getCharacterCount:qe(Ue,ko),getCharacterCountWithoutSpaces:qe(Ue,on)},selection:{getWordCount:po(Ue,rt),getCharacterCount:po(Ue,ko),getCharacterCountWithoutSpaces:po(Ue,on)},getCount:os(Ue)}),un=(Ue,wt)=>{Ue.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(wt.body.getWordCount()),String(wt.selection.getWordCount())],["Characters (no spaces)",String(wt.body.getCharacterCountWithoutSpaces()),String(wt.selection.getCharacterCountWithoutSpaces())],["Characters",String(wt.body.getCharacterCount()),String(wt.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Se=(Ue,wt)=>{Ue.addCommand("mceWordCount",()=>un(Ue,wt))},Qe=(Ue,wt)=>{let Ge=null;return{cancel:()=>{In(Ge)||(clearTimeout(Ge),Ge=null)},throttle:(...eo)=>{In(Ge)&&(Ge=setTimeout(()=>{Ge=null,Ue.apply(null,eo)},wt))}}};var H=tinymce.util.Tools.resolve("tinymce.util.Delay");const ps=(Ue,wt)=>{Ue.dispatch("wordCountUpdate",{wordCount:{words:wt.body.getWordCount(),characters:wt.body.getCharacterCount(),charactersWithoutSpaces:wt.body.getCharacterCountWithoutSpaces()}})},Dn=(Ue,wt)=>{ps(Ue,wt)},bo=(Ue,wt,Ge)=>{const xe=Qe(()=>Dn(Ue,wt),Ge);Ue.on("init",()=>{Dn(Ue,wt),H.setEditorTimeout(Ue,()=>{Ue.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",xe.throttle)},0),Ue.on("remove",xe.cancel)})},An=Ue=>{const wt=()=>Ue.execCommand("mceWordCount");Ue.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:wt}),Ue.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:wt})};var Ys=(Ue=300)=>{Ht.add("wordcount",wt=>{const Ge=pt(wt);return Se(wt,Ge),An(wt),bo(wt,Ge,Ue),Ge})};Ys()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const Qn=(Vt,Wt)=>{Vt.focus(),Vt.undoManager.transact(()=>{Vt.setContent(Wt)}),Vt.selection.setCursorLocation(),Vt.nodeChanged()},In=Vt=>Vt.getContent({source_view:!0}),Mn=Vt=>{const Wt=In(Vt);Vt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Wt},onSubmit:Lt=>{Qn(Vt,Lt.getData().code),Lt.close()}})},Yn=Vt=>{Vt.addCommand("mceCodeEditor",()=>{Mn(Vt)})},Wn=Vt=>{const Wt=()=>Vt.execCommand("mceCodeEditor");Vt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Wt}),Vt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Wt})};var oo=()=>{Ht.add("code",Vt=>(Yn(Vt),Wn(Vt),{}))};oo()})();(function(){const Ht=re=>{let ce=re;return{get:()=>ce,set:At=>{ce=At}}};var Qn=tinymce.util.Tools.resolve("tinymce.PluginManager");const In=(re,ce,tt)=>{var nt;return tt(re,ce.prototype)?!0:((nt=re.constructor)===null||nt===void 0?void 0:nt.name)===ce.name},Mn=re=>{const ce=typeof re;return re===null?"null":ce==="object"&&Array.isArray(re)?"array":ce==="object"&&In(re,String,(tt,nt)=>nt.isPrototypeOf(tt))?"string":ce},Yn=re=>ce=>Mn(ce)===re,Wn=re=>ce=>typeof ce===re,oo=Yn("string"),Vt=Yn("array"),Wt=Wn("boolean"),Lt=re=>re==null,Oo=re=>!Lt(re),Yo=Wn("number"),ho=()=>{},_n=re=>()=>re,So=_n(!0),mt=_n("[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class Nn{constructor(ce,tt){this.tag=ce,this.value=tt}static some(ce){return new Nn(!0,ce)}static none(){return Nn.singletonNone}fold(ce,tt){return this.tag?tt(this.value):ce()}isSome(){return this.tag}isNone(){return!this.tag}map(ce){return this.tag?Nn.some(ce(this.value)):Nn.none()}bind(ce){return this.tag?ce(this.value):Nn.none()}exists(ce){return this.tag&&ce(this.value)}forall(ce){return!this.tag||ce(this.value)}filter(ce){return!this.tag||ce(this.value)?this:Nn.none()}getOr(ce){return this.tag?this.value:ce}or(ce){return this.tag?this:ce}getOrThunk(ce){return this.tag?this.value:ce()}orThunk(ce){return this.tag?this:ce()}getOrDie(ce){if(this.tag)return this.value;throw new Error(ce??"Called getOrDie on None")}static from(ce){return Oo(ce)?Nn.some(ce):Nn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ce){this.tag&&ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nn.singletonNone=new Nn(!1);const ct=mt;var K=tinymce.util.Tools.resolve("tinymce.Env"),ot=tinymce.util.Tools.resolve("tinymce.util.Tools");const zt=Array.prototype.slice,ut=Array.prototype.push,G=(re,ce)=>{const tt=re.length,nt=new Array(tt);for(let At=0;At<tt;At++){const Xt=re[At];nt[At]=ce(Xt,At)}return nt},ht=(re,ce)=>{for(let tt=0,nt=re.length;tt<nt;tt++){const At=re[tt];ce(At,tt)}},Vn=(re,ce)=>{for(let tt=re.length-1;tt>=0;tt--){const nt=re[tt];ce(nt,tt)}},Pt=(re,ce)=>{if(re.length===0)return[];{let tt=ce(re[0]);const nt=[];let At=[];for(let Xt=0,qt=re.length;Xt<qt;Xt++){const Qt=re[Xt],Sn=ce(Qt);Sn!==tt&&(nt.push(At),At=[]),tt=Sn,At.push(Qt)}return At.length!==0&&nt.push(At),nt}},Ze=(re,ce,tt)=>(ht(re,(nt,At)=>{tt=ce(tt,nt,At)}),tt),he=re=>{const ce=[];for(let tt=0,nt=re.length;tt<nt;++tt){if(!Vt(re[tt]))throw new Error("Arr.flatten item "+tt+" was not an array, input: "+re);ut.apply(ce,re[tt])}return ce},Uo=(re,ce)=>he(G(re,ce)),Ln=(re,ce)=>{const tt=zt.call(re,0);return tt.sort(ce),tt},Zt=Object.hasOwnProperty,A=(re,ce)=>Zt.call(re,ce);typeof window<"u"||Function("return this;")();const Co=9,rt=11,ko=1,on=3,qe=re=>re.dom.nodeType,os=(re=>ce=>qe(ce)===re)(on),pt=(re,ce,tt)=>{if(oo(tt)||Wt(tt)||Yo(tt))re.setAttribute(ce,tt+"");else throw console.error("Invalid call to Attribute.set. Key ",ce,":: Value ",tt,":: Element ",re),new Error("Attribute value was not simple")},un=(re,ce,tt)=>{pt(re.dom,ce,tt)},Se=(re,ce)=>{const nt=(ce||document).createElement("div");if(nt.innerHTML=re,!nt.hasChildNodes()||nt.childNodes.length>1){const At="HTML does not have a single root node";throw console.error(At,re),new Error(At)}return ps(nt.childNodes[0])},Qe=(re,ce)=>{const nt=(ce||document).createElement(re);return ps(nt)},H=(re,ce)=>{const nt=(ce||document).createTextNode(re);return ps(nt)},ps=re=>{if(re==null)throw new Error("Node cannot be null or undefined");return{dom:re}},bo={fromHtml:Se,fromTag:Qe,fromText:H,fromDom:ps,fromPoint:(re,ce,tt)=>Nn.from(re.dom.elementFromPoint(ce,tt)).map(ps)},An=re=>re.nodeType!==ko&&re.nodeType!==Co&&re.nodeType!==rt||re.childElementCount===0,Ys=(re,ce)=>{const tt=ce===void 0?document:ce.dom;return An(tt)?[]:G(tt.querySelectorAll(re),bo.fromDom)},Ue=re=>Nn.from(re.dom.parentNode).map(bo.fromDom),wt=re=>G(re.dom.childNodes,bo.fromDom),Ge=(re,ce)=>({element:re,offset:ce}),xe=(re,ce)=>{const tt=wt(re);return tt.length>0&&ce<tt.length?Ge(tt[ce],0):Ge(re,ce)},Io=(re,ce)=>{Ue(re).each(nt=>{nt.dom.insertBefore(ce.dom,re.dom)})},eo=(re,ce)=>{re.dom.appendChild(ce.dom)},Rt=(re,ce)=>{Io(re,ce),eo(ce,re)},$n=((re,ce)=>{const tt=Xt=>{if(!re(Xt))throw new Error("Can only get "+ce+" value of a "+ce+" node");return nt(Xt).getOr("")},nt=Xt=>re(Xt)?Nn.from(Xt.dom.nodeValue):Nn.none();return{get:tt,getOption:nt,set:(Xt,qt)=>{if(!re(Xt))throw new Error("Can only set raw "+ce+" value of a "+ce+" node");Xt.dom.nodeValue=qt}}})(os,"text"),ur=re=>$n.get(re),Wo=(re,ce,tt)=>(re.compareDocumentPosition(ce)&tt)!==0,Fs=(re,ce)=>Wo(re,ce,Node.DOCUMENT_POSITION_PRECEDING),ba=(re,ce)=>Ys(ce,re);var Ir=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Ss=(re,ce)=>re.isBlock(ce)||A(re.schema.getVoidElements(),ce.nodeName),is=(re,ce)=>re.getContentEditable(ce)==="false",Uc=(re,ce)=>re.getContentEditable(ce)==="true"&&ce.parentNode&&re.getContentEditableParent(ce.parentNode)==="false",ts=(re,ce)=>!re.isBlock(ce)&&A(re.schema.getWhitespaceElements(),ce.nodeName),ls=(re,ce)=>Ss(re,ce)||is(re,ce)||ts(re,ce)||Uc(re,ce),ss=re=>re.nodeType===3,Xo=()=>({sOffset:0,fOffset:0,elements:[]}),Ds=(re,ce)=>xe(bo.fromDom(re),ce),dr=(re,ce,tt,nt,At,Xt=!0)=>{let qt=Xt?ce(!1):tt;for(;qt;){const Qt=is(re,qt);if(Qt||ts(re,qt)){if(Qt?nt.cef(qt):nt.boundary(qt))break;qt=ce(!0);continue}else if(Ss(re,qt)){if(nt.boundary(qt))break}else ss(qt)&&nt.text(qt);if(qt===At)break;qt=ce(!1)}},aa=(re,ce,tt,nt,At)=>{var Xt;if(ls(re,tt))return;const qt=(Xt=re.getParent(nt,re.isBlock))!==null&&Xt!==void 0?Xt:re.getRoot(),Qt=new Ir(tt,qt),Sn=At?Qt.next.bind(Qt):Qt.prev.bind(Qt);dr(re,Sn,tt,{boundary:So,cef:So,text:xn=>{At?ce.fOffset+=xn.length:ce.sOffset+=xn.length,ce.elements.push(bo.fromDom(xn))}})},mr=(re,ce,tt,nt,At,Xt=!0)=>{const qt=new Ir(tt,ce),Qt=[];let Sn=Xo();aa(re,Sn,tt,ce,!1);const xn=()=>(Sn.elements.length>0&&(Qt.push(Sn),Sn=Xo()),!1);return dr(re,qt.next.bind(qt),tt,{boundary:xn,cef:us=>(xn(),At&&Qt.push(...At.cef(us)),!1),text:us=>{Sn.elements.push(bo.fromDom(us)),At&&At.text(us,Sn)}},nt,Xt),nt&&aa(re,Sn,nt,ce,!0),xn(),Qt},Rs=(re,ce)=>{const tt=Ds(ce.startContainer,ce.startOffset),nt=tt.element.dom,At=Ds(ce.endContainer,ce.endOffset),Xt=At.element.dom;return mr(re,ce.commonAncestorContainer,nt,Xt,{text:(qt,Qt)=>{qt===Xt?Qt.fOffset+=qt.length-At.offset:qt===nt&&(Qt.sOffset+=tt.offset)},cef:qt=>{const Qt=Uo(ba(bo.fromDom(qt),"*[contenteditable=true]"),Sn=>{const xn=Sn.dom;return mr(re,xn,xn)});return Ln(Qt,(Sn,xn)=>Fs(Sn.elements[0].dom,xn.elements[0].dom)?1:-1)}},!1)},Or=(re,ce)=>ce.collapsed?[]:Rs(re,ce),bt=(re,ce)=>{const tt=re.createRng();return tt.selectNode(ce),Or(re,tt)},io=(re,ce)=>Uo(ce,tt=>bt(re,tt)),ca=(re,ce,tt=0,nt=re.length)=>{const At=ce.regex;At.lastIndex=tt;const Xt=[];let qt;for(;qt=At.exec(re);){const Qt=qt[ce.matchIndex],Sn=qt.index+qt[0].indexOf(Qt),xn=Sn+Qt.length;if(xn>nt)break;Xt.push({start:Sn,finish:xn}),At.lastIndex=xn}return Xt},sr=(re,ce)=>{const tt=Ze(re,(nt,At)=>{const Xt=ur(At),qt=nt.last,Qt=qt+Xt.length,Sn=Uo(ce,(xn,us)=>xn.start<Qt&&xn.finish>qt?[{element:At,start:Math.max(qt,xn.start)-qt,finish:Math.min(Qt,xn.finish)-qt,matchId:us}]:[]);return{results:nt.results.concat(Sn),last:Qt}},{results:[],last:0}).results;return Pt(tt,nt=>nt.matchId)},ac=(re,ce)=>Uo(ce,tt=>{const nt=tt.elements,At=G(nt,ur).join(""),Xt=ca(At,re,tt.sOffset,At.length-tt.fOffset);return sr(nt,Xt)}),Aa=(re,ce)=>{Vn(re,(tt,nt)=>{Vn(tt,At=>{const Xt=bo.fromDom(ce.cloneNode(!1));un(Xt,"data-mce-index",nt);const qt=At.element.dom;if(qt.length===At.finish&&At.start===0)Rt(At.element,Xt);else{qt.length!==At.finish&&qt.splitText(At.finish);const Qt=qt.splitText(At.start);Rt(bo.fromDom(Qt),Xt)}})})},rs=(re,ce,tt,nt)=>{const At=bt(re,tt),Xt=ac(ce,At);return Aa(Xt,nt),Xt.length},La=(re,ce,tt,nt)=>{const At=tt.getBookmark(),Xt=re.select("td[data-mce-selected],th[data-mce-selected]"),qt=Xt.length>0?io(re,Xt):Or(re,tt.getRng()),Qt=ac(ce,qt);return Aa(Qt,nt),tt.moveToBookmark(At),Qt.length},Dr=re=>re.getAttribute("data-mce-index"),Jo=(re,ce,tt,nt)=>{const At=re.dom.create("span",{"data-mce-bogus":1});At.className="mce-match-marker";const Xt=re.getBody();return se(re,ce,!1),nt?La(re.dom,tt,re.selection,At):rs(re.dom,tt,Xt,At)},hn=re=>{var ce;const tt=re.parentNode;re.firstChild&&tt.insertBefore(re.firstChild,re),(ce=re.parentNode)===null||ce===void 0||ce.removeChild(re)},Er=(re,ce)=>{const tt=[],nt=ot.toArray(re.getBody().getElementsByTagName("span"));if(nt.length)for(let At=0;At<nt.length;At++){const Xt=Dr(nt[At]);Xt===null||!Xt.length||Xt===ce.toString()&&tt.push(nt[At])}return tt},Jr=(re,ce,tt)=>{const nt=ce.get();let At=nt.index;const Xt=re.dom;tt?At+1===nt.count?At=0:At++:At-1===-1?At=nt.count-1:At--,Xt.removeClass(Er(re,nt.index),"mce-match-marker-selected");const qt=Er(re,At);return qt.length?(Xt.addClass(Er(re,At),"mce-match-marker-selected"),re.selection.scrollIntoView(qt[0]),At):-1},Oa=(re,ce)=>{const tt=ce.parentNode;re.remove(ce),tt&&re.isEmpty(tt)&&re.remove(tt)},Ha=(re,ce)=>{const nt="("+re.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return ce?`(?:^|\\s|${ct()})`+nt+`(?=$|\\s|${ct()})`:nt},Is=(re,ce,tt,nt,At,Xt)=>{const qt=re.selection,Qt=Ha(tt,At),Sn=qt.isForward(),xn={regex:new RegExp(Qt,nt?"g":"gi"),matchIndex:1},us=Jo(re,ce,xn,Xt);if(K.browser.isSafari()&&qt.setRng(qt.getRng(),Sn),us){const Ms=Jr(re,ce,!0);ce.set({index:Ms,count:us,text:tt,matchCase:nt,wholeWord:At,inSelection:Xt})}return us},Ws=(re,ce)=>{const tt=Jr(re,ce,!0);ce.set({...ce.get(),index:tt})},bs=(re,ce)=>{const tt=Jr(re,ce,!1);ce.set({...ce.get(),index:tt})},wr=re=>{const ce=Dr(re);return ce!==null&&ce.length>0},de=(re,ce,tt,nt,At)=>{const Xt=ce.get(),qt=Xt.index;let Qt,Sn=qt;nt=nt!==!1;const xn=re.getBody(),us=ot.grep(ot.toArray(xn.getElementsByTagName("span")),wr);for(let Ms=0;Ms<us.length;Ms++){const Da=Dr(us[Ms]);let Va=Qt=parseInt(Da,10);if(At||Va===Xt.index){for(tt.length?(us[Ms].innerText=tt,hn(us[Ms])):Oa(re.dom,us[Ms]);us[++Ms];)if(Va=parseInt(Dr(us[Ms]),10),Va===Qt)Oa(re.dom,us[Ms]);else{Ms--;break}nt&&Sn--}else Qt>qt&&us[Ms].setAttribute("data-mce-index",String(Qt-1))}return ce.set({...Xt,count:At?0:Xt.count-1,index:Sn}),nt?Ws(re,ce):bs(re,ce),!At&&ce.get().count>0},se=(re,ce,tt)=>{let nt,At;const Xt=ce.get(),qt=ot.toArray(re.getBody().getElementsByTagName("span"));for(let Qt=0;Qt<qt.length;Qt++){const Sn=Dr(qt[Qt]);Sn!==null&&Sn.length&&(Sn===Xt.index.toString()&&(nt||(nt=qt[Qt].firstChild),At=qt[Qt].firstChild),hn(qt[Qt]))}if(ce.set({...Xt,index:-1,count:0,text:""}),nt&&At){const Qt=re.dom.createRng();return Qt.setStart(nt,0),Qt.setEnd(At,At.data.length),tt!==!1&&re.selection.setRng(Qt),Qt}else return},Ie=(re,ce)=>ce.get().count>1,Ne=(re,ce)=>ce.get().count>1,Yt=(re,ce)=>({done:Qt=>se(re,ce,Qt),find:(Qt,Sn,xn,us=!1)=>Is(re,ce,Qt,Sn,xn,us),next:()=>Ws(re,ce),prev:()=>bs(re,ce),replace:(Qt,Sn,xn)=>de(re,ce,Qt,Sn,xn)}),fn=re=>{const ce=Ht(Nn.none()),tt=()=>ce.get().each(re);return{clear:()=>{tt(),ce.set(Nn.none())},isSet:()=>ce.get().isSome(),get:()=>ce.get(),set:Qt=>{tt(),ce.set(Nn.some(Qt))}}},so=()=>{const re=fn(ho);return{...re,on:tt=>re.get().each(tt)}},Qo=(re,ce)=>{const tt=so();re.undoManager.add();const nt=ot.trim(re.selection.getContent({format:"text"})),At=Rn=>{Rn.setEnabled("next",Ie(re,ce)),Rn.setEnabled("prev",Ne(re,ce))},Xt=Rn=>{const jo=Rn.getData(),ds=ce.get();ce.set({...ds,matchCase:jo.matchcase,wholeWord:jo.wholewords,inSelection:jo.inselection})},qt=(Rn,jo)=>{ht(["replace","replaceall","prev","next"],jr=>Rn.setEnabled(jr,!jo))},Qt=Rn=>{Rn.redial(cc(!0,Rn.getData()))},Sn=(Rn,jo)=>{K.browser.isSafari()&&K.deviceType.isTouch()&&(jo==="find"||jo==="replace"||jo==="replaceall")&&Rn.focus(jo)},xn=Rn=>{se(re,ce,!1),qt(Rn,!0),At(Rn)},us=Rn=>{const jo=Rn.getData(),ds=ce.get();if(!jo.findtext.length){xn(Rn);return}if(ds.text===jo.findtext&&ds.matchCase===jo.matchcase&&ds.wholeWord===jo.wholewords)Ws(re,ce);else{const Lr=Is(re,ce,jo.findtext,jo.matchcase,jo.wholewords,jo.inselection);Lr<=0&&Qt(Rn),qt(Rn,Lr===0)}At(Rn)},Ms=ce.get(),Da={findtext:nt,replacetext:"",wholewords:Ms.wholeWord,matchcase:Ms.matchCase,inselection:Ms.inSelection},Va=Rn=>{const jo=[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}];return Rn&&jo.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),jo},cc=(Rn,jo)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Va(Rn)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:jo,onChange:(ds,Lr)=>{Rn&&ds.redial(cc(!1,ds.getData())),Lr.name==="findtext"&&ce.get().count>0&&xn(ds)},onAction:(ds,Lr)=>{const jr=ds.getData();switch(Lr.name){case"find":us(ds);break;case"replace":de(re,ce,jr.replacetext)?At(ds):xn(ds);break;case"replaceall":de(re,ce,jr.replacetext,!0,!0),xn(ds);break;case"prev":bs(re,ce),At(ds);break;case"next":Ws(re,ce),At(ds);break;case"matchcase":case"wholewords":case"inselection":Xt(ds),xn(ds);break}Sn(ds,Lr.name)},onSubmit:ds=>{us(ds),Sn(ds,"find")},onClose:()=>{re.focus(),se(re,ce),re.undoManager.add()}});tt.set(re.windowManager.open(cc(!1,Da),{inline:"toolbar"}))},jn=(re,ce)=>{re.addCommand("SearchReplace",()=>{Qo(re,ce)})},uo=(re,ce)=>()=>{Qo(re,ce)},be=(re,ce)=>{re.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:uo(re,ce),icon:"search"}),re.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:uo(re,ce),icon:"search"}),re.shortcuts.add("Meta+F","",uo(re,ce))};var Zo=()=>{Qn.add("searchreplace",re=>{const ce=Ht({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return jn(re,ce),be(re,ce),Yt(re,ce)})};Zo()})();const HG=Ht=>(yG("data-v-efd4c4d9"),Ht=Ht(),CG(),Ht),VG=HG(()=>uW("p",{style:{"margin-bottom":"0"}}," 安装成功后，在框架 /public 目录下创建 tinymce 文件夹，并将 /node_modules/tinymce 目录下的 langs 和 skins 文件夹复制到 /public/tinymce 目录下。 ",-1)),zG=["innerHTML"],lj=aj({__name:"tinymce",setup(Ht){const Qn=mG(),In=lW({language_url:"tinymce/langs/zh-Hans.js",language:"zh-Hans",skin_url:Qn.settings.app.colorScheme==="light"?"tinymce/skins/ui/oxide":"tinymce/skins/ui/oxide-dark",content_css:Qn.settings.app.colorScheme==="light"?"tinymce/skins/content/default/content.min.css":"tinymce/skins/content/dark/content.min.css",min_height:250,max_height:600,selector:"textarea",plugins:"autolink autoresize fullscreen image insertdatetime link lists media preview table wordcount code searchreplace",toolbar:"undo redo | blocks | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | forecolor backcolor removeformat | link image media table insertdatetime searchreplace | preview code fullscreen",branding:!1,menubar:!1,toolbar_mode:"sliding",insertdatetime_formats:["%Y年%m月%d日","%H点%M分%S秒","%Y-%m-%d","%H:%M:%S"],images_upload_handler:Wn=>new Promise(oo=>{const Vt=`data:image/jpeg;base64,${Wn.base64()}`;oo(Vt)})}),Mn=lW("<h1>Fantastic-admin</h1>");cj(()=>{TG.init({})});function Yn(Wn){window.open(Wn,"_blank")}return(Wn,oo)=>{const Vt=aW("el-tag"),Wt=pG,Lt=aW("el-icon"),Oo=aW("el-button"),Yo=bG,ho=vG;return fG(),gG("div",null,[Cv(SG),Cv(Yo,{title:"TinyMCE 编辑器"},{content:yw(()=>[uW("p",null,[cW(" 安装命令："),Cv(Vt,null,{default:yw(()=>[cW("pnpm add tinymce @tinymce/tinymce-vue")]),_:1})]),VG]),default:yw(()=>[Cv(Oo,{onClick:oo[0]||(oo[0]=_n=>Yn("https://github.com/tinymce/tinymce"))},{icon:yw(()=>[Cv(Lt,null,{default:yw(()=>[Cv(Wt,{name:"i-ep:link"})]),_:1})]),default:yw(()=>[cW(" 访问 TinyMCE ")]),_:1})]),_:1}),Cv(ho,null,{default:yw(()=>[Cv(dF(LG),{modelValue:dF(Mn),"onUpdate:modelValue":oo[1]||(oo[1]=_n=>hG(Mn)?Mn.value=_n:null),init:dF(In)},null,8,["modelValue","init"]),uW("div",{class:"preview",innerHTML:dF(Mn)},null,8,zG)]),_:1})])}}});typeof nj=="function"&&nj(lj);const qG=wG(lj,[["__scopeId","data-v-efd4c4d9"]]);export{qG as default};
