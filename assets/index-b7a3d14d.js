import{d as B,r as _,G as x,B as L,aa as g,e as i,o as q,L as E,w as r,g as d,l as h,i as o,V as T,E as k,q as z}from"./index-17000ae8.js";const M=B({__name:"index",props:{modelValue:{type:Boolean,default:!1},parentId:{default:""},id:{default:""},tree:null},emits:["update:modelValue","addNode","editNode"],setup(I,{emit:v}){const n=I,m=_(n.modelValue),C=x(()=>n.id===""?"新增字典":"编辑字典");function V(t,a,p=!1){const u=[];return t.forEach(f=>{const l={...f};l.id===a||p?(l.disabled=!0,l.children&&(l.children=V(l.children,a,!0))):(l.disabled=!1,l.children&&(l.children=V(l.children,a,p))),u.push(l)}),u}const R=x(()=>V(n.tree,n.id)),c=_(),e=_({parentId:n.parentId,id:n.id,name:"",code:""}),U=_({name:[{required:!0,message:"请输入字典名称"}],code:[{required:!0,message:"请输入字典编码"}]});L(()=>{n.id!==""&&g.get("pages_example/dictionary/detail",{params:{id:n.id},baseURL:"/mock/"}).then(t=>{e.value.id=t.data.id,e.value.name=t.data.name,e.value.code=t.data.code})});function N(){e.value.id===""?c.value&&c.value.validate(t=>{t&&g.post("pages_example/dictionary/create",e.value,{baseURL:"/mock/"}).then(a=>{k.success({message:"模拟新增成功",center:!0}),v("addNode",{id:a.data.data,label:e.value.name,code:e.value.code}),b()})}):c.value&&c.value.validate(t=>{t&&g.post("pages_example/dictionary/edit",e.value,{baseURL:"/mock/"}).then(()=>{k.success({message:"模拟编辑成功",center:!0}),v("editNode",{id:e.value.id,label:e.value.name,code:e.value.code},e.value.parentId),b()})})}function b(){m.value=!1}return(t,a)=>{const p=i("el-cascader"),u=i("el-form-item"),f=i("el-input"),l=i("el-form"),y=i("el-button"),w=i("el-dialog");return q(),E(w,{modelValue:o(m),"onUpdate:modelValue":a[3]||(a[3]=s=>T(m)?m.value=s:null),title:o(C),width:"400px","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:a[4]||(a[4]=s=>v("update:modelValue",!1))},{footer:r(()=>[d(y,{size:"large",onClick:b},{default:r(()=>[h(" 取消 ")]),_:1}),d(y,{type:"primary",size:"large",onClick:N},{default:r(()=>[h(" 确定 ")]),_:1})]),default:r(()=>[d(l,{ref_key:"formRef",ref:c,model:o(e),rules:o(U),"label-width":"80px"},{default:r(()=>[d(u,{label:"父级字典",prop:"parentId"},{default:r(()=>[d(p,{modelValue:o(e).parentId,"onUpdate:modelValue":a[0]||(a[0]=s=>o(e).parentId=s),options:o(R),props:{value:"id",emitPath:!1,checkStrictly:!0},"show-all-levels":!1,placeholder:"请选择父级字典，默认为根字典",clearable:""},null,8,["modelValue","options"])]),_:1}),d(u,{label:"字典名称",prop:"name"},{default:r(()=>[d(f,{modelValue:o(e).name,"onUpdate:modelValue":a[1]||(a[1]=s=>o(e).name=s),placeholder:"请输入字典名称",clearable:""},null,8,["modelValue"])]),_:1}),d(u,{label:"字典编码",prop:"code"},{default:r(()=>[d(f,{modelValue:o(e).code,"onUpdate:modelValue":a[2]||(a[2]=s=>o(e).code=s),placeholder:"请输入字典编码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});const G=z(M,[["__scopeId","data-v-877dad5a"]]);export{G as default};
