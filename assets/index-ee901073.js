import{_ as Ie}from"./index-a0a5d690.js";import{d as we,r as f,B as se,aa as Q,a1 as R,e as _,a2 as Ue,j as A,i as a,o as d,f as D,h as m,g as t,w as l,L as i,O as v,l as u,m as G,ab as Se,Q as H,U as J,t as K,V as P,k as W,v as L,E as B,S as Re,_ as Ae,p as Be,n as $e,q as Ne}from"./index-17000ae8.js";import{S as Ee}from"./sortable.esm-be94e56d.js";const b=w=>(Be("data-v-e2b55b20"),w=w(),$e(),w),De={class:"form"},Ke={class:"top-side"},Le={class:"form-left-side"},Oe=b(()=>m("span",{class:"label-tip"},"即 name ，系统唯一",-1)),qe={class:"label-tip"},Me={style:{display:"flex"}},Te=b(()=>m("span",{class:"label-tip"},"请勿在带有参数的路由地址上开启该设置",-1)),je={class:"label-tip"},ze={class:"label-tip"},Fe=b(()=>m("span",{class:"label-tip"},"当缓存规则为“始终缓存”时生效",-1)),Qe=b(()=>m("span",{class:"label-tip"},"如果子路由不在导航显示，则需要设置高亮的上级路由地址",-1)),Ge=b(()=>m("span",{class:"label-tip"},"不宜设置太长，建议控制在4个字符内",-1)),He=b(()=>m("span",{class:"label-tip"},"请设置 http/https 开头的完整外链地址",-1)),Je=b(()=>m("span",{class:"label-tip"},"请勿与外链同时设置，同时设置时，本设置会失效",-1)),Pe=b(()=>m("span",{class:"label-tip"},"请设置有效的长度单位，例如：px/em/rem等",-1)),We={class:"form-right-side"},Xe=b(()=>m("p",null,"设置导航所具备的所有权限，权限池内的权限会用于角色管理",-1)),Ye=b(()=>m("p",{style:{"margin-bottom":"0"}}," 通常只在最子级导航上进行设置 ",-1)),Ze={class:"index"},el={class:"bottom-side"},ll=we({__name:"index",props:{id:{default:""},parentId:{default:""}},emits:["onSubmit"],setup(w,{emit:X}){const Y=w,O=f(!1),U=f(),e=f({id:Y.id,parentId:Y.parentId,path:"",redirect:"",name:"",component:"",meta:{title:"",icon:"",activeIcon:"",defaultOpened:!1,permanent:!1,auth:[],sidebar:!0,breadcrumb:!0,activeMenu:"",cache:[],noCache:[],badge:"",link:"",iframe:"",copyright:!1,paddingBottom:"0px"},auths:[]}),pe=f({path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入显示名称",trigger:"blur"}]});se(()=>{e.value.id!==""&&re()});function re(){O.value=!0,Q.get("pages_example/menu/detail",{baseURL:"/mock/",params:{id:e.value.id}}).then(s=>{O.value=!1,e.value.id=s.data.id,e.value.parentId=s.data.parentId,e.value.path=s.data.path,e.value.redirect=s.data.redirect,e.value.name=s.data.name,e.value.component=s.data.component,e.value.meta=s.data.meta,e.value.auths=s.data.auths})}const h=f(""),q=f(!1),Z=f();function me(s){e.value.meta.auth.splice(e.value.meta.auth.indexOf(s),1)}function ce(){q.value=!0,R(()=>{Z.value.input.focus()})}function ee(){h.value&&(e.value.meta.auth.includes(h.value)?B.warning("标识已存在"):e.value.meta.auth.push(h.value)),q.value=!1,h.value=""}const g=f(""),M=f(!1),le=f();function fe(s){typeof e.value.meta.cache=="object"&&e.value.meta.cache.splice(e.value.meta.cache.indexOf(s),1)}function _e(){M.value=!0,R(()=>{le.value.input.focus()})}function te(){g.value&&typeof e.value.meta.cache=="object"&&(e.value.meta.cache.includes(g.value)?B.warning("规则已存在"):e.value.meta.cache.push(g.value)),M.value=!1,g.value=""}const y=f(""),T=f(!1),ae=f();function ve(s){e.value.meta.noCache.splice(e.value.meta.noCache.indexOf(s),1)}function be(){T.value=!0,R(()=>{ae.value.input.focus()})}function ne(){y.value&&(e.value.meta.noCache.includes(y.value)?B.warning("规则已存在"):e.value.meta.noCache.push(y.value)),T.value=!1,y.value=""}const j=f(),oe=f(0);se(()=>{ue()});function he(){e.value.auths.push({name:"",value:""}),R(()=>{j.value.setScrollTop(e.value.auths.length*50)})}function ge(s){e.value.auths.splice(s,1)}function ue(){const s=j.value.$el.querySelector(".el-table__body-wrapper tbody");Ee.create(s,{handle:".sortable",animation:300,ghostClass:"ghost",onEnd:({newIndex:o,oldIndex:k})=>{if(o===void 0||k===void 0)return;const c=e.value.auths.splice(k,1)[0];e.value.auths.splice(o,0,c),oe.value+=1,R(()=>ue())}})}function ye(){e.value.id===""?U.value&&U.value.validate(s=>{s&&Q.post("pages_example/menu/create",e.value,{baseURL:"/mock/"}).then(()=>{B.success({message:"模拟新增成功",center:!0}),X("onSubmit")})}):U.value&&U.value.validate(s=>{s&&Q.post("pages_example/menu/edit",e.value,{baseURL:"/mock/"}).then(()=>{B.success({message:"模拟编辑成功",center:!0}),X("onSubmit")})})}return(s,o)=>{const k=Re,c=_("el-input"),p=_("el-form-item"),r=_("el-col"),$=_("el-link"),de=_("el-row"),x=Ae,C=_("el-icon"),z=_("el-tooltip"),N=_("el-tag"),I=_("el-button"),F=_("el-space"),ie=Ie,S=_("el-switch"),Ve=_("el-scrollbar"),E=_("el-table-column"),ke=_("el-table"),xe=_("el-form"),Ce=Ue("loading");return A((d(),D("div",De,[m("div",Ke,[t(xe,{ref_key:"formRef",ref:U,model:a(e),rules:a(pe),"label-position":"top"},{default:l(()=>[m("div",Le,[t(Ve,null,{default:l(()=>[a(e).parentId?(d(),i(k,{key:0,title:"基础配置",content:"标准路由配置，包含 path/redirect/name/component"})):v("",!0),a(e).parentId?(d(),i(de,{key:1,gutter:30,style:{padding:"20px"}},{default:l(()=>[t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"路由地址",prop:"path"},{default:l(()=>[t(c,{modelValue:a(e).path,"onUpdate:modelValue":o[0]||(o[0]=n=>a(e).path=n),clearable:"",placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"重定向",prop:"redirect"},{default:l(()=>[t(c,{modelValue:a(e).redirect,"onUpdate:modelValue":o[1]||(o[1]=n=>a(e).redirect=n),clearable:"",placeholder:"请输入重定向地址"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{prop:"name"},{label:l(()=>[u(" 路由命名 "),Oe]),default:l(()=>[t(c,{modelValue:a(e).name,"onUpdate:modelValue":o[2]||(o[2]=n=>a(e).name=n),clearable:"",placeholder:"请输入路由命名"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{prop:"component"},{label:l(()=>[u(" 组件路径 "),m("span",qe,[u(" 顶级路由请设置“"),t($,{type:"primary",underline:!1,onClick:o[3]||(o[3]=G(n=>a(e).component="Layout",["prevent"]))},{default:l(()=>[u("Layout")]),_:1}),u("”，中间层级路由无需设置 ")])]),default:l(()=>[t(c,{modelValue:a(e).component,"onUpdate:modelValue":o[4]||(o[4]=n=>a(e).component=n),clearable:"",placeholder:"请输入完整组件路径"},Se({_:2},[a(e).component!=="Layout"?{name:"prepend",fn:l(()=>[u(" /src/views/ ")]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})]),_:1})):v("",!0),t(k,{title:"扩展配置"},{content:l(()=>[m("div",Me,[u(" 框架扩展配置，详细配置介绍请查看"),t($,{type:"primary",href:"https://hooray.gitee.io/fantastic-admin/guide/router.html#%E5%AF%BC%E8%88%AA%E9%85%8D%E7%BD%AE",target:"_blank"},{default:l(()=>[u(" 框架文档 ")]),_:1})])]),_:1}),t(de,{gutter:30,style:{padding:"20px"}},{default:l(()=>[t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"显示名称",prop:"meta.title"},{default:l(()=>[t(c,{modelValue:a(e).meta.title,"onUpdate:modelValue":o[5]||(o[5]=n=>a(e).meta.title=n),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.auth"},{label:l(()=>[u(" 鉴权标识 "),t(z,{content:"当设置多个标识时，只要命中其中一个则鉴权通过",placement:"top"},{default:l(()=>[t(C,null,{default:l(()=>[t(x,{name:"i-ri:question-line"})]),_:1})]),_:1})]),default:l(()=>[t(F,null,{default:l(()=>[(d(!0),D(H,null,J(a(e).meta.auth,n=>(d(),i(N,{key:n,size:"large",closable:"","disable-transitions":!1,onClose:V=>me(n)},{default:l(()=>[u(K(n),1)]),_:2},1032,["onClose"]))),128)),a(q)?(d(),i(c,{key:0,ref_key:"InputAuthRef",ref:Z,modelValue:a(h),"onUpdate:modelValue":o[6]||(o[6]=n=>P(h)?h.value=n:null),style:{width:"200px"},onKeyup:W(ee,["enter"]),onBlur:ee},null,8,["modelValue","onKeyup"])):(d(),i(I,{key:1,onClick:ce},{default:l(()=>[u(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"默认图标",prop:"meta.icon"},{default:l(()=>[t(ie,{modelValue:a(e).meta.icon,"onUpdate:modelValue":o[7]||(o[7]=n=>a(e).meta.icon=n)},null,8,["modelValue"])]),_:1})]),_:1}),t(r,{xl:12,lg:24},{default:l(()=>[t(p,{label:"激活图标",prop:"meta.activeIcon"},{default:l(()=>[t(ie,{modelValue:a(e).meta.activeIcon,"onUpdate:modelValue":o[8]||(o[8]=n=>a(e).meta.activeIcon=n)},null,8,["modelValue"])]),_:1})]),_:1}),a(e).parentId?(d(),i(r,{key:0,xl:12,lg:24},{default:l(()=>[t(p,{label:"默认展开",prop:"meta.defaultOpened"},{default:l(()=>[t(S,{modelValue:a(e).meta.defaultOpened,"onUpdate:modelValue":o[9]||(o[9]=n=>a(e).meta.defaultOpened=n),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:1,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.permanent"},{label:l(()=>[u(" 常驻标签页 "),Te]),default:l(()=>[t(S,{modelValue:a(e).meta.permanent,"onUpdate:modelValue":o[10]||(o[10]=n=>a(e).meta.permanent=n),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:2,xl:12,lg:24},{default:l(()=>[t(p,{label:"在导航显示",prop:"meta.sidebar"},{default:l(()=>[t(S,{modelValue:a(e).meta.sidebar,"onUpdate:modelValue":o[11]||(o[11]=n=>a(e).meta.sidebar=n),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:3,xl:12,lg:24},{default:l(()=>[t(p,{label:"在面包屑显示",prop:"meta.breadcrumb"},{default:l(()=>[t(S,{modelValue:a(e).meta.breadcrumb,"onUpdate:modelValue":o[12]||(o[12]=n=>a(e).meta.breadcrumb=n),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:4,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.cache"},{label:l(()=>[u(" 缓存规则 "),t(z,{content:"当跳转到设置的路由时，则会对当前路由进行缓存",placement:"top"},{default:l(()=>[t(C,null,{default:l(()=>[t(x,{name:"i-ri:question-line"})]),_:1})]),_:1}),A(m("span",je,[u("切换为"),t($,{type:"primary",underline:!1,onClick:o[13]||(o[13]=G(n=>a(e).meta.cache=!0,["prevent"]))},{default:l(()=>[u("始终缓存")]),_:1})],512),[[L,typeof a(e).meta.cache=="object"]]),A(m("span",ze,[u("切换为"),t($,{type:"primary",underline:!1,onClick:o[14]||(o[14]=G(n=>a(e).meta.cache=[],["prevent"]))},{default:l(()=>[u("规则模式")]),_:1})],512),[[L,typeof a(e).meta.cache=="boolean"]])]),default:l(()=>[A(t(F,null,{default:l(()=>[(d(!0),D(H,null,J(a(e).meta.cache,n=>(d(),i(N,{key:n,size:"large",closable:"","disable-transitions":!1,onClose:V=>fe(n)},{default:l(()=>[u(K(n),1)]),_:2},1032,["onClose"]))),128)),a(M)?(d(),i(c,{key:0,ref_key:"InputCacheRef",ref:le,modelValue:a(g),"onUpdate:modelValue":o[15]||(o[15]=n=>P(g)?g.value=n:null),style:{width:"200px"},onKeyup:W(te,["enter"]),onBlur:te},null,8,["modelValue","onKeyup"])):(d(),i(I,{key:1,onClick:_e},{default:l(()=>[u(" 新增 ")]),_:1}))]),_:1},512),[[L,typeof a(e).meta.cache=="object"]]),A(m("div",null," 始终缓存 ",512),[[L,typeof a(e).meta.cache=="boolean"]])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:5,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.noCache"},{label:l(()=>[u(" 不缓存规则 "),t(z,{content:"当跳转到设置的路由时，则会对当前路由取消缓存",placement:"top"},{default:l(()=>[t(C,null,{default:l(()=>[t(x,{name:"i-ri:question-line"})]),_:1})]),_:1}),Fe]),default:l(()=>[t(F,null,{default:l(()=>[(d(!0),D(H,null,J(a(e).meta.noCache,n=>(d(),i(N,{key:n,size:"large",closable:"","disable-transitions":!1,onClose:V=>ve(n)},{default:l(()=>[u(K(n),1)]),_:2},1032,["onClose"]))),128)),a(T)?(d(),i(c,{key:0,ref_key:"InputNoCacheRef",ref:ae,modelValue:a(y),"onUpdate:modelValue":o[16]||(o[16]=n=>P(y)?y.value=n:null),style:{width:"200px"},onKeyup:W(ne,["enter"]),onBlur:ne},null,8,["modelValue","onKeyup"])):(d(),i(I,{key:1,onClick:be},{default:l(()=>[u(" 新增 ")]),_:1}))]),_:1})]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:6,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.activeMenu"},{label:l(()=>[u(" 高亮导航 "),Qe]),default:l(()=>[t(c,{modelValue:a(e).meta.activeMenu,"onUpdate:modelValue":o[17]||(o[17]=n=>a(e).meta.activeMenu=n),clearable:"",placeholder:"请输入高亮导航的完整路由地址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:7,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.badge"},{label:l(()=>[u(" 徽标 "),Ge]),default:l(()=>[t(c,{modelValue:a(e).meta.badge,"onUpdate:modelValue":o[18]||(o[18]=n=>a(e).meta.badge=n),clearable:"",placeholder:"请输入徽标显示内容"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:8,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.link"},{label:l(()=>[u(" 访问外链 "),He]),default:l(()=>[t(c,{modelValue:a(e).meta.link,"onUpdate:modelValue":o[19]||(o[19]=n=>a(e).meta.link=n),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:9,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.iframe"},{label:l(()=>[u(" 内嵌网页 "),Je]),default:l(()=>[t(c,{modelValue:a(e).meta.iframe,"onUpdate:modelValue":o[20]||(o[20]=n=>a(e).meta.iframe=n),clearable:"",placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:10,xl:12,lg:24},{default:l(()=>[t(p,{label:"底部版权",prop:"meta.copyright"},{default:l(()=>[t(S,{modelValue:a(e).meta.copyright,"onUpdate:modelValue":o[21]||(o[21]=n=>a(e).meta.copyright=n),"inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0),a(e).parentId?(d(),i(r,{key:11,xl:12,lg:24},{default:l(()=>[t(p,{prop:"meta.paddingBottom"},{label:l(()=>[u(" 底部填充高度 "),Pe]),default:l(()=>[t(c,{modelValue:a(e).meta.paddingBottom,"onUpdate:modelValue":o[22]||(o[22]=n=>a(e).meta.paddingBottom=n),clearable:"",placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1})]),_:1})):v("",!0)]),_:1})]),_:1})]),m("div",We,[t(k,{title:"权限池"},{content:l(()=>[Xe,Ye]),_:1}),(d(),i(ke,{ref_key:"authsTableRef",ref:j,key:a(oe),data:a(e).auths,border:"",stripe:"","highlight-current-row":""},{default:l(()=>[t(E,{width:"60",align:"center",fixed:""},{header:l(()=>[t(I,{type:"primary",size:"small",plain:"",circle:"",onClick:he},{icon:l(()=>[t(C,null,{default:l(()=>[t(x,{name:"i-ep:plus"})]),_:1})]),_:1})]),default:l(n=>[m("span",Ze,K(n.$index+1),1),t(I,{type:"danger",size:"small",plain:"",circle:"",class:"delete",onClick:V=>ge(n.$index)},{icon:l(()=>[t(C,null,{default:l(()=>[t(x,{name:"i-ep:delete"})]),_:1})]),_:2},1032,["onClick"])]),_:1}),t(E,{width:"80",align:"center",fixed:""},{header:l(()=>[u(" 排序 ")]),default:l(()=>[t(N,{type:"info",class:"sortable"},{default:l(()=>[t(C,null,{default:l(()=>[t(x,{name:"i-ep:d-caret"})]),_:1})]),_:1})]),_:1}),t(E,{label:"名称"},{default:l(n=>[t(c,{modelValue:n.row.name,"onUpdate:modelValue":V=>n.row.name=V},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(E,{label:"标识"},{default:l(n=>[t(c,{modelValue:n.row.value,"onUpdate:modelValue":V=>n.row.value=V},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]))])]),_:1},8,["model","rules"])]),m("div",el,[t(I,{type:"primary",onClick:ye},{default:l(()=>[u(" 提交 ")]),_:1})])])),[[Ce,a(O)]])}}});const ol=Ne(ll,[["__scopeId","data-v-e2b55b20"]]);export{ol as default};
