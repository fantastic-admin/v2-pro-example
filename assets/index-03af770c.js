import{d as I,r as f,B as S,aa as P,e as r,o as p,L as c,w as g,g as m,i as o,f as U,Q as D,U as R,V as q,q as E}from"./index-17000ae8.js";import{u as F}from"./usePagination-e0d8e4d1.js";const M=I({__name:"index",props:{modelValue:{type:Boolean,default:!1},id:{default:""},info:{default:{}}},emits:["update:modelValue"],setup(_,{emit:b}){const t=_,u=f(t.modelValue),{pagination:s,getParams:h,onSizeChange:v,onCurrentChange:C,onSortChange:x}=F(),e=f({loading:!1,dataList:[],border:!1,stripe:!1,header:!0,columns:[]});S(()=>{i()});function i(){e.value.loading=!0;const l=h();t.id&&(l.id=t.id),t.info.code&&(l.code=t.info.code),P.get("pages_example/table/preview",{baseURL:"/mock/",params:l}).then(a=>{e.value.loading=!1,e.value.dataList=a.data.list,s.value.total=a.data.total,t.id?(e.value.border=a.data.tableInfo.border,e.value.stripe=a.data.tableInfo.stripe,e.value.header=a.data.tableInfo.header,e.value.columns=a.data.tableInfo.columns.filter(d=>d.enable)):(e.value.border=t.info.border,e.value.stripe=t.info.stripe,e.value.header=t.info.header,e.value.columns=t.info.columns.filter(d=>d.enable))})}function w(l){v(l).then(()=>i())}function y(l=1){C(l).then(()=>i())}function V({prop:l,order:a}){x(l,a).then(()=>i())}return(l,a)=>{const d=r("el-table-column"),z=r("el-table"),k=r("el-pagination"),L=r("el-dialog");return p(),c(L,{modelValue:o(u),"onUpdate:modelValue":a[0]||(a[0]=n=>q(u)?u.value=n:null),title:"预览",width:"80%","close-on-click-modal":!1,"append-to-body":"","destroy-on-close":"",onClosed:a[1]||(a[1]=n=>b("update:modelValue",!1))},{default:g(()=>[m(z,{data:o(e).dataList,border:o(e).border,stripe:o(e).stripe,"show-header":o(e).header,onSortChange:V},{default:g(()=>[(p(!0),U(D,null,R(o(e).columns,(n,B)=>(p(),c(d,{key:B,label:n.name,prop:n.field,width:n.width,align:n.align,sortable:n.sortable,fixed:n.fixed?n.fixed:!1},null,8,["label","prop","width","align","sortable","fixed"]))),128))]),_:1},8,["data","border","stripe","show-header"]),m(k,{"current-page":o(s).page,total:o(s).total,"page-size":o(s).size,"page-sizes":o(s).sizes,layout:o(s).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:y,onSizeChange:w},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1},8,["modelValue"])}}});const T=E(M,[["__scopeId","data-v-3007df9e"]]);export{T as default};
