import{d as S,bE as H,r as g,B as K,o as w,f as C,j as Z,v as G,i,K as J,t as Q,O as T,q as U,g as h,w as tt,S as et,R as ot,x as W}from"./index-17000ae8.js";function B(t,e,o,l){return parseFloat((e-l*e/t+o).toFixed(2))}function lt(t){[...t.querySelectorAll("*")].forEach(e=>t.removeChild(e))}function nt(t){return t.value}function k(t,e){const o=document.createElementNS("http://www.w3.org/2000/svg",t);for(const l in e)o.setAttribute(l,e[l]);return o}function at(t,e,o){if(lt(t),e.length<=1)return;o=o||{},typeof e[0]=="number"&&(e=e.map(n=>({value:n})));const l=o.onmousemove,r=o.onmouseout,p="interactive"in o?o.interactive:!!l,a=o.spotRadius||2,u=a*2,V=o.cursorWidth||2,$=parseFloat(t.attributes["stroke-width"].value),q=o.fetch||nt,x=e.map(n=>q(n)),I=parseFloat(t.attributes.width.value)-u*2,y=parseFloat(t.attributes.height.value),F=y-$*2-u,N=Math.max(...x),c=-1e3,L=x.length-1,M=I/L,m=[],O=B(N,F,$+a,x[0]);let A=`M${u} ${O}`;x.forEach((n,d)=>{const s=d*M+u,f=B(N,F,$+a,n);m.push(Object.assign({},e[d],{index:d,x:s,y:f})),A+=` L ${s} ${f}`});const P=k("path",{class:"sparkline--line",d:A,fill:"none"}),X=`${A} V ${y} L ${u} ${y} Z`,Y=k("path",{class:"sparkline--fill",d:X,stroke:"none"});if(t.appendChild(Y),t.appendChild(P),!p)return;const v=k("line",{class:"sparkline--cursor",x1:c,x2:c,y1:0,y2:y,"stroke-width":V}),b=k("circle",{class:"sparkline--spot",cx:c,cy:c,r:a});t.appendChild(v),t.appendChild(b);const E=k("rect",{width:t.attributes.width.value,height:t.attributes.height.value,style:"fill: transparent; stroke: transparent",class:"sparkline--interaction-layer"});t.appendChild(E),E.addEventListener("mouseout",n=>{v.setAttribute("x1",c.toString()),v.setAttribute("x2",c.toString()),b.setAttribute("cx",c.toString()),r&&r(n)}),E.addEventListener("mousemove",n=>{const d=n.offsetX;let s=m.find(z=>z.x>=d);s||(s=m[L]);const f=m[m.indexOf(s)-1];let _,R;f?(R=f.x+(s.x-f.x)/2,_=d>=R?s:f):_=s;const D=_.x,j=_.y;b.setAttribute("cx",D),b.setAttribute("cy",j),v.setAttribute("x1",D),v.setAttribute("x2",D),l&&l(n,_)})}const st={class:"sparkline"},rt=["width","height","stroke-width","stroke","fill"],it=S({name:"Sparkline"}),ut=S({...it,props:{value:{type:Array,require:!0},width:{type:Number,default:100},height:{type:Number,default:30},strokeWidth:{type:Number,default:3},strokeColor:{type:String,default:"#dc2b33"},fillColor:{type:String,default:"transparent"},cursorColor:{type:String,default:"#dc2b33"},spotColor:{type:String,default:"#dc2b33"},tooltip:{type:Boolean,default:!1}},setup(t){const e=t;H(r=>({"24a7da3c":t.cursorColor,"2a2777d0":t.spotColor}));const o=g(),l=g({show:!1,content:"",top:0,left:0});return K(()=>{at(o.value,e.value,e.tooltip&&{onmousemove:(r,p)=>{l.value.show=!0,l.value.content=p.tooltip,l.value.top=r.offsetY,l.value.left=r.offsetX+20},onmouseout:()=>{l.value.show=!1}})}),(r,p)=>(w(),C("div",st,[(w(),C("svg",{ref_key:"sparklineRef",ref:o,width:t.width,height:t.height,"stroke-width":t.strokeWidth,stroke:t.strokeColor,fill:t.fillColor},null,8,rt)),t.tooltip?Z((w(),C("span",{key:0,class:"tooltip",style:J([`left: ${i(l).left}px`,`top: ${i(l).top}px`])},Q(i(l).content),5)),[[G,i(l).show]]):T("",!0)]))}});const ct=U(ut,[["__scopeId","data-v-17763f03"]]),ft=S({name:"ComponentExampleSparkline"}),pt=S({...ft,setup(t){const e=g([1,5,2,4,8,3,7]),o=g([{tooltip:"值：1",value:1},{tooltip:"值：3",value:3},{tooltip:"值：5",value:5},{tooltip:"值：8",value:8},{tooltip:"值：4",value:4},{tooltip:"值：6",value:6},{tooltip:"值：9",value:9}]);return(l,r)=>{const p=et,a=ct,u=ot;return w(),C("div",null,[h(p,{title:"迷你图",content:"Sparkline"}),h(u,null,{default:tt(()=>[h(a,{value:i(e)},null,8,["value"]),h(a,{value:i(e),"stroke-color":"#409eff","fill-color":"#b3d8ff"},null,8,["value"]),h(a,{value:i(o),tooltip:""},null,8,["value"]),h(a,{value:i(o),tooltip:"","stroke-color":"#409eff","fill-color":"#b3d8ff","cursor-color":"#e6a23c","spot-color":"#909399"},null,8,["value"])]),_:1})])}}});typeof W=="function"&&W(pt);export{pt as default};
