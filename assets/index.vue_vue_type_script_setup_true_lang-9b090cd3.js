import{d as h,r as p,aa as c,B as E,E as g,e as i,a2 as L,j as q,i as o,o as y,f as B,g as l,w as t,l as _}from"./index-17000ae8.js";const N=h({__name:"index",props:{id:{type:[Number,String],default:""}},setup(b,{expose:v}){const x=b,f=p(!1),m=p(),e=p({id:x.id,account:"",name:"",mobile:"",sex:"2"}),V=p({account:[{required:!0,message:"请输入帐号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(r,a,s)=>{const n={key:"mobile",value:a};e.value.id!==""&&(n.id=e.value.id),c.get("pages_example/manager/check",{baseURL:"/mock/",params:n}).then(d=>{d.data.exist?s(new Error("手机号已存在")):s()})},trigger:"blur"}]});E(()=>{e.value.id!==""&&k()});function k(){f.value=!0,c.get("pages_example/manager/detail",{baseURL:"/mock/",params:{id:e.value.id}}).then(r=>{f.value=!1,e.value.account=r.data.account,e.value.name=r.data.name,e.value.mobile=r.data.mobile})}return v({submit(){return new Promise(r=>{e.value.id===""?m.value&&m.value.validate(a=>{a&&c.post("pages_example/manager/create",e.value,{baseURL:"/mock/"}).then(()=>{g.success({message:"模拟新增成功",center:!0}),r()})}):m.value&&m.value.validate(a=>{a&&c.post("pages_example/manager/edit",e.value,{baseURL:"/mock/"}).then(()=>{g.success({message:"模拟编辑成功",center:!0}),r()})})})}}),(r,a)=>{const s=i("el-input"),n=i("el-form-item"),d=i("el-radio-button"),U=i("el-radio-group"),R=i("el-form"),w=L("loading");return q((y(),B("div",null,[l(R,{ref_key:"formRef",ref:m,model:o(e),rules:o(V),"label-width":"120px","label-suffix":"："},{default:t(()=>[l(n,{label:"帐号",prop:"account"},{default:t(()=>[l(s,{modelValue:o(e).account,"onUpdate:modelValue":a[0]||(a[0]=u=>o(e).account=u),placeholder:"请输入帐号"},null,8,["modelValue"])]),_:1}),l(n,{label:"姓名",prop:"name"},{default:t(()=>[l(s,{modelValue:o(e).name,"onUpdate:modelValue":a[1]||(a[1]=u=>o(e).name=u),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(n,{label:"手机号",prop:"mobile"},{default:t(()=>[l(s,{modelValue:o(e).mobile,"onUpdate:modelValue":a[2]||(a[2]=u=>o(e).mobile=u),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(n,{label:"性别",prop:"sex"},{default:t(()=>[l(U,{modelValue:o(e).sex,"onUpdate:modelValue":a[3]||(a[3]=u=>o(e).sex=u)},{default:t(()=>[l(d,{label:"2"},{default:t(()=>[_(" 保密 ")]),_:1}),l(d,{label:"1"},{default:t(()=>[_(" 男 ")]),_:1}),l(d,{label:"0"},{default:t(()=>[_(" 女 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[w,o(f)]])}}});export{N as _};
