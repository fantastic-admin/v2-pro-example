import{_ as G}from"./index-a391b149.js";import{y as K,b as J,C as $,d as U,u as Q,D as X,F as Y,G as R,B as Z,H as S,I as ee,e as W,o as M,f as j,h as v,g as s,J as N,i as o,K as te,j as A,v as D,w as B,T as oe,L as I,M as ie,N as ae,O as E,P as se,_ as ne,q as le}from"./index-17000ae8.js";import re from"./iframe-7c00fa4a.js";import ce from"./link-78a9f6f8.js";import me from"./index-2cb02538.js";import pe from"./index-f0133804.js";import de from"./index-4e71d4ae.js";import ue from"./index-7f1d91e6.js";import fe from"./index-1e98b4d4.js";import he from"./index-caf1dbf3.js";import _e from"./index-4b5721cc.js";import ge from"./index-23b411ae.js";import ye from"./index-f09526d0.js";import{u as H}from"./useMainPage-b6113823.js";import{u as be}from"./useMenu-37a04e61.js";import"./index-0c55581d.js";import"./logo-5973ee4a.js";import"./index-9e2c3e15.js";import"./index.vue_vue_type_script_setup_true_name_I18nSelector_lang-4607c1fd.js";import"./index-bddf0592.js";import"./notification-4c1855be.js";import"./main-50b7c626.js";import"./sub-6743b229.js";import"./index-5b5d528f.js";import"./sortable.esm-be94e56d.js";import"./index-d8bfb162.js";import"./index-afeb377e.js";function ve(){const d={},e={id:"wm_div_id",prefix:"mask_div_id",text:"测试水印",x:20,y:20,rows:0,cols:0,x_space:50,y_space:50,font:"微软雅黑",color:"black",fontsize:"18px",alpha:.15,width:100,height:100,angle:15,parent_width:0,parent_height:0,parent_node:null,monitor:!0};let t=!1;const g=new MutationObserver(f);function m(a){var O;Object.assign(e,a);const p=document.getElementById(e.id);(O=p==null?void 0:p.parentNode)==null||O.removeChild(p);const w=e.parent_node,n=w||document.body,x=Math.max(n.scrollWidth,n.clientWidth),h=Math.max(n.scrollHeight,n.clientHeight);let b=0,C=0;a.parent_width||a.parent_height?n&&(b=n.offsetTop||0,C=n.offsetLeft||0,e.x=e.x+C,e.y=e.y+b):n&&(b=n.offsetTop||0,C=n.offsetLeft||0);let c=document.getElementById(e.id),k=null;if(c)c.shadowRoot&&(k=c.shadowRoot);else{c=document.createElement("div"),c.id=e.id,c.setAttribute("style","pointer-events: none !important; display: block !important"),typeof c.attachShadow=="function"?k=c.attachShadow({mode:"open"}):k=c;const l=n.children,_=Math.floor(Math.random()*(l.length-1));l[_]?n.insertBefore(c,l[_]):n.appendChild(c)}e.cols=Math.floor((x-e.x)/(e.width+e.x_space));const V=Math.floor((x-e.x-e.width*e.cols)/e.cols);e.x_space=V&&e.x_space;let z;e.rows=Math.floor((h-e.y)/(e.height+e.y_space));const F=Math.floor((h-e.y-e.height*e.rows)/e.rows);e.y_space=F&&e.y_space;let L;w?(z=e.x+e.width*e.cols+e.x_space*(e.cols-1),L=e.y+e.height*e.rows+e.y_space*(e.rows-1)):(z=C+e.x+e.width*e.cols+e.x_space*(e.cols-1),L=b+e.y+e.height*e.rows+e.y_space*(e.rows-1));let P,T;for(let l=0;l<e.rows;l++){w?T=b+e.y+(e.y_space+e.height)*l:T=e.y+(h-L)/2+(e.y_space+e.height)*l;for(let _=0;_<e.cols;_++){w?P=C+e.x+(x-z)/2+(e.width+e.x_space)*_:P=e.x+(x-z)/2+(e.width+e.x_space)*_;const i=document.createElement("div"),q=document.createTextNode(e.text);i.appendChild(q),i.id=e.prefix+l+_,i.style.transform=`rotate(-${e.angle}deg)`,i.style.visibility="",i.style.position="absolute",i.style.left=`${P}px`,i.style.top=`${T}px`,i.style.overflow="hidden",i.style.zIndex="9999999",i.style.opacity=`${e.alpha}`,i.style.fontSize=e.fontsize,i.style.fontFamily=e.font,i.style.color=e.color,i.style.textAlign="center",i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.display="block",i.style.userSelect="none",k==null||k.appendChild(i)}}if(e.monitor){const l={childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"],attributeOldValue:!0};g.observe(n,l),g.observe(document.getElementById(e.id).shadowRoot,l)}}function y(){var p;const a=document.getElementById(e.id);(p=a==null?void 0:a.parentNode)==null||p.removeChild(a),g.disconnect()}function f(a){if(t){t=!1;return}(d&&a.length===1||a.length===1&&a[0].removedNodes.length>=1)&&m(d)}return{init:function(a){Object.assign(d,a),m(a)},remove:function(){t=!0,y()}}}function we(){const d=K(),e=J(),{init:t,remove:g}=ve();$(()=>d.settings.app.enableWatermark,f=>{f?m():y()},{immediate:!0}),$(()=>d.settings.app.colorScheme,()=>{d.settings.app.enableWatermark&&m()});function m(){t({text:`Fantastic-admin 水印测试 ${e.account}`,width:150,x:0,y:0,x_space:50,y_space:50,alpha:.1,color:d.settings.app.colorScheme==="light"?"black":"white"})}function y(){try{g()}catch{}}return{loadWatermark:m,removeWatermark:y}}const xe={class:"layout"},ke={class:"wrapper"},Se={class:"main"},Me={key:1},Ce=U({name:"Layout"}),ze=U({...Ce,setup(d){const e=Q(),t=K(),g=X(),m=Y(),y=R(()=>!!e.meta.iframe),f=R(()=>!!e.meta.link);return we(),$(()=>t.settings.menu.subMenuCollapse,r=>{t.mode==="mobile"&&(r?document.body.classList.remove("overflow-hidden"):document.body.classList.add("overflow-hidden"))}),$(()=>e.path,()=>{t.mode==="mobile"&&t.$patch(r=>{r.settings.menu.subMenuCollapse=!0})}),Z(()=>{S("f5",r=>{t.settings.toolbar.enablePageReload&&(r.preventDefault(),H().reload())}),S("alt+`",r=>{t.settings.menu.enableHotkeys&&(r.preventDefault(),be().switchTo(m.actived+1<m.allMenus.length?m.actived+1:0))}),S("alt+up,alt+down",(r,u)=>{switch(r.preventDefault(),u.key){case"alt+up":H().maximize(!0);break;case"alt+down":H().maximize(!1);break}})}),ee(()=>{S.unbind("f5"),S.unbind("alt+`"),S.unbind("alt+up,alt+down")}),(r,u)=>{const a=ne,p=W("el-icon"),w=W("router-view"),n=G,x=W("el-backtop");return M(),j("div",xe,[v("div",{id:"app-main",class:N({"main-page-maximize":o(t).mainPageMaximizeStatus})},[s(me),v("div",ke,[v("div",{class:N(["sidebar-container",{show:o(t).mode==="mobile"&&!o(t).settings.menu.subMenuCollapse}])},[s(pe),s(de)],2),v("div",{class:N(["sidebar-mask",{show:o(t).mode==="mobile"&&!o(t).settings.menu.subMenuCollapse}]),onClick:u[0]||(u[0]=h=>o(t).toggleSidebarCollapse())},null,2),v("div",{class:"main-container",style:te({"padding-bottom":o(e).meta.paddingBottom})},[s(ue),v("div",Se,[A(v("div",{class:"exit-main-page-maximize",onClick:u[1]||(u[1]=h=>o(t).setMainPageMaximize())},[s(p,null,{default:B(()=>[s(a,{name:"i-ri:logout-box-line"})]),_:1})],512),[[D,o(t).mainPageMaximizeStatus]]),s(w,null,{default:B(({Component:h,route:b})=>[s(oe,{name:o(t).settings.mainPage.enableTransition?o(t).settings.mainPage.transitionMode:"",mode:"out-in",appear:""},{default:B(()=>[(M(),I(ie,{include:o(g).list},[A((M(),I(ae(h),{key:b.fullPath})),[[D,!(o(y)||o(f))]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),A(s(re,null,null,512),[[D,o(y)&&!o(f)]]),o(f)?(M(),I(ce,{key:0})):E("",!0)]),s(n)],4)]),s(x,{right:20,bottom:20,title:"回到顶部"})],2),s(fe),o(t).settings.app.enableUserPreferences?(M(),I(he,{key:0})):E("",!0),s(_e),o(t).settings.app.enableAppSetting?(M(),j("div",Me,[s(p,{class:"app-setting",onClick:u[2]||(u[2]=h=>o(se).emit("global-app-setting-toggle"))},{default:B(()=>[s(a,{name:"i-uiw:setting-o"})]),_:1}),s(ge)])):E("",!0),s(ye)])}}});const tt=le(ze,[["__scopeId","data-v-566b6632"]]);export{tt as default};
