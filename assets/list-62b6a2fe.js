import{d as L,u as X,bZ as Y,r as M,B as ee,P as z,b5 as te,aa as k,e as i,a2 as ae,o as m,f as oe,g as t,w as a,i as o,l as d,L as c,O as g,k as ne,j as le,J as se,b_ as ie,E as re,_ as de,S as ue,R as pe,q as me,x}from"./index-17000ae8.js";import{_ as ce}from"./index-bc97356d.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang-5aeb5cf3.js";import{u as fe}from"./usePagination-e0d8e4d1.js";import"./index.vue_vue_type_script_setup_true_lang-b49e6789.js";const ge=L({name:"PagesExampleDepartmentJobList"}),w=L({...ge,setup(be){const{pagination:p,getParams:D,onSizeChange:P,onCurrentChange:$,onSortChange:E}=fe(),_=X(),b=Y(),V=M(),e=M({loading:!1,tableAutoHeight:!1,formMode:"dialog",formModeProps:{visible:!1,id:""},search:{title:""},batch:{enable:!1,selectionDataList:[]},dataList:[],department:""});ee(()=>{B(),u(),e.value.formMode==="router"&&z.on("get-data-list",()=>{u()})}),te(()=>{e.value.formMode==="router"&&z.off("get-data-list")});function B(){k.get("pages_example/department/detail",{baseURL:"/mock/",params:{id:_.params.department_id}}).then(n=>{e.value.department=n.data.title})}function u(){e.value.loading=!0;const n=D();n.department_id=_.params.department_id,e.value.search.title&&(n.title=e.value.search.title),k.get("pages_example/job/list",{baseURL:"/mock/",params:n}).then(l=>{e.value.loading=!1,e.value.dataList=l.data.list,p.value.total=l.data.total})}function R(n){P(n).then(()=>u())}function f(n=1){$(n).then(()=>u())}function S({prop:n,order:l}){E(n,l).then(()=>u())}function U(){e.value.formMode==="router"?b.open({name:"pagesExampleGeneralJobCreate",params:{department_id:_.params.department_id}}):(e.value.formModeProps.id="",e.value.formModeProps.visible=!0)}function J(n){e.value.formMode==="router"?b.open({name:"pagesExampleGeneralJobEdit",params:{id:n.id,department_id:_.params.department_id}}):(e.value.formModeProps.id=n.id,e.value.formModeProps.visible=!0)}function j(n){ie.confirm(`确认删除「${n.title}」吗？`,"确认信息").then(()=>{k.post("pages_example/job/delete",{id:n.id},{baseURL:"/mock/"}).then(()=>{u(),re.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}return(n,l)=>{const h=de,v=i("el-icon"),r=i("el-button"),G=ue,N=i("el-button-group"),A=i("el-space"),H=i("el-input"),y=i("el-form-item"),I=i("el-col"),K=i("el-row"),T=i("el-form"),q=ce,C=i("el-table-column"),O=i("el-table"),Z=i("el-pagination"),F=pe,Q=ae("loading");return m(),oe("div",{class:se({"absolute-container":o(e).tableAutoHeight})},[t(G,{title:`「${o(e).department}」职位管理`,content:"页面数据为 Mock 示例数据，非真实数据。"},{default:a(()=>[t(r,{size:"small",round:"",onClick:l[0]||(l[0]=s=>o(b).close({name:"pagesExampleGeneralDepartmentList"}))},{icon:a(()=>[t(v,null,{default:a(()=>[t(h,{name:"i-ep:arrow-left"})]),_:1})]),default:a(()=>[d(" 返回 ")]),_:1})]),_:1},8,["title"]),t(F,null,{default:a(()=>[t(A,{wrap:""},{default:a(()=>[t(r,{type:"primary",size:"default",onClick:U},{icon:a(()=>[t(v,null,{default:a(()=>[t(h,{name:"i-ep:plus"})]),_:1})]),default:a(()=>[d(" 新增职位 ")]),_:1}),o(e).batch.enable?(m(),c(r,{key:0,size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[d(" 单个批量操作按钮 ")]),_:1},8,["disabled"])):g("",!0),o(e).batch.enable?(m(),c(N,{key:1},{default:a(()=>[t(r,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[d(" 批量操作按钮组1 ")]),_:1},8,["disabled"]),t(r,{size:"default",disabled:!o(e).batch.selectionDataList.length},{default:a(()=>[d(" 批量操作按钮组2 ")]),_:1},8,["disabled"])]),_:1})):g("",!0)]),_:1}),t(q,null,{default:a(()=>[t(T,{model:o(e).search,size:"default","label-width":"100px","label-suffix":"："},{default:a(()=>[t(K,null,{default:a(()=>[t(I,{span:12},{default:a(()=>[t(y,{label:"职位"},{default:a(()=>[t(H,{modelValue:o(e).search.title,"onUpdate:modelValue":l[1]||(l[1]=s=>o(e).search.title=s),placeholder:"请输入职位名称，支持模糊查询",clearable:"",onKeydown:l[2]||(l[2]=ne(s=>f(),["enter"])),onClear:l[3]||(l[3]=s=>f())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(y,null,{default:a(()=>[t(r,{type:"primary",onClick:l[4]||(l[4]=s=>f())},{icon:a(()=>[t(v,null,{default:a(()=>[t(h,{name:"i-ep:search"})]),_:1})]),default:a(()=>[d(" 筛选 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),le((m(),c(O,{ref_key:"tableRef",ref:V,class:"list-table",data:o(e).dataList,border:"",stripe:"","highlight-current-row":"",height:"100%",onSortChange:S,onSelectionChange:l[5]||(l[5]=s=>o(e).batch.selectionDataList=s)},{default:a(()=>[o(e).batch.enable?(m(),c(C,{key:0,type:"selection",width:"40"})):g("",!0),t(C,{prop:"title",label:"职位"}),t(C,{label:"操作",width:"250",align:"center"},{default:a(s=>[t(r,{type:"primary",size:"small",plain:"",onClick:W=>J(s.row)},{default:a(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),t(r,{type:"danger",size:"small",plain:"",onClick:W=>j(s.row)},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,o(e).loading]]),t(Z,{"current-page":o(p).page,total:o(p).total,"page-size":o(p).size,"page-sizes":o(p).sizes,layout:o(p).layout,"hide-on-single-page":!1,class:"pagination",background:"",onSizeChange:R,onCurrentChange:f},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),["dialog","drawer"].includes(o(e).formMode)?(m(),c(_e,{key:0,id:o(e).formModeProps.id,modelValue:o(e).formModeProps.visible,"onUpdate:modelValue":l[6]||(l[6]=s=>o(e).formModeProps.visible=s),"department-id":n.$route.params.department_id,mode:o(e).formMode,onSuccess:u},null,8,["id","modelValue","department-id","mode"])):g("",!0)],2)}}});typeof x=="function"&&x(w);const Me=me(w,[["__scopeId","data-v-053c55a7"]]);export{Me as default};
