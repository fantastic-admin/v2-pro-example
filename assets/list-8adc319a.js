import{d as R,bZ as re,r as ie,B as de,P as S,b5 as ue,aa as w,e as r,a2 as me,o as u,f as ce,g as e,w as o,l as i,i as s,L as p,O as V,k as L,j as B,v as pe,J as _e,b_ as z,E as $,S as fe,_ as ge,R as be,q as he,x as D}from"./index-17000ae8.js";import{_ as ve}from"./index-bc97356d.js";import{_ as we}from"./index.vue_vue_type_script_setup_true_lang-1783ddb4.js";import{u as xe}from"./usePagination-e0d8e4d1.js";import"./index.vue_vue_type_script_setup_true_lang-9b090cd3.js";const Ce=R({name:"PagesExampleManagerList"}),K=R({...Ce,setup(ye){const{pagination:_,getParams:N,onSizeChange:T,onCurrentChange:A,onSortChange:G}=xe(),P=re(),a=ie({loading:!1,tableAutoHeight:!1,formMode:"router",formModeProps:{visible:!1,id:""},search:{account:"",name:"",mobile:"",sex:""},searchMore:!1,batch:{enable:!0,selectionDataList:[]},dataList:[]});de(()=>{m(),a.value.formMode==="router"&&S.on("get-data-list",()=>{m()})}),ue(()=>{a.value.formMode==="router"&&S.off("get-data-list")});function m(){a.value.loading=!0;const n=N();a.value.search.account&&(n.account=a.value.search.account),a.value.search.name&&(n.name=a.value.search.name),a.value.search.mobile&&(n.mobile=a.value.search.mobile),a.value.search.sex!==""&&(n.sex=a.value.search.sex),w.get("pages_example/manager/list",{baseURL:"/mock/",params:n}).then(t=>{a.value.loading=!1,a.value.dataList=t.data.list,a.value.dataList.forEach(x=>{x.statusLoading=!1}),_.value.total=t.data.total})}function H(n){T(n).then(()=>m())}function d(n=1){A(n).then(()=>m())}function O({prop:n,order:t}){G(n,t).then(()=>m())}function j(){a.value.formMode==="router"?P.open({name:"pagesExampleGeneralManagerCreate"}):(a.value.formModeProps.id="",a.value.formModeProps.visible=!0)}function q(n){a.value.formMode==="router"?P.open({name:"pagesExampleGeneralManagerEdit",params:{id:n.id}}):(a.value.formModeProps.id=n.id,a.value.formModeProps.visible=!0)}function I(n){return new Promise(t=>{z.confirm(`确认${n.status?"禁用":"启用"}「${n.account}」吗？`,"确认信息").then(()=>{n.statusLoading=!0,w.post("pages_example/manager/change/status",{id:n.id,status:!n.status},{baseURL:"/mock/"}).then(()=>(n.statusLoading=!1,$.success({message:`模拟${n.status?"禁用":"启用"}成功`,center:!0}),t(!0))).catch(()=>(n.statusLoading=!1,t(!1)))}).catch(()=>t(!1))})}function J(n){z.confirm(`确认将「${n.account}」的密码重置为 “123456” 吗？`,"确认信息").then(()=>{w.post("pages_example/manager/password/reset",{id:n.id},{baseURL:"/mock/"}).then(()=>{$.success({message:"模拟重置成功",center:!0})})}).catch(()=>{})}function Z(n){z.confirm(`确认删除「${n.account}」管理员吗？`,"确认信息").then(()=>{w.post("pages_example/manager/delete",{id:n.id},{baseURL:"/mock/"}).then(()=>{m(),$.success({message:"模拟删除成功",center:!0})})}).catch(()=>{})}function F(n,t){switch(n){case"resetPassword":J(t);break;case"delete":Z(t);break}}return(n,t)=>{const x=fe,C=ge,y=r("el-icon"),f=r("el-button"),Q=r("el-space"),M=r("el-input"),g=r("el-form-item"),b=r("el-col"),U=r("el-row"),h=r("el-radio-button"),W=r("el-radio-group"),X=r("el-form"),Y=ve,c=r("el-table-column"),k=r("el-tag"),ee=r("el-switch"),E=r("el-dropdown-item"),ae=r("el-dropdown-menu"),te=r("el-dropdown"),oe=r("el-table"),ne=r("el-pagination"),le=be,se=me("loading");return u(),ce("div",{class:_e({"absolute-container":s(a).tableAutoHeight})},[e(x,{title:"管理员管理",content:"页面数据为 Mock 示例数据，非真实数据。"}),e(le,null,{default:o(()=>[e(Q,{wrap:""},{default:o(()=>[e(f,{type:"primary",size:"default",onClick:j},{icon:o(()=>[e(y,null,{default:o(()=>[e(C,{name:"i-ep:plus"})]),_:1})]),default:o(()=>[i(" 新增管理员 ")]),_:1}),s(a).batch.enable?(u(),p(f,{key:0,size:"default",disabled:!s(a).batch.selectionDataList.length},{default:o(()=>[i(" 批量操作 ")]),_:1},8,["disabled"])):V("",!0)]),_:1}),e(Y,{"show-more":"",onToggle:t[12]||(t[12]=l=>s(a).searchMore=l)},{default:o(()=>[e(X,{model:s(a).search,size:"default","label-width":"100px","label-suffix":"："},{default:o(()=>[e(U,null,{default:o(()=>[e(b,{md:8},{default:o(()=>[e(g,{label:"帐号"},{default:o(()=>[e(M,{modelValue:s(a).search.account,"onUpdate:modelValue":t[0]||(t[0]=l=>s(a).search.account=l),placeholder:"请输入帐号，支持模糊查询",clearable:"",onKeydown:t[1]||(t[1]=L(l=>d(),["enter"])),onClear:t[2]||(t[2]=l=>d())},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{md:8},{default:o(()=>[e(g,{label:"姓名"},{default:o(()=>[e(M,{modelValue:s(a).search.name,"onUpdate:modelValue":t[3]||(t[3]=l=>s(a).search.name=l),placeholder:"请输入姓名，支持模糊查询",clearable:"",onKeydown:t[4]||(t[4]=L(l=>d(),["enter"])),onClear:t[5]||(t[5]=l=>d())},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{md:8},{default:o(()=>[e(g,{label:"手机号"},{default:o(()=>[e(M,{modelValue:s(a).search.mobile,"onUpdate:modelValue":t[6]||(t[6]=l=>s(a).search.mobile=l),placeholder:"请输入手机号",clearable:"",onKeydown:t[7]||(t[7]=L(l=>d(),["enter"])),onClear:t[8]||(t[8]=l=>d())},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),B(e(U,null,{default:o(()=>[e(b,{md:8},{default:o(()=>[e(g,{label:"性别"},{default:o(()=>[e(W,{modelValue:s(a).search.sex,"onUpdate:modelValue":t[9]||(t[9]=l=>s(a).search.sex=l),onChange:t[10]||(t[10]=l=>d())},{default:o(()=>[e(h,{label:""},{default:o(()=>[i(" 全部 ")]),_:1}),e(h,{label:"1"},{default:o(()=>[i(" 男 ")]),_:1}),e(h,{label:"0"},{default:o(()=>[i(" 女 ")]),_:1}),e(h,{label:"2"},{default:o(()=>[i(" 保密 ")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[pe,s(a).searchMore]]),e(g,null,{default:o(()=>[e(f,{type:"primary",onClick:t[11]||(t[11]=l=>d())},{icon:o(()=>[e(y,null,{default:o(()=>[e(C,{name:"i-ep:search"})]),_:1})]),default:o(()=>[i(" 筛选 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),B((u(),p(oe,{class:"list-table",data:s(a).dataList,border:"",stripe:"","highlight-current-row":"",height:"100%",onSortChange:O,onSelectionChange:t[13]||(t[13]=l=>s(a).batch.selectionDataList=l)},{default:o(()=>[s(a).batch.enable?(u(),p(c,{key:0,type:"selection",align:"center",fixed:""})):V("",!0),e(c,{prop:"account",sortable:"",label:"帐号"}),e(c,{prop:"name",label:"姓名",width:"100",align:"center"}),e(c,{prop:"sex",label:"性别",width:"100",align:"center"},{default:o(l=>[l.row.sex===1?(u(),p(k,{key:0,type:"success",size:"small"},{default:o(()=>[i(" 男 ")]),_:1})):l.row.sex===0?(u(),p(k,{key:1,type:"warning",size:"small"},{default:o(()=>[i(" 女 ")]),_:1})):(u(),p(k,{key:2,type:"info",size:"small"},{default:o(()=>[i(" 保密 ")]),_:1}))]),_:1}),e(c,{prop:"mobile",label:"手机号",width:"150",align:"center"}),e(c,{label:"状态",width:"100",align:"center"},{default:o(l=>[e(ee,{modelValue:l.row.status,"onUpdate:modelValue":v=>l.row.status=v,loading:l.row.statusLoading,"inline-prompt":"","active-text":"启用","inactive-text":"禁用","before-change":()=>I(l.row)},null,8,["modelValue","onUpdate:modelValue","loading","before-change"])]),_:1}),e(c,{label:"操作",width:"200",align:"center",fixed:"right"},{default:o(l=>[e(f,{type:"primary",size:"small",plain:"",onClick:v=>q(l.row)},{default:o(()=>[i(" 编辑 ")]),_:2},1032,["onClick"]),e(te,{onCommand:v=>F(v,l.row)},{dropdown:o(()=>[e(ae,null,{default:o(()=>[e(E,{command:"resetPassword"},{default:o(()=>[i(" 重置密码 ")]),_:1}),e(E,{command:"delete",divided:""},{default:o(()=>[i(" 删除 ")]),_:1})]),_:1})]),default:o(()=>[e(f,{size:"small"},{default:o(()=>[i(" 更多操作 "),e(y,{class:"el-icon--right"},{default:o(()=>[e(C,{name:"i-ep:arrow-down"})]),_:1})]),_:1})]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data"])),[[se,s(a).loading]]),e(ne,{"current-page":s(_).page,total:s(_).total,"page-size":s(_).size,"page-sizes":s(_).sizes,layout:s(_).layout,"hide-on-single-page":!1,class:"pagination",background:"",onCurrentChange:d,onSizeChange:H},null,8,["current-page","total","page-size","page-sizes","layout"])]),_:1}),["dialog","drawer"].includes(s(a).formMode)?(u(),p(we,{key:0,id:s(a).formModeProps.id,modelValue:s(a).formModeProps.visible,"onUpdate:modelValue":t[14]||(t[14]=l=>s(a).formModeProps.visible=l),mode:s(a).formMode,onSuccess:m},null,8,["id","modelValue","mode"])):V("",!0)],2)}}});typeof D=="function"&&D(K);const $e=he(K,[["__scopeId","data-v-59b01680"]]);export{$e as default};
